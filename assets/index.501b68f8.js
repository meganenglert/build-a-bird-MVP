var Om=Object.defineProperty;var Rm=(n,t,e)=>t in n?Om(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var nt=(n,t,e)=>(Rm(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();var Lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Yv={exports:{}};(function(n,t){(function(a,i){n.exports=i()})(Lm,function(){return function(e){var a={};function i(s){if(a[s])return a[s].exports;var h=a[s]={i:s,l:!1,exports:{}};return e[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}return i.m=e,i.c=a,i.d=function(s,h,r){i.o(s,h)||Object.defineProperty(s,h,{enumerable:!0,get:r})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,h){if(h&1&&(s=i(s)),h&8||h&4&&typeof s=="object"&&s&&s.__esModule)return s;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:s}),h&2&&typeof s!="string")for(var o in s)i.d(r,o,function(u){return s[u]}.bind(null,o));return r},i.n=function(s){var h=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(h,"a",h),h},i.o=function(s,h){return Object.prototype.hasOwnProperty.call(s,h)},i.p="",i(i.s=1528)}([function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}function s(l,f,v){var d=v?l[f]:Object.getOwnPropertyDescriptor(l,f);return!v&&d.value&&typeof d.value=="object"&&(d=d.value),d&&i(d)?(typeof d.enumerable>"u"&&(d.enumerable=!0),typeof d.configurable>"u"&&(d.configurable=!0),d):!1}function h(l,f){var v=Object.getOwnPropertyDescriptor(l,f);return v?(v.value&&typeof v.value=="object"&&(v=v.value),v.configurable===!1):!1}function r(l,f,v,d){for(var c in f)if(!!f.hasOwnProperty(c)){var p=s(f,c,v);if(p!==!1){var g=d||l;if(h(g.prototype,c)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+c+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(l.prototype,c,p)}else l.prototype[c]=f[c]}}function o(l,f){if(!!f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++)r(l,f[v].prototype||f[v])}}function u(l){l||(l={});var f,v;if(l.initialize){if(typeof l.initialize!="function")throw new Error("initialize must be a function");f=l.initialize,delete l.initialize}else if(l.Extends){var d=l.Extends;f=function(){d.apply(this,arguments)}}else f=function(){};l.Extends?(f.prototype=Object.create(l.Extends.prototype),f.prototype.constructor=f,v=l.Extends,delete l.Extends):f.prototype.constructor=f;var c=null;return l.Mixins&&(c=l.Mixins,delete l.Mixins),o(f,c),r(f,l,!0,v),f}u.extend=r,u.mixin=o,u.ignoreFinals=!1,e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=typeof s;return!s||o==="number"||o==="string"?r:s.hasOwnProperty(h)&&s[h]!==void 0?s[h]:r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(124),r=new s({initialize:function(u,l){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(l===void 0&&(l=u),this.x=u||0,this.y=l||0)},clone:function(){return new r(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,u){return u===void 0&&(u=o),this.x=o,this.y=u,this},setTo:function(o,u){return this.set(o,u)},setToPolar:function(o,u){return u==null&&(u=1),this.x=Math.cos(o)*u,this.y=Math.sin(o)*u,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,u){return h(this.x,o.x,u)&&h(this.y,o.y,u)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var u=o.x-this.x,l=o.y-this.y;return Math.sqrt(u*u+l*l)},distanceSq:function(o){var u=o.x-this.x,l=o.y-this.y;return u*u+l*l},length:function(){var o=this.x,u=this.y;return Math.sqrt(o*o+u*u)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,u=this.y;return o*o+u*u},normalize:function(){var o=this.x,u=this.y,l=o*o+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=o*l,this.y=u*l),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,u){u===void 0&&(u=0);var l=this.x,f=this.y;return this.x=l+u*(o.x-l),this.y=f+u*(o.y-f),this},transformMat3:function(o){var u=this.x,l=this.y,f=o.val;return this.x=f[0]*u+f[3]*l+f[6],this.y=f[1]*u+f[4]*l+f[7],this},transformMat4:function(o){var u=this.x,l=this.y,f=o.val;return this.x=f[0]*u+f[4]*l+f[12],this.y=f[1]*u+f[5]*l+f[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var u=this.length();return u&&u>o&&this.scale(o/u),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var u=Math.cos(o),l=Math.sin(o);return this.set(u*this.x-l*this.y,l*this.x+u*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(56),r=new s({initialize:function(u,l){u===void 0&&(u=0),l===void 0&&(l=u),this.type=h.POINT,this.x=u,this.y=l},setTo:function(o,u){return o===void 0&&(o=0),u===void 0&&(u=o),this.x=o,this.y=u,this}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(24),r=i(20),o=new s({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(u){return(u.renderCanvas||u.renderWebGL)&&this.displayList.add(u),u.preUpdate&&this.updateList.add(u),u},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(u,l){o.prototype.hasOwnProperty(u)||(o.prototype[u]=l)},o.remove=function(u){o.prototype.hasOwnProperty(u)&&delete o.prototype[u]},h.register("GameObjectFactory",o,"add"),e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(!s||typeof s=="number")return r;if(s.hasOwnProperty(h))return s[h];if(h.indexOf(".")!==-1){for(var o=h.split("."),u=s,l=r,f=0;f<o.length;f++)if(u.hasOwnProperty(o[f]))l=u[o[f]],u=u[o[f]];else{l=r;break}return l}else return r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(typeof s!="object"||s.nodeType||s===s.window)return!1;try{if(s.constructor&&!{}.hasOwnProperty.call(s.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},s={install:function(h){for(var r in i)h[r]=i[r]},register:function(h,r){i[h]=r},destroy:function(){i={}}};e.exports=s},function(e,a,i){var s=Object.prototype.hasOwnProperty,h="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(h=!1));function o(v,d,c){this.fn=v,this.context=d,this.once=c||!1}function u(v,d,c,p,g){if(typeof c!="function")throw new TypeError("The listener must be a function");var x=new o(c,p||v,g),m=h?h+d:d;return v._events[m]?v._events[m].fn?v._events[m]=[v._events[m],x]:v._events[m].push(x):(v._events[m]=x,v._eventsCount++),v}function l(v,d){--v._eventsCount===0?v._events=new r:delete v._events[d]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var d=[],c,p;if(this._eventsCount===0)return d;for(p in c=this._events)s.call(c,p)&&d.push(h?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},f.prototype.listeners=function(d){var c=h?h+d:d,p=this._events[c];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,m=new Array(x);g<x;g++)m[g]=p[g].fn;return m},f.prototype.listenerCount=function(d){var c=h?h+d:d,p=this._events[c];return p?p.fn?1:p.length:0},f.prototype.emit=function(d,c,p,g,x,m){var y=h?h+d:d;if(!this._events[y])return!1;var T=this._events[y],C=arguments.length,S,E;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,c),!0;case 3:return T.fn.call(T.context,c,p),!0;case 4:return T.fn.call(T.context,c,p,g),!0;case 5:return T.fn.call(T.context,c,p,g,x),!0;case 6:return T.fn.call(T.context,c,p,g,x,m),!0}for(E=1,S=new Array(C-1);E<C;E++)S[E-1]=arguments[E];T.fn.apply(T.context,S)}else{var P=T.length,M;for(E=0;E<P;E++)switch(T[E].once&&this.removeListener(d,T[E].fn,void 0,!0),C){case 1:T[E].fn.call(T[E].context);break;case 2:T[E].fn.call(T[E].context,c);break;case 3:T[E].fn.call(T[E].context,c,p);break;case 4:T[E].fn.call(T[E].context,c,p,g);break;default:if(!S)for(M=1,S=new Array(C-1);M<C;M++)S[M-1]=arguments[M];T[E].fn.apply(T[E].context,S)}}return!0},f.prototype.on=function(d,c,p){return u(this,d,c,p,!1)},f.prototype.once=function(d,c,p){return u(this,d,c,p,!0)},f.prototype.removeListener=function(d,c,p,g){var x=h?h+d:d;if(!this._events[x])return this;if(!c)return l(this,x),this;var m=this._events[x];if(m.fn)m.fn===c&&(!g||m.once)&&(!p||m.context===p)&&l(this,x);else{for(var y=0,T=[],C=m.length;y<C;y++)(m[y].fn!==c||g&&!m[y].once||p&&m[y].context!==p)&&T.push(m[y]);T.length?this._events[x]=T.length===1?T[0]:T:l(this,x)}return this},f.prototype.removeAllListeners=function(d){var c;return d?(c=h?h+d:d,this._events[c]&&l(this,c)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=h,f.EventEmitter=f,e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(57),r=i(171),o=i(306),u=i(56),l=i(47),f=i(174),v=new s({initialize:function(c,p,g,x){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),this.type=u.RECTANGLE,this.x=c,this.y=p,this.width=g,this.height=x},contains:function(d,c){return h(this,d,c)},getPoint:function(d,c){return r(this,d,c)},getPoints:function(d,c,p){return o(this,d,c,p)},getRandomPoint:function(d){return f(this,d)},setTo:function(d,c,p,g){return this.x=d,this.y=c,this.width=p,this.height=g,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(d,c){return c===void 0&&(c=d),this.x=d,this.y=c,this},setSize:function(d,c){return c===void 0&&(c=d),this.width=d,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(d){return d===void 0&&(d=new l),d.setTo(this.x,this.y,this.right,this.y),d},getLineB:function(d){return d===void 0&&(d=new l),d.setTo(this.right,this.y,this.right,this.bottom),d},getLineC:function(d){return d===void 0&&(d=new l),d.setTo(this.right,this.bottom,this.x,this.bottom),d},getLineD:function(d){return d===void 0&&(d=new l),d.setTo(this.x,this.bottom,this.x,this.y),d},left:{get:function(){return this.x},set:function(d){d>=this.right?this.width=0:this.width=this.right-d,this.x=d}},right:{get:function(){return this.x+this.width},set:function(d){d<=this.x?this.width=0:this.width=d-this.x}},top:{get:function(){return this.y},set:function(d){d>=this.bottom?this.height=0:this.height=this.bottom-d,this.y=d}},bottom:{get:function(){return this.y+this.height},set:function(d){d<=this.y?this.height=0:this.height=d-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(d){this.x=d-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(d){this.y=d-this.height/2}}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Alpha:i(607),AlphaSingle:i(303),BlendMode:i(304),ComputedSize:i(608),Crop:i(609),Depth:i(305),Flip:i(610),GetBounds:i(611),Mask:i(309),Origin:i(632),PathFollower:i(633),Pipeline:i(167),ScrollFactor:i(312),Size:i(634),Texture:i(635),TextureCrop:i(636),Tint:i(637),ToJSON:i(176),Transform:i(313),TransformMatrix:i(25),Visible:i(314)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(s){for(var h="",r=0;r<s;++r)r>0&&(h+=`
else `),r<s-1&&(h+="if(test == "+r+".0){}");return h}e.exports={getTintFromFloats:function(s,h,r,o){var u=(s*255|0)&255,l=(h*255|0)&255,f=(r*255|0)&255,v=(o*255|0)&255;return(v<<24|u<<16|l<<8|f)>>>0},getTintAppendFloatAlpha:function(s,h){var r=(h*255|0)&255;return(r<<24|s)>>>0},getTintAppendFloatAlphaAndSwap:function(s,h){var r=(s>>16|0)&255,o=(s>>8|0)&255,u=(s|0)&255,l=(h*255|0)&255;return(l<<24|u<<16|o<<8|r)>>>0},getFloatsFromUintRGB:function(s){var h=(s>>16|0)&255,r=(s>>8|0)&255,o=(s|0)&255;return[h/255,r/255,o/255]},checkShaderMax:function(s,h){(!h||h===-1)&&(h=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS));for(var r=s.createShader(s.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var u=o.replace(/%forloop%/gi,i(h));if(s.shaderSource(r,u),s.compileShader(r),!s.getShaderParameter(r,s.COMPILE_STATUS))h=h/2|0;else break}return h},parseFragmentShaderMaxTextures:function(s,h){if(!s)return"";for(var r="",o=0;o<h;o++)o>0&&(r+=`
	else `),o<h-1&&(r+="if (outTexId < "+o+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",r+=`
	}`;return s=s.replace(/%count%/gi,h.toString()),s.replace(/%forloop%/gi,r)}}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(193),h=i(6),r=function(o,u,l){var f=h(o,u,null);if(f===null)return l;if(Array.isArray(f))return s.RND.pick(f);if(typeof f=="object"){if(f.hasOwnProperty("randInt"))return s.RND.integerInRange(f.randInt[0],f.randInt[1]);if(f.hasOwnProperty("randFloat"))return s.RND.realInRange(f.randFloat[0],f.randFloat[1])}else if(typeof f=="function")return f(u);return f};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(176),r=i(101),o=i(9),u=i(75),l=i(20),f=new s({Extends:o,initialize:function(d,c){o.call(this),this.scene=d,this.displayList=null,this.type=c,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),d.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(v,d){return this.data||(this.data=new r(this)),this.data.set(v,d),this},incData:function(v,d){return this.data||(this.data=new r(this)),this.data.inc(v,d),this},toggleData:function(v){return this.data||(this.data=new r(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new r(this)),this.data.get(v)},setInteractive:function(v,d,c){return this.scene.sys.input.enable(this,v,d,c),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(v){return!(f.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,d=this.parentContainer,c=[];d&&(c.unshift(d.getIndex(v)),v=d,d.parentContainer);)d=d.parentContainer;return this.displayList?c.unshift(this.displayList.getIndex(v)):c.unshift(this.scene.sys.displayList.getIndex(v)),c},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),v.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});f.RENDER_MASK=15,e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(24),r=i(20),o=new s({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(u,l){o.prototype.hasOwnProperty(u)||(o.prototype[u]=l)},o.remove=function(u){o.prototype.hasOwnProperty(u)&&delete o.prototype[u]},h.register("GameObjectCreator",o,"make"),e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(7),h=function(){var r,o,u,l,f,v,d=arguments[0]||{},c=1,p=arguments.length,g=!1;for(typeof d=="boolean"&&(g=d,d=arguments[1]||{},c=2),p===c&&(d=this,--c);c<p;c++)if((r=arguments[c])!=null)for(o in r)u=d[o],l=r[o],d!==l&&(g&&l&&(s(l)||(f=Array.isArray(l)))?(f?(f=!1,v=u&&Array.isArray(u)?u:[]):v=u&&s(u)?u:{},d[o]=h(g,v,l)):l!==void 0&&(d[o]=l));return d};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return Math.max(h,Math.min(r,s))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),h=new s,r=new s,o=new s,u={camera:h,sprite:r,calc:o},l=function(f,v,d){var c=h,p=r,g=o;return p.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),c.copyFrom(v.matrix),d?(c.multiplyWithOffset(d,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),p.e=f.x,p.f=f.y):(p.e-=v.scrollX*f.scrollFactorX,p.f-=v.scrollY*f.scrollFactorY),c.multiply(p,g),u};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(656),BOOT:i(657),CREATE:i(658),DESTROY:i(659),PAUSE:i(660),POST_UPDATE:i(661),PRE_RENDER:i(662),PRE_UPDATE:i(663),READY:i(664),REMOVED_FROM_SCENE:i(665),RENDER:i(666),RESUME:i(667),SHUTDOWN:i(668),SLEEP:i(669),START:i(670),TRANSITION_COMPLETE:i(671),TRANSITION_INIT:i(672),TRANSITION_OUT:i(673),TRANSITION_START:i(674),TRANSITION_WAKE:i(675),UPDATE:i(676),WAKE:i(677)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BLUR:i(612),BOOT:i(613),CONTEXT_LOST:i(614),CONTEXT_RESTORED:i(615),DESTROY:i(616),FOCUS:i(617),HIDDEN:i(618),PAUSE:i(619),POST_RENDER:i(620),POST_STEP:i(621),PRE_RENDER:i(622),PRE_STEP:i(623),READY:i(624),RESUME:i(625),STEP:i(626),VISIBLE:i(627)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(95),o=i(2),u=i(155),l=i(240),f=i(517),v=i(156),d=new s({initialize:function(p,g){this.loader=p,this.cache=o(g,"cache",!1),this.type=o(g,"type",!1),this.key=o(g,"key",!1);var x=this.key;if(p.prefix&&p.prefix!==""&&(this.key=p.prefix+x),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var m=o(g,"url");m===void 0?m=p.path+x+"."+o(g,"extension",""):typeof m=="string"&&!m.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(m=p.path+m),this.url=m,this.src="",this.xhrSettings=v(o(g,"responseType",void 0)),o(g,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,o(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?h.FILE_POPULATED:h.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(g,"config",{}),this.multiFile,this.linkFile},setLink:function(c){this.linkFile=c,c.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===h.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=u(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=f(this,this.loader.xhr))},onLoad:function(c,p){var g=c.responseURL&&(c.responseURL.indexOf("file://")===0||c.responseURL.indexOf("capacitor://")===0),x=g&&p.target.status===0,m=!(p.target&&p.target.status!==200)||x;c.readyState===4&&c.status>=400&&c.status<=599&&(m=!1),this.state=h.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(c){c.lengthComputable&&(this.bytesLoaded=c.loaded,this.bytesTotal=c.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=h.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=h.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=h.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(c){c===void 0&&(c=this.data);var p=this.key,g=this.type;this.loader.emit(r.FILE_COMPLETE,p,g,c),this.loader.emit(r.FILE_KEY_COMPLETE+g+"-"+p,p,g,c),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});d.createObjectURL=function(c,p,g){if(typeof URL=="function")c.src=URL.createObjectURL(p);else{var x=new FileReader;x.onload=function(){c.removeAttribute("crossOrigin"),c.src="data:"+(p.type||g)+";base64,"+x.result.split(",")[1]},x.onerror=c.onerror,x.readAsDataURL(p)}},d.revokeObjectURL=function(c){typeof URL=="function"&&URL.revokeObjectURL(c.src)},e.exports=d},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={},s={},h={};h.register=function(r,o,u,l){l===void 0&&(l=!1),i[r]={plugin:o,mapping:u,custom:l}},h.registerCustom=function(r,o,u,l){s[r]={plugin:o,mapping:u,data:l}},h.hasCore=function(r){return i.hasOwnProperty(r)},h.hasCustom=function(r){return s.hasOwnProperty(r)},h.getCore=function(r){return i[r]},h.getCustom=function(r){return s[r]},h.getCustomClass=function(r){return s.hasOwnProperty(r)?s[r].plugin:null},h.remove=function(r){i.hasOwnProperty(r)&&delete i[r]},h.removeCustom=function(r){s.hasOwnProperty(r)&&delete s[r]},h.destroyCorePlugins=function(){for(var r in i)i.hasOwnProperty(r)&&delete i[r]},h.destroyCustomPlugins=function(){for(var r in s)s.hasOwnProperty(r)&&delete s[r]},e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(14),r=i(3),o=new s({initialize:function(l,f,v,d,c,p){l===void 0&&(l=1),f===void 0&&(f=0),v===void 0&&(v=0),d===void 0&&(d=1),c===void 0&&(c=0),p===void 0&&(p=0),this.matrix=new Float32Array([l,f,v,d,c,p,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(u){this.matrix[0]=u}},b:{get:function(){return this.matrix[1]},set:function(u){this.matrix[1]=u}},c:{get:function(){return this.matrix[2]},set:function(u){this.matrix[2]=u}},d:{get:function(){return this.matrix[3]},set:function(u){this.matrix[3]=u}},e:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},f:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},tx:{get:function(){return this.matrix[4]},set:function(u){this.matrix[4]=u}},ty:{get:function(){return this.matrix[5]},set:function(u){this.matrix[5]=u}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var u=this.matrix,l=u[0],f=u[1],v=u[2],d=u[3];return l||f?f>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):v||d?h.TAU-(d>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var u=this.matrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,this},translate:function(u,l){var f=this.matrix;return f[4]=f[0]*u+f[2]*l+f[4],f[5]=f[1]*u+f[3]*l+f[5],this},scale:function(u,l){var f=this.matrix;return f[0]*=u,f[1]*=u,f[2]*=l,f[3]*=l,this},rotate:function(u){var l=Math.sin(u),f=Math.cos(u),v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3];return v[0]=d*f+p*l,v[1]=c*f+g*l,v[2]=d*-l+p*f,v[3]=c*-l+g*f,this},multiply:function(u,l){var f=this.matrix,v=u.matrix,d=f[0],c=f[1],p=f[2],g=f[3],x=f[4],m=f[5],y=v[0],T=v[1],C=v[2],S=v[3],E=v[4],P=v[5],M=l===void 0?this:l;return M.a=y*d+T*p,M.b=y*c+T*g,M.c=C*d+S*p,M.d=C*c+S*g,M.e=E*d+P*p+x,M.f=E*c+P*g+m,M},multiplyWithOffset:function(u,l,f){var v=this.matrix,d=u.matrix,c=v[0],p=v[1],g=v[2],x=v[3],m=v[4],y=v[5],T=l*c+f*g+m,C=l*p+f*x+y,S=d[0],E=d[1],P=d[2],M=d[3],O=d[4],A=d[5];return v[0]=S*c+E*g,v[1]=S*p+E*x,v[2]=P*c+M*g,v[3]=P*p+M*x,v[4]=O*c+A*g+T,v[5]=O*p+A*x+C,this},transform:function(u,l,f,v,d,c){var p=this.matrix,g=p[0],x=p[1],m=p[2],y=p[3],T=p[4],C=p[5];return p[0]=u*g+l*m,p[1]=u*x+l*y,p[2]=f*g+v*m,p[3]=f*x+v*y,p[4]=d*g+c*m+T,p[5]=d*x+c*y+C,this},transformPoint:function(u,l,f){f===void 0&&(f={x:0,y:0});var v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3],x=v[4],m=v[5];return f.x=u*d+l*p+x,f.y=u*c+l*g+m,f},invert:function(){var u=this.matrix,l=u[0],f=u[1],v=u[2],d=u[3],c=u[4],p=u[5],g=l*d-f*v;return u[0]=d/g,u[1]=-f/g,u[2]=-v/g,u[3]=l/g,u[4]=(v*p-d*c)/g,u[5]=-(l*p-f*c)/g,this},copyFrom:function(u){var l=this.matrix;return l[0]=u.a,l[1]=u.b,l[2]=u.c,l[3]=u.d,l[4]=u.e,l[5]=u.f,this},copyFromArray:function(u){var l=this.matrix;return l[0]=u[0],l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],this},copyToContext:function(u){var l=this.matrix;return u.transform(l[0],l[1],l[2],l[3],l[4],l[5]),u},setToContext:function(u){var l=this.matrix;return u.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]),u},copyToArray:function(u){var l=this.matrix;return u===void 0?u=[l[0],l[1],l[2],l[3],l[4],l[5]]:(u[0]=l[0],u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5]),u},setTransform:function(u,l,f,v,d,c){var p=this.matrix;return p[0]=u,p[1]=l,p[2]=f,p[3]=v,p[4]=d,p[5]=c,this},decomposeMatrix:function(){var u=this.decomposedMatrix,l=this.matrix,f=l[0],v=l[1],d=l[2],c=l[3],p=f*c-v*d;if(u.translateX=l[4],u.translateY=l[5],f||v){var g=Math.sqrt(f*f+v*v);u.rotation=v>0?Math.acos(f/g):-Math.acos(f/g),u.scaleX=g,u.scaleY=p/g}else if(d||c){var x=Math.sqrt(d*d+c*c);u.rotation=Math.PI*.5-(c>0?Math.acos(-d/x):-Math.acos(d/x)),u.scaleX=p/x,u.scaleY=x}else u.rotation=0,u.scaleX=0,u.scaleY=0;return u},applyITRS:function(u,l,f,v,d){var c=this.matrix,p=Math.sin(f),g=Math.cos(f);return c[4]=u,c[5]=l,c[0]=g*v,c[1]=p*v,c[2]=-p*d,c[3]=g*d,this},applyInverse:function(u,l,f){f===void 0&&(f=new r);var v=this.matrix,d=v[0],c=v[1],p=v[2],g=v[3],x=v[4],m=v[5],y=1/(d*g+p*-c);return f.x=g*y*u+-p*y*l+(m*p-x*g)*y,f.y=d*y*l+-c*y*u+(-m*d+x*c)*y,f},getX:function(u,l){return u*this.a+l*this.c+this.e},getY:function(u,l){return u*this.b+l*this.d+this.f},getXRound:function(u,l,f){var v=this.getX(u,l);return f&&(v=Math.round(v)),v},getYRound:function(u,l,f){var v=this.getY(u,l);return f&&(v=Math.round(v)),v},getCSSMatrix:function(){var u=this.matrix;return"matrix("+u[0]+","+u[1]+","+u[2]+","+u[3]+","+u[4]+","+u[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=function(r,o,u,l,f,v){r===void 0&&(r=0),o===void 0&&(o=0),u===void 0&&(u=v.width),l===void 0&&(l=v.height),f||(f={});var d=s(f,"isNotEmpty",!1),c=s(f,"isColliding",!1),p=s(f,"hasInterestingFace",!1);r<0&&(u+=r,r=0),o<0&&(l+=o,o=0),r+u>v.width&&(u=Math.max(v.width-r,0)),o+l>v.height&&(l=Math.max(v.height-o,0));for(var g=[],x=o;x<o+l;x++)for(var m=r;m<r+u;m++){var y=v.data[x][m];if(y!==null){if(d&&y.index===-1||c&&!y.collides||p&&!y.hasInterestingFace)continue;g.push(y)}}return g};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l){o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=1);var f,v=0,d=s.length;if(l===1)for(f=u;f<d;f++)s[f][h]=r+v*o,v++;else for(f=u;f>=0;f--)s[f][h]=r+v*o,v++;return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h=i(13),r=function(o,u,l){u.x=h(l,"x",0),u.y=h(l,"y",0),u.depth=h(l,"depth",0),u.flipX=h(l,"flipX",!1),u.flipY=h(l,"flipY",!1);var f=h(l,"scale",null);typeof f=="number"?u.setScale(f):f!==null&&(u.scaleX=h(f,"x",1),u.scaleY=h(f,"y",1));var v=h(l,"scrollFactor",null);typeof v=="number"?u.setScrollFactor(v):v!==null&&(u.scrollFactorX=h(v,"x",1),u.scrollFactorY=h(v,"y",1)),u.rotation=h(l,"rotation",0);var d=h(l,"angle",null);d!==null&&(u.angle=d),u.alpha=h(l,"alpha",1);var c=h(l,"origin",null);if(typeof c=="number")u.setOrigin(c);else if(c!==null){var p=h(c,"x",.5),g=h(c,"y",.5);u.setOrigin(p,g)}u.blendMode=h(l,"blendMode",s.NORMAL),u.visible=h(l,"visible",!0);var x=h(l,"add",!0);return x&&o.sys.displayList.add(u),u.preUpdate&&o.sys.updateList.add(u),u};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=function(r,o,u,l,f){var v=l.alpha*u.alpha;if(v<=0)return!1;var d=s(u,l,f).calc;return o.globalCompositeOperation=r.blendModes[u.blendMode],o.globalAlpha=v,o.save(),d.setToContext(o),o.imageSmoothingEnabled=!(!r.antialias||u.frame&&u.frame.source.scaleMode),!0};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(33),h=i(192),r=[],o=!1,u=function(){var l=function(y,T,C,S,E){T===void 0&&(T=1),C===void 0&&(C=1),S===void 0&&(S=s.CANVAS),E===void 0&&(E=!1);var P,M=d(S);return M===null?(M={parent:y,canvas:document.createElement("canvas"),type:S},S===s.CANVAS&&r.push(M),P=M.canvas):(M.parent=y,P=M.canvas),E&&(M.parent=P),P.width=T,P.height=C,o&&S===s.CANVAS&&h.disable(P.getContext("2d")),P},f=function(y,T,C){return l(y,T,C,s.CANVAS)},v=function(y,T,C){return l(y,T,C,s.WEBGL)},d=function(y){if(y===void 0&&(y=s.CANVAS),y===s.WEBGL)return null;for(var T=0;T<r.length;T++){var C=r[T];if(!C.parent&&C.type===y)return C}return null},c=function(y){var T=y instanceof HTMLCanvasElement;r.forEach(function(C){(T&&C.canvas===y||!T&&C.parent===y)&&(C.parent=null,C.canvas.width=1,C.canvas.height=1)})},p=function(){var y=0;return r.forEach(function(T){T.parent&&y++}),y},g=function(){return r.length-p()},x=function(){o=!0},m=function(){o=!1};return{create2D:f,create:l,createWebGL:v,disableSmoothing:x,enableSmoothing:m,first:d,free:g,pool:r,remove:c,total:p}};e.exports=u()},function(e,a){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i.extend=function(h,r){var o,u;typeof r=="boolean"?(o=2,u=r):(o=1,u=!0);for(var l=o;l<arguments.length;l++){var f=arguments[l];if(f)for(var v in f)u&&f[v]&&f[v].constructor===Object&&(!h[v]||h[v].constructor===Object)?(h[v]=h[v]||{},i.extend(h[v],u,f[v])):h[v]=f[v]}return h},i.clone=function(h,r){return i.extend({},r,h)},i.keys=function(h){if(Object.keys)return Object.keys(h);var r=[];for(var o in h)r.push(o);return r},i.values=function(h){var r=[];if(Object.keys){for(var o=Object.keys(h),u=0;u<o.length;u++)r.push(h[o[u]]);return r}for(var l in h)r.push(h[l]);return r},i.get=function(h,r,o,u){r=r.split(".").slice(o,u);for(var l=0;l<r.length;l+=1)h=h[r[l]];return h},i.set=function(h,r,o,u,l){var f=r.split(".").slice(u,l);return i.get(h,r,0,-1)[f[f.length-1]]=o,o},i.shuffle=function(h){for(var r=h.length-1;r>0;r--){var o=Math.floor(i.random()*(r+1)),u=h[r];h[r]=h[o],h[o]=u}return h},i.choose=function(h){return h[Math.floor(i.random()*h.length)]},i.isElement=function(h){return typeof HTMLElement<"u"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},i.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},i.isFunction=function(h){return typeof h=="function"},i.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},i.isString=function(h){return Object.prototype.toString.call(h)==="[object String]"},i.clamp=function(h,r,o){return h<r?r:h>o?o:h},i.sign=function(h){return h<0?-1:1},i.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-i._nowStartTime},i.random=function(h,r){return h=typeof h<"u"?h:0,r=typeof r<"u"?r:1,h+s()*(r-h)};var s=function(){return i._seed=(i._seed*9301+49297)%233280,i._seed/233280};i.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(h,r){if(h.indexOf)return h.indexOf(r);for(var o=0;o<h.length;o++)if(h[o]===r)return o;return-1},i.map=function(h,r){if(h.map)return h.map(r);for(var o=[],u=0;u<h.length;u+=1)o.push(r(h[u]));return o},i.topologicalSort=function(h){var r=[],o=[],u=[];for(var l in h)!o[l]&&!u[l]&&i._topologicalSort(l,o,u,h,r);return r},i._topologicalSort=function(h,r,o,u,l){var f=u[h]||[];o[h]=!0;for(var v=0;v<f.length;v+=1){var d=f[v];o[d]||r[d]||i._topologicalSort(d,r,o,u,l)}o[h]=!1,r[h]=!0,l.push(h)},i.chain=function(){for(var h=[],r=0;r<arguments.length;r+=1){var o=arguments[r];o._chained?h.push.apply(h,o._chained):h.push(o)}var u=function(){for(var l,f=new Array(arguments.length),v=0,d=arguments.length;v<d;v++)f[v]=arguments[v];for(v=0;v<h.length;v+=1){var c=h[v].apply(l,f);typeof c<"u"&&(l=c)}return l};return u._chained=h,u},i.chainPathBefore=function(h,r,o){return i.set(h,r,i.chain(o,i.get(h,r)))},i.chainPathAfter=function(h,r,o){return i.set(h,r,i.chain(i.get(h,r),o))}}()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={VERSION:"3.55.2",BlendModes:i(35),ScaleModes:i(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(47),u=new s({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible],initialize:function(f,v,d){v===void 0&&(v="Shape"),r.call(this,f,v),this.geom=d,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(l,f){return f===void 0&&(f=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=f,this.isFilled=!0),this},setStrokeStyle:function(l,f,v){return v===void 0&&(v=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=f,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},setSize:function(l,f){return this.width=l,this.height=f,this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}}});e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=function(r){return r*s.DEG_TO_RAD};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DESTROY:i(743),FADE_IN_COMPLETE:i(744),FADE_IN_START:i(745),FADE_OUT_COMPLETE:i(746),FADE_OUT_START:i(747),FLASH_COMPLETE:i(748),FLASH_START:i(749),FOLLOW_UPDATE:i(750),PAN_COMPLETE:i(751),PAN_START:i(752),POST_RENDER:i(753),PRE_RENDER:i(754),ROTATE_COMPLETE:i(755),ROTATE_START:i(756),SHAKE_COMPLETE:i(757),SHAKE_START:i(758),ZOOM_COMPLETE:i(759),ZOOM_START:i(760)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(103),r=i(328),o=i(188),u=i(329),l=new s({initialize:function(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,d,c,p)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(f,v,d,c,p){return c===void 0&&(c=255),p===void 0&&(p=!0),this._locked=!0,this.red=f,this.green=v,this.blue=d,this.alpha=c,this._locked=!1,this.update(p)},setGLTo:function(f,v,d,c){return c===void 0&&(c=1),this._locked=!0,this.redGL=f,this.greenGL=v,this.blueGL=d,this.alphaGL=c,this._locked=!1,this.update(!0)},setFromRGB:function(f){return this._locked=!0,this.red=f.r,this.green=f.g,this.blue=f.b,f.hasOwnProperty("a")&&(this.alpha=f.a),this._locked=!1,this.update(!0)},setFromHSV:function(f,v,d){return o(f,v,d,this)},update:function(f){if(f===void 0&&(f=!1),this._locked)return this;var v=this.r,d=this.g,c=this.b,p=this.a;return this._color=h(v,d,c),this._color32=r(v,d,c,p),this._rgba="rgba("+v+","+d+","+c+","+p/255+")",f&&u(v,d,c,this),this},updateHSV:function(){var f=this.r,v=this.g,d=this.b;return u(f,v,d,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(f){return this.setTo(f,f,f)},random:function(f,v){f===void 0&&(f=0),v===void 0&&(v=255);var d=Math.floor(f+Math.random()*(v-f)),c=Math.floor(f+Math.random()*(v-f)),p=Math.floor(f+Math.random()*(v-f));return this.setTo(d,c,p)},randomGray:function(f,v){f===void 0&&(f=0),v===void 0&&(v=255);var d=Math.floor(f+Math.random()*(v-f));return this.setTo(d,d,d)},saturate:function(f){return this.s+=f/100,this},desaturate:function(f){return this.s-=f/100,this},lighten:function(f){return this.v+=f/100,this},darken:function(f){return this.v-=f/100,this},brighten:function(f){var v=this.r,d=this.g,c=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(f/100)))),d=Math.max(0,Math.min(255,d-Math.round(255*-(f/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(f/100)))),this.setTo(v,d,c)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(f){this.gl[0]=Math.min(Math.abs(f),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(f){this.gl[1]=Math.min(Math.abs(f),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(f){this.gl[2]=Math.min(Math.abs(f),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(f){this.gl[3]=Math.min(Math.abs(f),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(f){f=Math.floor(Math.abs(f)),this.r=Math.min(f,255),this.gl[0]=f/255,this.update(!0)}},green:{get:function(){return this.g},set:function(f){f=Math.floor(Math.abs(f)),this.g=Math.min(f,255),this.gl[1]=f/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(f){f=Math.floor(Math.abs(f)),this.b=Math.min(f,255),this.gl[2]=f/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(f){f=Math.floor(Math.abs(f)),this.a=Math.min(f,255),this.gl[3]=f/255,this.update()}},h:{get:function(){return this._h},set:function(f){this._h=f,o(f,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(f){this._s=f,o(this._h,f,this._v,this)}},v:{get:function(){return this._v},set:function(f){this._v=f,o(this._h,this._s,f,this)}}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=u||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clone:function(){return new h(this.x,this.y,this.z)},addVectors:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this},crossVectors:function(r,o){var u=r.x,l=r.y,f=r.z,v=o.x,d=o.y,c=o.z;return this.x=l*c-f*d,this.y=f*v-u*c,this.z=u*d-l*v,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this},set:function(r,o,u){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=o||0,this.z=u||0),this},setFromMatrixPosition:function(r){return this.fromArray(r.val,12)},setFromMatrixColumn:function(r,o){return this.fromArray(r.val,o*4)},fromArray:function(r,o){return o===void 0&&(o=0),this.x=r[o],this.y=r[o+1],this.z=r[o+2],this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addScale:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(r){var o=r.x-this.x,u=r.y-this.y,l=r.z-this.z||0;return Math.sqrt(o*o+u*u+l*l)},distanceSq:function(r){var o=r.x-this.x,u=r.y-this.y,l=r.z-this.z||0;return o*o+u*u+l*l},length:function(){var r=this.x,o=this.y,u=this.z;return Math.sqrt(r*r+o*o+u*u)},lengthSq:function(){var r=this.x,o=this.y,u=this.z;return r*r+o*o+u*u},normalize:function(){var r=this.x,o=this.y,u=this.z,l=r*r+o*o+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=r*l,this.y=o*l,this.z=u*l),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},cross:function(r){var o=this.x,u=this.y,l=this.z,f=r.x,v=r.y,d=r.z;return this.x=u*d-l*v,this.y=l*f-o*d,this.z=o*v-u*f,this},lerp:function(r,o){o===void 0&&(o=0);var u=this.x,l=this.y,f=this.z;return this.x=u+o*(r.x-u),this.y=l+o*(r.y-l),this.z=f+o*(r.z-f),this},applyMatrix3:function(r){var o=this.x,u=this.y,l=this.z,f=r.val;return this.x=f[0]*o+f[3]*u+f[6]*l,this.y=f[1]*o+f[4]*u+f[7]*l,this.z=f[2]*o+f[5]*u+f[8]*l,this},applyMatrix4:function(r){var o=this.x,u=this.y,l=this.z,f=r.val,v=1/(f[3]*o+f[7]*u+f[11]*l+f[15]);return this.x=(f[0]*o+f[4]*u+f[8]*l+f[12])*v,this.y=(f[1]*o+f[5]*u+f[9]*l+f[13])*v,this.z=(f[2]*o+f[6]*u+f[10]*l+f[14])*v,this},transformMat3:function(r){var o=this.x,u=this.y,l=this.z,f=r.val;return this.x=o*f[0]+u*f[3]+l*f[6],this.y=o*f[1]+u*f[4]+l*f[7],this.z=o*f[2]+u*f[5]+l*f[8],this},transformMat4:function(r){var o=this.x,u=this.y,l=this.z,f=r.val;return this.x=f[0]*o+f[4]*u+f[8]*l+f[12],this.y=f[1]*o+f[5]*u+f[9]*l+f[13],this.z=f[2]*o+f[6]*u+f[10]*l+f[14],this},transformCoordinates:function(r){var o=this.x,u=this.y,l=this.z,f=r.val,v=o*f[0]+u*f[4]+l*f[8]+f[12],d=o*f[1]+u*f[5]+l*f[9]+f[13],c=o*f[2]+u*f[6]+l*f[10]+f[14],p=o*f[3]+u*f[7]+l*f[11]+f[15];return this.x=v/p,this.y=d/p,this.z=c/p,this},transformQuat:function(r){var o=this.x,u=this.y,l=this.z,f=r.x,v=r.y,d=r.z,c=r.w,p=c*o+v*l-d*u,g=c*u+d*o-f*l,x=c*l+f*u-v*o,m=-f*o-v*u-d*l;return this.x=p*c+m*-f+g*-d-x*-v,this.y=g*c+m*-v+x*-f-p*-d,this.z=x*c+m*-d+p*-v-g*-f,this},project:function(r){var o=this.x,u=this.y,l=this.z,f=r.val,v=f[0],d=f[1],c=f[2],p=f[3],g=f[4],x=f[5],m=f[6],y=f[7],T=f[8],C=f[9],S=f[10],E=f[11],P=f[12],M=f[13],O=f[14],A=f[15],R=1/(o*p+u*y+l*E+A);return this.x=(o*v+u*g+l*T+P)*R,this.y=(o*d+u*x+l*C+M)*R,this.z=(o*c+u*m+l*S+O)*R,this},projectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unprojectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unproject:function(r,o){var u=r.x,l=r.y,f=r.z,v=r.w,d=this.x-u,c=v-this.y-1-l,p=this.z;return this.x=2*d/f-1,this.y=2*c/v-1,this.z=2*p-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});h.ZERO=new h,h.RIGHT=new h(1,0,0),h.LEFT=new h(-1,0,0),h.UP=new h(0,-1,0),h.DOWN=new h(0,1,0),h.FORWARD=new h(0,0,1),h.BACK=new h(0,0,-1),h.ONE=new h(1,1,1),e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,a,i){var s={};e.exports=s;var h=i(64),r=i(83),o=i(165),u=i(32),l=i(84),f=i(271);(function(){s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s.create=function(d){var c={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!d.hasOwnProperty("position")&&d.hasOwnProperty("vertices")?d.position=h.centre(d.vertices):d.hasOwnProperty("vertices")||(c.vertices=h.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var p=u.extend(c,d);return v(p,d),p.setOnCollideWith=function(g,x){return x?this.onCollideWith[g.id]=x:delete this.onCollideWith[g.id],this},p},s.nextGroup=function(d){return d?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var v=function(d,c){c=c||{},s.set(d,{bounds:d.bounds||l.create(d.vertices),positionPrev:d.positionPrev||r.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d});var p=d.bounds;if(h.rotate(d.vertices,d.angle,d.position),f.rotate(d.axes,d.angle),l.update(p,d.vertices,d.velocity),s.set(d,{axes:c.axes||d.axes,area:c.area||d.area,mass:c.mass||d.mass,inertia:c.inertia||d.inertia}),d.parts.length===1){var g=d.centerOfMass,x=d.centerOffset,m=p.max.x-p.min.x,y=p.max.y-p.min.y;g.x=-(p.min.x-d.position.x)/m,g.y=-(p.min.y-d.position.y)/y,x.x=m*g.x,x.y=y*g.y}};s.set=function(d,c,p){var g;typeof c=="string"&&(g=c,c={},c[g]=p);for(g in c)if(!!Object.prototype.hasOwnProperty.call(c,g))switch(p=c[g],g){case"isStatic":s.setStatic(d,p);break;case"isSleeping":o.set(d,p);break;case"mass":s.setMass(d,p);break;case"density":s.setDensity(d,p);break;case"inertia":s.setInertia(d,p);break;case"vertices":s.setVertices(d,p);break;case"position":s.setPosition(d,p);break;case"angle":s.setAngle(d,p);break;case"velocity":s.setVelocity(d,p);break;case"angularVelocity":s.setAngularVelocity(d,p);break;case"parts":s.setParts(d,p);break;case"centre":s.setCentre(d,p);break;default:d[g]=p}},s.setStatic=function(d,c){for(var p=0;p<d.parts.length;p++){var g=d.parts[p];g.isStatic=c,c?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},s.setMass=function(d,c){var p=d.inertia/(d.mass/6);d.inertia=p*(c/6),d.inverseInertia=1/d.inertia,d.mass=c,d.inverseMass=1/d.mass,d.density=d.mass/d.area},s.setDensity=function(d,c){s.setMass(d,c*d.area),d.density=c},s.setInertia=function(d,c){d.inertia=c,d.inverseInertia=1/d.inertia},s.setVertices=function(d,c){c[0].body===d?d.vertices=c:d.vertices=h.create(c,d),d.axes=f.fromVertices(d.vertices),d.area=h.area(d.vertices),s.setMass(d,d.density*d.area);var p=h.centre(d.vertices);h.translate(d.vertices,p,-1),s.setInertia(d,s._inertiaScale*h.inertia(d.vertices,d.mass)),h.translate(d.vertices,d.position),l.update(d.bounds,d.vertices,d.velocity)},s.setParts=function(d,c,p){var g;for(c=c.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,g=0;g<c.length;g++){var x=c[g];x!==d&&(x.parent=d,d.parts.push(x))}if(d.parts.length!==1){if(p=typeof p<"u"?p:!0,p){var m=[];for(g=0;g<c.length;g++)m=m.concat(c[g].vertices);h.clockwiseSort(m);var y=h.hull(m),T=h.centre(y);s.setVertices(d,y),h.translate(d.vertices,T)}var C=s._totalProperties(d),S=C.centre.x,E=C.centre.y,P=d.bounds,M=d.centerOfMass,O=d.centerOffset;l.update(P,d.vertices,d.velocity),M.x=-(P.min.x-S)/(P.max.x-P.min.x),M.y=-(P.min.y-E)/(P.max.y-P.min.y),O.x=S,O.y=E,d.area=C.area,d.parent=d,d.position.x=S,d.position.y=E,d.positionPrev.x=S,d.positionPrev.y=E,s.setMass(d,C.mass),s.setInertia(d,C.inertia),s.setPosition(d,C.centre)}},s.setCentre=function(d,c,p){p?(d.positionPrev.x+=c.x,d.positionPrev.y+=c.y,d.position.x+=c.x,d.position.y+=c.y):(d.positionPrev.x=c.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=c.y-(d.position.y-d.positionPrev.y),d.position.x=c.x,d.position.y=c.y)},s.setPosition=function(d,c){var p=r.sub(c,d.position);d.positionPrev.x+=p.x,d.positionPrev.y+=p.y;for(var g=0;g<d.parts.length;g++){var x=d.parts[g];x.position.x+=p.x,x.position.y+=p.y,h.translate(x.vertices,p),l.update(x.bounds,x.vertices,d.velocity)}},s.setAngle=function(d,c){var p=c-d.angle;d.anglePrev+=p;for(var g=0;g<d.parts.length;g++){var x=d.parts[g];x.angle+=p,h.rotate(x.vertices,p,d.position),f.rotate(x.axes,p),l.update(x.bounds,x.vertices,d.velocity),g>0&&r.rotateAbout(x.position,p,d.position,x.position)}},s.setVelocity=function(d,c){d.positionPrev.x=d.position.x-c.x,d.positionPrev.y=d.position.y-c.y,d.velocity.x=c.x,d.velocity.y=c.y,d.speed=r.magnitude(d.velocity)},s.setAngularVelocity=function(d,c){d.anglePrev=d.angle-c,d.angularVelocity=c,d.angularSpeed=Math.abs(d.angularVelocity)},s.translate=function(d,c){s.setPosition(d,r.add(d.position,c))},s.rotate=function(d,c,p){if(!p)s.setAngle(d,d.angle+c);else{var g=Math.cos(c),x=Math.sin(c),m=d.position.x-p.x,y=d.position.y-p.y;s.setPosition(d,{x:p.x+(m*g-y*x),y:p.y+(m*x+y*g)}),s.setAngle(d,d.angle+c)}},s.scale=function(d,c,p,g){var x=0,m=0;g=g||d.position;for(var y=0;y<d.parts.length;y++){var T=d.parts[y];T.scale.x=c,T.scale.y=p,h.scale(T.vertices,c,p,g),T.axes=f.fromVertices(T.vertices),T.area=h.area(T.vertices),s.setMass(T,d.density*T.area),h.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),s.setInertia(T,s._inertiaScale*h.inertia(T.vertices,T.mass)),h.translate(T.vertices,{x:T.position.x,y:T.position.y}),y>0&&(x+=T.area,m+=T.inertia),T.position.x=g.x+(T.position.x-g.x)*c,T.position.y=g.y+(T.position.y-g.y)*p,l.update(T.bounds,T.vertices,d.velocity)}d.parts.length>1&&(d.area=x,d.isStatic||(s.setMass(d,d.density*x),s.setInertia(d,m))),d.circleRadius&&(c===p?d.circleRadius*=c:d.circleRadius=null)},s.update=function(d,c,p,g){var x=Math.pow(c*p*d.timeScale,2),m=1-d.frictionAir*p*d.timeScale,y=d.position.x-d.positionPrev.x,T=d.position.y-d.positionPrev.y;d.velocity.x=y*m*g+d.force.x/d.mass*x,d.velocity.y=T*m*g+d.force.y/d.mass*x,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.angularVelocity=(d.angle-d.anglePrev)*m*g+d.torque/d.inertia*x,d.anglePrev=d.angle,d.angle+=d.angularVelocity,d.speed=r.magnitude(d.velocity),d.angularSpeed=Math.abs(d.angularVelocity);for(var C=0;C<d.parts.length;C++){var S=d.parts[C];h.translate(S.vertices,d.velocity),C>0&&(S.position.x+=d.velocity.x,S.position.y+=d.velocity.y),d.angularVelocity!==0&&(h.rotate(S.vertices,d.angularVelocity,d.position),f.rotate(S.axes,d.angularVelocity),C>0&&r.rotateAbout(S.position,d.angularVelocity,d.position,S.position)),l.update(S.bounds,S.vertices,d.velocity)}},s.applyForce=function(d,c,p){d.force.x+=p.x,d.force.y+=p.y;var g={x:c.x-d.position.x,y:c.y-d.position.y};d.torque+=g.x*p.y-g.y*p.x},s._totalProperties=function(d){for(var c={mass:0,area:0,inertia:0,centre:{x:0,y:0}},p=d.parts.length===1?0:1;p<d.parts.length;p++){var g=d.parts[p],x=g.mass!==1/0?g.mass:1;c.mass+=x,c.area+=g.area,c.inertia+=g.inertia,c.centre=r.add(c.centre,r.mult(g.position,x))}return c.centre=r.div(c.centre,c.mass),c}})()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.y+s.height-s.height*s.originY};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x-s.width*s.originX};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x+s.width-s.width*s.originX};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.y-s.height*s.originY};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l){o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=1);var f,v=0,d=s.length;if(l===1)for(f=u;f<d;f++)s[f][h]+=r+v*o,v++;else for(f=u;f>=0;f--)s[f][h]+=r+v*o,v++;return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(307),r=i(172),o=i(56),u=i(173),l=i(3),f=new s({initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=o.LINE,this.x1=d,this.y1=c,this.x2=p,this.y2=g},getPoint:function(v,d){return h(this,v,d)},getPoints:function(v,d,c){return r(this,v,d,c)},getRandomPoint:function(v){return u(this,v)},setTo:function(v,d,c,p){return v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=v,this.y1=d,this.x2=c,this.y2=p,this},getPointA:function(v){return v===void 0&&(v=new l),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new l),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});e.exports=f},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=r||h.fillColor,l=o||h.fillAlpha,f=(u&16711680)>>>16,v=(u&65280)>>>8,d=u&255;s.fillStyle="rgba("+f+","+v+","+d+","+l+")"};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f){var v=[];f.forEach(function(c){c&&v.push(c)}),this.loader=o,this.type=u,this.key=l,this.multiKeyIndex=o.multiKeyIndex++,this.files=v,this.complete=!1,this.pending=v.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var d=0;d<v.length;d++)v[d].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var o=this.files.indexOf(r);o!==-1&&this.pending--},onFileFailed:function(r){var o=this.files.indexOf(r);o!==-1&&this.failed++}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=s-r,l=h-o;return Math.sqrt(u*u+l*l)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BOOT:i(922),DESTROY:i(923),DRAG_END:i(924),DRAG_ENTER:i(925),DRAG:i(926),DRAG_LEAVE:i(927),DRAG_OVER:i(928),DRAG_START:i(929),DROP:i(930),GAME_OUT:i(931),GAME_OVER:i(932),GAMEOBJECT_DOWN:i(933),GAMEOBJECT_DRAG_END:i(934),GAMEOBJECT_DRAG_ENTER:i(935),GAMEOBJECT_DRAG:i(936),GAMEOBJECT_DRAG_LEAVE:i(937),GAMEOBJECT_DRAG_OVER:i(938),GAMEOBJECT_DRAG_START:i(939),GAMEOBJECT_DROP:i(940),GAMEOBJECT_MOVE:i(941),GAMEOBJECT_OUT:i(942),GAMEOBJECT_OVER:i(943),GAMEOBJECT_POINTER_DOWN:i(944),GAMEOBJECT_POINTER_MOVE:i(945),GAMEOBJECT_POINTER_OUT:i(946),GAMEOBJECT_POINTER_OVER:i(947),GAMEOBJECT_POINTER_UP:i(948),GAMEOBJECT_POINTER_WHEEL:i(949),GAMEOBJECT_UP:i(950),GAMEOBJECT_WHEEL:i(951),MANAGER_BOOT:i(952),MANAGER_PROCESS:i(953),MANAGER_UPDATE:i(954),POINTER_DOWN:i(955),POINTER_DOWN_OUTSIDE:i(956),POINTER_MOVE:i(957),POINTER_OUT:i(958),POINTER_OVER:i(959),POINTER_UP:i(960),POINTER_UP_OUTSIDE:i(961),POINTER_WHEEL:i(962),POINTERLOCK_CHANGE:i(963),PRE_UPDATE:i(964),SHUTDOWN:i(965),START:i(966),UPDATE:i(967)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.y=h+s.height*s.originY,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x=h+s.width*s.originX,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x=h-s.width+s.width*s.originX,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.y=h-s.height+s.height*s.originY,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.width<=0||s.height<=0?!1:s.x<=h&&s.x+s.width>=h&&s.y<=r&&s.y+s.height>=r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(175),r=i(9),o=i(374),u=i(2),l=i(69),f=i(91),v=i(141),d=i(12),c=i(375),p=new s({Extends:r,initialize:function(x){r.call(this);var m=x.game,y=m.renderer,T=y.gl;this.name=u(x,"name","WebGLPipeline"),this.game=m,this.renderer=y,this.manager,this.gl=T,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=u(x,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=u(x,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=x,this.glReset=!1},boot:function(){var g,x=this.gl,m=this.config,y=this.renderer;this.isPostFX||(this.projectionMatrix=new l().identity());var T=this.renderTargets,C=u(m,"renderTarget",!1);typeof C=="boolean"&&C&&(C=1);var S=y.width,E=y.height;if(typeof C=="number")for(g=0;g<C;g++)T.push(new v(y,S,E,1,0,!0));else if(Array.isArray(C))for(g=0;g<C.length;g++){var P=u(C[g],"scale",1),M=u(C[g],"minFilter",0),O=u(C[g],"autoClear",1);T.push(new v(y,S,E,P,M,O))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(m);var A=this.shaders,R=0;for(g=0;g<A.length;g++)A[g].vertexSize>R&&(R=A[g].vertexSize);var F=u(m,"batchSize",y.config.batchSize);this.vertexCapacity=F*6;var I=new ArrayBuffer(this.vertexCapacity*R);this.vertexData=I,this.bytes=new Uint8Array(I),this.vertexViewF32=new Float32Array(I),this.vertexViewU32=new Uint32Array(I);var D=u(m,"vertices",null);for(D?(this.vertexViewF32.set(D),this.vertexBuffer=y.createVertexBuffer(I,x.STATIC_DRAW)):this.vertexBuffer=y.createVertexBuffer(I.byteLength,x.DYNAMIC_DRAW),this.setVertexBuffer(),g=A.length-1;g>=0;g--)A[g].rebind();this.hasBooted=!0,y.on(f.RESIZE,this.resize,this),y.on(f.PRE_RENDER,this.onPreRender,this),y.on(f.RENDER,this.onRender,this),y.on(f.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(g,x){var m=this.renderer;if(g!==this.currentShader||m.currentProgram!==this.currentShader.program){this.flush(),m.resetTextures();var y=this.setVertexBuffer();y&&!x&&(x=!0),g.bind(x,!1),this.currentShader=g}return this},getShaderByName:function(g){for(var x=this.shaders,m=0;m<x.length;m++)if(x[m].name===g)return x[m]},setShadersFromConfig:function(g){var x,m=this.shaders,y=this.renderer;for(x=0;x<m.length;x++)m[x].destroy();var T="vertShader",C="fragShader",S="attributes",E=u(g,T,null),P=d.parseFragmentShaderMaxTextures(u(g,C,null),y.maxTextures),M=u(g,S,null),O=u(g,"shaders",[]),A=O.length;if(A===0)E&&P&&(this.shaders=[new c(this,"default",E,P,h(M))]);else{var R=[];for(x=0;x<A;x++){var F=O[x],I=u(F,"name","default"),D=u(F,T,E),N=d.parseFragmentShaderMaxTextures(u(F,C,P),y.maxTextures),z=u(F,S,M);D&&N&&R.push(new c(this,I,D,N,h(z)))}this.shaders=R}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(g,x){return x===void 0&&(x=g.frame),this.currentUnit=this.renderer.setTextureSource(x.source),this.currentUnit},shouldFlush:function(g){return g===void 0&&(g=0),this.vertexCount+g>this.vertexCapacity},resize:function(g,x){(g!==this.width||x!==this.height)&&this.flush(),this.width=g,this.height=x;for(var m=this.renderTargets,y=0;y<m.length;y++)m[y].resize(g,x);return this.setProjectionMatrix(g,x),this.emit(o.RESIZE,g,x,this),this.onResize(g,x),this},setProjectionMatrix:function(g,x){var m=this.projectionMatrix;if(!m)return this;this.projectionWidth=g,this.projectionHeight=x,m.ortho(0,g,x,0,-1e3,1e3);for(var y=this.shaders,T="uProjectionMatrix",C=0;C<y.length;C++){var S=y[C];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,m.val,S))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var g=this.renderer.projectionWidth,x=this.renderer.projectionHeight;(this.projectionWidth!==g||this.projectionHeight!==x)&&this.setProjectionMatrix(g,x)}},bind:function(g){if(g===void 0&&(g=this.currentShader),this.glReset)return this.rebind(g);var x=this.setVertexBuffer();return g.bind(x),this.currentShader=g,this.emit(o.BIND,this,g),this.onActive(g),this},rebind:function(g){this.setVertexBuffer();for(var x=this.shaders,m=x.length-1;m>=0;m--){var y=x[m].rebind();(!g||y===g)&&(this.currentShader=y)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var g=this.gl,x=this.vertexBuffer;return g.getParameter(g.ARRAY_BUFFER_BINDING)!==x?(g.bindBuffer(g.ARRAY_BUFFER,x),!0):!1},preBatch:function(g){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(g),this},postBatch:function(g){return this.onDraw(this.currentRenderTarget),this.onPostBatch(g),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(g){if(g===void 0&&(g=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,g),this.onBeforeFlush(g);var x=this.gl,m=this.vertexCount,y=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),m===this.vertexCapacity?x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.DYNAMIC_DRAW):x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,m*y)),x.drawArrays(this.topology,0,m)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,g),this.onAfterFlush(g)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(g,x,m,y,T,C,S){var E=this.vertexViewF32,P=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++M]=g,E[++M]=x,E[++M]=m,E[++M]=y,E[++M]=T,E[++M]=C,P[++M]=S,this.vertexCount++},batchQuad:function(g,x,m,y,T,C,S,E,P,M,O,A,R,F,I,D,N,z,U,W){W===void 0&&(W=this.currentUnit);var w=!1;return this.shouldFlush(6)&&(this.flush(),w=!0,W=this.setTexture2D(U)),this.batchVert(x,m,M,O,W,z,F),this.batchVert(y,T,M,R,W,z,D),this.batchVert(C,S,A,R,W,z,N),this.batchVert(x,m,M,O,W,z,F),this.batchVert(C,S,A,R,W,z,N),this.batchVert(E,P,A,O,W,z,I),this.onBatch(g),w},batchTri:function(g,x,m,y,T,C,S,E,P,M,O,A,R,F,I,D,N){N===void 0&&(N=this.currentUnit);var z=!1;return this.shouldFlush(3)&&(this.flush(),z=!0,N=this.setTexture2D(D)),this.batchVert(x,m,E,P,N,I,A),this.batchVert(y,T,E,O,N,I,R),this.batchVert(C,S,M,O,N,I,F),this.onBatch(g),z},drawFillRect:function(g,x,m,y,T,C,S,E){S===void 0&&(S=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),g=Math.floor(g),x=Math.floor(x);var P=Math.floor(g+m),M=Math.floor(x+y),O=this.setTexture2D(S),A=d.getTintAppendFloatAlphaAndSwap(T,C),R=0,F=0,I=1,D=1;E&&(F=1,D=0),this.batchQuad(null,g,x,g,M,P,M,P,x,R,F,I,D,A,A,A,A,0,S,O)},setTexture2D:function(g){return g===void 0&&(g=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(g),this.currentUnit},bindTexture:function(g,x){x===void 0&&(x=0);var m=this.gl;return m.activeTexture(m.TEXTURE0+x),m.bindTexture(m.TEXTURE_2D,g),this},bindRenderTarget:function(g,x){return this.bindTexture(g.texture,x)},setTime:function(g){return this.set1f(g,this.game.loop.getDuration()),this},set1f:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set1f(g,x),this},set2f:function(g,x,m,y){return y===void 0&&(y=this.currentShader),y.set2f(g,x,m),this},set3f:function(g,x,m,y,T){return T===void 0&&(T=this.currentShader),T.set3f(g,x,m,y),this},set4f:function(g,x,m,y,T,C){return C===void 0&&(C=this.currentShader),C.set4f(g,x,m,y,T),this},set1fv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set1fv(g,x),this},set2fv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set2fv(g,x),this},set3fv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set3fv(g,x),this},set4fv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set4fv(g,x),this},set1iv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set1iv(g,x),this},set2iv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set2iv(g,x),this},set3iv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set3iv(g,x),this},set4iv:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set4iv(g,x),this},set1i:function(g,x,m){return m===void 0&&(m=this.currentShader),m.set1i(g,x),this},set2i:function(g,x,m,y){return y===void 0&&(y=this.currentShader),y.set2i(g,x,m),this},set3i:function(g,x,m,y,T){return T===void 0&&(T=this.currentShader),T.set3i(g,x,m,y),this},set4i:function(g,x,m,y,T,C){return C===void 0&&(C=this.currentShader),C.set4i(g,x,m,y,T),this},setMatrix2fv:function(g,x,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix2fv(g,x,m),this},setMatrix3fv:function(g,x,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix3fv(g,x,m),this},setMatrix4fv:function(g,x,m,y){return y===void 0&&(y=this.currentShader),y.setMatrix4fv(g,x,m),this},destroy:function(){this.emit(o.DESTROY,this);var g,x=this.shaders;for(g=0;g<x.length;g++)x[g].destroy();var m=this.renderTargets;for(g=0;g<m.length;g++)m[g].destroy();this.gl.deleteBuffer(this.vertexBuffer);var y=this.renderer;return y.off(f.RESIZE,this.resize,this),y.off(f.PRE_RENDER,this.onPreRender,this),y.off(f.RENDER,this.onRender,this),y.off(f.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function s(L,B,b){b=b||2;var G=B&&B.length,Y=G?B[0]*b:L.length,V=h(L,0,Y,b,!0),X=[];if(!V||V.next===V.prev)return X;var H,k,$,K,Z,Q,J;if(G&&(V=d(L,B,V,b)),L.length>80*b){H=$=L[0],k=K=L[1];for(var tt=b;tt<Y;tt+=b)Z=L[tt],Q=L[tt+1],Z<H&&(H=Z),Q<k&&(k=Q),Z>$&&($=Z),Q>K&&(K=Q);J=Math.max($-H,K-k),J=J!==0?1/J:0}return o(V,X,b,H,k,J),X}function h(L,B,b,G,Y){var V,X;if(Y===w(L,B,b,G)>0)for(V=B;V<b;V+=G)X=z(V,L[V],L[V+1],X);else for(V=b-G;V>=B;V-=G)X=z(V,L[V],L[V+1],X);return X&&M(X,X.next)&&(U(X),X=X.next),X}function r(L,B){if(!L)return L;B||(B=L);var b=L,G;do if(G=!1,!b.steiner&&(M(b,b.next)||P(b.prev,b,b.next)===0)){if(U(b),b=B=b.prev,b===b.next)break;G=!0}else b=b.next;while(G||b!==B);return B}function o(L,B,b,G,Y,V,X){if(!!L){!X&&V&&m(L,G,Y,V);for(var H=L,k,$;L.prev!==L.next;){if(k=L.prev,$=L.next,V?l(L,G,Y,V):u(L)){B.push(k.i/b),B.push(L.i/b),B.push($.i/b),U(L),L=$.next,H=$.next;continue}if(L=$,L===H){X?X===1?(L=f(r(L),B,b),o(L,B,b,G,Y,V,2)):X===2&&v(L,B,b,G,Y,V):o(r(L),B,b,G,Y,V,1);break}}}}function u(L){var B=L.prev,b=L,G=L.next;if(P(B,b,G)>=0)return!1;for(var Y=L.next.next;Y!==L.prev;){if(S(B.x,B.y,b.x,b.y,G.x,G.y,Y.x,Y.y)&&P(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function l(L,B,b,G){var Y=L.prev,V=L,X=L.next;if(P(Y,V,X)>=0)return!1;for(var H=Y.x<V.x?Y.x<X.x?Y.x:X.x:V.x<X.x?V.x:X.x,k=Y.y<V.y?Y.y<X.y?Y.y:X.y:V.y<X.y?V.y:X.y,$=Y.x>V.x?Y.x>X.x?Y.x:X.x:V.x>X.x?V.x:X.x,K=Y.y>V.y?Y.y>X.y?Y.y:X.y:V.y>X.y?V.y:X.y,Z=T(H,k,B,b,G),Q=T($,K,B,b,G),J=L.prevZ,tt=L.nextZ;J&&J.z>=Z&&tt&&tt.z<=Q;){if(J!==L.prev&&J!==L.next&&S(Y.x,Y.y,V.x,V.y,X.x,X.y,J.x,J.y)&&P(J.prev,J,J.next)>=0||(J=J.prevZ,tt!==L.prev&&tt!==L.next&&S(Y.x,Y.y,V.x,V.y,X.x,X.y,tt.x,tt.y)&&P(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;J&&J.z>=Z;){if(J!==L.prev&&J!==L.next&&S(Y.x,Y.y,V.x,V.y,X.x,X.y,J.x,J.y)&&P(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;tt&&tt.z<=Q;){if(tt!==L.prev&&tt!==L.next&&S(Y.x,Y.y,V.x,V.y,X.x,X.y,tt.x,tt.y)&&P(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function f(L,B,b){var G=L;do{var Y=G.prev,V=G.next.next;!M(Y,V)&&O(Y,G,G.next,V)&&I(Y,V)&&I(V,Y)&&(B.push(Y.i/b),B.push(G.i/b),B.push(V.i/b),U(G),U(G.next),G=L=V),G=G.next}while(G!==L);return r(G)}function v(L,B,b,G,Y,V){var X=L;do{for(var H=X.next.next;H!==X.prev;){if(X.i!==H.i&&E(X,H)){var k=N(X,H);X=r(X,X.next),k=r(k,k.next),o(X,B,b,G,Y,V),o(k,B,b,G,Y,V);return}H=H.next}X=X.next}while(X!==L)}function d(L,B,b,G){var Y=[],V,X,H,k,$;for(V=0,X=B.length;V<X;V++)H=B[V]*G,k=V<X-1?B[V+1]*G:L.length,$=h(L,H,k,G,!1),$===$.next&&($.steiner=!0),Y.push(C($));for(Y.sort(c),V=0;V<Y.length;V++)p(Y[V],b),b=r(b,b.next);return b}function c(L,B){return L.x-B.x}function p(L,B){if(B=g(L,B),B){var b=N(B,L);r(B,B.next),r(b,b.next)}}function g(L,B){var b=B,G=L.x,Y=L.y,V=-1/0,X;do{if(Y<=b.y&&Y>=b.next.y&&b.next.y!==b.y){var H=b.x+(Y-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(H<=G&&H>V){if(V=H,H===G){if(Y===b.y)return b;if(Y===b.next.y)return b.next}X=b.x<b.next.x?b:b.next}}b=b.next}while(b!==B);if(!X)return null;if(G===V)return X;var k=X,$=X.x,K=X.y,Z=1/0,Q;b=X;do G>=b.x&&b.x>=$&&G!==b.x&&S(Y<K?G:V,Y,$,K,Y<K?V:G,Y,b.x,b.y)&&(Q=Math.abs(Y-b.y)/(G-b.x),I(b,L)&&(Q<Z||Q===Z&&(b.x>X.x||b.x===X.x&&x(X,b)))&&(X=b,Z=Q)),b=b.next;while(b!==k);return X}function x(L,B){return P(L.prev,L,B.prev)<0&&P(B.next,L,L.next)<0}function m(L,B,b,G){var Y=L;do Y.z===null&&(Y.z=T(Y.x,Y.y,B,b,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==L);Y.prevZ.nextZ=null,Y.prevZ=null,y(Y)}function y(L){var B,b,G,Y,V,X,H,k,$=1;do{for(b=L,L=null,V=null,X=0;b;){for(X++,G=b,H=0,B=0;B<$&&(H++,G=G.nextZ,!!G);B++);for(k=$;H>0||k>0&&G;)H!==0&&(k===0||!G||b.z<=G.z)?(Y=b,b=b.nextZ,H--):(Y=G,G=G.nextZ,k--),V?V.nextZ=Y:L=Y,Y.prevZ=V,V=Y;b=G}V.nextZ=null,$*=2}while(X>1);return L}function T(L,B,b,G,Y){return L=32767*(L-b)*Y,B=32767*(B-G)*Y,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,L|B<<1}function C(L){var B=L,b=L;do(B.x<b.x||B.x===b.x&&B.y<b.y)&&(b=B),B=B.next;while(B!==L);return b}function S(L,B,b,G,Y,V,X,H){return(Y-X)*(B-H)-(L-X)*(V-H)>=0&&(L-X)*(G-H)-(b-X)*(B-H)>=0&&(b-X)*(V-H)-(Y-X)*(G-H)>=0}function E(L,B){return L.next.i!==B.i&&L.prev.i!==B.i&&!F(L,B)&&(I(L,B)&&I(B,L)&&D(L,B)&&(P(L.prev,L,B.prev)||P(L,B.prev,B))||M(L,B)&&P(L.prev,L,L.next)>0&&P(B.prev,B,B.next)>0)}function P(L,B,b){return(B.y-L.y)*(b.x-B.x)-(B.x-L.x)*(b.y-B.y)}function M(L,B){return L.x===B.x&&L.y===B.y}function O(L,B,b,G){var Y=R(P(L,B,b)),V=R(P(L,B,G)),X=R(P(b,G,L)),H=R(P(b,G,B));return!!(Y!==V&&X!==H||Y===0&&A(L,b,B)||V===0&&A(L,G,B)||X===0&&A(b,L,G)||H===0&&A(b,B,G))}function A(L,B,b){return B.x<=Math.max(L.x,b.x)&&B.x>=Math.min(L.x,b.x)&&B.y<=Math.max(L.y,b.y)&&B.y>=Math.min(L.y,b.y)}function R(L){return L>0?1:L<0?-1:0}function F(L,B){var b=L;do{if(b.i!==L.i&&b.next.i!==L.i&&b.i!==B.i&&b.next.i!==B.i&&O(b,b.next,L,B))return!0;b=b.next}while(b!==L);return!1}function I(L,B){return P(L.prev,L,L.next)<0?P(L,B,L.next)>=0&&P(L,L.prev,B)>=0:P(L,B,L.prev)<0||P(L,L.next,B)<0}function D(L,B){var b=L,G=!1,Y=(L.x+B.x)/2,V=(L.y+B.y)/2;do b.y>V!=b.next.y>V&&b.next.y!==b.y&&Y<(b.next.x-b.x)*(V-b.y)/(b.next.y-b.y)+b.x&&(G=!G),b=b.next;while(b!==L);return G}function N(L,B){var b=new W(L.i,L.x,L.y),G=new W(B.i,B.x,B.y),Y=L.next,V=B.prev;return L.next=B,B.prev=L,b.next=Y,Y.prev=b,G.next=b,b.prev=G,V.next=G,G.prev=V,G}function z(L,B,b,G){var Y=new W(L,B,b);return G?(Y.next=G.next,Y.prev=G,G.next.prev=Y,G.next=Y):(Y.prev=Y,Y.next=Y),Y}function U(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function W(L,B,b){this.i=L,this.x=B,this.y=b,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(L,B,b,G){var Y=B&&B.length,V=Y?B[0]*b:L.length,X=Math.abs(w(L,0,V,b));if(Y)for(var H=0,k=B.length;H<k;H++){var $=B[H]*b,K=H<k-1?B[H+1]*b:L.length;X-=Math.abs(w(L,$,K,b))}var Z=0;for(H=0;H<G.length;H+=3){var Q=G[H]*b,J=G[H+1]*b,tt=G[H+2]*b;Z+=Math.abs((L[Q]-L[tt])*(L[J+1]-L[Q+1])-(L[Q]-L[J])*(L[tt+1]-L[Q+1]))}return X===0&&Z===0?0:Math.abs((Z-X)/X)};function w(L,B,b,G){for(var Y=0,V=B,X=b-G;V<b;V+=G)Y+=(L[X]-L[V])*(L[V+1]+L[X+1]),X=V;return Y}s.flatten=function(L){for(var B=L[0][0].length,b={vertices:[],holes:[],dimensions:B},G=0,Y=0;Y<L.length;Y++){for(var V=0;V<L[Y].length;V++)for(var X=0;X<B;X++)b.vertices.push(L[Y][V][X]);Y>0&&(G+=L[Y-1].length,b.holes.push(G))}return b},e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=r||h.strokeColor,l=o||h.strokeAlpha,f=(u&16711680)>>>16,v=(u&65280)>>>8,d=u&255;s.strokeStyle="rgba("+f+","+v+","+d+","+l+")",s.lineWidth=h.lineWidth};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(6),f=i(7),v=new s({Extends:r,initialize:function(c,p,g,x,m){var y="json";if(f(p)){var T=p;p=u(T,"key"),g=u(T,"url"),x=u(T,"xhrSettings"),y=u(T,"extension",y),m=u(T,"dataKey",m)}var C={type:"json",cache:c.cacheManager.json,extension:y,responseType:"text",key:p,url:g,xhrSettings:x,config:m};r.call(this,c,C),f(g)&&(m?this.data=l(g,m):this.data=g,this.state=h.FILE_POPULATED)},onProcess:function(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var d=JSON.parse(this.xhrLoader.responseText)}catch(p){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),p}var c=this.config;typeof c=="string"?this.data=l(d,c,d):this.data=d}this.onProcessComplete()}});o.register("json",function(d,c,p,g){if(Array.isArray(d))for(var x=0;x<d.length;x++)this.addFile(new v(this,d[x]));else this.addFile(new v(this,d,c,g,p));return this}),e.exports=v},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(158),h=i(26),r=function(o,u,l,f,v){for(var d=null,c=null,p=null,g=null,x=h(o,u,l,f,null,v),m=0;m<x.length;m++){var y=x[m];y&&(y.collides?(d=s(y.x,y.y-1,!0,v),c=s(y.x,y.y+1,!0,v),p=s(y.x-1,y.y,!0,v),g=s(y.x+1,y.y,!0,v),y.faceTop=!(d&&d.collides),y.faceBottom=!(c&&c.collides),y.faceLeft=!(p&&p.collides),y.faceRight=!(g&&g.collides)):y.resetFaces())}};e.exports=r},function(e,a,i){var s={};e.exports=s;var h=i(83),r=i(32);(function(){s.create=function(o,u){for(var l=[],f=0;f<o.length;f++){var v=o[f],d={x:v.x,y:v.y,index:f,body:u,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},l.push(d)}return l},s.fromPath=function(o,u){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return o.replace(l,function(v,d,c){f.push({x:parseFloat(d),y:parseFloat(c)})}),s.create(f,u)},s.centre=function(o){for(var u=s.area(o,!0),l={x:0,y:0},f,v,d,c=0;c<o.length;c++)d=(c+1)%o.length,f=h.cross(o[c],o[d]),v=h.mult(h.add(o[c],o[d]),f),l=h.add(l,v);return h.div(l,6*u)},s.mean=function(o){for(var u={x:0,y:0},l=0;l<o.length;l++)u.x+=o[l].x,u.y+=o[l].y;return h.div(u,o.length)},s.area=function(o,u){for(var l=0,f=o.length-1,v=0;v<o.length;v++)l+=(o[f].x-o[v].x)*(o[f].y+o[v].y),f=v;return u?l/2:Math.abs(l)/2},s.inertia=function(o,u){for(var l=0,f=0,v=o,d,c,p=0;p<v.length;p++)c=(p+1)%v.length,d=Math.abs(h.cross(v[c],v[p])),l+=d*(h.dot(v[c],v[c])+h.dot(v[c],v[p])+h.dot(v[p],v[p])),f+=d;return u/6*(l/f)},s.translate=function(o,u,l){var f;if(l)for(f=0;f<o.length;f++)o[f].x+=u.x*l,o[f].y+=u.y*l;else for(f=0;f<o.length;f++)o[f].x+=u.x,o[f].y+=u.y;return o},s.rotate=function(o,u,l){if(u!==0){for(var f=Math.cos(u),v=Math.sin(u),d=0;d<o.length;d++){var c=o[d],p=c.x-l.x,g=c.y-l.y;c.x=l.x+(p*f-g*v),c.y=l.y+(p*v+g*f)}return o}},s.contains=function(o,u){for(var l=0;l<o.length;l++){var f=o[l],v=o[(l+1)%o.length];if((u.x-f.x)*(v.y-f.y)+(u.y-f.y)*(f.x-v.x)>0)return!1}return!0},s.scale=function(o,u,l,f){if(u===1&&l===1)return o;f=f||s.centre(o);for(var v,d,c=0;c<o.length;c++)v=o[c],d=h.sub(v,f),o[c].x=f.x+d.x*u,o[c].y=f.y+d.y*l;return o},s.chamfer=function(o,u,l,f,v){typeof u=="number"?u=[u]:u=u||[8],l=typeof l<"u"?l:-1,f=f||2,v=v||14;for(var d=[],c=0;c<o.length;c++){var p=o[c-1>=0?c-1:o.length-1],g=o[c],x=o[(c+1)%o.length],m=u[c<u.length?c:u.length-1];if(m===0){d.push(g);continue}var y=h.normalise({x:g.y-p.y,y:p.x-g.x}),T=h.normalise({x:x.y-g.y,y:g.x-x.x}),C=Math.sqrt(2*Math.pow(m,2)),S=h.mult(r.clone(y),m),E=h.normalise(h.mult(h.add(y,T),.5)),P=h.sub(g,h.mult(E,C)),M=l;l===-1&&(M=Math.pow(m,.32)*1.75),M=r.clamp(M,f,v),M%2===1&&(M+=1);for(var O=Math.acos(h.dot(y,T)),A=O/M,R=0;R<M;R++)d.push(h.add(h.rotate(S,A*R),P))}return d},s.clockwiseSort=function(o){var u=s.mean(o);return o.sort(function(l,f){return h.angle(u,l)-h.angle(u,f)}),o},s.isConvex=function(o){var u=0,l=o.length,f,v,d,c;if(l<3)return null;for(f=0;f<l;f++)if(v=(f+1)%l,d=(f+2)%l,c=(o[v].x-o[f].x)*(o[d].y-o[v].y),c-=(o[v].y-o[f].y)*(o[d].x-o[v].x),c<0?u|=1:c>0&&(u|=2),u===3)return!1;return u!==0?!0:null},s.hull=function(o){var u=[],l=[],f,v;for(o=o.slice(0),o.sort(function(d,c){var p=d.x-c.x;return p!==0?p:d.y-c.y}),v=0;v<o.length;v+=1){for(f=o[v];l.length>=2&&h.cross3(l[l.length-2],l[l.length-1],f)<=0;)l.pop();l.push(f)}for(v=o.length-1;v>=0;v-=1){for(f=o[v];u.length>=2&&h.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),l.pop(),u.concat(l)}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(66),r=i(300),o=i(301),u=i(56),l=i(170),f=new s({initialize:function(d,c,p){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.type=u.CIRCLE,this.x=d,this.y=c,this._radius=p,this._diameter=p*2},contains:function(v,d){return h(this,v,d)},getPoint:function(v,d){return r(this,v,d)},getPoints:function(v,d,c){return o(this,v,d,c)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,d,c){return this.x=v,this.y=d,this._radius=c,this._diameter=c*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});e.exports=f},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(s.radius>0&&h>=s.left&&h<=s.right&&r>=s.top&&r<=s.bottom){var o=(s.x-h)*(s.x-h),u=(s.y-r)*(s.y-r);return o+u<=s.radius*s.radius}else return!1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.sqrt((s.x2-s.x1)*(s.x2-s.x1)+(s.y2-s.y1)*(s.y2-s.y1))};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=r-h;return h+((s-h)%o+o)%o};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(39),r=1e-6,o=new s({initialize:function(p){this.val=new Float32Array(16),p?this.copy(p):this.identity()},clone:function(){return new o(this)},set:function(c){return this.copy(c)},setValues:function(c,p,g,x,m,y,T,C,S,E,P,M,O,A,R,F){var I=this.val;return I[0]=c,I[1]=p,I[2]=g,I[3]=x,I[4]=m,I[5]=y,I[6]=T,I[7]=C,I[8]=S,I[9]=E,I[10]=P,I[11]=M,I[12]=O,I[13]=A,I[14]=R,I[15]=F,this},copy:function(c){var p=c.val;return this.setValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])},fromArray:function(c){return this.setValues(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(c,p,g){var x=u.fromQuat(g),m=x.val,y=p.x,T=p.y,C=p.z;return this.setValues(m[0]*y,m[1]*y,m[2]*y,0,m[4]*T,m[5]*T,m[6]*T,0,m[8]*C,m[9]*C,m[10]*C,0,c.x,c.y,c.z,1)},xyz:function(c,p,g){this.identity();var x=this.val;return x[12]=c,x[13]=p,x[14]=g,this},scaling:function(c,p,g){this.zero();var x=this.val;return x[0]=c,x[5]=p,x[10]=g,x[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var c=this.val,p=c[1],g=c[2],x=c[3],m=c[6],y=c[7],T=c[11];return c[1]=c[4],c[2]=c[8],c[3]=c[12],c[4]=p,c[6]=c[9],c[7]=c[13],c[8]=g,c[9]=m,c[11]=c[14],c[12]=x,c[13]=y,c[14]=T,this},getInverse:function(c){return this.copy(c),this.invert()},invert:function(){var c=this.val,p=c[0],g=c[1],x=c[2],m=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],P=c[9],M=c[10],O=c[11],A=c[12],R=c[13],F=c[14],I=c[15],D=p*T-g*y,N=p*C-x*y,z=p*S-m*y,U=g*C-x*T,W=g*S-m*T,w=x*S-m*C,L=E*R-P*A,B=E*F-M*A,b=E*I-O*A,G=P*F-M*R,Y=P*I-O*R,V=M*I-O*F,X=D*V-N*Y+z*G+U*b-W*B+w*L;return X?(X=1/X,this.setValues((T*V-C*Y+S*G)*X,(x*Y-g*V-m*G)*X,(R*w-F*W+I*U)*X,(M*W-P*w-O*U)*X,(C*b-y*V-S*B)*X,(p*V-x*b+m*B)*X,(F*z-A*w-I*N)*X,(E*w-M*z+O*N)*X,(y*Y-T*b+S*L)*X,(g*b-p*Y-m*L)*X,(A*W-R*z+I*D)*X,(P*z-E*W-O*D)*X,(T*B-y*G-C*L)*X,(p*G-g*B+x*L)*X,(R*N-A*U-F*D)*X,(E*U-P*N+M*D)*X)):this},adjoint:function(){var c=this.val,p=c[0],g=c[1],x=c[2],m=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],P=c[9],M=c[10],O=c[11],A=c[12],R=c[13],F=c[14],I=c[15];return this.setValues(T*(M*I-O*F)-P*(C*I-S*F)+R*(C*O-S*M),-(g*(M*I-O*F)-P*(x*I-m*F)+R*(x*O-m*M)),g*(C*I-S*F)-T*(x*I-m*F)+R*(x*S-m*C),-(g*(C*O-S*M)-T*(x*O-m*M)+P*(x*S-m*C)),-(y*(M*I-O*F)-E*(C*I-S*F)+A*(C*O-S*M)),p*(M*I-O*F)-E*(x*I-m*F)+A*(x*O-m*M),-(p*(C*I-S*F)-y*(x*I-m*F)+A*(x*S-m*C)),p*(C*O-S*M)-y*(x*O-m*M)+E*(x*S-m*C),y*(P*I-O*R)-E*(T*I-S*R)+A*(T*O-S*P),-(p*(P*I-O*R)-E*(g*I-m*R)+A*(g*O-m*P)),p*(T*I-S*R)-y*(g*I-m*R)+A*(g*S-m*T),-(p*(T*O-S*P)-y*(g*O-m*P)+E*(g*S-m*T)),-(y*(P*F-M*R)-E*(T*F-C*R)+A*(T*M-C*P)),p*(P*F-M*R)-E*(g*F-x*R)+A*(g*M-x*P),-(p*(T*F-C*R)-y*(g*F-x*R)+A*(g*C-x*T)),p*(T*M-C*P)-y*(g*M-x*P)+E*(g*C-x*T))},determinant:function(){var c=this.val,p=c[0],g=c[1],x=c[2],m=c[3],y=c[4],T=c[5],C=c[6],S=c[7],E=c[8],P=c[9],M=c[10],O=c[11],A=c[12],R=c[13],F=c[14],I=c[15],D=p*T-g*y,N=p*C-x*y,z=p*S-m*y,U=g*C-x*T,W=g*S-m*T,w=x*S-m*C,L=E*R-P*A,B=E*F-M*A,b=E*I-O*A,G=P*F-M*R,Y=P*I-O*R,V=M*I-O*F;return D*V-N*Y+z*G+U*b-W*B+w*L},multiply:function(c){var p=this.val,g=p[0],x=p[1],m=p[2],y=p[3],T=p[4],C=p[5],S=p[6],E=p[7],P=p[8],M=p[9],O=p[10],A=p[11],R=p[12],F=p[13],I=p[14],D=p[15],N=c.val,z=N[0],U=N[1],W=N[2],w=N[3];return p[0]=z*g+U*T+W*P+w*R,p[1]=z*x+U*C+W*M+w*F,p[2]=z*m+U*S+W*O+w*I,p[3]=z*y+U*E+W*A+w*D,z=N[4],U=N[5],W=N[6],w=N[7],p[4]=z*g+U*T+W*P+w*R,p[5]=z*x+U*C+W*M+w*F,p[6]=z*m+U*S+W*O+w*I,p[7]=z*y+U*E+W*A+w*D,z=N[8],U=N[9],W=N[10],w=N[11],p[8]=z*g+U*T+W*P+w*R,p[9]=z*x+U*C+W*M+w*F,p[10]=z*m+U*S+W*O+w*I,p[11]=z*y+U*E+W*A+w*D,z=N[12],U=N[13],W=N[14],w=N[15],p[12]=z*g+U*T+W*P+w*R,p[13]=z*x+U*C+W*M+w*F,p[14]=z*m+U*S+W*O+w*I,p[15]=z*y+U*E+W*A+w*D,this},multiplyLocal:function(c){var p=this.val,g=c.val;return this.setValues(p[0]*g[0]+p[1]*g[4]+p[2]*g[8]+p[3]*g[12],p[0]*g[1]+p[1]*g[5]+p[2]*g[9]+p[3]*g[13],p[0]*g[2]+p[1]*g[6]+p[2]*g[10]+p[3]*g[14],p[0]*g[3]+p[1]*g[7]+p[2]*g[11]+p[3]*g[15],p[4]*g[0]+p[5]*g[4]+p[6]*g[8]+p[7]*g[12],p[4]*g[1]+p[5]*g[5]+p[6]*g[9]+p[7]*g[13],p[4]*g[2]+p[5]*g[6]+p[6]*g[10]+p[7]*g[14],p[4]*g[3]+p[5]*g[7]+p[6]*g[11]+p[7]*g[15],p[8]*g[0]+p[9]*g[4]+p[10]*g[8]+p[11]*g[12],p[8]*g[1]+p[9]*g[5]+p[10]*g[9]+p[11]*g[13],p[8]*g[2]+p[9]*g[6]+p[10]*g[10]+p[11]*g[14],p[8]*g[3]+p[9]*g[7]+p[10]*g[11]+p[11]*g[15],p[12]*g[0]+p[13]*g[4]+p[14]*g[8]+p[15]*g[12],p[12]*g[1]+p[13]*g[5]+p[14]*g[9]+p[15]*g[13],p[12]*g[2]+p[13]*g[6]+p[14]*g[10]+p[15]*g[14],p[12]*g[3]+p[13]*g[7]+p[14]*g[11]+p[15]*g[15])},premultiply:function(c){return this.multiplyMatrices(c,this)},multiplyMatrices:function(c,p){var g=c.val,x=p.val,m=g[0],y=g[4],T=g[8],C=g[12],S=g[1],E=g[5],P=g[9],M=g[13],O=g[2],A=g[6],R=g[10],F=g[14],I=g[3],D=g[7],N=g[11],z=g[15],U=x[0],W=x[4],w=x[8],L=x[12],B=x[1],b=x[5],G=x[9],Y=x[13],V=x[2],X=x[6],H=x[10],k=x[14],$=x[3],K=x[7],Z=x[11],Q=x[15];return this.setValues(m*U+y*B+T*V+C*$,S*U+E*B+P*V+M*$,O*U+A*B+R*V+F*$,I*U+D*B+N*V+z*$,m*W+y*b+T*X+C*K,S*W+E*b+P*X+M*K,O*W+A*b+R*X+F*K,I*W+D*b+N*X+z*K,m*w+y*G+T*H+C*Z,S*w+E*G+P*H+M*Z,O*w+A*G+R*H+F*Z,I*w+D*G+N*H+z*Z,m*L+y*Y+T*k+C*Q,S*L+E*Y+P*k+M*Q,O*L+A*Y+R*k+F*Q,I*L+D*Y+N*k+z*Q)},translate:function(c){return this.translateXYZ(c.x,c.y,c.z)},translateXYZ:function(c,p,g){var x=this.val;return x[12]=x[0]*c+x[4]*p+x[8]*g+x[12],x[13]=x[1]*c+x[5]*p+x[9]*g+x[13],x[14]=x[2]*c+x[6]*p+x[10]*g+x[14],x[15]=x[3]*c+x[7]*p+x[11]*g+x[15],this},scale:function(c){return this.scaleXYZ(c.x,c.y,c.z)},scaleXYZ:function(c,p,g){var x=this.val;return x[0]=x[0]*c,x[1]=x[1]*c,x[2]=x[2]*c,x[3]=x[3]*c,x[4]=x[4]*p,x[5]=x[5]*p,x[6]=x[6]*p,x[7]=x[7]*p,x[8]=x[8]*g,x[9]=x[9]*g,x[10]=x[10]*g,x[11]=x[11]*g,this},makeRotationAxis:function(c,p){var g=Math.cos(p),x=Math.sin(p),m=1-g,y=c.x,T=c.y,C=c.z,S=m*y,E=m*T;return this.setValues(S*y+g,S*T-x*C,S*C+x*T,0,S*T+x*C,E*T+g,E*C-x*y,0,S*C-x*T,E*C+x*y,m*C*C+g,0,0,0,0,1)},rotate:function(c,p){var g=this.val,x=p.x,m=p.y,y=p.z,T=Math.sqrt(x*x+m*m+y*y);if(Math.abs(T)<r)return this;T=1/T,x*=T,m*=T,y*=T;var C=Math.sin(c),S=Math.cos(c),E=1-S,P=g[0],M=g[1],O=g[2],A=g[3],R=g[4],F=g[5],I=g[6],D=g[7],N=g[8],z=g[9],U=g[10],W=g[11],w=g[12],L=g[13],B=g[14],b=g[15],G=x*x*E+S,Y=m*x*E+y*C,V=y*x*E-m*C,X=x*m*E-y*C,H=m*m*E+S,k=y*m*E+x*C,$=x*y*E+m*C,K=m*y*E-x*C,Z=y*y*E+S;return this.setValues(P*G+R*Y+N*V,M*G+F*Y+z*V,O*G+I*Y+U*V,A*G+D*Y+W*V,P*X+R*H+N*k,M*X+F*H+z*k,O*X+I*H+U*k,A*X+D*H+W*k,P*$+R*K+N*Z,M*$+F*K+z*Z,O*$+I*K+U*Z,A*$+D*K+W*Z,w,L,B,b)},rotateX:function(c){var p=this.val,g=Math.sin(c),x=Math.cos(c),m=p[4],y=p[5],T=p[6],C=p[7],S=p[8],E=p[9],P=p[10],M=p[11];return p[4]=m*x+S*g,p[5]=y*x+E*g,p[6]=T*x+P*g,p[7]=C*x+M*g,p[8]=S*x-m*g,p[9]=E*x-y*g,p[10]=P*x-T*g,p[11]=M*x-C*g,this},rotateY:function(c){var p=this.val,g=Math.sin(c),x=Math.cos(c),m=p[0],y=p[1],T=p[2],C=p[3],S=p[8],E=p[9],P=p[10],M=p[11];return p[0]=m*x-S*g,p[1]=y*x-E*g,p[2]=T*x-P*g,p[3]=C*x-M*g,p[8]=m*g+S*x,p[9]=y*g+E*x,p[10]=T*g+P*x,p[11]=C*g+M*x,this},rotateZ:function(c){var p=this.val,g=Math.sin(c),x=Math.cos(c),m=p[0],y=p[1],T=p[2],C=p[3],S=p[4],E=p[5],P=p[6],M=p[7];return p[0]=m*x+S*g,p[1]=y*x+E*g,p[2]=T*x+P*g,p[3]=C*x+M*g,p[4]=S*x-m*g,p[5]=E*x-y*g,p[6]=P*x-T*g,p[7]=M*x-C*g,this},fromRotationTranslation:function(c,p){var g=c.x,x=c.y,m=c.z,y=c.w,T=g+g,C=x+x,S=m+m,E=g*T,P=g*C,M=g*S,O=x*C,A=x*S,R=m*S,F=y*T,I=y*C,D=y*S;return this.setValues(1-(O+R),P+D,M-I,0,P-D,1-(E+R),A+F,0,M+I,A-F,1-(E+O),0,p.x,p.y,p.z,1)},fromQuat:function(c){var p=c.x,g=c.y,x=c.z,m=c.w,y=p+p,T=g+g,C=x+x,S=p*y,E=p*T,P=p*C,M=g*T,O=g*C,A=x*C,R=m*y,F=m*T,I=m*C;return this.setValues(1-(M+A),E+I,P-F,0,E-I,1-(S+A),O+R,0,P+F,O-R,1-(S+M),0,0,0,0,1)},frustum:function(c,p,g,x,m,y){var T=1/(p-c),C=1/(x-g),S=1/(m-y);return this.setValues(m*2*T,0,0,0,0,m*2*C,0,0,(p+c)*T,(x+g)*C,(y+m)*S,-1,0,0,y*m*2*S,0)},perspective:function(c,p,g,x){var m=1/Math.tan(c/2),y=1/(g-x);return this.setValues(m/p,0,0,0,0,m,0,0,0,0,(x+g)*y,-1,0,0,2*x*g*y,0)},perspectiveLH:function(c,p,g,x){return this.setValues(2*g/c,0,0,0,0,2*g/p,0,0,0,0,-x/(g-x),1,0,0,g*x/(g-x),0)},ortho:function(c,p,g,x,m,y){var T=c-p,C=g-x,S=m-y;return T=T===0?T:1/T,C=C===0?C:1/C,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*C,0,0,0,0,2*S,0,(c+p)*T,(x+g)*C,(y+m)*S,1)},lookAtRH:function(c,p,g){var x=this.val;return d.subVectors(c,p),d.getLengthSquared()===0&&(d.z=1),d.normalize(),f.crossVectors(g,d),f.getLengthSquared()===0&&(Math.abs(g.z)===1?d.x+=1e-4:d.z+=1e-4,d.normalize(),f.crossVectors(g,d)),f.normalize(),v.crossVectors(d,f),x[0]=f.x,x[1]=f.y,x[2]=f.z,x[4]=v.x,x[5]=v.y,x[6]=v.z,x[8]=d.x,x[9]=d.y,x[10]=d.z,this},lookAt:function(c,p,g){var x=c.x,m=c.y,y=c.z,T=g.x,C=g.y,S=g.z,E=p.x,P=p.y,M=p.z;if(Math.abs(x-E)<r&&Math.abs(m-P)<r&&Math.abs(y-M)<r)return this.identity();var O=x-E,A=m-P,R=y-M,F=1/Math.sqrt(O*O+A*A+R*R);O*=F,A*=F,R*=F;var I=C*R-S*A,D=S*O-T*R,N=T*A-C*O;F=Math.sqrt(I*I+D*D+N*N),F?(F=1/F,I*=F,D*=F,N*=F):(I=0,D=0,N=0);var z=A*N-R*D,U=R*I-O*N,W=O*D-A*I;return F=Math.sqrt(z*z+U*U+W*W),F?(F=1/F,z*=F,U*=F,W*=F):(z=0,U=0,W=0),this.setValues(I,z,O,0,D,U,A,0,N,W,R,0,-(I*x+D*m+N*y),-(z*x+U*m+W*y),-(O*x+A*m+R*y),1)},yawPitchRoll:function(c,p,g){this.zero(),u.zero(),l.zero();var x=this.val,m=u.val,y=l.val,T=Math.sin(g),C=Math.cos(g);return x[10]=1,x[15]=1,x[0]=C,x[1]=T,x[4]=-T,x[5]=C,T=Math.sin(p),C=Math.cos(p),m[0]=1,m[15]=1,m[5]=C,m[10]=C,m[9]=-T,m[6]=T,T=Math.sin(c),C=Math.cos(c),y[5]=1,y[15]=1,y[0]=C,y[2]=-T,y[8]=T,y[10]=C,this.multiplyLocal(u),this.multiplyLocal(l),this},setWorldMatrix:function(c,p,g,x,m){return this.yawPitchRoll(c.y,c.x,c.z),u.scaling(g.x,g.y,g.z),l.xyz(p.x,p.y,p.z),this.multiplyLocal(u),this.multiplyLocal(l),x&&this.multiplyLocal(x),m&&this.multiplyLocal(m),this},multiplyToMat4:function(c,p){var g=this.val,x=c.val,m=g[0],y=g[1],T=g[2],C=g[3],S=g[4],E=g[5],P=g[6],M=g[7],O=g[8],A=g[9],R=g[10],F=g[11],I=g[12],D=g[13],N=g[14],z=g[15],U=x[0],W=x[1],w=x[2],L=x[3],B=x[4],b=x[5],G=x[6],Y=x[7],V=x[8],X=x[9],H=x[10],k=x[11],$=x[12],K=x[13],Z=x[14],Q=x[15];return p.setValues(U*m+W*S+w*O+L*I,W*y+W*E+w*A+L*D,w*T+W*P+w*R+L*N,L*C+W*M+w*F+L*z,B*m+b*S+G*O+Y*I,B*y+b*E+G*A+Y*D,B*T+b*P+G*R+Y*N,B*C+b*M+G*F+Y*z,V*m+X*S+H*O+k*I,V*y+X*E+H*A+k*D,V*T+X*P+H*R+k*N,V*C+X*M+H*F+k*z,$*m+K*S+Z*O+Q*I,$*y+K*E+Z*A+Q*D,$*T+K*P+Z*R+Q*N,$*C+K*M+Z*F+Q*z)},fromRotationXYTranslation:function(c,p,g){var x=p.x,m=p.y,y=p.z,T=Math.sin(c.x),C=Math.cos(c.x),S=Math.sin(c.y),E=Math.cos(c.y),P=x,M=m,O=y,A=-T,R=0-A*S,F=0-C*S,I=A*E,D=C*E;return g||(P=E*x+S*y,M=R*x+C*m+I*y,O=F*x+T*m+D*y),this.setValues(E,R,F,0,0,C,T,0,S,I,D,0,P,M,O,1)},getMaxScaleOnAxis:function(){var c=this.val,p=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g=c[4]*c[4]+c[5]*c[5]+c[6]*c[6],x=c[8]*c[8]+c[9]*c[9]+c[10]*c[10];return Math.sqrt(Math.max(p,g,x))}}),u=new o,l=new o,f=new h,v=new h,d=new h;e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COMPLETE:i(987),DECODED:i(988),DECODED_ALL:i(989),DESTROY:i(990),DETUNE:i(991),GLOBAL_DETUNE:i(992),GLOBAL_MUTE:i(993),GLOBAL_RATE:i(994),GLOBAL_VOLUME:i(995),LOOP:i(996),LOOPED:i(997),MUTE:i(998),PAN:i(999),PAUSE_ALL:i(1e3),PAUSE:i(1001),PLAY:i(1002),RATE:i(1003),RESUME_ALL:i(1004),RESUME:i(1005),SEEK:i(1006),STOP_ALL:i(1007),STOP:i(1008),UNLOCKED:i(1009),VOLUME:i(1010)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function v(d,c,p,g,x){var m="png",y;if(l(c)){var T=c;c=u(T,"key"),p=u(T,"url"),y=u(T,"normalMap"),g=u(T,"xhrSettings"),m=u(T,"extension",m),x=u(T,"frameConfig")}Array.isArray(p)&&(y=p[1],p=p[0]);var C={type:"image",cache:d.textureManager,extension:m,responseType:"blob",key:c,url:p,xhrSettings:g,config:x};if(r.call(this,d,C),y){var S=new v(d,this.key,y,g,x);S.type="normalMap",this.setLink(S),d.addFile(S)}},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var v=this;this.data.onload=function(){r.revokeObjectURL(v.data),v.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(v.data),v.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var v,d=this.linkFile;d&&d.state===h.FILE_COMPLETE?(this.type==="image"?v=this.cache.addImage(this.key,this.data,d.data):v=this.cache.addImage(d.key,d.data,this.data),this.pendingDestroy(v),d.pendingDestroy(v)):d||(v=this.cache.addImage(this.key,this.data),this.pendingDestroy(v))}});o.register("image",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new f(this,v[p]));else this.addFile(new f(this,v,d,c));return this}),e.exports=f},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h?s.setCollision(!0,!0,!0,!0,!1):s.resetCollision(!1)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(164),h=i(0),r=i(11),o=i(15),u=i(1065),l=new h({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,u],initialize:function(v,d,c,p,g){o.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(p,g),this.setPosition(d,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,v){this.anims.update(f,v)},play:function(f,v){return this.anims.play(f,v)},playReverse:function(f,v){return this.anims.playReverse(f,v)},playAfterDelay:function(f,v){return this.anims.playAfterDelay(f,v)},playAfterRepeat:function(f,v){return this.anims.playAfterRepeat(f,v)},chain:function(f){return this.anims.chain(f)},stop:function(){return this.anims.stop()},stopAfterDelay:function(f){return this.anims.stopAfterDelay(f)},stopAfterRepeat:function(f){return this.anims.stopAfterRepeat(f)},stopOnFrame:function(f){return this.anims.stopOnFrame(f)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});e.exports=l},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){if(!(h>=s.length)){for(var r=s.length-1,o=s[h],u=h;u<r;u++)s[u]=s[u+1];return s.length=r,o}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADDED_TO_SCENE:i(643),DESTROY:i(644),REMOVED_FROM_SCENE:i(645),VIDEO_COMPLETE:i(646),VIDEO_CREATED:i(647),VIDEO_ERROR:i(648),VIDEO_LOOP:i(649),VIDEO_PLAY:i(650),VIDEO_SEEKED:i(651),VIDEO_SEEKING:i(652),VIDEO_STOP:i(653),VIDEO_TIMEOUT:i(654),VIDEO_UNLOCKED:i(655)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return r===void 0&&(r=0),h===0?s:(s-=r,s=h*Math.floor(s/h),o?(r+s)/h:r+s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h={};for(var r in s)Array.isArray(s[r])?h[r]=s[r].slice(0):h[r]=s[r];return h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=s.length;if(h<0||h>u||h>=r||r>u||h+r>u){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(o,u){return String(o).localeCompare(u)}function s(o,u){var l=o.length;if(l<=1)return o;for(var f=new Array(l),v=1;v<l;v*=2){h(o,u,v,f);var d=o;o=f,f=d}return o}function h(o,u,l,f){var v=o.length,d=0,c=l*2,p,g,x,m,y;for(p=0;p<v;p+=c)for(g=p+l,x=g+l,g>v&&(g=v),x>v&&(x=v),m=p,y=g;;)if(m<g&&y<x)u(o[m],o[y])<=0?f[d++]=o[m++]:f[d++]=o[y++];else if(m<g)f[d++]=o[m++];else if(y<x)f[d++]=o[y++];else break}var r=function(o,u){u===void 0&&(u=i);var l=s(o,u);return l!==o&&h(l,null,o.length,o),o};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(134),h=i(205),r=function(o,u){var l=s.Power0;if(typeof o=="string")if(s.hasOwnProperty(o))l=s[o];else{var f="";o.indexOf(".")&&(f=o.substr(o.indexOf(".")+1),f.toLowerCase()==="in"?f="easeIn":f.toLowerCase()==="out"?f="easeOut":f.toLowerCase()==="inout"&&(f="easeInOut")),o=h(o.substr(0,o.indexOf(".")+1)+f),s.hasOwnProperty(o)&&(l=s[o])}else typeof o=="function"?l=o:Array.isArray(o)&&o.length;if(!u)return l;var v=u.slice(0);return v.unshift(0),function(d){return v[0]=d,l.apply(this,v)}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),h=function(r,o,u,l,f){var v=r.strokeTint,d=s.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*u);v.TL=d,v.TR=d,v.BL=d,v.BR=d;var c=o.pathData,p=c.length-1,g=o.lineWidth,x=g/2,m=c[0]-l,y=c[1]-f;o.closePath||(p-=2);for(var T=2;T<p;T+=2){var C=c[T]-l,S=c[T+1]-f;r.batchLine(m,y,C,S,x,x,g,T-2,o.closePath?T===p-1:!1),m=C,y=S}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(115),r=i(476),o=i(477),u=i(56),l=i(47),f=i(181),v=new s({initialize:function(c,p,g,x,m,y){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=0),this.type=u.TRIANGLE,this.x1=c,this.y1=p,this.x2=g,this.y2=x,this.x3=m,this.y3=y},contains:function(d,c){return h(this,d,c)},getPoint:function(d,c){return r(this,d,c)},getPoints:function(d,c,p){return o(this,d,c,p)},getRandomPoint:function(d){return f(this,d)},setTo:function(d,c,p,g,x,m){return d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),m===void 0&&(m=0),this.x1=d,this.y1=c,this.x2=p,this.y2=g,this.x3=x,this.y3=m,this},getLineA:function(d){return d===void 0&&(d=new l),d.setTo(this.x1,this.y1,this.x2,this.y2),d},getLineB:function(d){return d===void 0&&(d=new l),d.setTo(this.x2,this.y2,this.x3,this.y3),d},getLineC:function(d){return d===void 0&&(d=new l),d.setTo(this.x3,this.y3,this.x1,this.y1),d},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(d){var c=0;this.x1<=this.x2&&this.x1<=this.x3?c=this.x1-d:this.x2<=this.x1&&this.x2<=this.x3?c=this.x2-d:c=this.x3-d,this.x1-=c,this.x2-=c,this.x3-=c}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(d){var c=0;this.x1>=this.x2&&this.x1>=this.x3?c=this.x1-d:this.x2>=this.x1&&this.x2>=this.x3?c=this.x2-d:c=this.x3-d,this.x1-=c,this.x2-=c,this.x3-=c}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(d){var c=0;this.y1<=this.y2&&this.y1<=this.y3?c=this.y1-d:this.y2<=this.y1&&this.y2<=this.y3?c=this.y2-d:c=this.y3-d,this.y1-=c,this.y2-=c,this.y3-=c}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(d){var c=0;this.y1>=this.y2&&this.y1>=this.y3?c=this.y1-d:this.y2>=this.y1&&this.y2>=this.y3?c=this.y2-d:c=this.y3-d,this.y1-=c,this.y2-=c,this.y3-=c}}});e.exports=v},function(e,a){var i={};e.exports=i,function(){i.create=function(s,h){return{x:s||0,y:h||0}},i.clone=function(s){return{x:s.x,y:s.y}},i.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},i.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},i.rotate=function(s,h,r){var o=Math.cos(h),u=Math.sin(h);r||(r={});var l=s.x*o-s.y*u;return r.y=s.x*u+s.y*o,r.x=l,r},i.rotateAbout=function(s,h,r,o){var u=Math.cos(h),l=Math.sin(h);o||(o={});var f=r.x+((s.x-r.x)*u-(s.y-r.y)*l);return o.y=r.y+((s.x-r.x)*l+(s.y-r.y)*u),o.x=f,o},i.normalise=function(s){var h=i.magnitude(s);return h===0?{x:0,y:0}:{x:s.x/h,y:s.y/h}},i.dot=function(s,h){return s.x*h.x+s.y*h.y},i.cross=function(s,h){return s.x*h.y-s.y*h.x},i.cross3=function(s,h,r){return(h.x-s.x)*(r.y-s.y)-(h.y-s.y)*(r.x-s.x)},i.add=function(s,h,r){return r||(r={}),r.x=s.x+h.x,r.y=s.y+h.y,r},i.sub=function(s,h,r){return r||(r={}),r.x=s.x-h.x,r.y=s.y-h.y,r},i.mult=function(s,h){return{x:s.x*h,y:s.y*h}},i.div=function(s,h){return{x:s.x/h,y:s.y/h}},i.perp=function(s,h){return h=h===!0?-1:1,{x:h*-s.y,y:h*s.x}},i.neg=function(s){return{x:-s.x,y:-s.y}},i.angle=function(s,h){return Math.atan2(h.y-s.y,h.x-s.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},function(e,a){var i={};e.exports=i,function(){i.create=function(s){var h={min:{x:0,y:0},max:{x:0,y:0}};return s&&i.update(h,s),h},i.update=function(s,h,r){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var o=0;o<h.length;o++){var u=h[o];u.x>s.max.x&&(s.max.x=u.x),u.x<s.min.x&&(s.min.x=u.x),u.y>s.max.y&&(s.max.y=u.y),u.y<s.min.y&&(s.min.y=u.y)}r&&(r.x>0?s.max.x+=r.x:s.min.x+=r.x,r.y>0?s.max.y+=r.y:s.min.y+=r.y)},i.contains=function(s,h){return h.x>=s.min.x&&h.x<=s.max.x&&h.y>=s.min.y&&h.y<=s.max.y},i.overlaps=function(s,h){return s.min.x<=h.max.x&&s.max.x>=h.min.x&&s.max.y>=h.min.y&&s.min.y<=h.max.y},i.translate=function(s,h){s.min.x+=h.x,s.max.x+=h.x,s.min.y+=h.y,s.max.y+=h.y},i.shift=function(s,h){var r=s.max.x-s.min.x,o=s.max.y-s.min.y;s.min.x=h.x,s.max.x=h.x+r,s.min.y=h.y,s.max.y=h.y+o}}()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(0),r=i(11),o=i(502),u=new h({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(f,v,d,c,p,g,x,m){this.layer=f,this.index=v,this.x=d,this.y=c,this.width=p,this.height=g,this.right,this.bottom,this.baseWidth=x!==void 0?x:p,this.baseHeight=m!==void 0?m:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(l,f){return!(l<this.pixelX||f<this.pixelY||l>this.right||f>this.bottom)},copy:function(l){return this.index=l.index,this.alpha=l.alpha,this.properties=l.properties,this.visible=l.visible,this.setFlip(l.flipX,l.flipY),this.tint=l.tint,this.rotation=l.rotation,this.collideUp=l.collideUp,this.collideDown=l.collideDown,this.collideLeft=l.collideLeft,this.collideRight=l.collideRight,this.collisionCallback=l.collisionCallback,this.collisionCallbackContext=l.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(l){var f=this.tilemapLayer;return f?f.tileToWorldX(this.x,l):this.x*this.baseWidth},getRight:function(l){var f=this.tilemapLayer;return f?this.getLeft(l)+this.width*f.scaleX:this.getLeft(l)+this.width},getTop:function(l){var f=this.tilemapLayer;return f?f.tileToWorldY(this.y,l)-(this.height-this.baseHeight)*f.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(l){var f=this.tilemapLayer;return f?this.getTop(l)+this.height*f.scaleY:this.getTop(l)+this.height},getBounds:function(l,f){return f===void 0&&(f=new o),f.x=this.getLeft(),f.y=this.getTop(),f.width=this.getRight()-f.x,f.height=this.getBottom()-f.y,f},getCenterX:function(l){return(this.getLeft(l)+this.getRight(l))/2},getCenterY:function(l){return(this.getTop(l)+this.getBottom(l))/2},intersects:function(l,f,v,d){return!(v<=this.pixelX||d<=this.pixelY||l>=this.right||f>=this.bottom)},isInteresting:function(l,f){return l&&f?this.canCollide||this.hasInterestingFace:l?this.collides:f?this.hasInterestingFace:!1},resetCollision:function(l){if(l===void 0&&(l=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,l){var f=this.tilemapLayer;f&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(l,f,v,d,c){if(f===void 0&&(f=l),v===void 0&&(v=l),d===void 0&&(d=l),c===void 0&&(c=!0),this.collideLeft=l,this.collideRight=f,this.collideUp=v,this.collideDown=d,this.faceLeft=l,this.faceRight=f,this.faceTop=v,this.faceBottom=d,c){var p=this.tilemapLayer;p&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(l,f){return l===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=l,this.collisionCallbackContext=f),this},setSize:function(l,f,v,d){return l!==void 0&&(this.width=l),f!==void 0&&(this.height=f),v!==void 0&&(this.baseWidth=v),d!==void 0&&(this.baseHeight=d),this.updatePixelXY(),this},updatePixelXY:function(){var l=this.layer.orientation;if(l===s.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(l===s.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(l===s.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(l===s.HEXAGONAL){var f=this.layer.hexSideLength,v=(this.baseHeight-f)/2+f;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*v}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var l=this.layer.tilemapLayer;if(l){var f=l.gidMap[this.index];if(f)return f}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var l=this.tilemapLayer;return l?l.tilemap:null}}});e.exports=u},function(e,a,i){var s={};e.exports=s;var h=i(64),r=i(32),o=i(41),u=i(84),l=i(83),f=i(1393);(function(){s.rectangle=function(v,d,c,p,g){g=g||{};var x={label:"Rectangle Body",position:{x:v,y:d},vertices:h.fromPath("L 0 0 L "+c+" 0 L "+c+" "+p+" L 0 "+p)};if(g.chamfer){var m=g.chamfer;x.vertices=h.chamfer(x.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete g.chamfer}return o.create(r.extend({},x,g))},s.trapezoid=function(v,d,c,p,g,x){x=x||{},g*=.5;var m=(1-g*2)*c,y=c*g,T=y+m,C=T+y,S;g<.5?S="L 0 0 L "+y+" "+-p+" L "+T+" "+-p+" L "+C+" 0":S="L 0 0 L "+T+" "+-p+" L "+C+" 0";var E={label:"Trapezoid Body",position:{x:v,y:d},vertices:h.fromPath(S)};if(x.chamfer){var P=x.chamfer;E.vertices=h.chamfer(E.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete x.chamfer}return o.create(r.extend({},E,x))},s.circle=function(v,d,c,p,g){p=p||{};var x={label:"Circle Body",circleRadius:c};g=g||25;var m=Math.ceil(Math.max(10,Math.min(g,c)));return m%2===1&&(m+=1),s.polygon(v,d,m,c,r.extend({},x,p))},s.polygon=function(v,d,c,p,g){if(g=g||{},c<3)return s.circle(v,d,p,g);for(var x=2*Math.PI/c,m="",y=x*.5,T=0;T<c;T+=1){var C=y+T*x,S=Math.cos(C)*p,E=Math.sin(C)*p;m+="L "+S.toFixed(3)+" "+E.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:v,y:d},vertices:h.fromPath(m)};if(g.chamfer){var M=g.chamfer;P.vertices=h.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete g.chamfer}return o.create(r.extend({},P,g))},s.fromVertices=function(v,d,c,p,g,x,m){var y,T,C,S,E,P;for(p=p||{},T=[],g=typeof g<"u"?g:!1,x=typeof x<"u"?x:.01,m=typeof m<"u"?m:10,f||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(c[0])||(c=[c]),P=0;P<c.length;P+=1)if(S=c[P],C=h.isConvex(S),C||!f)C?S=h.clockwiseSort(S):S=h.hull(S),T.push({position:{x:v,y:d},vertices:S});else{var M=S.map(function(F){return[F.x,F.y]});f.makeCCW(M),x!==!1&&f.removeCollinearPoints(M,x);var O=f.quickDecomp(M);for(E=0;E<O.length;E++){var A=O[E],R=A.map(function(F){return{x:F[0],y:F[1]}});m>0&&h.area(R)<m||T.push({position:h.centre(R),vertices:R})}}for(E=0;E<T.length;E++)T[E]=o.create(r.extend(T[E],p));return g&&s.flagCoincidentParts(T,5),T.length>1?(y=o.create(r.extend({parts:T.slice(0)},p)),o.setPosition(y,{x:v,y:d}),y):T[0]},s.flagCoincidentParts=function(v,d){d===void 0&&(d=5);for(var c=0;c<v.length;c++)for(var p=v[c],g=c+1;g<v.length;g++){var x=v[g];if(u.overlaps(p.bounds,x.bounds))for(var m=p.vertices,y=x.vertices,T=0;T<p.vertices.length;T++)for(var C=0;C<x.vertices.length;C++){var S=l.magnitudeSquared(l.sub(m[(T+1)%m.length],y[C])),E=l.magnitudeSquared(l.sub(m[T],y[(C+1)%y.length]));S<d&&E<d&&(m[T].isInternal=!0,y[C].isInternal=!0)}}return v}})()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x-s.width*s.originX+s.width*.5};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.width*s.originX;return s.x=h+r-s.width*.5,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.y-s.height*s.originY+s.height*.5};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.height*s.originY;return s.y=h+r-s.height*.5,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={POST_RENDER:i(628),PRE_RENDER:i(629),RENDER:i(630),RESIZE:i(631)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(74),h=function(r,o,u,l){l===void 0&&(l=r);var f;if(!Array.isArray(o))return f=r.indexOf(o),f!==-1?(s(r,f),u&&u.call(l,o),o):null;for(var v=o.length-1,d=[];v>=0;){var c=o[v];f=r.indexOf(c),f!==-1&&(s(r,f),d.push(c),u&&u.call(l,c)),v--}return d};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(199),r=i(10),o=i(3),u=new s({initialize:function(f){this.type=f,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(l,f){return f===void 0&&(f=32),l.strokePoints(this.getPoints(f))},getBounds:function(l,f){l||(l=new r),f===void 0&&(f=16);var v=this.getLength();f>v&&(f=v/2);var d=Math.max(1,Math.round(v/f));return h(this.getSpacedPoints(d),l)},getDistancePoints:function(l){var f=this.getLength(),v=Math.max(1,f/l);return this.getSpacedPoints(v)},getEndPoint:function(l){return l===void 0&&(l=new o),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var f=[],v,d=this.getPoint(0,this._tmpVec2A),c=0;f.push(0);for(var p=1;p<=l;p++)v=this.getPoint(p/l,this._tmpVec2B),c+=v.distance(d),f.push(c),d.copy(v);return this.cacheArcLengths=f,f},getPointAt:function(l,f){var v=this.getUtoTmapping(l);return this.getPoint(v,f)},getPoints:function(l,f,v){v===void 0&&(v=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var d=0;d<=l;d++)v.push(this.getPoint(d/l));return v},getRandomPoint:function(l){return l===void 0&&(l=new o),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,f,v){v===void 0&&(v=[]),l||(f?l=this.getLength()/f:l=this.defaultDivisions);for(var d=0;d<=l;d++){var c=this.getUtoTmapping(d/l,null,l);v.push(this.getPoint(c))}return v},getStartPoint:function(l){return l===void 0&&(l=new o),this.getPointAt(0,l)},getTangent:function(l,f){f===void 0&&(f=new o);var v=1e-4,d=l-v,c=l+v;return d<0&&(d=0),c>1&&(c=1),this.getPoint(d,this._tmpVec2A),this.getPoint(c,f),f.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,f){var v=this.getUtoTmapping(l);return this.getTangent(v,f)},getTFromDistance:function(l,f){return l<=0?0:this.getUtoTmapping(0,l,f)},getUtoTmapping:function(l,f,v){var d=this.getLengths(v),c=0,p=d.length,g;f?g=Math.min(f,d[p-1]):g=l*d[p-1];for(var x=0,m=p-1,y;x<=m;)if(c=Math.floor(x+(m-x)/2),y=d[c]-g,y<0)x=c+1;else if(y>0)m=c-1;else{m=c;break}if(c=m,d[c]===g)return c/(p-1);var T=d[c],C=d[c+1],S=C-T,E=(g-T)/S;return(c+E)/(p-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(968),COMPLETE:i(969),FILE_COMPLETE:i(970),FILE_KEY_COMPLETE:i(971),FILE_LOAD_ERROR:i(972),FILE_LOAD:i(973),FILE_PROGRESS:i(974),POST_PROCESS:i(975),PROGRESS:i(976),START:i(977)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u){u===void 0&&(u=new s);var l=r.x1,f=r.y1,v=r.x2,d=r.y2,c=o.x1,p=o.y1,g=o.x2,x=o.y2,m=(g-c)*(f-p)-(x-p)*(l-c),y=(v-l)*(f-p)-(d-f)*(l-c),T=(x-p)*(v-l)-(g-c)*(d-f);if(T===0)return!1;var C=m/T,S=y/T;return C>=0&&C<=1&&S>=0&&S<=1?(u.x=l+C*(v-l),u.y=f+C*(d-f),!0):!1};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.atan2(s.y2-s.y1,s.x2-s.x1)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=function(r,o,u){return r=s(r,0,1),(u-o)*r+o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s&&s.hasOwnProperty(h)?s[h]:r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(315),r=new s({initialize:function(u,l){this.parent=u,this.events=l,l||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(h.DESTROY,this.destroy,this)},get:function(o){var u=this.list;if(Array.isArray(o)){for(var l=[],f=0;f<o.length;f++)l.push(u[o[f]]);return l}else return u[o]},getAll:function(){var o={};for(var u in this.list)this.list.hasOwnProperty(u)&&(o[u]=this.list[u]);return o},query:function(o){var u={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(o)&&(u[l]=this.list[l]);return u},set:function(o,u){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,u);for(var l in o)this.setValue(l,o[l]);return this},inc:function(o,u){if(this._frozen)return this;u===void 0&&(u=1);var l=this.get(o);return l===void 0&&(l=0),this.set(o,l+u),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,u){if(this._frozen)return this;if(this.has(o))this.values[o]=u;else{var l=this,f=this.list,v=this.events,d=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return f[o]},set:function(c){if(!l._frozen){var p=f[o];f[o]=c,v.emit(h.CHANGE_DATA,d,o,c,p),v.emit(h.CHANGE_DATA_KEY+o,d,c,p)}}}),f[o]=u,v.emit(h.SET_DATA,d,o,u)}return this},each:function(o,u){for(var l=[this.parent,null,void 0],f=1;f<arguments.length;f++)l.push(arguments[f]);for(var v in this.list)l[1]=v,l[2]=this.list[v],o.apply(u,l);return this},merge:function(o,u){u===void 0&&(u=!0);for(var l in o)o.hasOwnProperty(l)&&(u||!u&&!this.has(l))&&this.setValue(l,o[l]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var u=0;u<o.length;u++)this.removeValue(o[u]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var u=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(h.REMOVE_DATA,this.parent,o,u)}return this},pop:function(o){var u=void 0;return!this._frozen&&this.has(o)&&(u=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(h.REMOVE_DATA,this.parent,o,u)),u},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(h.CHANGE_DATA),this.events.off(h.SET_DATA),this.events.off(h.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var u in this.list)this.list[u]!==void 0&&o++;return o}}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var u=0;u<o.length;u++)this.set(o[u][0],o[u][1])},set:function(r,o){return this.has(r)||this.size++,this.entries[r]=o,this},get:function(r){if(this.has(r))return this.entries[r]},getArray:function(){var r=[],o=this.entries;for(var u in o)r.push(o[u]);return r},has:function(r){return this.entries.hasOwnProperty(r)},delete:function(r){return this.has(r)&&(delete this.entries[r],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(r){delete this.entries[r]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var r=[],o=this.entries;for(var u in o)r.push(o[u]);return r},dump:function(){var r=this.entries;console.group("Map");for(var o in r)console.log(o,r[o]);console.groupEnd()},each:function(r){var o=this.entries;for(var u in o)if(r(u,o[u])===!1)break;return this},contains:function(r){var o=this.entries;for(var u in o)if(o[u]===r)return!0;return!1},merge:function(r,o){o===void 0&&(o=!1);var u=this.entries,l=r.entries;for(var f in l)u.hasOwnProperty(f)&&o?u[f]=l[f]:this.set(f,l[f]);return this}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s<<16|h<<8|r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ENTER_FULLSCREEN:i(800),FULLSCREEN_FAILED:i(801),FULLSCREEN_UNSUPPORTED:i(802),LEAVE_FULLSCREEN:i(803),ORIENTATION_CHANGE:i(804),RESIZE:i(805)}},function(e,a,i){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var h={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return h;var o=navigator.userAgent;/Windows/.test(o)?h.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(h.iOS=!0,h.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),h.iOSVersion=parseInt(RegExp.$1,10)):h.macOS=!0:/Android/.test(o)?h.android=!0:/Linux/.test(o)?h.linux=!0:/iP[ao]d|iPhone/i.test(o)?(h.iOS=!0,navigator.appVersion.match(/OS (\d+)/),h.iOSVersion=parseInt(RegExp.$1,10),h.iPhone=o.toLowerCase().indexOf("iphone")!==-1,h.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?h.kindle=!0:/CrOS/.test(o)&&(h.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(h.android=!1,h.iOS=!1,h.macOS=!1,h.windows=!0,h.windowsPhone=!0);var u=/Silk/.test(o);return(h.windows||h.macOS||h.linux&&!u||h.chromeOS)&&(h.desktop=!0),(h.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(h.desktop=!1),navigator.standalone&&(h.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(h.cordova=!0),window.ejecta!==void 0&&(h.ejecta=!0)),typeof s<"u"&&s.versions&&s.versions.node&&(h.node=!0),h.node&&typeof s.versions=="object"&&(h.nodeWebkit=!!s.versions["node-webkit"],h.electron=!!s.versions.electron),/Crosswalk/.test(o)&&(h.crosswalk=!0),h.pixelRatio=window.devicePixelRatio||1,h}e.exports=r()}).call(this,i(807))},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(861),ERROR:i(862),LOAD:i(863),READY:i(864),REMOVE:i(865)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(59),r=i(2),o=i(878),u=i(879),l=i(25),f=i(12),v=i(107),d=i(58),c=new s({Extends:d,initialize:function(g){var x=g.game.renderer,m=r(g,"fragShader",o);g.fragShader=f.parseFragmentShaderMaxTextures(m,x.maxTextures),g.vertShader=r(g,"vertShader",u),g.attributes=r(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),d.call(this,g),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){d.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(p,g,x){this.manager.set(this,p);var m=this._tempMatrix1,y=this._tempMatrix2,T=this._tempMatrix3,C=p.frame,S=C.glTexture,E=C.u0,P=C.v0,M=C.u1,O=C.v1,A=C.x,R=C.y,F=C.cutWidth,I=C.cutHeight,D=C.customPivot,N=p.displayOriginX,z=p.displayOriginY,U=-N+A,W=-z+R;if(p.isCropped){var w=p._crop;(w.flipX!==p.flipX||w.flipY!==p.flipY)&&C.updateCropUVs(w,p.flipX,p.flipY),E=w.u0,P=w.v0,M=w.u1,O=w.v1,F=w.width,I=w.height,A=w.x,R=w.y,U=-N+A,W=-z+R}var L=1,B=1;p.flipX&&(D||(U+=-C.realWidth+N*2),L=-1),(p.flipY||C.source.isGLTexture&&!S.flipY)&&(D||(W+=-C.realHeight+z*2),B=-1),y.applyITRS(p.x,p.y,p.rotation,p.scaleX*L,p.scaleY*B),m.copyFrom(g.matrix),x?(m.multiplyWithOffset(x,-g.scrollX*p.scrollFactorX,-g.scrollY*p.scrollFactorY),y.e=p.x,y.f=p.y):(y.e-=g.scrollX*p.scrollFactorX,y.f-=g.scrollY*p.scrollFactorY),m.multiply(y,T);var b=U+F,G=W+I,Y=g.roundPixels,V=T.getXRound(U,W,Y),X=T.getYRound(U,W,Y),H=T.getXRound(U,G,Y),k=T.getYRound(U,G,Y),$=T.getXRound(b,G,Y),K=T.getYRound(b,G,Y),Z=T.getXRound(b,W,Y),Q=T.getYRound(b,W,Y),J=f.getTintAppendFloatAlpha,tt=g.alpha,lt=J(p.tintTopLeft,tt*p._alphaTL),ot=J(p.tintTopRight,tt*p._alphaTR),et=J(p.tintBottomLeft,tt*p._alphaBL),j=J(p.tintBottomRight,tt*p._alphaBR);this.shouldFlush(6)&&this.flush();var ft=this.setGameObject(p,C);this.manager.preBatch(p),this.batchQuad(p,V,X,H,k,$,K,Z,Q,E,P,M,O,lt,ot,et,j,p.tintFill,S,ft),this.manager.postBatch(p)},batchTexture:function(p,g,x,m,y,T,C,S,E,P,M,O,A,R,F,I,D,N,z,U,W,w,L,B,b,G,Y,V,X,H,k,$){this.manager.set(this,p);var K=this._tempMatrix1,Z=this._tempMatrix2,Q=this._tempMatrix3,J=N/x+Y,tt=z/m+V,lt=(N+U)/x+Y,ot=(z+W)/m+V,et=C,j=S,ft=-I,it=-D;if(p.isCropped){var ht=p._crop,ae=ht.width,oe=ht.height;et=ae,j=oe,C=ae,S=oe,N=ht.x,z=ht.y;var Et=N,vt=z;O&&(Et=U-ht.x-ae),A&&(vt=W-ht.y-oe),J=Et/x+Y,tt=vt/m+V,lt=(Et+ae)/x+Y,ot=(vt+oe)/m+V,ft=-I+N,it=-D+z}A=A^(!k&&g.isRenderTexture?1:0),O&&(et*=-1,ft+=C),A&&(j*=-1,it+=S);var wt=ft+et,It=it+j;Z.applyITRS(y,T,M,E,P),K.copyFrom(X.matrix),H?(K.multiplyWithOffset(H,-X.scrollX*R,-X.scrollY*F),Z.e=y,Z.f=T):(Z.e-=X.scrollX*R,Z.f-=X.scrollY*F),K.multiply(Z,Q);var Ot=X.roundPixels,he=Q.getXRound(ft,it,Ot),li=Q.getYRound(ft,it,Ot),ui=Q.getXRound(ft,It,Ot),fi=Q.getYRound(ft,It,Ot),di=Q.getXRound(wt,It,Ot),ci=Q.getYRound(wt,It,Ot),vi=Q.getXRound(wt,it,Ot),Am=Q.getYRound(wt,it,Ot);$===void 0&&($=this.renderer.setTexture2D(g)),p&&this.manager.preBatch(p),this.batchQuad(p,he,li,ui,fi,di,ci,vi,Am,J,tt,lt,ot,w,L,B,b,G,g,$),p&&this.manager.postBatch(p)},batchTextureFrame:function(p,g,x,m,y,T,C){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),E=this._tempMatrix2,P=g+p.width,M=x+p.height;C?S.multiply(C,E):E=S;var O=E.getX(g,x),A=E.getY(g,x),R=E.getX(g,M),F=E.getY(g,M),I=E.getX(P,M),D=E.getY(P,M),N=E.getX(P,x),z=E.getY(P,x),U=this.renderer.setTextureSource(p.source);m=f.getTintAppendFloatAlpha(m,y),this.batchQuad(null,O,A,R,F,I,D,N,z,p.u0,p.v0,p.u1,p.v1,m,m,m,m,0,p.glTexture,U)},batchFillRect:function(p,g,x,m,y,T){this.renderer.pipelines.set(this);var C=this.calcMatrix;T&&T.multiply(y,C);var S=p+x,E=g+m,P=C.getX(p,g),M=C.getY(p,g),O=C.getX(p,E),A=C.getY(p,E),R=C.getX(S,E),F=C.getY(S,E),I=C.getX(S,g),D=C.getY(S,g),N=this.fillTint;this.batchQuad(null,P,M,O,A,R,F,I,D,0,0,1,1,N.TL,N.TR,N.BL,N.BR,2)},batchFillTriangle:function(p,g,x,m,y,T,C,S){this.renderer.pipelines.set(this);var E=this.calcMatrix;S&&S.multiply(C,E);var P=E.getX(p,g),M=E.getY(p,g),O=E.getX(x,m),A=E.getY(x,m),R=E.getX(y,T),F=E.getY(y,T),I=this.fillTint;this.batchTri(null,P,M,O,A,R,F,0,0,1,1,I.TL,I.TR,I.BL,2)},batchStrokeTriangle:function(p,g,x,m,y,T,C,S,E){var P=this.tempTriangle;P[0].x=p,P[0].y=g,P[0].width=C,P[1].x=x,P[1].y=m,P[1].width=C,P[2].x=y,P[2].y=T,P[2].width=C,P[3].x=p,P[3].y=g,P[3].width=C,this.batchStrokePath(P,C,!1,S,E)},batchFillPath:function(p,g,x){this.renderer.pipelines.set(this);var m=this.calcMatrix;x&&x.multiply(g,m);for(var y=p.length,T=this.polygonCache,C,S,E=this.fillTint.TL,P=this.fillTint.TR,M=this.fillTint.BL,O=0;O<y;++O)S=p[O],T.push(S.x,S.y);C=h(T),y=C.length;for(var A=0;A<y;A+=3){var R=C[A+0]*2,F=C[A+1]*2,I=C[A+2]*2,D=T[R+0],N=T[R+1],z=T[F+0],U=T[F+1],W=T[I+0],w=T[I+1],L=m.getX(D,N),B=m.getY(D,N),b=m.getX(z,U),G=m.getY(z,U),Y=m.getX(W,w),V=m.getY(W,w);this.batchTri(null,L,B,b,G,Y,V,0,0,1,1,E,P,M,2)}T.length=0},batchStrokePath:function(p,g,x,m,y){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=p.length-1,C=0;C<T;C++){var S=p[C],E=p[C+1];this.batchLine(S.x,S.y,E.x,E.y,S.width/2,E.width/2,g,C,!x&&C===T-1,m,y)}},batchLine:function(p,g,x,m,y,T,C,S,E,P,M){this.renderer.pipelines.set(this);var O=this.calcMatrix;M&&M.multiply(P,O);var A=x-p,R=m-g,F=Math.sqrt(A*A+R*R),I=y*(m-g)/F,D=y*(p-x)/F,N=T*(m-g)/F,z=T*(p-x)/F,U=x-N,W=m-z,w=p-I,L=g-D,B=x+N,b=m+z,G=p+I,Y=g+D,V=O.getX(U,W),X=O.getY(U,W),H=O.getX(w,L),k=O.getY(w,L),$=O.getX(B,b),K=O.getY(B,b),Z=O.getX(G,Y),Q=O.getY(G,Y),J=this.strokeTint,tt=J.TL,lt=J.TR,ot=J.BL,et=J.BR;if(this.batchQuad(null,Z,Q,H,k,V,X,$,K,0,0,1,1,tt,lt,ot,et,2),!(C<=2)){var j=this.prevQuad,ft=this.firstQuad;S>0&&j[4]?this.batchQuad(null,Z,Q,H,k,j[0],j[1],j[2],j[3],0,0,1,1,tt,lt,ot,et,2):(ft[0]=Z,ft[1]=Q,ft[2]=H,ft[3]=k,ft[4]=1),E&&ft[4]?this.batchQuad(null,V,X,$,K,ft[0],ft[1],ft[2],ft[3],0,0,1,1,tt,lt,ot,et,2):(j[0]=V,j[1]=X,j[2]=$,j[3]=K,j[4]=1)}}});e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(18),r=i(17),o=new s({initialize:function(l,f,v,d,c,p,g){this.texture=l,this.name=f,this.source=l.source[v],this.sourceIndex=v,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(p,g,d,c)},setSize:function(u,l,f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.cutX=f,this.cutY=v,this.cutWidth=u,this.cutHeight=l,this.width=u,this.height=l,this.halfWidth=Math.floor(u*.5),this.halfHeight=Math.floor(l*.5),this.centerX=Math.floor(u/2),this.centerY=Math.floor(l/2);var d=this.data,c=d.cut;c.x=f,c.y=v,c.w=u,c.h=l,c.r=f+u,c.b=v+l,d.sourceSize.w=u,d.sourceSize.h=l,d.spriteSourceSize.w=u,d.spriteSourceSize.h=l,d.radius=.5*Math.sqrt(u*u+l*l);var p=d.drawImage;return p.x=f,p.y=v,p.width=u,p.height=l,this.updateUVs()},setTrim:function(u,l,f,v,d,c){var p=this.data,g=p.spriteSourceSize;return p.trim=!0,p.sourceSize.w=u,p.sourceSize.h=l,g.x=f,g.y=v,g.w=d,g.h=c,g.r=f+d,g.b=v+c,this.x=f,this.y=v,this.width=d,this.height=c,this.halfWidth=d*.5,this.halfHeight=c*.5,this.centerX=Math.floor(d/2),this.centerY=Math.floor(c/2),this.updateUVs()},setCropUVs:function(u,l,f,v,d,c,p){var g=this.cutX,x=this.cutY,m=this.cutWidth,y=this.cutHeight,T=this.realWidth,C=this.realHeight;l=h(l,0,T),f=h(f,0,C),v=h(v,0,T-l),d=h(d,0,C-f);var S=g+l,E=x+f,P=v,M=d,O=this.data;if(O.trim){var A=O.spriteSourceSize;v=h(v,0,m-l),d=h(d,0,y-f);var R=l+v,F=f+d,I=!(A.r<l||A.b<f||A.x>R||A.y>F);if(I){var D=Math.max(A.x,l),N=Math.max(A.y,f),z=Math.min(A.r,R)-D,U=Math.min(A.b,F)-N;P=z,M=U,c?S=g+(m-(D-A.x)-z):S=g+(D-A.x),p?E=x+(y-(N-A.y)-U):E=x+(N-A.y),l=D,f=N,v=z,d=U}else S=0,E=0,P=0,M=0}else c&&(S=g+(m-l-v)),p&&(E=x+(y-f-d));var W=this.source.width,w=this.source.height;return u.u0=Math.max(0,S/W),u.v0=Math.max(0,E/w),u.u1=Math.min(1,(S+P)/W),u.v1=Math.min(1,(E+M)/w),u.x=l,u.y=f,u.cx=S,u.cy=E,u.cw=P,u.ch=M,u.width=v,u.height=d,u.flipX=c,u.flipY=p,u},updateCropUVs:function(u,l,f){return this.setCropUVs(u,u.x,u.y,u.width,u.height,l,f)},setUVs:function(u,l,f,v,d,c){var p=this.data.drawImage;return p.width=u,p.height=l,this.u0=f,this.v0=v,this.u1=d,this.v1=c,this},updateUVs:function(){var u=this.cutX,l=this.cutY,f=this.cutWidth,v=this.cutHeight,d=this.data.drawImage;d.width=f,d.height=v;var c=this.source.width,p=this.source.height;return this.u0=u/c,this.v0=l/p,this.u1=(u+f)/c,this.v1=(l+v)/p,this},updateUVsInverted:function(){var u=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/u,this.v0=this.cutY/l,this.u1=this.cutX/u,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var u=new o(this.texture,this.name,this.sourceIndex);return u.cutX=this.cutX,u.cutY=this.cutY,u.cutWidth=this.cutWidth,u.cutHeight=this.cutHeight,u.x=this.x,u.y=this.y,u.width=this.width,u.height=this.height,u.halfWidth=this.halfWidth,u.halfHeight=this.halfHeight,u.centerX=this.centerX,u.centerY=this.centerY,u.rotated=this.rotated,u.data=r(!0,u.data,this.data),u.updateUVs(),u},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(208),h=i(0),r=i(1),o=i(79),u=new h({initialize:function(f){this.parent=f,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(l,f){return f?s.Add(this.list,l):s.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,f,v){return v?s.AddAt(this.list,l,f):s.AddAt(this.list,l,f,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,f){return l?(f===void 0&&(f=function(v,d){return v[l]-d[l]}),o(this.list,f),this):this},getByName:function(l){return s.GetFirst(this.list,"name",l)},getRandom:function(l,f){return s.GetRandom(this.list,l,f)},getFirst:function(l,f,v,d){return s.GetFirst(this.list,l,f,v,d)},getAll:function(l,f,v,d){return s.GetAll(this.list,l,f,v,d)},count:function(l,f){return s.CountAllMatching(this.list,l,f)},swap:function(l,f){s.Swap(this.list,l,f)},moveTo:function(l,f){return s.MoveTo(this.list,l,f)},moveAbove:function(l,f){return s.MoveAbove(this.list,l,f)},moveBelow:function(l,f){return s.MoveBelow(this.list,l,f)},remove:function(l,f){return f?s.Remove(this.list,l):s.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,f){return f?s.RemoveAt(this.list,l):s.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,f,v){return v?s.RemoveBetween(this.list,l,f):s.RemoveBetween(this.list,l,f,this.removeCallback,this)},removeAll:function(l){for(var f=this.list.length;f--;)this.remove(this.list[f],l);return this},bringToTop:function(l){return s.BringToTop(this.list,l)},sendToBack:function(l){return s.SendToBack(this.list,l)},moveUp:function(l){return s.MoveUp(this.list,l),l},moveDown:function(l){return s.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(l,f){return s.Replace(this.list,l,f)},exists:function(l){return this.list.indexOf(l)>-1},setAll:function(l,f,v,d){return s.SetAll(this.list,l,f,v,d),this},each:function(l,f){for(var v=[null],d=2;d<arguments.length;d++)v.push(arguments[d]);for(d=0;d<this.list.length;d++)v[0]=this.list[d],l.apply(f,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(112),r=i(445),o=i(446),u=i(56),l=i(180),f=new s({initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=u.ELLIPSE,this.x=d,this.y=c,this.width=p,this.height=g},contains:function(v,d){return h(this,v,d)},getPoint:function(v,d){return r(this,v,d)},getPoints:function(v,d,c){return o(this,v,d,c)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,d,c,p){return this.x=v,this.y=d,this.width=c,this.height=p,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,d){return d===void 0&&(d=v),this.x=v,this.y=d,this},setSize:function(v,d){return d===void 0&&(d=v),this.width=v,this.height=d,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});e.exports=f},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(s.width<=0||s.height<=0)return!1;var o=(h-s.x)/s.width,u=(r-s.y)/s.height;return o*=o,u*=u,o+u<.25};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(275),h=i(0),r=i(75),o=i(9),u=i(207),l=i(2),f=i(6),v=i(7),d=i(437),c=i(149),p=i(73),g=new h({Extends:o,initialize:function(m,y,T){o.call(this),T?y&&!Array.isArray(y)&&(y=[y]):Array.isArray(y)?v(y[0])&&(T=y,y=null):v(y)&&(T=y,y=null),this.scene=m,this.children=new c,this.isParent=!0,this.type="Group",this.classType=l(T,"classType",p),this.name=l(T,"name",""),this.active=l(T,"active",!0),this.maxSize=l(T,"maxSize",-1),this.defaultKey=l(T,"defaultKey",null),this.defaultFrame=l(T,"defaultFrame",null),this.runChildUpdate=l(T,"runChildUpdate",!1),this.createCallback=l(T,"createCallback",null),this.removeCallback=l(T,"removeCallback",null),this.createMultipleCallback=l(T,"createMultipleCallback",null),this.internalCreateCallback=l(T,"internalCreateCallback",null),this.internalRemoveCallback=l(T,"internalRemoveCallback",null),y&&this.addMultiple(y),T&&this.createMultiple(T),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(x,m,y,T,C,S){if(x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=this.defaultKey),T===void 0&&(T=this.defaultFrame),C===void 0&&(C=!0),S===void 0&&(S=!0),this.isFull())return null;var E=new this.classType(this.scene,x,m,y,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=C,E.setActive(S),this.add(E),E},createMultiple:function(x){if(this.isFull())return[];Array.isArray(x)||(x=[x]);var m=[];if(x[0].key)for(var y=0;y<x.length;y++){var T=this.createFromConfig(x[y]);m=m.concat(T)}return m},createFromConfig:function(x){if(this.isFull())return[];this.classType=l(x,"classType",this.classType);var m=l(x,"key",void 0),y=l(x,"frame",null),T=l(x,"visible",!0),C=l(x,"active",!0),S=[];if(m===void 0)return S;Array.isArray(m)||(m=[m]),Array.isArray(y)||(y=[y]);var E=l(x,"repeat",0),P=l(x,"randomKey",!1),M=l(x,"randomFrame",!1),O=l(x,"yoyo",!1),A=l(x,"quantity",!1),R=l(x,"frameQuantity",1),F=l(x,"max",0),I=d(m,y,{max:F,qty:A||R,random:P,randomB:M,repeat:E,yoyo:O});x.createCallback&&(this.createCallback=x.createCallback),x.removeCallback&&(this.removeCallback=x.removeCallback);for(var D=0;D<I.length;D++){var N=this.create(0,0,I[D].a,I[D].b,T,C);if(!N)break;S.push(N)}var z=f(x,"setXY.x",0),U=f(x,"setXY.y",0),W=f(x,"setXY.stepX",0),w=f(x,"setXY.stepY",0);s.SetXY(S,z,U,W,w);var L=f(x,"setRotation.value",0),B=f(x,"setRotation.step",0);s.SetRotation(S,L,B);var b=f(x,"setScale.x",1),G=f(x,"setScale.y",b),Y=f(x,"setScale.stepX",0),V=f(x,"setScale.stepY",0);s.SetScale(S,b,G,Y,V);var X=f(x,"setOrigin.x",.5),H=f(x,"setOrigin.y",X),k=f(x,"setOrigin.stepX",0),$=f(x,"setOrigin.stepY",0);s.SetOrigin(S,X,H,k,$);var K=f(x,"setAlpha.value",1),Z=f(x,"setAlpha.step",0);s.SetAlpha(S,K,Z);var Q=f(x,"setDepth.value",0),J=f(x,"setDepth.step",0);s.SetDepth(S,Q,J);var tt=f(x,"setScrollFactor.x",1),lt=f(x,"setScrollFactor.y",tt),ot=f(x,"setScrollFactor.stepX",0),et=f(x,"setScrollFactor.stepY",0);s.SetScrollFactor(S,tt,lt,ot,et);var j=l(x,"hitArea",null),ft=l(x,"hitAreaCallback",null);j&&s.SetHitArea(S,j,ft);var it=l(x,"gridAlign",!1);return it&&s.GridAlign(S,it),this.createMultipleCallback&&this.createMultipleCallback.call(this,S),S},preUpdate:function(x,m){if(!(!this.runChildUpdate||this.children.size===0))for(var y=this.children.entries.slice(),T=0;T<y.length;T++){var C=y[T];C.active&&C.update(x,m)}},add:function(x,m){return m===void 0&&(m=!1),this.isFull()?this:(this.children.set(x),this.internalCreateCallback&&this.internalCreateCallback.call(this,x),this.createCallback&&this.createCallback.call(this,x),m&&(x.addToDisplayList(this.scene.sys.displayList),x.addToUpdateList()),x.on(r.DESTROY,this.remove,this),this)},addMultiple:function(x,m){if(m===void 0&&(m=!1),Array.isArray(x))for(var y=0;y<x.length;y++)this.add(x[y],m);return this},remove:function(x,m,y){return m===void 0&&(m=!1),y===void 0&&(y=!1),this.children.contains(x)?(this.children.delete(x),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,x),this.removeCallback&&this.removeCallback.call(this,x),x.off(r.DESTROY,this.remove,this),y?x.destroy():m&&(x.removeFromDisplayList(),x.removeFromUpdateList()),this):this},clear:function(x,m){x===void 0&&(x=!1),m===void 0&&(m=!1);for(var y=this.children,T=0;T<y.size;T++){var C=y.entries[T];C.off(r.DESTROY,this.remove,this),m?C.destroy():x&&(C.removeFromDisplayList(),C.removeFromUpdateList())}return this.children.clear(),this},contains:function(x){return this.children.contains(x)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(x,m,y,T){return u(this.children.entries,x,m,y,T)},getFirst:function(x,m,y,T,C,S,E){return this.getHandler(!0,1,x,m,y,T,C,S,E)},getFirstNth:function(x,m,y,T,C,S,E,P){return this.getHandler(!0,x,m,y,T,C,S,E,P)},getLast:function(x,m,y,T,C,S,E){return this.getHandler(!1,1,x,m,y,T,C,S,E)},getLastNth:function(x,m,y,T,C,S,E,P){return this.getHandler(!1,x,m,y,T,C,S,E,P)},getHandler:function(x,m,y,T,C,S,E,P,M){y===void 0&&(y=!1),T===void 0&&(T=!1);var O,A,R=0,F=this.children.entries;if(x)for(A=0;A<F.length;A++)if(O=F[A],O.active===y){if(R++,R===m)break}else O=null;else for(A=F.length-1;A>=0;A--)if(O=F[A],O.active===y){if(R++,R===m)break}else O=null;return O?(typeof C=="number"&&(O.x=C),typeof S=="number"&&(O.y=S),O):T?this.create(C,S,E,P,M):null},get:function(x,m,y,T,C){return this.getFirst(!1,!0,x,m,y,T,C)},getFirstAlive:function(x,m,y,T,C,S){return this.getFirst(!0,x,m,y,T,C,S)},getFirstDead:function(x,m,y,T,C,S){return this.getFirst(!1,x,m,y,T,C,S)},playAnimation:function(x,m){return s.PlayAnimation(this.children.entries,x,m),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(x){x===void 0&&(x=!0);for(var m=0,y=0;y<this.children.size;y++)this.children.entries[y].active===x&&m++;return m},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var x=this.getTotalUsed(),m=this.maxSize===-1?999999999999:this.maxSize;return m-x},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},propertyValueSet:function(x,m,y,T,C){return s.PropertyValueSet(this.children.entries,x,m,y,T,C),this},propertyValueInc:function(x,m,y,T,C){return s.PropertyValueInc(this.children.entries,x,m,y,T,C),this},setX:function(x,m){return s.SetX(this.children.entries,x,m),this},setY:function(x,m){return s.SetY(this.children.entries,x,m),this},setXY:function(x,m,y,T){return s.SetXY(this.children.entries,x,m,y,T),this},incX:function(x,m){return s.IncX(this.children.entries,x,m),this},incY:function(x,m){return s.IncY(this.children.entries,x,m),this},incXY:function(x,m,y,T){return s.IncXY(this.children.entries,x,m,y,T),this},shiftPosition:function(x,m,y){return s.ShiftPosition(this.children.entries,x,m,y),this},angle:function(x,m){return s.Angle(this.children.entries,x,m),this},rotate:function(x,m){return s.Rotate(this.children.entries,x,m),this},rotateAround:function(x,m){return s.RotateAround(this.children.entries,x,m),this},rotateAroundDistance:function(x,m,y){return s.RotateAroundDistance(this.children.entries,x,m,y),this},setAlpha:function(x,m){return s.SetAlpha(this.children.entries,x,m),this},setTint:function(x,m,y,T){return s.SetTint(this.children.entries,x,m,y,T),this},setOrigin:function(x,m,y,T){return s.SetOrigin(this.children.entries,x,m,y,T),this},scaleX:function(x,m){return s.ScaleX(this.children.entries,x,m),this},scaleY:function(x,m){return s.ScaleY(this.children.entries,x,m),this},scaleXY:function(x,m,y,T){return s.ScaleXY(this.children.entries,x,m,y,T),this},setDepth:function(x,m){return s.SetDepth(this.children.entries,x,m),this},setBlendMode:function(x){return s.SetBlendMode(this.children.entries,x),this},setHitArea:function(x,m){return s.SetHitArea(this.children.entries,x,m),this},shuffle:function(){return s.Shuffle(this.children.entries),this},kill:function(x){this.children.contains(x)&&x.setActive(!1)},killAndHide:function(x){this.children.contains(x)&&(x.setActive(!1),x.setVisible(!1))},setVisible:function(x,m,y){return s.SetVisible(this.children.entries,x,m,y),this},toggleVisible:function(){return s.ToggleVisible(this.children.entries),this},destroy:function(x,m){x===void 0&&(x=!1),m===void 0&&(m=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(m,x),this.scene=void 0,this.children=void 0)}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),h=function(r,o,u,l,f,v){for(var d=s.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*l),c=u.pathData,p=u.pathIndexes,g=0;g<p.length;g+=3){var x=p[g]*2,m=p[g+1]*2,y=p[g+2]*2,T=c[x+0]-f,C=c[x+1]-v,S=c[m+0]-f,E=c[m+1]-v,P=c[y+0]-f,M=c[y+1]-v,O=o.getX(T,C),A=o.getY(T,C),R=o.getX(S,E),F=o.getY(S,E),I=o.getX(P,M),D=o.getY(P,M);r.batchTri(u,O,A,R,F,I,D,0,0,1,1,d,d,d,2)}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=s.x3-s.x1,u=s.y3-s.y1,l=s.x2-s.x1,f=s.y2-s.y1,v=h-s.x1,d=r-s.y1,c=o*o+u*u,p=o*l+u*f,g=o*v+u*d,x=l*l+f*f,m=l*v+f*d,y=c*x-p*p,T=y===0?0:1/y,C=(x*g-p*m)*T,S=(c*m-p*g)*T;return C>=0&&S>=0&&C+S<1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(10),r=i(3);function o(l,f,v,d){var c=l-v,p=f-d,g=c*c+p*p;return Math.sqrt(g)}var u=new s({initialize:function(f,v,d){this.vertex1=f,this.vertex2=v,this.vertex3=d,this.bounds=new h,this._inCenter=new r},getInCenter:function(l){l===void 0&&(l=!0);var f=this.vertex1,v=this.vertex2,d=this.vertex3,c,p,g,x,m,y;l?(c=f.x,p=f.y,g=v.x,x=v.y,m=d.x,y=d.y):(c=f.vx,p=f.vy,g=v.vx,x=v.vy,m=d.vx,y=d.vy);var T=o(m,y,g,x),C=o(c,p,m,y),S=o(g,x,c,p),E=T+C+S;return this._inCenter.set((c*T+g*C+m*S)/E,(p*T+x*C+y*S)/E)},contains:function(l,f,v){var d=this.vertex1,c=this.vertex2,p=this.vertex3,g=d.vx,x=d.vy,m=c.vx,y=c.vy,T=p.vx,C=p.vy;if(v){var S=v.a,E=v.b,P=v.c,M=v.d,O=v.e,A=v.f;g=d.vx*S+d.vy*P+O,x=d.vx*E+d.vy*M+A,m=c.vx*S+c.vy*P+O,y=c.vx*E+c.vy*M+A,T=p.vx*S+p.vy*P+O,C=p.vx*E+p.vy*M+A}var R=T-g,F=C-x,I=m-g,D=y-x,N=l-g,z=f-x,U=R*R+F*F,W=R*I+F*D,w=R*N+F*z,L=I*I+D*D,B=I*N+D*z,b=U*L-W*W,G=b===0?0:1/b,Y=(L*w-W*B)*G,V=(U*B-W*w)*G;return Y>=0&&V>=0&&Y+V<1},isCounterClockwise:function(l){var f=this.vertex1,v=this.vertex2,d=this.vertex3,c=(v.vx-f.vx)*(d.vy-f.vy)-(v.vy-f.vy)*(d.vx-f.vx);return l<=0?c>=0:c<0},load:function(l,f,v,d,c){return v=this.vertex1.load(l,f,v,d,c),v=this.vertex2.load(l,f,v,d,c),v=this.vertex3.load(l,f,v,d,c),v},transformCoordinatesLocal:function(l,f,v,d){return this.vertex1.transformCoordinatesLocal(l,f,v,d),this.vertex2.transformCoordinatesLocal(l,f,v,d),this.vertex3.transformCoordinatesLocal(l,f,v,d),this},updateBounds:function(){var l=this.vertex1,f=this.vertex2,v=this.vertex3,d=this.bounds;return d.x=Math.min(l.vx,f.vx,v.vx),d.y=Math.min(l.vy,f.vy,v.vy),d.width=Math.max(l.vx,f.vx,v.vx)-d.x,d.height=Math.max(l.vy,f.vy,v.vy)-d.y,this},isInView:function(l,f,v,d,c,p,g,x,m,y,T){var C=this.vertex1.update(c,p,g,x,m,y,T,d),S=this.vertex2.update(c,p,g,x,m,y,T,d),E=this.vertex3.update(c,p,g,x,m,y,T,d);if(C.ta<=0&&S.ta<=0&&E.ta<=0||f&&!this.isCounterClockwise(v))return!1;var P=this.bounds;P.x=Math.min(C.tx,S.tx,E.tx),P.y=Math.min(C.ty,S.ty,E.ty),P.width=Math.max(C.tx,S.tx,E.tx)-P.x,P.height=Math.max(C.ty,S.ty,E.ty)-P.y;var M=l.x+l.width,O=l.y+l.height;return P.width<=0||P.height<=0||l.width<=0||l.height<=0?!1:!(P.right<l.x||P.bottom<l.y||P.x>M||P.y>O)},translate:function(l,f){f===void 0&&(f=0);var v=this.vertex1,d=this.vertex2,c=this.vertex3;return v.x+=l,v.y+=f,d.x+=l,d.y+=f,c.x+=l,c.y+=f,this},x:{get:function(){return this.getInCenter().x},set:function(l){var f=this.getInCenter();this.translate(l-f.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(l){var f=this.getInCenter();this.translate(0,l-f.y)}},alpha:{get:function(){var l=this.vertex1,f=this.vertex2,v=this.vertex3;return(l.alpha+f.alpha+v.alpha)/3},set:function(l){this.vertex1.alpha=l,this.vertex2.alpha=l,this.vertex3.alpha=l}},depth:{get:function(){var l=this.vertex1,f=this.vertex2,v=this.vertex3;return(l.vz+f.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(12),r=i(39),o=new s({Extends:r,initialize:function(l,f,v,d,c,p,g,x,m,y){p===void 0&&(p=16777215),g===void 0&&(g=1),x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=0),r.call(this,l,f,v),this.vx=0,this.vy=0,this.vz=0,this.nx=x,this.ny=m,this.nz=y,this.u=d,this.v=c,this.color=p,this.alpha=g,this.tx=0,this.ty=0,this.ta=0},setUVs:function(u,l){return this.u=u,this.v=l,this},transformCoordinatesLocal:function(u,l,f,v){var d=this.x,c=this.y,p=this.z,g=u.val,x=d*g[0]+c*g[4]+p*g[8]+g[12],m=d*g[1]+c*g[5]+p*g[9]+g[13],y=d*g[2]+c*g[6]+p*g[10]+g[14],T=d*g[3]+c*g[7]+p*g[11]+g[15];this.vx=x/T*l,this.vy=-(m/T)*f,v<=0?this.vz=y/T:this.vz=-(y/T)},update:function(u,l,f,v,d,c,p,g){var x=this.vx*u+this.vy*f+d,m=this.vx*l+this.vy*v+c;return p&&(x=Math.round(x),m=Math.round(m)),this.tx=x,this.ty=m,this.ta=this.alpha*g,this},load:function(u,l,f,v,d){return u[++f]=this.tx,u[++f]=this.ty,u[++f]=this.u,u[++f]=this.v,u[++f]=v,u[++f]=d,l[++f]=h.getTintAppendFloatAlpha(this.color,this.ta),f}});e.exports=o},function(e,a,i){var s={};e.exports=s;var h=i(166),r=i(32),o=i(84),u=i(41);(function(){s.create=function(l){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},l)},s.setModified=function(l,f,v,d){if(h.trigger(l,"compositeModified",l),l.isModified=f,v&&l.parent&&s.setModified(l.parent,f,v,d),d)for(var c=0;c<l.composites.length;c++){var p=l.composites[c];s.setModified(p,f,v,d)}},s.add=function(l,f){var v=[].concat(f);h.trigger(l,"beforeAdd",{object:f});for(var d=0;d<v.length;d++){var c=v[d];switch(c.type){case"body":if(c.parent!==c){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(l,c);break;case"constraint":s.addConstraint(l,c);break;case"composite":s.addComposite(l,c);break;case"mouseConstraint":s.addConstraint(l,c.constraint);break}}return h.trigger(l,"afterAdd",{object:f}),l},s.remove=function(l,f,v){var d=[].concat(f);h.trigger(l,"beforeRemove",{object:f});for(var c=0;c<d.length;c++){var p=d[c];switch(p.type){case"body":s.removeBody(l,p,v);break;case"constraint":s.removeConstraint(l,p,v);break;case"composite":s.removeComposite(l,p,v);break;case"mouseConstraint":s.removeConstraint(l,p.constraint);break}}return h.trigger(l,"afterRemove",{object:f}),l},s.addComposite=function(l,f){return l.composites.push(f),f.parent=l,s.setModified(l,!0,!0,!1),l},s.removeComposite=function(l,f,v){var d=l.composites.indexOf(f);if(d!==-1&&(s.removeCompositeAt(l,d),s.setModified(l,!0,!0,!1)),v)for(var c=0;c<l.composites.length;c++)s.removeComposite(l.composites[c],f,!0);return l},s.removeCompositeAt=function(l,f){return l.composites.splice(f,1),s.setModified(l,!0,!0,!1),l},s.addBody=function(l,f){return l.bodies.push(f),s.setModified(l,!0,!0,!1),l},s.removeBody=function(l,f,v){var d=l.bodies.indexOf(f);if(d!==-1&&(s.removeBodyAt(l,d),s.setModified(l,!0,!0,!1)),v)for(var c=0;c<l.composites.length;c++)s.removeBody(l.composites[c],f,!0);return l},s.removeBodyAt=function(l,f){return l.bodies.splice(f,1),s.setModified(l,!0,!0,!1),l},s.addConstraint=function(l,f){return l.constraints.push(f),s.setModified(l,!0,!0,!1),l},s.removeConstraint=function(l,f,v){var d=l.constraints.indexOf(f);if(d!==-1&&s.removeConstraintAt(l,d),v)for(var c=0;c<l.composites.length;c++)s.removeConstraint(l.composites[c],f,!0);return l},s.removeConstraintAt=function(l,f){return l.constraints.splice(f,1),s.setModified(l,!0,!0,!1),l},s.clear=function(l,f,v){if(v)for(var d=0;d<l.composites.length;d++)s.clear(l.composites[d],f,!0);return f?l.bodies=l.bodies.filter(function(c){return c.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,s.setModified(l,!0,!0,!1),l},s.allBodies=function(l){for(var f=[].concat(l.bodies),v=0;v<l.composites.length;v++)f=f.concat(s.allBodies(l.composites[v]));return f},s.allConstraints=function(l){for(var f=[].concat(l.constraints),v=0;v<l.composites.length;v++)f=f.concat(s.allConstraints(l.composites[v]));return f},s.allComposites=function(l){for(var f=[].concat(l.composites),v=0;v<l.composites.length;v++)f=f.concat(s.allComposites(l.composites[v]));return f},s.get=function(l,f,v){var d,c;switch(v){case"body":d=s.allBodies(l);break;case"constraint":d=s.allConstraints(l);break;case"composite":d=s.allComposites(l).concat(l);break}return d?(c=d.filter(function(p){return p.id.toString()===f.toString()}),c.length===0?null:c[0]):null},s.move=function(l,f,v){return s.remove(l,f),s.add(v,f),l},s.rebase=function(l){for(var f=s.allBodies(l).concat(s.allConstraints(l)).concat(s.allComposites(l)),v=0;v<f.length;v++)f[v].id=r.nextId();return s.setModified(l,!0,!0,!1),l},s.translate=function(l,f,v){for(var d=v?s.allBodies(l):l.bodies,c=0;c<d.length;c++)u.translate(d[c],f);return s.setModified(l,!0,!0,!1),l},s.rotate=function(l,f,v,d){for(var c=Math.cos(f),p=Math.sin(f),g=d?s.allBodies(l):l.bodies,x=0;x<g.length;x++){var m=g[x],y=m.position.x-v.x,T=m.position.y-v.y;u.setPosition(m,{x:v.x+(y*c-T*p),y:v.y+(y*p+T*c)}),u.rotate(m,f)}return s.setModified(l,!0,!0,!1),l},s.scale=function(l,f,v,d,c){for(var p=c?s.allBodies(l):l.bodies,g=0;g<p.length;g++){var x=p[g],m=x.position.x-d.x,y=x.position.y-d.y;u.setPosition(x,{x:d.x+m*f,y:d.y+y*v}),u.scale(x,f,v)}return s.setModified(l,!0,!0,!1),l},s.bounds=function(l){for(var f=s.allBodies(l),v=[],d=0;d<f.length;d+=1){var c=f[d];v.push(c.bounds.min,c.bounds.max)}return o.create(v)}})()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s>=0&&s<r.width&&h>=0&&h<r.height};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(29),r=i(2),o=new s({initialize:function(l){l===void 0&&(l={}),this.name=r(l,"name","layer"),this.x=r(l,"x",0),this.y=r(l,"y",0),this.width=r(l,"width",0),this.height=r(l,"height",0),this.tileWidth=r(l,"tileWidth",0),this.tileHeight=r(l,"tileHeight",0),this.baseTileWidth=r(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(l,"baseTileHeight",this.tileHeight),this.orientation=r(l,"orientation",h.ORTHOGONAL),this.widthInPixels=r(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(l,"alpha",1),this.visible=r(l,"visible",!0),this.properties=r(l,"properties",[]),this.indexes=r(l,"indexes",[]),this.collideIndexes=r(l,"collideIndexes",[]),this.callbacks=r(l,"callbacks",[]),this.bodies=r(l,"bodies",[]),this.data=r(l,"data",[]),this.tilemapLayer=r(l,"tilemapLayer",null),this.hexSideLength=r(l,"hexSideLength",0)}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(29),r=i(2),o=new s({initialize:function(l){l===void 0&&(l={}),this.name=r(l,"name","map"),this.width=r(l,"width",0),this.height=r(l,"height",0),this.infinite=r(l,"infinite",!1),this.tileWidth=r(l,"tileWidth",0),this.tileHeight=r(l,"tileHeight",0),this.widthInPixels=r(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(l,"heightInPixels",this.height*this.tileHeight),this.format=r(l,"format",null),this.orientation=r(l,"orientation",h.ORTHOGONAL),this.renderOrder=r(l,"renderOrder","right-down"),this.version=r(l,"version","1"),this.properties=r(l,"properties",{}),this.layers=r(l,"layers",[]),this.images=r(l,"images",[]),this.objects=r(l,"objects",{}),this.collision=r(l,"collision",{}),this.tilesets=r(l,"tilesets",[]),this.imageCollections=r(l,"imageCollections",[]),this.tiles=r(l,"tiles",[]),this.hexSideLength=r(l,"hexSideLength",0)}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f,v,d,c,p){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c={}),p===void 0&&(p={}),this.name=o,this.firstgid=u,this.tileWidth=l,this.tileHeight=f,this.tileMargin=v,this.tileSpacing=d,this.tileProperties=c,this.tileData=p,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var o=this.getTileData(r);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,o){return r!==void 0&&(this.tileWidth=r),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,o){return r!==void 0&&(this.tileMargin=r),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,o){var u=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),l=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(u%1!==0||l%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),u=Math.floor(u),l=Math.floor(l),this.rows=u,this.columns=l,this.total=u*l,this.texCoordinates.length=0;for(var f=this.tileMargin,v=this.tileMargin,d=0;d<this.rows;d++){for(var c=0;c<this.columns;c++)this.texCoordinates.push({x:f,y:v}),f+=this.tileWidth+this.tileSpacing;f=this.tileMargin,v+=this.tileHeight+this.tileSpacing}return this}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return r===void 0&&(r=1e-4),Math.abs(s-h)<r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(1068),u=new s({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,o],initialize:function(f,v,d,c,p){r.call(this,f,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setPosition(v,d),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.hasOwnProperty(h)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),h=function(r,o){var u=s(r);for(var l in o)u.hasOwnProperty(l)||(u[l]=o[l]);return u};e.exports=h},function(e,a,i){var s={};e.exports=s;var h=i(64),r=i(83),o=i(165),u=i(84),l=i(271),f=i(32);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(v){var d=v;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var c=d.bodyA?r.add(d.bodyA.position,d.pointA):d.pointA,p=d.bodyB?r.add(d.bodyB.position,d.pointB):d.pointB,g=r.magnitude(r.sub(c,p));d.length=typeof d.length<"u"?d.length:g,d.id=d.id||f.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var x={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return d.length===0&&d.stiffness>.1?(x.type="pin",x.anchors=!1):d.stiffness<.9&&(x.type="spring"),d.render=f.extend(x,d.render),d},s.preSolveAll=function(v){for(var d=0;d<v.length;d+=1){var c=v[d],p=c.constraintImpulse;c.isStatic||p.x===0&&p.y===0&&p.angle===0||(c.position.x+=p.x,c.position.y+=p.y,c.angle+=p.angle)}},s.solveAll=function(v,d){for(var c=0;c<v.length;c+=1){var p=v[c],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,x=!p.bodyB||p.bodyB&&p.bodyB.isStatic;(g||x)&&s.solve(v[c],d)}for(c=0;c<v.length;c+=1)p=v[c],g=!p.bodyA||p.bodyA&&p.bodyA.isStatic,x=!p.bodyB||p.bodyB&&p.bodyB.isStatic,!g&&!x&&s.solve(v[c],d)},s.solve=function(v,d){var c=v.bodyA,p=v.bodyB,g=v.pointA,x=v.pointB;if(!(!c&&!p)){c&&!c.isStatic&&(r.rotate(g,c.angle-v.angleA,g),v.angleA=c.angle),p&&!p.isStatic&&(r.rotate(x,p.angle-v.angleB,x),v.angleB=p.angle);var m=g,y=x;if(c&&(m=r.add(c.position,g)),p&&(y=r.add(p.position,x)),!(!m||!y)){var T=r.sub(m,y),C=r.magnitude(T);C<s._minLength&&(C=s._minLength);var S=(C-v.length)/C,E=v.stiffness<1?v.stiffness*d:v.stiffness,P=r.mult(T,S*E),M=(c?c.inverseMass:0)+(p?p.inverseMass:0),O=(c?c.inverseInertia:0)+(p?p.inverseInertia:0),A=M+O,R,F,I,D,N;if(v.damping){var z=r.create();I=r.div(T,C),N=r.sub(p&&r.sub(p.position,p.positionPrev)||z,c&&r.sub(c.position,c.positionPrev)||z),D=r.dot(I,N)}c&&!c.isStatic&&(F=c.inverseMass/M,c.constraintImpulse.x-=P.x*F,c.constraintImpulse.y-=P.y*F,c.position.x-=P.x*F,c.position.y-=P.y*F,v.damping&&(c.positionPrev.x-=v.damping*I.x*D*F,c.positionPrev.y-=v.damping*I.y*D*F),R=r.cross(g,P)/A*s._torqueDampen*c.inverseInertia*(1-v.angularStiffness),c.constraintImpulse.angle-=R,c.angle-=R),p&&!p.isStatic&&(F=p.inverseMass/M,p.constraintImpulse.x+=P.x*F,p.constraintImpulse.y+=P.y*F,p.position.x+=P.x*F,p.position.y+=P.y*F,v.damping&&(p.positionPrev.x+=v.damping*I.x*D*F,p.positionPrev.y+=v.damping*I.y*D*F),R=r.cross(x,P)/A*s._torqueDampen*p.inverseInertia*(1-v.angularStiffness),p.constraintImpulse.angle+=R,p.angle+=R)}}},s.postSolveAll=function(v){for(var d=0;d<v.length;d++){var c=v[d],p=c.constraintImpulse;if(!(c.isStatic||p.x===0&&p.y===0&&p.angle===0)){o.set(c,!1);for(var g=0;g<c.parts.length;g++){var x=c.parts[g];h.translate(x.vertices,p),g>0&&(x.position.x+=p.x,x.position.y+=p.y),p.angle!==0&&(h.rotate(x.vertices,p.angle,c.position),l.rotate(x.axes,p.angle),g>0&&r.rotateAbout(x.position,p.angle,c.position,x.position)),u.update(x.bounds,x.vertices,c.velocity)}p.angle*=s._warming,p.x*=s._warming,p.y*=s._warming}}},s.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+v.pointA.x,y:(v.bodyA?v.bodyA.position.y:0)+v.pointA.y}},s.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+v.pointB.x,y:(v.bodyB?v.bodyB.position.y:0)+v.pointB.y}}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h=i(65),r=i(66),o=i(0),u=i(11),l=i(15),f=i(10),v=i(57),d=new o({Extends:l,Mixins:[u.Depth,u.GetBounds,u.Origin,u.Transform,u.ScrollFactor,u.Visible],initialize:function(p,g,x,m,y){m===void 0&&(m=1),y===void 0&&(y=m),l.call(this,p,"Zone"),this.setPosition(g,x),this.width=m,this.height=y,this.blendMode=s.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,p,g){g===void 0&&(g=!0),this.width=c,this.height=p,this.updateDisplayOrigin();var x=this.input;return g&&x&&!x.customHitArea&&(x.hitArea.width=c,x.hitArea.height=p),this},setDisplaySize:function(c,p){return this.displayWidth=c,this.displayHeight=p,this},setCircleDropZone:function(c){return this.setDropZone(new h(0,0,c),r)},setRectangleDropZone:function(c,p){return this.setDropZone(new f(0,0,c,p),v)},setDropZone:function(c,p){return c===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(c,p,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(c,p,g){g.addToRenderList(p)},renderWebGL:function(c,p,g){g.addToRenderList(p)}});e.exports=d},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 2*(s.width+s.height)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var h=s.length-1;h>0;h--){var r=Math.floor(Math.random()*(h+1)),o=s[h];s[h]=s[r],s[r]=o}return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD_ANIMATION:i(724),ANIMATION_COMPLETE:i(725),ANIMATION_COMPLETE_KEY:i(726),ANIMATION_REPEAT:i(727),ANIMATION_RESTART:i(728),ANIMATION_START:i(729),ANIMATION_STOP:i(730),ANIMATION_UPDATE:i(731),PAUSE_ALL:i(732),REMOVE_ANIMATION:i(733),RESUME_ALL:i(734)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(36),o=i(9),u=i(37),l=i(10),f=i(25),v=i(187),d=i(3),c=new s({Extends:o,Mixins:[h.Alpha,h.Visible],initialize:function(g,x,m,y){g===void 0&&(g=0),x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=g,this._y=x,this._width=m,this._height=y,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new f,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new d(m/2,y/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(p){this.renderList.push(p)},setOrigin:function(p,g){return p===void 0&&(p=.5),g===void 0&&(g=p),this.originX=p,this.originY=g,this},getScroll:function(p,g,x){x===void 0&&(x=new d);var m=this.width*.5,y=this.height*.5;return x.x=p-m,x.y=g-y,this.useBounds&&(x.x=this.clampX(x.x),x.y=this.clampY(x.y)),x},centerOnX:function(p){var g=this.width*.5;return this.midPoint.x=p,this.scrollX=p-g,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(p){var g=this.height*.5;return this.midPoint.y=p,this.scrollY=p-g,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(p,g){return this.centerOnX(p),this.centerOnY(g),this},centerToBounds:function(){if(this.useBounds){var p=this._bounds,g=this.width*.5,x=this.height*.5;this.midPoint.set(p.centerX,p.centerY),this.scrollX=p.centerX-g,this.scrollY=p.centerY-x}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(p){if(this.disableCull)return p;var g=this.matrix.matrix,x=g[0],m=g[1],y=g[2],T=g[3],C=x*T-m*y;if(!C)return p;var S=g[4],E=g[5],P=this.scrollX,M=this.scrollY,O=this.width,A=this.height,R=this.y,F=R+A,I=this.x,D=I+O,N=this.culledObjects,z=p.length;C=1/C,N.length=0;for(var U=0;U<z;++U){var W=p[U];if(!W.hasOwnProperty("width")||W.parentContainer){N.push(W);continue}var w=W.width,L=W.height,B=W.x-P*W.scrollFactorX-w*W.originX,b=W.y-M*W.scrollFactorY-L*W.originY,G=B*x+b*y+S,Y=B*m+b*T+E,V=(B+w)*x+(b+L)*y+S,X=(B+w)*m+(b+L)*T+E;V>I&&G<D&&X>R&&Y<F&&N.push(W)}return N},getWorldPoint:function(p,g,x){x===void 0&&(x=new d);var m=this.matrix.matrix,y=m[0],T=m[1],C=m[2],S=m[3],E=m[4],P=m[5],M=y*S-T*C;if(!M)return x.x=p,x.y=g,x;M=1/M;var O=S*M,A=-T*M,R=-C*M,F=y*M,I=(C*P-S*E)*M,D=(T*E-y*P)*M,N=Math.cos(this.rotation),z=Math.sin(this.rotation),U=this.zoomX,W=this.zoomY,w=this.scrollX,L=this.scrollY,B=p+(w*N-L*z)*U,b=g+(w*z+L*N)*W;return x.x=B*O+b*R+I,x.y=B*A+b*F+D,x},ignore:function(p){var g=this.id;Array.isArray(p)||(p=[p]);for(var x=0;x<p.length;x++){var m=p[x];Array.isArray(m)?this.ignore(m):m.isParent?this.ignore(m.getChildren()):m.cameraFilter|=g}return this},preRender:function(){this.renderList.length=0;var p=this.width,g=this.height,x=p*.5,m=g*.5,y=this.zoomX,T=this.zoomY,C=this.matrix,S=p*this.originX,E=g*this.originY,P=this.scrollX,M=this.scrollY;this.useBounds&&(P=this.clampX(P),M=this.clampY(M)),this.roundPixels&&(S=Math.round(S),E=Math.round(E)),this.scrollX=P,this.scrollY=M;var O=P+x,A=M+m;this.midPoint.set(O,A);var R=p/y,F=g/T;this.worldView.setTo(O-R/2,A-F/2,R,F),C.applyITRS(this.x+S,this.y+E,this.rotation,y,T),C.translate(-S,-E)},clampX:function(p){var g=this._bounds,x=this.displayWidth,m=g.x+(x-this.width)/2,y=Math.max(m,m+g.width-x);return p<m?p=m:p>y&&(p=y),p},clampY:function(p){var g=this._bounds,x=this.displayHeight,m=g.y+(x-this.height)/2,y=Math.max(m,m+g.height-x);return p<m?p=m:p>y&&(p=y),p},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(p){return p===void 0&&(p=0),this.rotation=r(p),this},setBackgroundColor:function(p){return p===void 0&&(p="rgba(0,0,0,0)"),this.backgroundColor=v(p),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(p,g,x,m,y){return y===void 0&&(y=!1),this._bounds.setTo(p,g,x,m),this.dirty=!0,this.useBounds=!0,y?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(p){p===void 0&&(p=new l);var g=this._bounds;return p.setTo(g.x,g.y,g.width,g.height),p},setName:function(p){return p===void 0&&(p=""),this.name=p,this},setPosition:function(p,g){return g===void 0&&(g=p),this.x=p,this.y=g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setRoundPixels:function(p){return this.roundPixels=p,this},setScene:function(p){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=p;var g=p.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(p,g){return g===void 0&&(g=p),this.scrollX=p,this.scrollY=g,this},setSize:function(p,g){return g===void 0&&(g=p),this.width=p,this.height=g,this},setViewport:function(p,g,x,m){return this.x=p,this.y=g,this.width=x,this.height=m,this},setZoom:function(p,g){return p===void 0&&(p=1),g===void 0&&(g=p),p===0&&(p=.001),g===0&&(g=.001),this.zoomX=p,this.zoomY=g,this},setMask:function(p,g){return g===void 0&&(g=!0),this.mask=p,this._maskCamera=g?this.cameraManager.default:this,this},clearMask:function(p){return p===void 0&&(p=!1),p&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var p={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(p.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),p},update:function(){},updateSystem:function(){if(!!this.scaleManager){var p=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,g=this.sceneManager;p&&!this._customViewport?g.customViewports++:!p&&this._customViewport&&g.customViewports--,this.dirty=!0,this._customViewport=p}},destroy:function(){this.emit(u.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(p){this._x=p,this.updateSystem()}},y:{get:function(){return this._y},set:function(p){this._y=p,this.updateSystem()}},width:{get:function(){return this._width},set:function(p){this._width=p,this.updateSystem()}},height:{get:function(){return this._height},set:function(p){this._height=p,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(p){this._scrollX=p,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(p){this._scrollY=p,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(p){this._zoomX=p,this._zoomY=p,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(p){this._zoomX=p,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(p){this._zoomY=p,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(334),h=i(335),r=i(336),o=i(337),u=i(338),l=i(339),f=i(340),v=i(341),d=i(342),c=i(343),p=i(344),g=i(345);e.exports={Power0:f,Power1:v.Out,Power2:o.Out,Power3:d.Out,Power4:c.Out,Linear:f,Quad:v.Out,Cubic:o.Out,Quart:d.Out,Quint:c.Out,Sine:p.Out,Expo:l.Out,Circ:r.Out,Elastic:u.Out,Back:s.Out,Bounce:h.Out,Stepped:g,"Quad.easeIn":v.In,"Cubic.easeIn":o.In,"Quart.easeIn":d.In,"Quint.easeIn":c.In,"Sine.easeIn":p.In,"Expo.easeIn":l.In,"Circ.easeIn":r.In,"Elastic.easeIn":u.In,"Back.easeIn":s.In,"Bounce.easeIn":h.In,"Quad.easeOut":v.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":d.Out,"Quint.easeOut":c.Out,"Sine.easeOut":p.Out,"Expo.easeOut":l.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":u.Out,"Back.easeOut":s.Out,"Bounce.easeOut":h.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":d.InOut,"Quint.easeInOut":c.InOut,"Sine.easeInOut":p.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":u.InOut,"Back.easeInOut":s.InOut,"Bounce.easeInOut":h.InOut}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return(h-s)*r+s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(105),h={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function r(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?h.edge=!0:/Chrome\/(\d+)/.test(o)&&!s.windowsPhone?(h.chrome=!0,h.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(h.firefox=!0,h.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&s.iOS?h.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(h.ie=!0,h.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?h.opera=!0:/Safari/.test(o)&&!s.windowsPhone?h.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(h.ie=!0,h.trident=!0,h.tridentVersion=parseInt(RegExp.$1,10),h.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(h.silk=!0),h}e.exports=r()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return Math.random()*(h-s)+s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s>0&&(s&s-1)===0&&h>0&&(h&h-1)===0};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return r===void 0&&(r=0),h===0?s:(s-=r,s=h*Math.ceil(s/h),o?(r+s)/h:r+s)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=u||0,this.z=l||0,this.w=f||0)},clone:function(){return new h(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this.w=r.w||0,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z&&this.w===r.w},set:function(r,o,u,l){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=o||0,this.z=u||0,this.w=l||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this.w+=r.w||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this.w-=r.w||0,this},scale:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},length:function(){var r=this.x,o=this.y,u=this.z,l=this.w;return Math.sqrt(r*r+o*o+u*u+l*l)},lengthSq:function(){var r=this.x,o=this.y,u=this.z,l=this.w;return r*r+o*o+u*u+l*l},normalize:function(){var r=this.x,o=this.y,u=this.z,l=this.w,f=r*r+o*o+u*u+l*l;return f>0&&(f=1/Math.sqrt(f),this.x=r*f,this.y=o*f,this.z=u*f,this.w=l*f),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lerp:function(r,o){o===void 0&&(o=0);var u=this.x,l=this.y,f=this.z,v=this.w;return this.x=u+o*(r.x-u),this.y=l+o*(r.y-l),this.z=f+o*(r.z-f),this.w=v+o*(r.w-v),this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this.w*=r.w||1,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this.w/=r.w||1,this},distance:function(r){var o=r.x-this.x,u=r.y-this.y,l=r.z-this.z||0,f=r.w-this.w||0;return Math.sqrt(o*o+u*u+l*l+f*f)},distanceSq:function(r){var o=r.x-this.x,u=r.y-this.y,l=r.z-this.z||0,f=r.w-this.w||0;return o*o+u*u+l*l+f*f},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(r){var o=this.x,u=this.y,l=this.z,f=this.w,v=r.val;return this.x=v[0]*o+v[4]*u+v[8]*l+v[12]*f,this.y=v[1]*o+v[5]*u+v[9]*l+v[13]*f,this.z=v[2]*o+v[6]*u+v[10]*l+v[14]*f,this.w=v[3]*o+v[7]*u+v[11]*l+v[15]*f,this},transformQuat:function(r){var o=this.x,u=this.y,l=this.z,f=r.x,v=r.y,d=r.z,c=r.w,p=c*o+v*l-d*u,g=c*u+d*o-f*l,x=c*l+f*u-v*o,m=-f*o-v*u-d*l;return this.x=p*c+m*-f+g*-d-x*-v,this.y=g*c+m*-v+x*-f-p*-d,this.z=x*c+m*-d+p*-v-g*-f,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});h.prototype.sub=h.prototype.subtract,h.prototype.mul=h.prototype.multiply,h.prototype.div=h.prototype.divide,h.prototype.dist=h.prototype.distance,h.prototype.distSq=h.prototype.distanceSq,h.prototype.len=h.prototype.length,h.prototype.lenSq=h.prototype.lengthSq,e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(91),r=new s({initialize:function(u,l,f,v,d,c,p){v===void 0&&(v=1),d===void 0&&(d=0),c===void 0&&(c=!0),p===void 0&&(p=!1),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=d,this.autoClear=c,this.autoResize=!1,this.resize(l,f),p&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(h.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(h.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,u){var l=o*this.scale,f=u*this.scale;if(l!==this.width||f!==this.height){var v=this.renderer;v.deleteFramebuffer(this.framebuffer),v.deleteTexture(this.texture),o*=this.scale,u*=this.scale,o=Math.round(o),u=Math.round(u),o<=0&&(o=1),u<=0&&(u=1),this.texture=v.createTextureFromSource(null,o,u,this.minFilter),this.framebuffer=v.createFramebuffer(o,u,this.texture,!1),this.width=o,this.height=u}return this},bind:function(o,u,l){if(o===void 0&&(o=!1),o&&this.renderer.flush(),u&&l&&this.resize(u,l),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var f=this.renderer.gl;f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,u=o.gl;o.pushFramebuffer(this.framebuffer),u.disable(u.SCISSOR_TEST),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var u=this.renderer;return o&&u.flush(),u.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(h.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r;if(h)typeof h=="string"?r=document.getElementById(h):typeof h=="object"&&h.nodeType===1&&(r=h);else if(s.parentElement||h===null)return s;return r||(r=document.body),r.appendChild(s),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(77),r=i(9),o=i(70),u=i(22),l=i(1),f=i(207),v=i(428),d=new s({Extends:r,initialize:function(p){r.call(this),this.game=p,this.jsonCache=p.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,p.events.on(u.BLUR,this.onGameBlur,this),p.events.on(u.FOCUS,this.onGameFocus,this),p.events.on(u.PRE_STEP,this.update,this),p.events.once(u.DESTROY,this.destroy,this)},add:l,addAudioSprite:function(c,p){p===void 0&&(p={});var g=this.add(c,p);g.spritemap=this.jsonCache.get(c).spritemap;for(var x in g.spritemap)if(!!g.spritemap.hasOwnProperty(x)){var m=h(p),y=g.spritemap[x];m.loop=y.hasOwnProperty("loop")?y.loop:!1,g.addMarker({name:x,start:y.start,duration:y.end-y.start,config:m})}return g},get:function(c){return v(this.sounds,"key",c)},getAll:function(c){return f(this.sounds,"key",c)},play:function(c,p){var g=this.add(c);return g.once(o.COMPLETE,g.destroy,g),p?p.name?(g.addMarker(p),g.play(p.name)):g.play(p):g.play()},playAudioSprite:function(c,p,g){var x=this.addAudioSprite(c);return x.once(o.COMPLETE,x.destroy,x),x.play(p,g)},remove:function(c){var p=this.sounds.indexOf(c);return p!==-1?(c.destroy(),this.sounds.splice(p,1),!0):!1},removeAll:function(){this.sounds.forEach(function(c){c.destroy()}),this.sounds.length=0},removeByKey:function(c){for(var p=0,g=this.sounds.length-1;g>=0;g--){var x=this.sounds[g];x.key===c&&(x.destroy(),this.sounds.splice(g,1),p++)}return p},pauseAll:function(){this.forEachActiveSound(function(c){c.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(c){c.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(c){c.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(c){var p=0;return this.getAll(c).forEach(function(g){g.stop()&&p++}),p},unlock:l,onBlur:l,onFocus:l,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(c,p){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(x){x.update(c,p)})},destroy:function(){this.game.events.off(u.BLUR,this.onGameBlur,this),this.game.events.off(u.FOCUS,this.onGameFocus,this),this.game.events.off(u.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(c,p){var g=this;this.sounds.forEach(function(x,m){x&&!x.pendingRemove&&c.call(p||g,x,m,g.sounds)})},setRate:function(c){return this.rate=c,this},rate:{get:function(){return this._rate},set:function(c){this._rate=c,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(o.GLOBAL_RATE,this,c)}},setDetune:function(c){return this.detune=c,this},detune:{get:function(){return this._detune},set:function(c){this._detune=c,this.forEachActiveSound(function(p){p.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,c)}}});e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(70),o=i(17),u=i(1),l=new s({Extends:h,initialize:function(v,d,c){h.call(this),this.manager=v,this.key=d,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,c),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(console.error("addMarker "+f.name+" already exists in Sound"),!1):(f=o(!0,{name:"",start:0,duration:this.totalDuration-(f.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},f),this.markers[f.name]=f,!0)},updateMarker:function(f){return!f||!f.name||typeof f.name!="string"?!1:this.markers[f.name]?(this.markers[f.name]=o(!0,this.markers[f.name],f),!0):(console.warn("Audio Marker: "+f.name+" missing in Sound: "+this.key),!1)},removeMarker:function(f){var v=this.markers[f];return v?(this.markers[f]=null,v):null},play:function(f,v){if(f===void 0&&(f=""),typeof f=="object"&&(v=f,f=""),typeof f!="string")return!1;if(!f)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[f])return console.warn("Marker: "+f+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[f],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:u,calculateRate:function(){var f=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,d=Math.pow(f,v);this.totalRate=this.currentConfig.rate*this.manager.rate*d},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(209),h=i(435),r=function(o,u){if(u===void 0&&(u=90),!s(o))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")o=h(o),o.reverse();else if(u===-90||u===270||u==="rotateRight")o.reverse(),o=h(o);else if(Math.abs(u)===180||u==="rotate180"){for(var l=0;l<o.length;l++)o[l].reverse();o.reverse()}return o};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(18),r=i(11),o=i(15),u=i(1043),l=i(1044),f=i(212),v=i(10),d=i(1045),c=new s({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,d],initialize:function(g,x,m,y,T,C,S){T===void 0&&(T=""),S===void 0&&(S=0),o.call(this,g,"BitmapText"),this.font=y;var E=this.scene.sys.cache.bitmapFont.get(y);E||console.warn("Invalid BitmapText key: "+y),this.fontData=E.data,this._text="",this._fontSize=C||this.fontData.size,this._letterSpacing=0,this._align=S,this._bounds=u(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(x,m),this.setOrigin(0,0),this.initPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=c.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=c.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=c.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(p){return this._fontSize=p,this._dirty=!0,this},setLetterSpacing:function(p){return p===void 0&&(p=0),this._letterSpacing=p,this._dirty=!0,this},setText:function(p){return!p&&p!==0&&(p=""),Array.isArray(p)&&(p=p.join(`
`)),p!==this.text&&(this._text=p.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(p,g,x,m){return p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),m===void 0&&(m=.5),this.dropShadowX=p,this.dropShadowY=g,this.dropShadowColor=x,this.dropShadowAlpha=m,this},setCharacterTint:function(p,g,x,m,y,T,C){p===void 0&&(p=0),g===void 0&&(g=1),x===void 0&&(x=!1),m===void 0&&(m=-1),y===void 0&&(y=m,T=m,C=m);var S=this.text.length;g===-1&&(g=S),p<0&&(p=S+p),p=h(p,0,S-1);for(var E=h(p+g,p,S),P=this.charColors,M=p;M<E;M++){var O=P[M];if(m===-1)P[M]=null;else{var A=x?1:0;O?(O.tintEffect=A,O.tintTL=m,O.tintTR=y,O.tintBL=T,O.tintBR=C):P[M]={tintEffect:A,tintTL:m,tintTR:y,tintBL:T,tintBR:C}}}return this},setWordTint:function(p,g,x,m,y,T,C){g===void 0&&(g=1);for(var S=this.getTextBounds(),E=S.words,P=typeof p=="number",M=0,O=0;O<E.length;O++){var A=E[O];if((P&&O===p||!P&&A.word===p)&&(this.setCharacterTint(A.i,A.word.length,x,m,y,T,C),M++,M===g))return this}return this},getTextBounds:function(p){var g=this._bounds;return(this._dirty||p||this.scaleX!==g.scaleX||this.scaleY!==g.scaleY)&&(u(this,p,!0,g),this._dirty=!1),g},getCharacterAt:function(p,g,x){for(var m=this.getLocalPoint(p,g,null,x),y=this.getTextBounds(),T=y.characters,C=new v,S=0;S<T.length;S++){var E=T[S];if(C.setTo(E.x,E.t,E.r-E.x,E.b),C.contains(m.x,m.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(p,g,x){if(g===void 0&&(g=this._fontSize),x===void 0&&(x=this._align),p!==this.font){var m=this.scene.sys.cache.bitmapFont.get(p);m&&(this.font=p,this.fontData=m.data,this._fontSize=g,this._align=x,this.fromAtlas=m.fromAtlas===!0,this.setTexture(m.texture,m.frame),u(this,!1,!0,this._bounds))}return this},setMaxWidth:function(p,g){return this._maxWidth=p,this._dirty=!0,g!==void 0&&(this.wordWrapCharCode=g),this},align:{set:function(p){this._align=p,this._dirty=!0},get:function(){return this._align}},text:{set:function(p){this.setText(p)},get:function(){return this._text}},fontSize:{set:function(p){this._fontSize=p,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(p){this._letterSpacing=p,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(p){this._maxWidth=p,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var p=r.ToJSON(this),g={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return p.data=g,p},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});c.ALIGN_LEFT=0,c.ALIGN_CENTER=1,c.ALIGN_RIGHT=2,c.ParseFromAtlas=l,c.ParseXMLBitmapFont=f,e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var u=0;u<o.length;u++)this.set(o[u])},set:function(r){return this.entries.indexOf(r)===-1&&this.entries.push(r),this},get:function(r,o){for(var u=0;u<this.entries.length;u++){var l=this.entries[u];if(l[r]===o)return l}},getArray:function(){return this.entries.slice(0)},delete:function(r){var o=this.entries.indexOf(r);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var r=0;r<this.entries.length;r++){var o=this.entries[r];console.log(o)}console.groupEnd()},each:function(r,o){var u,l=this.entries.slice(),f=l.length;if(o)for(u=0;u<f&&r.call(o,l[u],u)!==!1;u++);else for(u=0;u<f&&r(l[u],u)!==!1;u++);return this},iterate:function(r,o){var u,l=this.entries.length;if(o)for(u=0;u<l&&r.call(o,this.entries[u],u)!==!1;u++);else for(u=0;u<l&&r(this.entries[u],u)!==!1;u++);return this},iterateLocal:function(r){var o,u=[];for(o=1;o<arguments.length;o++)u.push(arguments[o]);var l=this.entries.length;for(o=0;o<l;o++){var f=this.entries[o];f[r].apply(f,u)}return this},clear:function(){return this.entries.length=0,this},contains:function(r){return this.entries.indexOf(r)>-1},union:function(r){var o=new h;return r.entries.forEach(function(u){o.set(u)}),this.entries.forEach(function(u){o.set(u)}),o},intersect:function(r){var o=new h;return this.entries.forEach(function(u){r.contains(u)&&o.set(u)}),o},difference:function(r){var o=new h;return this.entries.forEach(function(u){r.contains(u)||o.set(u)}),o},size:{get:function(){return this.entries.length},set:function(r){return r<this.entries.length?this.entries.length=r:this.entries.length}}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(189),u=i(92),l=i(1182),f=new s({Extends:r,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible,l],initialize:function(d,c,p,g,x,m,y){g===void 0&&(g=16777215),x===void 0&&(x=128),m===void 0&&(m=1),y===void 0&&(y=.1),r.call(this,d,"PointLight"),this.initPipeline(u.POINTLIGHT_PIPELINE),this.setPosition(c,p),this.color=o(g),this.intensity=m,this.attenuation=y,this.width=x*2,this.height=x*2,this._radius=x},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});e.exports=f},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=h.width/2,o=h.height/2,u=Math.abs(s.x-h.x-r),l=Math.abs(s.y-h.y-o),f=r+s.radius,v=o+s.radius;if(u>f||l>v)return!1;if(u<=r||l<=o)return!0;var d=u-r,c=l-o,p=d*d,g=c*c,x=s.radius*s.radius;return p+g<=x};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.width<=0||s.height<=0||h.width<=0||h.height<=0?!1:!(s.right<h.x||s.bottom<h.y||s.x>h.right||s.y>h.bottom)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),h={},r={};r.register=function(o,u,l,f,v){h[o]={plugin:u,mapping:l,settingsKey:f,configKey:v}},r.getPlugin=function(o){return h[o]},r.install=function(o){var u=o.scene.sys,l=u.settings.input,f=u.game.config;for(var v in h){var d=h[v].plugin,c=h[v].mapping,p=h[v].settingsKey,g=h[v].configKey;s(l,p,f[g])&&(o[c]=new d(o))}},r.remove=function(o){h.hasOwnProperty(o)&&delete h[o]},e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ANY_KEY_DOWN:i(1323),ANY_KEY_UP:i(1324),COMBO_MATCH:i(1325),DOWN:i(1326),KEY_DOWN:i(1327),KEY_UP:i(1328),UP:i(1329)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.url?s.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?s.url:h+s.url:!1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l){return s===void 0&&(s=""),h===void 0&&(h=!0),r===void 0&&(r=""),o===void 0&&(o=""),u===void 0&&(u=0),l===void 0&&(l=!1),{responseType:s,async:h,user:r,password:o,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:l}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(243),r=i(73),o=new s({Extends:r,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(l,f,v,d,c){r.call(this,l,f,v,d,c),this.body=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(119),h=function(r,o,u,l){if(u===void 0&&(u=!1),s(r,o,l)){var f=l.data[o][r]||null;return f?f.index===-1?u?f:null:f:null}else return null};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=s.data,l=s.width,f=s.height,v=s.tilemapLayer,d=Math.max(0,h.left),c=Math.min(l,h.right),p=Math.max(0,h.top),g=Math.min(f,h.bottom),x,m,y;if(r===0)for(m=p;m<g;m++)for(x=d;u[m]&&x<c;x++)y=u[m][x],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(r===1)for(m=p;m<g;m++)for(x=c;u[m]&&x>=d;x--)y=u[m][x],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(r===2)for(m=g;m>=p;m--)for(x=d;u[m]&&x<c;x++)y=u[m][x],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(r===3)for(m=g;m>=p;m--)for(x=c;u[m]&&x>=d;x--)y=u[m][x],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);return v.tilesDrawn=o.length,v.tilesTotal=l*f,o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=r.collideIndexes.indexOf(s);h&&o===-1?r.collideIndexes.push(s):!h&&o!==-1&&r.collideIndexes.splice(o,1)};e.exports=i},function(e,a,i){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=function(r,o,u){if(!o)return{i:0,layers:r.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=o.x+s(o,"startx",0)*r.tilewidth+s(o,"offsetx",0),f=o.y+s(o,"starty",0)*r.tileheight+s(o,"offsety",0);return{i:0,layers:o.layers,name:u.name+o.name+"/",opacity:u.opacity*o.opacity,visible:u.visible&&o.visible,x:u.x+l,y:u.y+f}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o;if(s.hasOwnProperty(h)){var u=typeof s[h];u==="function"?o=function(l,f,v,d,c,p){return s[h](l,f,v,d,c,p)}:o=function(){return s[h]}}else typeof r=="function"?o=r:o=function(){return r};return o};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(265),h=i(13),r=i(99),o=i(80),u=i(162),l=i(583),f=i(263),v=i(6),d=i(264),c=i(266),p=i(268),g=function(x,m,y){y===void 0&&(y=s);for(var T=y.targets?y.targets:f(m),C=l(m),S=u(m,"delay",y.delay),E=u(m,"duration",y.duration),P=v(m,"easeParams",y.easeParams),M=o(v(m,"ease",y.ease),P),O=u(m,"hold",y.hold),A=u(m,"repeat",y.repeat),R=u(m,"repeatDelay",y.repeatDelay),F=r(m,"yoyo",y.yoyo),I=r(m,"flipX",y.flipX),D=r(m,"flipY",y.flipY),N=[],z=0;z<C.length;z++)for(var U=C[z].key,W=C[z].value,w=0;w<T.length;w++){var L=d(U,W),B=p(T[w],w,U,L.getEnd,L.getStart,L.getActive,o(v(W,"ease",M),v(W,"easeParams",P)),u(W,"delay",S),u(W,"duration",E),r(W,"yoyo",F),u(W,"hold",O),u(W,"repeat",A),u(W,"repeatDelay",R),r(W,"flipX",I),r(W,"flipY",D));N.push(B)}var b=new c(x,N,T);b.offset=h(m,"offset",null),b.completeDelay=h(m,"completeDelay",0),b.loop=Math.round(h(m,"loop",0)),b.loopDelay=Math.round(h(m,"loopDelay",0)),b.paused=r(m,"paused",!1),b.useFrames=r(m,"useFrames",!1);for(var G=v(m,"callbackScope",b),Y=[b,null],V=c.TYPES,X=0;X<V.length;X++){var H=V[X],k=v(m,H,!1);if(k){var $=v(m,H+"Scope",G),K=v(m,H+"Params",[]);b.setCallback(H,k,Y.concat(K),$)}}return b};e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(102),r=i(2),o=i(132),u=i(185),l=new s({initialize:function(v){this.parent=v,this.animationManager=v.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(f){var v=this.parent;if(f===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,v;Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var c=f[d];this.nextAnim===null?this.nextAnim=c:this.nextAnimsQueue.push(c)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(f){this.isPlaying&&this.stop();var v=this.animationManager,d=typeof f=="string"?f:r(f,"key",null),c=this.exists(d)?this.get(d):v.get(d);if(!c)console.warn("Missing animation: "+d);else{this.currentAnim=c;var p=c.getTotalFrames(),g=r(f,"frameRate",c.frameRate),x=r(f,"duration",c.duration);c.calculateDuration(this,p,x,g),this.delay=r(f,"delay",c.delay),this.repeat=r(f,"repeat",c.repeat),this.repeatDelay=r(f,"repeatDelay",c.repeatDelay),this.yoyo=r(f,"yoyo",c.yoyo),this.showOnStart=r(f,"showOnStart",c.showOnStart),this.hideOnComplete=r(f,"hideOnComplete",c.hideOnComplete),this.skipMissedFrames=r(f,"skipMissedFrames",c.skipMissedFrames),this.timeScale=r(f,"timeScale",this.timeScale);var m=r(f,"startFrame",0);m>c.getTotalFrames()&&(m=0);var y=c.frames[m];m===0&&!this.forward&&(y=c.getLastFrame()),this.currentFrame=y}return this.parent},pause:function(f){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),f!==void 0&&this.setCurrentFrame(f),this.parent},resume:function(f){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),f!==void 0&&this.setCurrentFrame(f),this.parent},playAfterDelay:function(f,v){if(!this.isPlaying)this.delayCounter=v,this.play(f,!0);else{var d=this.nextAnim,c=this.nextAnimsQueue;d&&c.unshift(d),this.nextAnim=f,this._pendingStop=1,this._pendingStopValue=v}return this.parent},playAfterRepeat:function(f,v){if(v===void 0&&(v=1),!this.isPlaying)this.play(f);else{var d=this.nextAnim,c=this.nextAnimsQueue;d&&c.unshift(d),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this.nextAnim=f,this._pendingStop=2,this._pendingStopValue=v}return this.parent},play:function(f,v){v===void 0&&(v=!1);var d=this.currentAnim,c=this.parent,p=typeof f=="string"?f:f.key;if(v&&this.isPlaying&&d.key===p)return c;if(d&&this.isPlaying){var g=this.animationManager.getMix(d.key,f);if(g>0)return this.playAfterDelay(f,g)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f)},playReverse:function(f,v){v===void 0&&(v=!1);var d=typeof f=="string"?f:f.key;return v&&this.isPlaying&&this.currentAnim.key===d?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(f))},startAnimation:function(f){this.load(f);var v=this.currentAnim,d=this.parent;return v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,v.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),d},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(f,v){var d=this.currentAnim,c=this.currentFrame,p=this.parent,g=c.textureFrame;p.emit(f,d,c,p,g),v&&p.emit(v+d.key,d,c,p,g)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var f=this.currentFrame;if(!f)return 0;var v=f.progress;return this.inReverse&&(v*=-1),v},setProgress:function(f){return this.forward||(f=1-f),this.setCurrentFrame(this.currentAnim.getFrameByProgress(f)),this.parent},setRepeat:function(f){return this.repeatCounter=f===-1?Number.MAX_VALUE:f,this.parent},globalRemove:function(f,v){v===void 0&&(v=this.currentAnim),this.isPlaying&&v.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(f,v){f===void 0&&(f=!1),v===void 0&&(v=!1);var d=this.currentAnim,c=this.parent;return d?(v&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),d.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!f,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(d.frames[0]),this.parent):c},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(f)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var f=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(f)}return this.parent},stopAfterDelay:function(f){return this._pendingStop=1,this._pendingStopValue=f,this.parent},stopAfterRepeat:function(f){return f===void 0&&(f=1),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=f,this.parent},stopOnFrame:function(f){return this._pendingStop=3,this._pendingStopValue=f,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(f,v){var d=this.currentAnim;if(!(!this.isPlaying||!d||d.paused)){if(this.accumulator+=v*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=v,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var c=0;do this.forward?d.nextFrame(this):d.previousFrame(this),c++;while(this.isPlaying&&this.accumulator>this.nextTick&&c<60)}}},setCurrentFrame:function(f){var v=this.parent;return this.currentFrame=f,v.texture=f.frame.texture,v.frame=f.frame,v.isCropped&&v.frame.updateCropUVs(v._crop,v.flipX,v.flipY),f.setAlpha&&(v.alpha=f.alpha),v.setSizeToFrame(),v._originComponent&&(f.frame.customPivot?v.setOrigin(f.frame.pivotX,f.frame.pivotY):v.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===f&&this.stop()),v},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(f){return this.anims?this.anims.get(f):null},exists:function(f){return this.anims?this.anims.has(f):!1},create:function(f){var v=f.key,d=!1;return v&&(d=this.get(v),d||(d=new u(this,v,f),this.anims||(this.anims=new h),this.anims.set(v,d))),d},generateFrameNames:function(f,v){return this.animationManager.generateFrameNames(f,v)},generateFrameNumbers:function(f,v){return this.animationManager.generateFrameNumbers(f,v)},remove:function(f){var v=this.get(f);return v&&(this.currentAnim===v&&this.stop(),this.anims.delete(f)),v},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});e.exports=l},function(e,a,i){var s={};e.exports=s;var h=i(166);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(r,o){for(var u=o*o*o,l=0;l<r.length;l++){var f=r[l],v=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){s.set(f,!1);continue}var d=Math.min(f.motion,v),c=Math.max(f.motion,v);f.motion=s._minBias*d+(1-s._minBias)*c,f.sleepThreshold>0&&f.motion<s._motionSleepThreshold*u?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&s.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},s.afterCollisions=function(r,o){for(var u=o*o*o,l=0;l<r.length;l++){var f=r[l];if(!!f.isActive){var v=f.collision,d=v.bodyA.parent,c=v.bodyB.parent;if(!(d.isSleeping&&c.isSleeping||d.isStatic||c.isStatic)&&(d.isSleeping||c.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:c,g=p===d?c:d;!p.isStatic&&g.motion>s._motionWakeThreshold*u&&s.set(p,!1)}}}},s.set=function(r,o){var u=r.isSleeping;o?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,u||h.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,u&&h.trigger(r,"sleepEnd"))}})()},function(e,a,i){var s={};e.exports=s;var h=i(32);(function(){s.on=function(r,o,u){for(var l=o.split(" "),f,v=0;v<l.length;v++)f=l[v],r.events=r.events||{},r.events[f]=r.events[f]||[],r.events[f].push(u);return u},s.off=function(r,o,u){if(!o){r.events={};return}typeof o=="function"&&(u=o,o=h.keys(r.events).join(" "));for(var l=o.split(" "),f=0;f<l.length;f++){var v=r.events[l[f]],d=[];if(u&&v)for(var c=0;c<v.length;c++)v[c]!==u&&d.push(v[c]);r.events[l[f]]=d}},s.trigger=function(r,o,u){var l,f,v,d,c=r.events;if(c&&h.keys(c).length>0){u||(u={}),l=o.split(" ");for(var p=0;p<l.length;p++)if(f=l[p],v=c[f],v){d=h.clone(u,!1),d.name=f,d.source=r;for(var g=0;g<v.length;g++)v[g].apply(r,[d])}}}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(175),h=i(92),r=i(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(u){u===void 0&&(u=h.MULTI_PIPELINE);var l=this.scene.sys.renderer;if(!l)return!1;var f=l.pipelines;if(this.postPipelines=[],this.pipelineData={},f){var v=f.get(u);if(v)return this.defaultPipeline=v,this.pipeline=v,!0}return!1},setPipeline:function(u,l,f){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){var c=d.get(u);c&&(this.pipeline=c),l&&(this.pipelineData=f?s(l):l)}return this},setPostPipeline:function(u,l,f){var v=this.scene.sys.renderer;if(!v)return this;var d=v.pipelines;if(d){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var p=d.getPostPipeline(u[c],this);p&&this.postPipelines.push(p)}l&&(this.pipelineData=f?s(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(u,l){var f=this.pipelineData;return l===void 0?delete f[u]:f[u]=l,this},getPostPipeline:function(u){for(var l=this.postPipelines,f=[],v=0;v<l.length;v++){var d=l[v];(typeof u=="string"&&d.name===u||d instanceof u)&&f.push(d)}return f.length===1?f[0]:f},resetPipeline:function(u,l){return u===void 0&&(u=!1),l===void 0&&(l=!1),this.pipeline=this.defaultPipeline,u&&(this.postPipelines=[],this.hasPostPipeline=!1),l&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(u){u===void 0&&(u=!1);for(var l=this.postPipelines,f=0;f<l.length;f++)l[f].destroy();this.postPipelines=[],this.hasPostPipeline=!1,u&&(this.pipelineData={})},removePostPipeline:function(u){for(var l=this.postPipelines,f=l.length-1;f>=0;f--){var v=l[f];(typeof u=="string"&&v.name===u||typeof u!="string"&&v instanceof u)&&(v.destroy(),r(l,f))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={DEFAULT:0,LINEAR:0,NEAREST:1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u){return u===void 0&&(u=new s),u.x=r.x+r.radius*Math.cos(o),u.y=r.y+r.radius*Math.sin(o),u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){o===void 0&&(o=new s);var u=2*Math.PI*Math.random(),l=Math.random()+Math.random(),f=l>1?2-l:l,v=f*Math.cos(u),d=f*Math.sin(u);return o.x=r.x+v*r.radius,o.y=r.y+d*r.radius,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(130),h=i(4),r=function(o,u,l){if(l===void 0&&(l=new h),u<=0||u>=1)return l.x=o.x,l.y=o.y,l;var f=s(o)*u;return u>.5?(f-=o.width+o.height,f<=o.width?(l.x=o.right-f,l.y=o.bottom):(l.x=o.x,l.y=o.bottom-(f-o.width))):f<=o.width?(l.x=o.x+f,l.y=o.y):(l.x=o.right,l.y=o.y+(f-o.width)),l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),h=i(4),r=function(o,u,l,f){f===void 0&&(f=[]),!u&&l>0&&(u=s(o)/l);for(var v=o.x1,d=o.y1,c=o.x2,p=o.y2,g=0;g<u;g++){var x=g/u,m=v+(c-v)*x,y=d+(p-d)*x;f.push(new h(m,y))}return f};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){o===void 0&&(o=new s);var u=Math.random();return o.x=r.x1+u*(r.x2-r.x1),o.y=r.y1+u*(r.y2-r.y1),o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){return o===void 0&&(o=new s),o.x=r.x+Math.random()*r.width,o.y=r.y+Math.random()*r.height,o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h,r,o;if(typeof s!="object"||s===null)return s;h=Array.isArray(s)?[]:{};for(o in s)r=s[o],h[o]=i(r);return h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h={name:s.name,type:s.type,x:s.x,y:s.y,depth:s.depth,scale:{x:s.scaleX,y:s.scaleY},origin:{x:s.originX,y:s.originY},flipX:s.flipX,flipY:s.flipY,rotation:s.rotation,alpha:s.alpha,visible:s.visible,blendMode:s.blendMode,textureKey:"",frameKey:"",data:{}};return s.texture&&(h.textureKey=s.texture.key,h.frameKey=s.frame.name),h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f,v,d,c){c===void 0&&(c=new s);var p=Math.sin(f),g=Math.cos(f),x=g*v,m=p*v,y=-p*d,T=g*d,C=1/(x*T+y*-m);return c.x=T*C*r+-y*C*o+(l*y-u*T)*C,c.y=x*C*o+-m*C*r+(-l*x+u*m)*C,c};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=1);for(var r=null,o=0;o<h;o++)r=s.shift(),s.push(r);return r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=1);for(var r=null,o=0;o<h;o++)r=s.pop(),s.unshift(r);return r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){o===void 0&&(o=new s);var u=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return o.x=r.x+l*Math.cos(u)*r.width/2,o.y=r.y+l*Math.sin(u)*r.height/2,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){o===void 0&&(o=new s);var u=r.x2-r.x1,l=r.y2-r.y1,f=r.x3-r.x1,v=r.y3-r.y1,d=Math.random(),c=Math.random();return d+c>=1&&(d=1-d,c=1-c),o.x=r.x1+(u*d+f*c),o.y=r.y1+(l*d+v*c),o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){var l=o+Math.atan2(s.y-r,s.x-h);return s.x=h+u*Math.cos(l),s.y=r+u*Math.sin(l),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s=Math.max(0,Math.min(1,(s-h)/(r-h))),s*s*s*(s*(s*6-15)+10)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s<=h?0:s>=r?1:(s=(s-h)/(r-h),s*s*(3-2*s))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(132),o=i(318),u=i(319),l=i(6),f=i(320),v=new h({initialize:function(c,p,g){this.manager=c,this.key=p,this.type="frame",this.frames=this.getFrames(c.textureManager,l(g,"frames",[]),l(g,"defaultTextureKey",null),l(g,"sortFrames",!0)),this.frameRate=l(g,"frameRate",null),this.duration=l(g,"duration",null),this.msPerFrame,this.skipMissedFrames=l(g,"skipMissedFrames",!0),this.delay=l(g,"delay",0),this.repeat=l(g,"repeat",0),this.repeatDelay=l(g,"repeatDelay",0),this.yoyo=l(g,"yoyo",!1),this.showOnStart=l(g,"showOnStart",!1),this.hideOnComplete=l(g,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(d,c,p,g){p===null&&g===null?(d.frameRate=24,d.duration=24/c*1e3):p&&g===null?(d.duration=p,d.frameRate=c/(p/1e3)):(d.frameRate=g,d.duration=c/g*1e3),d.msPerFrame=1e3/d.frameRate},addFrame:function(d){return this.addFrameAt(this.frames.length,d)},addFrameAt:function(d,c){var p=this.getFrames(this.manager.textureManager,c);if(p.length>0){if(d===0)this.frames=p.concat(this.frames);else if(d===this.frames.length)this.frames=this.frames.concat(p);else{var g=this.frames.slice(0,d),x=this.frames.slice(d);this.frames=g.concat(p,x)}this.updateFrameSequence()}return this},checkFrame:function(d){return d>=0&&d<this.frames.length},getFirstTick:function(d){d.accumulator=0,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameAt:function(d){return this.frames[d]},getFrames:function(d,c,p,g){g===void 0&&(g=!0);var x=[],m,y,T=1,C,S;if(typeof c=="string"){S=c;var E=d.get(S),P=E.getFrameNames();g&&f(P),c=[],P.forEach(function(I){c.push({key:S,frame:I})})}if(!Array.isArray(c)||c.length===0)return x;for(C=0;C<c.length;C++){var M=c[C],O=l(M,"key",p);if(!!O){var A=l(M,"frame",0),R=d.getFrame(O,A);y=new u(O,A,T,R),y.duration=l(M,"duration",0),y.isFirst=!m,m&&(m.nextFrame=y,y.prevFrame=m),x.push(y),m=y,T++}}if(x.length>0){y.isLast=!0,y.nextFrame=x[0],x[0].prevFrame=y;var F=1/(x.length-1);for(C=0;C<x.length;C++)x[C].progress=C*F}return x},getNextTick:function(d){d.accumulator-=d.nextTick,d.nextTick=d.msPerFrame+d.currentFrame.duration},getFrameByProgress:function(d){return d=s(d,0,1),o(d,this.frames,"progress")},nextFrame:function(d){var c=d.currentFrame;c.isLast?d.yoyo?this.handleYoyoFrame(d,!1):d.repeatCounter>0?d.inReverse&&d.forward?d.forward=!1:this.repeatAnimation(d):d.complete():this.updateAndGetNextTick(d,c.nextFrame)},handleYoyoFrame:function(d,c){if(c||(c=!1),d.inReverse===!c&&d.repeatCounter>0){(d.repeatDelay===0||d.pendingRepeat)&&(d.forward=c),this.repeatAnimation(d);return}if(d.inReverse!==c&&d.repeatCounter===0){d.complete();return}d.forward=c;var p=c?d.currentFrame.nextFrame:d.currentFrame.prevFrame;this.updateAndGetNextTick(d,p)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(d){var c=d.currentFrame;c.isFirst?d.yoyo?this.handleYoyoFrame(d,!0):d.repeatCounter>0?d.inReverse&&!d.forward?this.repeatAnimation(d):(d.forward=!0,this.repeatAnimation(d)):d.complete():this.updateAndGetNextTick(d,c.prevFrame)},updateAndGetNextTick:function(d,c){d.setCurrentFrame(c),this.getNextTick(d)},removeFrame:function(d){var c=this.frames.indexOf(d);return c!==-1&&this.removeFrameAt(c),this},removeFrameAt:function(d){return this.frames.splice(d,1),this.updateFrameSequence(),this},repeatAnimation:function(d){if(d._pendingStop===2){if(d._pendingStopValue===0)return d.stop();d._pendingStopValue--}d.repeatDelay>0&&!d.pendingRepeat?(d.pendingRepeat=!0,d.accumulator-=d.nextTick,d.nextTick+=d.repeatDelay):(d.repeatCounter--,d.forward?d.setCurrentFrame(d.currentFrame.nextFrame):d.setCurrentFrame(d.currentFrame.prevFrame),d.isPlaying&&(this.getNextTick(d),d.handleRepeat()))},toJSON:function(){var d={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(c){d.frames.push(c.toJSON())}),d},updateFrameSequence:function(){for(var d=this.frames.length,c=1/(d-1),p,g=0;g<d;g++)p=this.frames[g],p.index=g+1,p.isFirst=!1,p.isLast=!1,p.progress=g*c,g===0?(p.isFirst=!0,d===1?(p.isLast=!0,p.nextFrame=p,p.prevFrame=p):(p.isLast=!1,p.prevFrame=this.frames[d-1],p.nextFrame=this.frames[g+1])):g===d-1&&d>1?(p.isLast=!0,p.prevFrame=this.frames[d-2],p.nextFrame=this.frames[0]):d>1&&(p.prevFrame=this.frames[g-1],p.nextFrame=this.frames[g+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var d=0;d<this.frames.length;d++)this.frames[d].destroy();this.frames=[],this.manager=null}});e.exports=v},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h===void 0&&(h=0),r===void 0&&(r=" "),o===void 0&&(o=3),s=s.toString();var u=0;if(h+1>=s.length)switch(o){case 1:s=new Array(h+1-s.length).join(r)+s;break;case 3:var l=Math.ceil((u=h-s.length)/2),f=u-l;s=new Array(f+1).join(r)+s+new Array(l+1).join(r);break;default:s=s+new Array(h+1-s.length).join(r);break}return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(327),h=i(189),r=i(331),o=i(332),u=function(l){var f=typeof l;switch(f){case"string":return l.substr(0,3).toLowerCase()==="rgb"?o(l):s(l);case"number":return h(l);case"object":return r(l)}};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(103);function h(o,u,l,f){var v=(o+u*6)%6,d=Math.min(v,4-v,1);return Math.round(255*(f-f*l*Math.max(0,d)))}var r=function(o,u,l,f){u===void 0&&(u=1),l===void 0&&(l=1);var v=h(5,o,u,l),d=h(3,o,u,l),c=h(1,o,u,l);return f?f.setTo?f.setTo(v,d,c,f.alpha,!1):(f.r=v,f.g=d,f.b=c,f.color=s(v,d,c),f):{r:v,g:d,b:c,color:s(v,d,c)}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),h=i(330),r=function(o){var u=h(o);return new s(u.r,u.g,u.b,u.a)};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.x=h-s.width/2,s.y=r-s.height/2,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(105),h=i(136),r=i(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function u(){var f=new ArrayBuffer(4),v=new Uint8Array(f),d=new Uint32Array(f);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,d[0]===3569595041?!0:d[0]===2712847316?!1:null}function l(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch{o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var f=!1,v=function(){if(window.WebGLRenderingContext)try{var d=r.createWebGL(this),c=d.getContext("webgl")||d.getContext("experimental-webgl"),p=r.create2D(this),g=p.getContext("2d"),x=g.createImageData(1,1);return f=x.data instanceof Uint8ClampedArray,r.remove(d),r.remove(p),!!c}catch{return!1}return!1};return o.webGL=v(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,h.firefox&&h.firefoxVersion<21&&(o.getUserMedia=!1),!s.iOS&&(h.ie||h.firefox||h.chrome)&&(o.canvasBitBltShift=!0),(h.safari||h.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(o.littleEndian=u()),o.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&o.littleEndian!==null&&f,o}e.exports=l()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="",s=function(){var h=function(l){for(var f=["i","webkitI","msI","mozI","oI"],v=0;v<f.length;v++){var d=f[v]+"mageSmoothingEnabled";if(d in l)return d}return null},r=function(l){return i===""&&(i=h(l)),i&&(l[i]=!0),l},o=function(l){return i===""&&(i=h(l)),i&&(l[i]=!1),l},u=function(l){return i!==null?l[i]:null};return{disable:o,enable:r,getPrefix:h,isEnabled:u}};e.exports=s()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=i(17),r={Angle:i(812),Distance:i(821),Easing:i(826),Fuzzy:i(827),Interpolation:i(830),Pow2:i(835),Snap:i(837),RandomDataGenerator:i(839),Average:i(840),Bernstein:i(356),Between:i(195),CatmullRom:i(194),CeilTo:i(841),Clamp:i(18),DegToRad:i(36),Difference:i(842),Euler:i(843),Factorial:i(357),FloatBetween:i(137),FloorTo:i(844),FromPercent:i(98),GetSpeed:i(845),IsEven:i(846),IsEvenStrict:i(847),Linear:i(135),MaxAdd:i(848),Median:i(849),MinSub:i(850),Percent:i(851),RadToDeg:i(196),RandomXY:i(852),RandomXYZ:i(853),RandomXYZW:i(854),Rotate:i(362),RotateAround:i(308),RotateAroundDistance:i(182),RotateTo:i(855),RoundAwayFromZero:i(363),RoundTo:i(856),SinCosTableGenerator:i(857),SmootherStep:i(183),SmoothStep:i(184),ToXY:i(858),TransformXY:i(177),Within:i(859),Wrap:i(68),Vector2:i(3),Vector3:i(39),Vector4:i(140),Matrix3:i(364),Matrix4:i(69),Quaternion:i(365),RotateVec3:i(860)};r=h(!1,r,s),e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){var l=(o-h)*.5,f=(u-r)*.5,v=s*s,d=s*v;return(2*r-2*o+l+f)*d+(-3*r+3*o-2*l-f)*v+l*s+r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return Math.floor(Math.random()*(h-s+1)+s)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=function(r){return r*s.RAD_TO_DEG};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(r){return this._matrix=r,this._dirty=!0,this},reset:function(){var r=this._matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=1,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=1,r[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var r=new Float32Array(this._matrix);r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._data=r,this._dirty=!1}return this._data},brightness:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var u=r;return this.multiply([u,0,0,0,0,0,u,0,0,0,0,0,u,0,0,0,0,0,1,0],o)},saturate:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var u=r*2/3+1,l=(u-1)*-.5;return this.multiply([u,l,l,0,0,l,u,l,0,0,l,l,u,0,0,0,0,0,1,0],o)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1),r=r/180*Math.PI;var u=Math.cos(r),l=Math.sin(r),f=.213,v=.715,d=.072;return this.multiply([f+u*(1-f)+l*-f,v+u*-v+l*-v,d+u*-d+l*(1-d),0,0,f+u*-f+l*.143,v+u*(1-v)+l*.14,d+u*-d+l*-.283,0,0,f+u*-f+l*-(1-f),v+u*-v+l*v,d+u*(1-d)+l*d,0,0,0,0,0,1,0],o)},grayscale:function(r,o){return r===void 0&&(r=1),o===void 0&&(o=!1),this.saturate(-r,o)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},contrast:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var u=r+1,l=-.5*(u-1);return this.multiply([u,0,0,0,l,0,u,0,0,l,0,0,u,0,l,0,0,0,1,0],o)},negative:function(r){return r===void 0&&(r=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},night:function(r,o){return r===void 0&&(r=.1),o===void 0&&(o=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],o)},lsd:function(r){return r===void 0&&(r=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},brown:function(r){return r===void 0&&(r=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},multiply:function(r,o){o||this.reset();for(var u=this._matrix,l=[],f=0;f<20;f++)l[f]=u[f];return u[0]=l[0]*r[0]+l[1]*r[5]+l[2]*r[10]+l[3]*r[15],u[1]=l[0]*r[1]+l[1]*r[6]+l[2]*r[11]+l[3]*r[16],u[2]=l[0]*r[2]+l[1]*r[7]+l[2]*r[12]+l[3]*r[17],u[3]=l[0]*r[3]+l[1]*r[8]+l[2]*r[13]+l[3]*r[18],u[4]=l[0]*r[4]+l[1]*r[9]+l[2]*r[14]+l[3]*r[19]+l[4],u[5]=l[5]*r[0]+l[6]*r[5]+l[7]*r[10]+l[8]*r[15],u[6]=l[5]*r[1]+l[6]*r[6]+l[7]*r[11]+l[8]*r[16],u[7]=l[5]*r[2]+l[6]*r[7]+l[7]*r[12]+l[8]*r[17],u[8]=l[5]*r[3]+l[6]*r[8]+l[7]*r[13]+l[8]*r[18],u[9]=l[5]*r[4]+l[6]*r[9]+l[7]*r[14]+l[8]*r[19]+l[9],u[10]=l[10]*r[0]+l[11]*r[5]+l[12]*r[10]+l[13]*r[15],u[11]=l[10]*r[1]+l[11]*r[6]+l[12]*r[11]+l[13]*r[16],u[12]=l[10]*r[2]+l[11]*r[7]+l[12]*r[12]+l[13]*r[17],u[13]=l[10]*r[3]+l[11]*r[8]+l[12]*r[13]+l[13]*r[18],u[14]=l[10]*r[4]+l[11]*r[9]+l[12]*r[14]+l[13]*r[19]+l[14],u[15]=l[15]*r[0]+l[16]*r[5]+l[17]*r[10]+l[18]*r[15],u[16]=l[15]*r[1]+l[16]*r[6]+l[17]*r[11]+l[18]*r[16],u[17]=l[15]*r[2]+l[16]*r[7]+l[17]*r[12]+l[18]*r[17],u[18]=l[15]*r[3]+l[16]*r[8]+l[17]*r[13]+l[18]*r[18],u[19]=l[15]*r[4]+l[16]*r[9]+l[17]*r[14]+l[18]*r[19]+l[19],this._dirty=!0,this}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=i(14),r=function(o,u){if(u===void 0&&(u=new s),o.length===0)return u;for(var l=Number.MAX_VALUE,f=Number.MAX_VALUE,v=h.MIN_SAFE_INTEGER,d=h.MIN_SAFE_INTEGER,c,p,g,x=0;x<o.length;x++)c=o[x],Array.isArray(c)?(p=c[0],g=c[1]):(p=c.x,g=c.y),l=Math.min(l,p),f=Math.min(f,g),v=Math.max(v,p),d=Math.max(d,g);return u.x=l,u.y=f,u.width=v-l,u.height=d-f,u};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(1),r=new s({initialize:function(u,l,f){this._rgb=[0,0,0],this.onChangeCallback=h,this.dirty=!1,this.set(u,l,f)},set:function(o,u,l){return o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),this._rgb=[o,u,l],this.onChange(),this},equals:function(o,u,l){var f=this._rgb;return f.r===o&&f.g===u&&f.b===l},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={CENTER:i(403),ORIENTATION:i(404),SCALE_MODE:i(405),ZOOM:i(406)};e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){s.parentNode&&s.parentNode.removeChild(s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(144),r=i(197),o=i(20),u=i(419),l=i(420),f=i(33),v=i(1),d=i(421),c=new s({initialize:function(g,x){this.scene=g,this.game,this.renderer,this.config=x,this.settings=d.create(x),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=v},init:function(p){this.settings.status=h.INIT,this.sceneUpdate=v,this.game=p,this.renderer=p.renderer,this.canvas=p.canvas,this.context=p.context;var g=p.plugins;this.plugins=g,g.addToScene(this,r.Global,[r.CoreScene,l(this),u(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(p,g){var x=this.events;x.emit(o.PRE_UPDATE,p,g),x.emit(o.UPDATE,p,g),this.sceneUpdate.call(this.scene,p,g),x.emit(o.POST_UPDATE,p,g)},render:function(p){var g=this.displayList;g.depthSort(),this.events.emit(o.PRE_RENDER,p),this.cameras.render(p,g),this.events.emit(o.RENDER,p)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(p){var g=this.events,x=this.settings;return this.settings.active&&(x.status=h.PAUSED,x.active=!1,g.emit(o.PAUSE,this,p)),this},resume:function(p){var g=this.events,x=this.settings;return this.settings.active||(x.status=h.RUNNING,x.active=!0,g.emit(o.RESUME,this,p)),this},sleep:function(p){var g=this.events,x=this.settings;return x.status=h.SLEEPING,x.active=!1,x.visible=!1,g.emit(o.SLEEP,this,p),this},wake:function(p){var g=this.events,x=this.settings;return x.status=h.RUNNING,x.active=!0,x.visible=!0,g.emit(o.WAKE,this,p),x.isTransition&&g.emit(o.TRANSITION_WAKE,x.transitionFrom,x.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===h.SLEEPING},isActive:function(){return this.settings.status===h.RUNNING},isPaused:function(){return this.settings.status===h.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(p){return this.settings.visible=p,this},setActive:function(p,g){return p?this.resume(g):this.pause(g)},start:function(p){var g=this.events,x=this.settings;p&&(x.data=p),x.status=h.START,x.active=!0,x.visible=!0,g.emit(o.START,this),g.emit(o.READY,this,p)},shutdown:function(p){var g=this.events,x=this.settings;g.off(o.TRANSITION_INIT),g.off(o.TRANSITION_START),g.off(o.TRANSITION_COMPLETE),g.off(o.TRANSITION_OUT),x.status=h.SHUTDOWN,x.active=!1,x.visible=!1,this.renderer===f.WEBGL&&this.renderer.resetTextures(!0),g.emit(o.SHUTDOWN,this,p)},destroy:function(){var p=this.events,g=this.settings;g.status=h.DESTROYED,g.active=!1,g.visible=!1,p.emit(o.DESTROY,this),p.removeAllListeners();for(var x=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<x.length;m++)this[x[m]]=null}});e.exports=c},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s&&s[0].toUpperCase()+s.slice(1)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(33),h=i(0),r=i(109),o=i(424),u="Texture.frame missing: ",l=new h({initialize:function(v,d,c,p,g){Array.isArray(c)||(c=[c]),this.manager=v,this.key=d,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var x=0;x<c.length;x++)this.source.push(new o(this,c[x],p,g))},add:function(f,v,d,c,p,g){if(this.has(f))return null;var x=new r(this,f,v,d,c,p,g);return this.frames[f]=x,this.firstFrame==="__BASE"&&(this.firstFrame=f),this.frameTotal++,x},remove:function(f){if(this.has(f)){var v=this.get(f);return v.destroy(),delete this.frames[f],!0}return!1},has:function(f){return this.frames[f]},get:function(f){f||(f=this.firstFrame);var v=this.frames[f];return v||(console.warn(u+f),v=this.frames[this.firstFrame]),v},getTextureSourceIndex:function(f){for(var v=0;v<this.source.length;v++)if(this.source[v]===f)return v;return-1},getFramesFromTextureSource:function(f,v){v===void 0&&(v=!1);var d=[];for(var c in this.frames)if(!(c==="__BASE"&&!v)){var p=this.frames[c];p.sourceIndex===f&&d.push(p)}return d},getFrameNames:function(f){f===void 0&&(f=!1);var v=Object.keys(this.frames);if(!f){var d=v.indexOf("__BASE");d!==-1&&v.splice(d,1)}return v},getSourceImage:function(f){(f==null||this.frameTotal===1)&&(f="__BASE");var v=this.frames[f];return v?v.source.image:(console.warn(u+f),this.frames.__BASE.source.image)},getDataSourceImage:function(f){(f==null||this.frameTotal===1)&&(f="__BASE");var v=this.frames[f],d;return v?d=v.sourceIndex:(console.warn(u+f),d=this.frames.__BASE.sourceIndex),this.dataSource[d].image},setDataSource:function(f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var d=this.source[v];this.dataSource.push(new o(this,f[v],d.width,d.height))}},setFilter:function(f){var v;for(v=0;v<this.source.length;v++)this.source[v].setFilter(f);for(v=0;v<this.dataSource.length;v++)this.dataSource[v].setFilter(f)},destroy:function(){var f;for(f=0;f<this.source.length;f++)this.source[f].destroy();for(f=0;f<this.dataSource.length;f++)this.dataSource[f].destroy();for(var v in this.frames){var d=this.frames[v];d.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var c=this.manager.game.renderer;c&&c.type===s.WEBGL&&c.resetTextures(!0),this.manager=null}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),h=function(r,o,u,l,f){l===void 0&&(l=0),f===void 0&&(f=r.length);var v=[];if(s(r,l,f))for(var d=l;d<f;d++){var c=r[d];(!o||o&&u===void 0&&c.hasOwnProperty(o)||o&&u!==void 0&&c[o]===u)&&v.push(c)}return v};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Matrix:i(1013),Add:i(1021),AddAt:i(1022),BringToTop:i(1023),CountAllMatching:i(1024),Each:i(1025),EachInRange:i(1026),FindClosestInSorted:i(318),GetAll:i(207),GetFirst:i(428),GetRandom:i(210),MoveDown:i(1027),MoveTo:i(1028),MoveUp:i(1029),MoveAbove:i(1030),MoveBelow:i(1031),NumberArray:i(322),NumberArrayStep:i(1032),QuickSelect:i(436),Range:i(437),Remove:i(93),RemoveAt:i(1033),RemoveBetween:i(1034),RemoveRandomElement:i(1035),Replace:i(1036),RotateLeft:i(178),RotateRight:i(179),SafeRange:i(78),SendToBack:i(1037),SetAll:i(1038),Shuffle:i(131),SortByDigits:i(320),SpliceOne:i(74),StableSort:i(79),Swap:i(1039)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(!Array.isArray(s)||s.length<2||!Array.isArray(s[0]))return!1;for(var h=s[0].length,r=1;r<s.length;r++)if(s[r].length!==h)return!1;return!0};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){h===void 0&&(h=0),r===void 0&&(r=s.length);var o=h+Math.floor(Math.random()*r);return s[o]===void 0?null:s[o]};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(438),o=new s({Extends:h,initialize:function(){h.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(u){return this._pending.push(u),this._toProcess++,u},remove:function(u){return this._destroy.push(u),this._toProcess++,u},removeAll:function(){for(var u=this._active,l=this._destroy,f=u.length;f--;)l.push(u[f]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var u=this._destroy,l=this._active,f,v;for(f=0;f<u.length;f++){v=u[f];var d=l.indexOf(v);d!==-1&&(l.splice(d,1),this.emit(r.PROCESS_QUEUE_REMOVE,v))}for(u.length=0,u=this._pending,f=0;f<u.length;f++)v=u[f],(!this.checkQueue||this.checkQueue&&l.indexOf(v)===-1)&&(l.push(v),this.emit(r.PROCESS_QUEUE_ADD,v));return u.length=0,this._toProcess=0,l},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(h,r){return parseInt(h.getAttribute(r),10)}var s=function(h,r,o,u,l){o===void 0&&(o=0),u===void 0&&(u=0);var f=r.cutX,v=r.cutY,d=r.source.width,c=r.source.height,p=r.sourceIndex,g={},x=h.getElementsByTagName("info")[0],m=h.getElementsByTagName("common")[0];g.font=x.getAttribute("face"),g.size=i(x,"size"),g.lineHeight=i(m,"lineHeight")+u,g.chars={};var y=h.getElementsByTagName("char"),T=r!==void 0&&r.trimmed;if(T)var C=r.height,S=r.width;for(var E=0;E<y.length;E++){var P=y[E],M=i(P,"id"),O=String.fromCharCode(M),A=i(P,"x"),R=i(P,"y"),F=i(P,"width"),I=i(P,"height");T&&(A<S&&(S=A),R<C&&(C=R)),T&&C!==0&&S!==0&&(A-=r.x,R-=r.y);var D=(f+A)/d,N=(v+R)/c,z=(f+A+F)/d,U=(v+R+I)/c;if(g.chars[M]={x:A,y:R,width:F,height:I,centerX:Math.floor(F/2),centerY:Math.floor(I/2),xOffset:i(P,"xoffset"),yOffset:i(P,"yoffset"),xAdvance:i(P,"xadvance")+o,data:{},kerning:{},u0:D,v0:N,u1:z,v1:U},l&&F!==0&&I!==0){var W=l.add(O,p,A,R,F,I);W&&W.setUVs(F,I,D,N,z,U)}}var w=h.getElementsByTagName("kerning");for(E=0;E<w.length;E++){var L=w[E],B=i(L,"first"),b=i(L,"second"),G=i(L,"amount");g.chars[b].kerning[B]=G}return g};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1049),h=i(440),r=i(0),o=i(11),u=i(109),l=i(15),f=i(110),v=new r({Extends:l,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,s],initialize:function(c,p,g,x,m){l.call(this,c,"Blitter"),this.setTexture(x,m),this.setPosition(p,g),this.initPipeline(),this.children=new f,this.renderList=[],this.dirty=!1},create:function(d,c,p,g,x){g===void 0&&(g=!0),x===void 0&&(x=this.children.length),p===void 0?p=this.frame:p instanceof u||(p=this.texture.get(p));var m=new h(this,d,c,p,g);return this.children.addAt(m,x,!1),this.dirty=!0,m},createFromCallback:function(d,c,p,g){for(var x=this.createMultiple(c,p,g),m=0;m<x.length;m++){var y=x[m];d.call(this,y,m)}return x},createMultiple:function(d,c,p){c===void 0&&(c=this.frame.name),p===void 0&&(p=!0),Array.isArray(c)||(c=[c]);var g=[],x=this;return c.forEach(function(m){for(var y=0;y<d;y++)g.push(x.create(0,0,m,p))}),g},childCanRender:function(d){return d.visible&&d.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(208),h=i(35),r=i(0),o=i(11),u=i(75),l=i(15),f=i(10),v=i(1052),d=i(441),c=i(3),p=new r({Extends:l,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,v],initialize:function(x,m,y,T){l.call(this,x,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=x.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(m,y),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(g){return g===void 0&&(g=!0),this.exclusive=g,this},getBounds:function(g){if(g===void 0&&(g=new f),g.setTo(this.x,this.y,0,0),this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix(),m=x.transformPoint(this.x,this.y);g.setTo(m.x,m.y,0,0)}if(this.list.length>0){var y=this.list,T=new f,C=!1;g.setEmpty();for(var S=0;S<y.length;S++){var E=y[S];E.getBounds&&(E.getBounds(T),C?d(T,g,g):(g.setTo(T.x,T.y,T.width,T.height),C=!0))}}return g},addHandler:function(g){g.once(u.DESTROY,this.remove,this),this.exclusive&&(g.parentContainer&&g.parentContainer.remove(g),g.removeFromDisplayList(),g.parentContainer=this)},removeHandler:function(g){g.off(u.DESTROY,this.remove),this.exclusive&&(g.parentContainer=null,g.addToDisplayList())},pointToContainer:function(g,x){x===void 0&&(x=new c),this.parentContainer?this.parentContainer.pointToContainer(g,x):x=new c(g.x,g.y);var m=this.tempTransformMatrix;return m.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),m.invert(),m.transformPoint(g.x,g.y,x),x},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(g){return s.Add(this.list,g,this.maxSize,this.addHandler,this),this},addAt:function(g,x){return s.AddAt(this.list,g,x,this.maxSize,this.addHandler,this),this},getAt:function(g){return this.list[g]},getIndex:function(g){return this.list.indexOf(g)},sort:function(g,x){return g?(x===void 0&&(x=function(m,y){return m[g]-y[g]}),s.StableSort(this.list,x),this):this},getByName:function(g){return s.GetFirst(this.list,"name",g)},getRandom:function(g,x){return s.GetRandom(this.list,g,x)},getFirst:function(g,x,m,y){return s.GetFirst(this.list,g,x,m,y)},getAll:function(g,x,m,y){return s.GetAll(this.list,g,x,m,y)},count:function(g,x,m,y){return s.CountAllMatching(this.list,g,x,m,y)},swap:function(g,x){return s.Swap(this.list,g,x),this},moveTo:function(g,x){return s.MoveTo(this.list,g,x),this},moveAbove:function(g,x){return s.MoveAbove(this.list,g,x),this},moveBelow:function(g,x){return s.MoveBelow(this.list,g,x),this},remove:function(g,x){var m=s.Remove(this.list,g,this.removeHandler,this);if(x&&m){Array.isArray(m)||(m=[m]);for(var y=0;y<m.length;y++)m[y].destroy()}return this},removeAt:function(g,x){var m=s.RemoveAt(this.list,g,this.removeHandler,this);return x&&m&&m.destroy(),this},removeBetween:function(g,x,m){var y=s.RemoveBetween(this.list,g,x,this.removeHandler,this);if(m)for(var T=0;T<y.length;T++)y[T].destroy();return this},removeAll:function(g){var x=s.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(g)for(var m=0;m<x.length;m++)x[m].destroy();return this},bringToTop:function(g){return s.BringToTop(this.list,g),this},sendToBack:function(g){return s.SendToBack(this.list,g),this},moveUp:function(g){return s.MoveUp(this.list,g),this},moveDown:function(g){return s.MoveDown(this.list,g),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return s.Shuffle(this.list),this},replace:function(g,x,m){var y=s.Replace(this.list,g,x);return y&&(this.addHandler(x),this.removeHandler(g),m&&g.destroy()),this},exists:function(g){return this.list.indexOf(g)>-1},setAll:function(g,x,m,y){return s.SetAll(this.list,g,x,m,y),this},each:function(g,x){var m=[null],y,T=this.list.slice(),C=T.length;for(y=2;y<arguments.length;y++)m.push(arguments[y]);for(y=0;y<C;y++)m[0]=T[y],g.apply(x,m);return this},iterate:function(g,x){var m=[null],y;for(y=2;y<arguments.length;y++)m.push(arguments[y]);for(y=0;y<this.list.length;y++)m[0]=this.list[y],g.apply(x,m);return this},setScrollFactor:function(g,x,m){return x===void 0&&(x=g),m===void 0&&(m=!1),this.scrollFactorX=g,this.scrollFactorY=x,m&&(s.SetAll(this.list,"scrollFactorX",g),s.SetAll(this.list,"scrollFactorY",x)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(148),h=i(0),r=i(1057),o=new h({Extends:s,Mixins:[r],initialize:function(l,f,v,d,c,p,g){s.call(this,l,f,v,d,c,p,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(u,l){return this.cropWidth=u,this.cropHeight=l,this},setDisplayCallback:function(u){return this.displayCallback=u,this},setScrollX:function(u){return this.scrollX=u,this},setScrollY:function(u){return this.scrollY=u,this}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(133),h=i(0),r=i(217),o=i(303),u=i(304),l=i(305),f=i(309),v=i(167),d=i(312),c=i(313),p=i(314),g=i(111),x=i(15),m=i(2),y=i(6),T=i(14),C=i(1063),S=new h({Extends:x,Mixins:[o,u,l,f,v,c,p,d,C],initialize:function(P,M){var O=y(M,"x",0),A=y(M,"y",0);x.call(this,P,"Graphics"),this.setPosition(O,A),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(M)},setDefaultStyles:function(E){return y(E,"lineStyle",null)&&(this.defaultStrokeWidth=y(E,"lineStyle.width",1),this.defaultStrokeColor=y(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=y(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),y(E,"fillStyle",null)&&(this.defaultFillColor=y(E,"fillStyle.color",16777215),this.defaultFillAlpha=y(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,P,M){return M===void 0&&(M=1),this.commandBuffer.push(r.LINE_STYLE,E,P,M),this._lineWidth=E,this},fillStyle:function(E,P){return P===void 0&&(P=1),this.commandBuffer.push(r.FILL_STYLE,E,P),this},fillGradientStyle:function(E,P,M,O,A,R,F,I){return A===void 0&&(A=1),R===void 0&&(R=A),F===void 0&&(F=A),I===void 0&&(I=A),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,A,R,F,I,E,P,M,O),this},lineGradientStyle:function(E,P,M,O,A,R){return R===void 0&&(R=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,E,R,P,M,O,A),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.fillPath(),this},strokeCircle:function(E,P,M){return this.beginPath(),this.arc(E,P,M,0,T.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,P,M,O){return this.commandBuffer.push(r.FILL_RECT,E,P,M,O),this},strokeRect:function(E,P,M,O){var A=this._lineWidth/2,R=E-A,F=E+A;return this.beginPath(),this.moveTo(E,P),this.lineTo(E,P+O),this.strokePath(),this.beginPath(),this.moveTo(E+M,P),this.lineTo(E+M,P+O),this.strokePath(),this.beginPath(),this.moveTo(R,P),this.lineTo(F+M,P),this.strokePath(),this.beginPath(),this.moveTo(R,P+O),this.lineTo(F+M,P+O),this.strokePath(),this},fillRoundedRect:function(E,P,M,O,A){A===void 0&&(A=20);var R=A,F=A,I=A,D=A;return typeof A!="number"&&(R=m(A,"tl",20),F=m(A,"tr",20),I=m(A,"bl",20),D=m(A,"br",20)),this.beginPath(),this.moveTo(E+R,P),this.lineTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+O-D),this.arc(E+M-D,P+O-D,D,0,T.TAU),this.lineTo(E+I,P+O),this.arc(E+I,P+O-I,I,T.TAU,Math.PI),this.lineTo(E,P+R),this.arc(E+R,P+R,R,-Math.PI,-T.TAU),this.fillPath(),this},strokeRoundedRect:function(E,P,M,O,A){A===void 0&&(A=20);var R=A,F=A,I=A,D=A;return typeof A!="number"&&(R=m(A,"tl",20),F=m(A,"tr",20),I=m(A,"bl",20),D=m(A,"br",20)),this.beginPath(),this.moveTo(E+R,P),this.lineTo(E+M-F,P),this.moveTo(E+M-F,P),this.arc(E+M-F,P+F,F,-T.TAU,0),this.lineTo(E+M,P+O-D),this.moveTo(E+M,P+O-D),this.arc(E+M-D,P+O-D,D,0,T.TAU),this.lineTo(E+I,P+O),this.moveTo(E+I,P+O),this.arc(E+I,P+O-I,I,T.TAU,Math.PI),this.lineTo(E,P+R),this.moveTo(E,P+R),this.arc(E+R,P+R,R,-Math.PI,-T.TAU),this.strokePath(),this},fillPointShape:function(E,P){return this.fillPoint(E.x,E.y,P)},fillPoint:function(E,P,M){return!M||M<1?M=1:(E-=M/2,P-=M/2),this.commandBuffer.push(r.FILL_RECT,E,P,M,M),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,P,M,O,A,R){return this.commandBuffer.push(r.FILL_TRIANGLE,E,P,M,O,A,R),this},strokeTriangle:function(E,P,M,O,A,R){return this.commandBuffer.push(r.STROKE_TRIANGLE,E,P,M,O,A,R),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,P,M,O){return this.beginPath(),this.moveTo(E,P),this.lineTo(M,O),this.strokePath(),this},lineTo:function(E,P){return this.commandBuffer.push(r.LINE_TO,E,P),this},moveTo:function(E,P){return this.commandBuffer.push(r.MOVE_TO,E,P),this},strokePoints:function(E,P,M,O){P===void 0&&(P=!1),M===void 0&&(M=!1),O===void 0&&(O=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<O;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.strokePath(),this},fillPoints:function(E,P,M,O){P===void 0&&(P=!1),M===void 0&&(M=!1),O===void 0&&(O=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var A=1;A<O;A++)this.lineTo(E[A].x,E[A].y);return P&&this.lineTo(E[0].x,E[0].y),M&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.strokePoints(M,!0)},strokeEllipse:function(E,P,M,O,A){A===void 0&&(A=32);var R=new g(E,P,M,O),F=R.getPoints(A);return this.strokePoints(F,!0)},fillEllipseShape:function(E,P){P===void 0&&(P=32);var M=E.getPoints(P);return this.fillPoints(M,!0)},fillEllipse:function(E,P,M,O,A){A===void 0&&(A=32);var R=new g(E,P,M,O),F=R.getPoints(A);return this.fillPoints(F,!0)},arc:function(E,P,M,O,A,R,F){return R===void 0&&(R=!1),F===void 0&&(F=0),this.commandBuffer.push(r.ARC,E,P,M,O,A,R,F),this},slice:function(E,P,M,O,A,R,F){return R===void 0&&(R=!1),F===void 0&&(F=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,E,P),this.commandBuffer.push(r.ARC,E,P,M,O,A,R,F),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(E,P){return this.commandBuffer.push(r.TRANSLATE,E,P),this},scaleCanvas:function(E,P){return this.commandBuffer.push(r.SCALE,E,P),this},rotateCanvas:function(E){return this.commandBuffer.push(r.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,P,M){var O=this.scene.sys,A=O.game.renderer;P===void 0&&(P=O.scale.width),M===void 0&&(M=O.scale.height),S.TargetCamera.setScene(this.scene),S.TargetCamera.setViewport(0,0,P,M),S.TargetCamera.scrollX=this.x,S.TargetCamera.scrollY=this.y;var R,F;if(typeof E=="string")if(O.textures.exists(E)){R=O.textures.get(E);var I=R.getSourceImage();I instanceof HTMLCanvasElement&&(F=I.getContext("2d"))}else R=O.textures.createCanvas(E,P,M),F=R.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(F=E.getContext("2d"));return F&&(this.renderCanvas(A,this,S.TargetCamera,null,F,!1),R&&R.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});S.TargetCamera=new s,e.exports=S},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u){u===void 0&&(u=new s);var l=r.width/2,f=r.height/2;return u.x=r.x+l*Math.cos(o),u.y=r.y+f*Math.sin(o),u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h=i(0),r=i(11),o=i(176),u=i(101),l=i(9),f=i(75),v=i(110),d=i(1071),c=i(20),p=i(79),g=new h({Extends:v,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,l,d],initialize:function(m,y){v.call(this,m),l.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(s.SKIP_CHECK),y&&this.add(y),m.sys.queueDepthSort()},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},setState:function(x){return this.state=x,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(x,m){return this.data||(this.data=new u(this)),this.data.set(x,m),this},incData:function(x,m){return this.data||(this.data=new u(this)),this.data.inc(x,m),this},toggleData:function(x){return this.data||(this.data=new u(this)),this.data.toggle(x),this},getData:function(x){return this.data||(this.data=new u(this)),this.data.get(x)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(x){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&x.id)},getIndexList:function(){for(var x=this,m=this.parentContainer,y=[];m&&(y.unshift(m.getIndex(x)),x=m,m.parentContainer);)m=m.parentContainer;return y.unshift(this.displayList.getIndex(x)),y},addChildCallback:function(x){x.displayList&&x.displayList!==this&&x.removeFromDisplayList(),x.displayList||(this.queueDepthSort(),x.displayList=this,x.emit(f.ADDED_TO_SCENE,x,this.scene),this.events.emit(c.ADDED_TO_SCENE,x,this.scene))},removeChildCallback:function(x){this.queueDepthSort(),x.displayList=null,x.emit(f.REMOVED_FROM_SCENE,x,this.scene),this.events.emit(c.REMOVED_FROM_SCENE,x,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(x,m){return x._depth-m._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(f.DESTROY,this);for(var x=this.list.length;x--;)this.list[x].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(450),u=i(110),l=i(452),f=i(1075),v=new s({Extends:r,Mixins:[h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,f],initialize:function(c,p,g,x){if(r.call(this,c,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],g!==null&&(typeof g=="object"||Array.isArray(g))&&(x=g,g=null),this.setTexture(p,g),this.initPipeline(),this.emitters=new u(this),this.wells=new u(this),x){Array.isArray(x)||(x=[x]);for(var m=0;m<x.length;m++)this.createEmitter(x[m])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(d,c){return this.texture=this.scene.sys.textures.get(d),this.setFrame(c)},setFrame:function(d){this.frame=this.texture.get(d);var c=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),p=[];return c.forEach(function(g){p.push(g.name)}),this.frameNames=p,this.defaultFrame=this.frame,this},setEmitterFrames:function(d,c){Array.isArray(d)||(d=[d]);var p=c.frames;p.length=0;for(var g=0;g<d.length;g++){var x=d[g];this.frameNames.indexOf(x)!==-1&&p.push(this.texture.get(x))}return p.length>0?c.defaultFrame=p[0]:c.defaultFrame=this.defaultFrame,this},addEmitter:function(d){return this.emitters.add(d)},createEmitter:function(d){return this.addEmitter(new l(this,d))},removeEmitter:function(d){return this.emitters.remove(d,!0)},addGravityWell:function(d){return this.wells.add(d)},createGravityWell:function(d){return this.addGravityWell(new o(d))},emitParticle:function(d,c,p){for(var g=this.emitters.list,x=0;x<g.length;x++){var m=g[x];m.active&&m.emitParticle(d,c,p)}return this},emitParticleAt:function(d,c,p){return this.emitParticle(p,d,c)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(d,c){c*=this.timeScale;for(var p=this.emitters.list,g=0;g<p.length;g++){var x=p[g];x.active&&x.preUpdate(d,c)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h=i(133),r=i(31),o=i(0),u=i(11),l=i(33),f=i(109),v=i(15),d=i(1),c=i(92),p=i(1079),g=i(141),x=i(12),m=i(222),y=new o({Extends:v,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,p],initialize:function(C,S,E,P,M,O,A){S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=32),M===void 0&&(M=32),v.call(this,C,"RenderTexture"),this.renderer=C.sys.renderer,this.textureManager=C.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,O===void 0?(this.canvas=r.create2D(this,P,M),this.texture=C.sys.textures.addCanvas(m(),this.canvas),this.frame=this.texture.get()):(this.texture=C.sys.textures.get(O),this.frame=this.texture.get(A),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new h(0,0,P,M),this.renderTarget=null;var R=this.renderer;R?R.type===l.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new g(R,P,M,1,0,!1)):R.type===l.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=d,this.camera.setScene(C),this.setPosition(S,E),O===void 0&&this.setSize(P,M),this.setOrigin(0,0),this.initPipeline(c.SINGLE_PIPELINE)},setSize:function(T,C){return this.resize(T,C)},resize:function(T,C){C===void 0&&(C=T);var S=this.frame;if(T!==this.width||C!==this.height){if(S.name==="__BASE"){this.canvas.width=T,this.canvas.height=C,this.texture.width=T,this.texture.height=C;var E=this.renderTarget;E&&(E.resize(T,C),S.glTexture=E.texture,S.source.isRenderTexture=!0,S.source.isGLTexture=!0,S.source.glTexture=E.texture),this.camera.setSize(T,C),S.source.width=T,S.source.height=C,S.setSize(T,C),this.width=T,this.height=C}}else{var P=this.texture.getSourceImage();S.cutX+T>P.width&&(T=P.width-S.cutX),S.cutY+C>P.height&&(C=P.height-S.cutY),S.setSize(T,C,S.cutX,S.cutY)}this.updateDisplayOrigin();var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=T,M.hitArea.height=C),this},setGlobalTint:function(T){return this.globalTint=T,this},setGlobalAlpha:function(T){return this.globalAlpha=T,this},saveTexture:function(T){return this.textureManager.renameTexture(this.texture.key,T),this._saved=!0,this.texture},fill:function(T,C,S,E,P,M){var O=this.frame,A=this.camera,R=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=O.cutWidth),M===void 0&&(M=O.cutHeight);var F=(T>>16&255)/255,I=(T>>8&255)/255,D=(T&255)/255,N=this.renderTarget;if(A.preRender(),N){N.bind(!0);var z=this.pipeline;z.manager.set(z);var U=N.width,W=N.height,w=R.width,L=R.height,B=w/U,b=L/W;z.drawFillRect(S*B,E*b,P*B,M*b,x.getTintFromFloats(D,I,F,1),C),N.unbind(!0)}else{var G=this.context;R.setContext(G),G.fillStyle="rgba("+F+","+I+","+D+","+C+")",G.fillRect(S+O.cutX,E+O.cutY,P,M),R.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var T=this.renderTarget;if(T)T.clear();else{var C=this.context;C.save(),C.setTransform(1,0,0,1,0,0),C.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),C.restore()}this.dirty=!1}return this},erase:function(T,C,S){return this._eraseMode=!0,this.draw(T,C,S,1,16777215),this._eraseMode=!1,this},draw:function(T,C,S,E,P){return this.beginDraw(),this.batchDraw(T,C,S,E,P),this.endDraw(),this},drawFrame:function(T,C,S,E,P,M){return this.beginDraw(),this.batchDrawFrame(T,C,S,E,P,M),this.endDraw(),this},beginDraw:function(){var T=this.camera,C=this.renderer,S=this.renderTarget;return T.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this},batchDraw:function(T,C,S,E,P){return E===void 0&&(E=this.globalAlpha),P===void 0?P=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):P=(P>>16)+(P&65280)+((P&255)<<16),Array.isArray(T)||(T=[T]),this.batchList(T,C,S,E,P),this},batchDrawFrame:function(T,C,S,E,P,M){S===void 0&&(S=0),E===void 0&&(E=0),P===void 0&&(P=this.globalAlpha),M===void 0?M=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):M=(M>>16)+(M&65280)+((M&255)<<16);var O=this.textureManager.getFrame(T,C);return O&&(this.renderTarget?this.pipeline.batchTextureFrame(O,S,E,M,P,this.camera.matrix,null):this.batchTextureFrame(O,S+this.frame.cutX,E+this.frame.cutY,P,M)),this},endDraw:function(T){T===void 0&&(T=this._eraseMode);var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),P=C.pipelines.setUtility();P.blitFrame(E,S,1,!1,!1,T),C.resetScissor(),C.resetViewport()}else C.setContext();return this.dirty=!0,this},batchList:function(T,C,S,E,P){for(var M=0;M<T.length;M++){var O=T[M];!O||O===this||(O.renderWebGL||O.renderCanvas?this.drawGameObject(O,C,S):O.isParent||O.list?this.batchGroup(O.getChildren(),C,S):typeof O=="string"?this.batchTextureFrameKey(O,null,C,S,E,P):O instanceof f?this.batchTextureFrame(O,C,S,E,P):Array.isArray(O)&&this.batchList(O,C,S,E,P))}},batchGroup:function(T,C,S){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;for(var E=0;E<T.length;E++){var P=T[E];if(P.willRender(this.camera)){var M=P.x+C,O=P.y+S;this.drawGameObject(P,M,O)}}},batchGameObjectWebGL:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,P=T.y;T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderDirect?T.renderDirect(this.renderer,T,this.camera):T.renderWebGL(this.renderer,T,this.camera),T.setPosition(E,P)},batchGameObjectCanvas:function(T,C,S){C===void 0&&(C=T.x),S===void 0&&(S=T.y);var E=T.x,P=T.y;if(this._eraseMode){var M=T.blendMode;T.blendMode=s.ERASE}T.setPosition(C+this.frame.cutX,S+this.frame.cutY),T.renderCanvas(this.renderer,T,this.camera,null),T.setPosition(E,P),this._eraseMode&&(T.blendMode=M)},batchTextureFrameKey:function(T,C,S,E,P,M){var O=this.textureManager.getFrame(T,C);O&&this.batchTextureFrame(O,S,E,P,M)},batchTextureFrame:function(T,C,S,E,P){C===void 0&&(C=0),S===void 0&&(S=0),C+=this.frame.cutX,S+=this.frame.cutY;var M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(T,C,S,P,E,this.camera.matrix,null);else{var O=this.context,A=T.canvasData,R=T.source.image,F=this.camera.matrix;O.save(),O.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",O.globalAlpha=E,F.setToContext(O),O.drawImage(R,A.x,A.y,A.width,A.height,C,S,A.width,A.height),O.restore()}},snapshotArea:function(T,C,S,E,P,M,O){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,P,!1,T,C,S,E,M,O):this.renderer.snapshotCanvas(this.canvas,P,!1,T,C,S,E,M,O),this},snapshot:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,0,0,this.width,this.height,C,S):this.renderer.snapshotCanvas(this.canvas,T,!1,0,0,this.width,this.height,C,S),this},snapshotPixel:function(T,C,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,S,!0,T,C):this.renderer.snapshotCanvas(this.canvas,S,!0,T,C),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});e.exports=y},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var h=Math.random()*16|0,r=s==="x"?h:h&3|8;return r.toString(16)})};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(164),h=i(0),r=i(11),o=i(15),u=i(92),l=i(1085),f=i(3),v=new h({Extends:o,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,l],initialize:function(c,p,g,x,m,y,T,C,S){x===void 0&&(x="__DEFAULT"),y===void 0&&(y=2),T===void 0&&(T=!0),o.call(this,c,"Rope"),this.anims=new s(this),this.points=y,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=x==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new f,this.debugCallback=null,this.debugGraphic=null,this.setTexture(x,m),this.setPosition(p,g),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),Array.isArray(y)&&this.resizeArrays(y.length),this.setPoints(y,C,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,c){var p=this.anims.currentFrame;this.anims.update(d,c),this.anims.currentFrame!==p&&(this.updateUVs(),this.updateVertices())},play:function(d,c,p){return this.anims.play(d,c,p),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(d,c,p){return d===void 0&&(d=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(d,c,p))},setVertical:function(d,c,p){return d===void 0&&(d=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(d,c,p)):this},setTintFill:function(d){return d===void 0&&(d=!1),this.tintFill=d,this},setAlphas:function(d,c){var p=this.points.length;if(p<1)return this;var g=this.alphas;d===void 0?d=[1]:!Array.isArray(d)&&c===void 0&&(d=[d]);var x,m=0;if(c!==void 0)for(x=0;x<p;x++)m=x*2,g[m]=d,g[m+1]=c;else if(d.length===p)for(x=0;x<p;x++)m=x*2,g[m]=d[x],g[m+1]=d[x];else{var y=d[0];for(x=0;x<p;x++)m=x*2,d.length>m&&(y=d[m]),g[m]=y,d.length>m+1&&(y=d[m+1]),g[m+1]=y}return this},setColors:function(d){var c=this.points.length;if(c<1)return this;var p=this.colors;d===void 0?d=[16777215]:Array.isArray(d)||(d=[d]);var g,x=0;if(d.length===c)for(g=0;g<c;g++)x=g*2,p[x]=d[g],p[x+1]=d[g];else{var m=d[0];for(g=0;g<c;g++)x=g*2,d.length>x&&(m=d[x]),p[x]=m,d.length>x+1&&(m=d[x+1]),p[x+1]=m}return this},setPoints:function(d,c,p){if(d===void 0&&(d=2),typeof d=="number"){var g=d;g<2&&(g=2),d=[];var x,m,y;if(this.horizontal)for(y=-this.frame.halfWidth,m=this.frame.width/(g-1),x=0;x<g;x++)d.push({x:y+x*m,y:0});else for(y=-this.frame.halfHeight,m=this.frame.height/(g-1),x=0;x<g;x++)d.push({x:0,y:y+x*m})}var T=d.length,C=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(d.unshift({x:0,y:0}),T++),C!==T&&this.resizeArrays(T),this.points=d,this.updateUVs(),c!=null&&this.setColors(c),p!=null&&this.setAlphas(p),this)},updateUVs:function(){for(var d=this.uv,c=this.points.length,p=this.frame.u0,g=this.frame.v0,x=this.frame.u1,m=this.frame.v1,y=(x-p)/(c-1),T=(m-g)/(c-1),C=0;C<c;C++){var S=C*4,E,P,M,O;this.horizontal?(this._flipX?(E=x-C*y,M=x-C*y):(E=p+C*y,M=p+C*y),this._flipY?(P=m,O=g):(P=g,O=m)):(this._flipX?(E=p,M=x):(E=x,M=p),this._flipY?(P=m-C*T,O=m-C*T):(P=g+C*T,O=g+C*T)),d[S+0]=E,d[S+1]=P,d[S+2]=M,d[S+3]=O}return this},resizeArrays:function(d){var c=this.colors,p=this.alphas;this.vertices=new Float32Array(d*4),this.uv=new Float32Array(d*4),c=new Uint32Array(d*2),p=new Float32Array(d*2);for(var g=0;g<d*2;g++)c[g]=16777215,p[g]=1;return this.colors=c,this.alphas=p,this.dirty=!0,this},updateVertices:function(){var d=this._perp,c=this.points,p=this.vertices,g=c.length;if(this.dirty=!1,!(g<1)){for(var x,m=c[0],y=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<g;T++){var C=c[T],S=T*4;T<g-1?x=c[T+1]:x=C,d.x=x.y-m.y,d.y=-(x.x-m.x);var E=d.length();d.x/=E,d.y/=E,d.x*=y,d.y*=y,p[S]=C.x+d.x,p[S+1]=C.y+d.y,p[S+2]=C.x-d.x,p[S+3]=C.y-d.y,m=C}return this}},setDebug:function(d,c){return this.debugGraphic=d,!d&&!c?this.debugCallback=null:c?this.debugCallback=c:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(d,c,p){var g=d.debugGraphic,x=p[0],m=p[1],y=p[2],T=p[3];g.lineBetween(x,m,y,T);for(var C=4;C<c;C+=4){var S=p[C+0],E=p[C+1],P=p[C+2],M=p[C+3];g.lineBetween(x,m,S,E),g.lineBetween(y,T,P,M),g.lineBetween(y,T,S,E),g.lineBetween(S,E,P,M),x=S,m=E,y=P,T=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(d){return this._flipX=d,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(d){return this._flipY=d,this.updateUVs()}}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(142),h=i(31),r=i(0),o=i(11),u=i(22),l=i(15),f=i(458),v=i(6),d=i(202),c=i(1088),p=i(459),g=new r({Extends:l,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,c],initialize:function(m,y,T,C,S){y===void 0&&(y=0),T===void 0&&(T=0),l.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(y,T),this.setOrigin(0,0),this.initPipeline(),this.canvas=h.create(this),this.context=this.canvas.getContext("2d"),this.style=new p(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=m.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing),m.sys.game.events.on(u.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",s(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(x){var m=this.style;if(m.wordWrapCallback){var y=m.wordWrapCallback.call(m.wordWrapCallbackScope,x,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return m.wordWrapWidth?m.wordWrapUseAdvanced?this.advancedWordWrap(x,this.context,this.style.wordWrapWidth):this.basicWordWrap(x,this.context,this.style.wordWrapWidth):x},advancedWordWrap:function(x,m,y){for(var T="",C=x.replace(/ +/gi," ").split(this.splitRegExp),S=C.length,E=0;E<S;E++){var P=C[E],M="";P=P.replace(/^ *|\s*$/gi,"");var O=m.measureText(P).width;if(O<y){T+=P+`
`;continue}for(var A=y,R=P.split(" "),F=0;F<R.length;F++){var I=R[F],D=I+" ",N=m.measureText(D).width;if(N>A){if(F===0){for(var z=D;z.length&&(z=z.slice(0,-1),N=m.measureText(z).width,!(N<=A)););if(!z.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var U=I.substr(z.length);R[F]=U,M+=z}var W=R[F].length?F:F+1,w=R.slice(W).join(" ").replace(/[ \n]*$/gi,"");C[E+1]=w+" "+(C[E+1]||""),S=C.length;break}else M+=D,A-=N}T+=M.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(x,m,y){for(var T="",C=x.split(this.splitRegExp),S=C.length-1,E=m.measureText(" ").width,P=0;P<=S;P++){for(var M=y,O=C[P].split(" "),A=O.length-1,R=0;R<=A;R++){var F=O[R],I=m.measureText(F).width,D=I;R<A&&(D+=E),D>M&&R>0&&(T+=`
`,M=y),T+=F,R<A?(T+=" ",M-=D):M-=I}P<S&&(T+=`
`)}return T},getWrappedText:function(x){x===void 0&&(x=this._text),this.style.syncFont(this.canvas,this.context);var m=this.runWordWrap(x);return m.split(this.splitRegExp)},setText:function(x){return!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x!==this._text&&(this._text=x.toString(),this.updateText()),this},setStyle:function(x){return this.style.setStyle(x)},setFont:function(x){return this.style.setFont(x)},setFontFamily:function(x){return this.style.setFontFamily(x)},setFontSize:function(x){return this.style.setFontSize(x)},setFontStyle:function(x){return this.style.setFontStyle(x)},setFixedSize:function(x,m){return this.style.setFixedSize(x,m)},setBackgroundColor:function(x){return this.style.setBackgroundColor(x)},setFill:function(x){return this.style.setFill(x)},setColor:function(x){return this.style.setColor(x)},setStroke:function(x,m){return this.style.setStroke(x,m)},setShadow:function(x,m,y,T,C,S){return this.style.setShadow(x,m,y,T,C,S)},setShadowOffset:function(x,m){return this.style.setShadowOffset(x,m)},setShadowColor:function(x){return this.style.setShadowColor(x)},setShadowBlur:function(x){return this.style.setShadowBlur(x)},setShadowStroke:function(x){return this.style.setShadowStroke(x)},setShadowFill:function(x){return this.style.setShadowFill(x)},setWordWrapWidth:function(x,m){return this.style.setWordWrapWidth(x,m)},setWordWrapCallback:function(x,m){return this.style.setWordWrapCallback(x,m)},setAlign:function(x){return this.style.setAlign(x)},setResolution:function(x){return this.style.setResolution(x)},setLineSpacing:function(x){return this.lineSpacing=x,this.updateText()},setPadding:function(x,m,y,T){if(typeof x=="object"){var C=x,S=v(C,"x",null);S!==null?(x=S,y=S):(x=v(C,"left",0),y=v(C,"right",x));var E=v(C,"y",null);E!==null?(m=E,T=E):(m=v(C,"top",0),T=v(C,"bottom",m))}else x===void 0&&(x=0),m===void 0&&(m=x),y===void 0&&(y=x),T===void 0&&(T=m);return this.padding.left=x,this.padding.top=m,this.padding.right=y,this.padding.bottom=T,this.updateText()},setMaxLines:function(x){return this.style.setMaxLines(x)},updateText:function(){var x=this.canvas,m=this.context,y=this.style,T=y.resolution,C=y.metrics;y.syncFont(x,m);var S=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(S=this.runWordWrap(this._text));var E=S.split(this.splitRegExp),P=f(this,C,E),M=this.padding,O;y.fixedWidth===0?(this.width=P.width+M.left+M.right,O=P.width):(this.width=y.fixedWidth,O=this.width-M.left-M.right,O<P.width&&(O=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var A=this.width,R=this.height;this.updateDisplayOrigin(),A*=T,R*=T,A=Math.max(A,1),R=Math.max(R,1),x.width!==A||x.height!==R?(x.width=A,x.height=R,this.frame.setSize(A,R),y.syncFont(x,m)):m.clearRect(0,0,A,R),m.save(),m.scale(T,T),y.backgroundColor&&(m.fillStyle=y.backgroundColor,m.fillRect(0,0,A,R)),y.syncStyle(x,m),m.textBaseline="alphabetic",m.translate(M.left,M.top);for(var F,I,D=0;D<P.lines;D++){if(F=y.strokeThickness/2,I=y.strokeThickness/2+D*P.lineHeight+C.ascent,D>0&&(I+=P.lineSpacing*D),y.rtl)F=A-F;else if(y.align==="right")F+=O-P.lineWidths[D];else if(y.align==="center")F+=(O-P.lineWidths[D])/2;else if(y.align==="justify"){var N=.85;if(P.lineWidths[D]/P.width>=N){var z=P.width-P.lineWidths[D],U=m.measureText(" ").width,W=E[D].trim(),w=W.split(" ");z+=(E[D].length-W.length)*U;for(var L=Math.floor(z/U),B=0;L>0;)w[B]+=" ",B=(B+1)%(w.length-1||1),--L;E[D]=w.join(" ")}}this.autoRound&&(F=Math.round(F),I=Math.round(I)),y.strokeThickness&&(this.style.syncShadow(m,y.shadowStroke),m.strokeText(E[D],F,I)),y.color&&(this.style.syncShadow(m,y.shadowFill),m.fillText(E[D],F,I))}m.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(x,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var b=this.input;return b&&!b.customHitArea&&(b.hitArea.width=this.width,b.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(x){this.setText(x)}},toJSON:function(){var x=o.ToJSON(this),m={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return x.data=m,x},preDestroy:function(){this.style.rtl&&d(this.canvas),h.remove(this.canvas),this.texture.destroy()}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h=i(0),r=i(11),o=i(22),u=i(15),l=i(361),f=i(192),v=i(1091),d=i(3),c=8,p=new h({Extends:u,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,v],initialize:function(x,m,y,T,C,S,E){var P=x.sys.renderer;u.call(this,x,"TileSprite");var M=x.sys.textures.get(S),O=M.get(E);!T||!C?(T=O.width,C=O.height):(T=Math.floor(T),C=Math.floor(C)),this._tilePosition=new d,this._tileScale=new d(1,1),this.dirty=!1,this.renderer=P,this.canvas=s.create(this,T,C),this.context=this.canvas.getContext("2d"),this.displayTexture=M,this.displayFrame=O,this._crop=this.resetCropObject(),this.texture=x.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=l(O.width),this.potHeight=l(O.height),this.fillCanvas=s.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(m,y),this.setSize(T,C),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),x.sys.game.events.on(o.CONTEXT_RESTORED,function(A){if(!!A){var R=A.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=A.createTexture2D(0,R.LINEAR,R.LINEAR,R.REPEAT,R.REPEAT,R.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(g,x){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(x)},setFrame:function(g){var x=this.displayTexture.get(g);return this.potWidth=l(x.width),this.potHeight=l(x.height),this.canvas.width=0,!x.cutWidth||!x.cutHeight?this.renderFlags&=~c:this.renderFlags|=c,this.displayFrame=x,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,x){return g!==void 0&&(this.tilePositionX=g),x!==void 0&&(this.tilePositionY=x),this},setTileScale:function(g,x){return g===void 0&&(g=this.tileScaleX),x===void 0&&(x=g),this.tileScaleX=g,this.tileScaleY=x,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var x=this.fillContext,m=this.fillCanvas,y=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=g.cutWidth,T=g.cutHeight),x.clearRect(0,0,y,T),m.width=y,m.height=T,x.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,y,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=x.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if((g.width!==this.width||g.height!==this.height)&&(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var x=this.context;this.scene.sys.game.config.antialias||f.disable(x);var m=this._tileScale.x,y=this._tileScale.y,T=this._tilePosition.x,C=this._tilePosition.y;x.clearRect(0,0,this.width,this.height),x.save(),x.scale(m,y),x.translate(-T,-C),x.fillStyle=this.fillPattern,x.fillRect(T,C,this.width/m,this.height/y),x.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),s.remove(this.canvas),s.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(18),r=i(11),o=i(75),u=i(22),l=i(51),f=i(15),v=i(70),d=i(222),c=i(1094),p=i(14),g=new s({Extends:f,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,c],initialize:function(m,y,T,C){f.call(this,m,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=d(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=p.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(y,T),this.initPipeline(),C&&this.changeSource(C,!1);var S=m.sys.game.events;S.on(u.PAUSE,this.globalPause,this),S.on(u.RESUME,this.globalResume,this);var E=m.sys.sound;E&&E.on(v.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(x,m,y){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var T=this.video;if(!T)return console.warn("Video not loaded"),this;x===void 0&&(x=T.loop);var C=this.scene.sys.sound;C&&C.mute&&this.setMute(!0),isNaN(m)||(this._markerIn=m),!isNaN(y)&&y>m&&(this._markerOut=y),T.loop=x;var S=this._callbacks,E=T.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(T.addEventListener("playing",S.play,!0),T.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),T.addEventListener("ended",S.end,!0),T.addEventListener("timeupdate",S.time,!0),T.addEventListener("seeking",S.seeking,!0),T.addEventListener("seeked",S.seeked,!0),this},changeSource:function(x,m,y,T,C){m===void 0&&(m=!0);var S=this.video;S&&this.stop();var E=this.scene.sys.cache.video.get(x);return E?(this.video=E,this._cacheKey=x,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,m&&this.play(y,T,C)):this.video=null,this},addMarker:function(x,m,y){return!isNaN(m)&&m>=0&&!isNaN(y)&&(this.markers[x]=[m,y]),this},playMarker:function(x,m){var y=this.markers[x];return y&&this.play(m,y[0],y[1]),this},removeMarker:function(x){return delete this.markers[x],this},snapshot:function(x,m){return x===void 0&&(x=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,x,m)},snapshotArea:function(x,m,y,T,C,S){x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=this.width),T===void 0&&(T=this.height),C===void 0&&(C=y),S===void 0&&(S=T);var E=this.video,P=this.snapshotTexture;return P?(P.setSize(C,S),E&&P.context.drawImage(E,x,m,y,T,0,0,C,S)):(P=this.scene.sys.textures.createCanvas(d(),C,S),this.snapshotTexture=P,E&&P.context.drawImage(E,x,m,y,T,0,0,C,S)),P.update()},saveSnapshotTexture:function(x){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,x):this.snapshotTexture=this.scene.sys.textures.createCanvas(x,this.width,this.height),this.snapshotTexture},loadURL:function(x,m,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");return T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0),T.src=x,T.load(),this.video=T,this},loadMediaStream:function(x,m,y){y===void 0&&(y=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var T=document.createElement("video");T.controls=!1,y&&(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")),T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.addEventListener("error",this._callbacks.error,!0);try{T.srcObject=x}catch{T.src=window.URL.createObjectURL(x)}return T.load(),this.video=T,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(x){this.scene.sys.input.once(l.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,x)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(x){this.stop(),this.emit(o.VIDEO_ERROR,this,x)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var x=this.video;if(x){var m=x.currentTime;m!==this._lastUpdate&&(this._lastUpdate=m,this.updateTexture(),m>=this._markerOut&&(x.loop?(x.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=m,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var x=this.video,m=x.videoWidth,y=x.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,x,m,y),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,m,y),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,m,y);else{var T=this.videoTextureSource;T.source!==x&&(T.source=x,T.width=m,T.height=y),T.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(x){var m=this.video;if(m){var y=m.duration;if(y!==1/0&&!isNaN(y)){var T=y*x;this.setCurrentTime(T)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(x){var m=this.video;if(m){if(typeof x=="string"){var y=x[0],T=parseFloat(x.substr(1));y==="+"?x=m.currentTime+T:y==="-"&&(x=m.currentTime-T)}m.currentTime=x,this._lastUpdate=x}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var x=this.video;x&&this.updateTexture()},getProgress:function(){var x=this.video;if(x){var m=x.currentTime,y=x.duration;if(y!==1/0&&!isNaN(y))return m/y}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(x){x===void 0&&(x=!0),this._codeMuted=x;var m=this.video;return m&&(m.muted=this._systemMuted?!0:x),this},isMuted:function(){return this._codeMuted},globalMute:function(x,m){this._systemMuted=m;var y=this.video;y&&(y.muted=this._codeMuted?!0:m)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(x){x===void 0&&(x=!0);var m=this.video;return this._codePaused=x,m&&(x?m.paused||m.pause():x||m.paused&&!this._systemPaused&&m.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(x){return x===void 0&&(x=1),this.video&&(this.video.volume=h(x,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(x){return this.video&&(this.video.playbackRate=x),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(x){return x===void 0&&(x=!0),this.video&&(this.video.loop=x),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(x,m){return m===void 0&&(m=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,x),this._key=x,this.flipY=m,this.videoTextureSource&&this.videoTextureSource.setFlipY(m),this.videoTexture},stop:function(){var x=this.video;if(x){var m=this._callbacks;for(var y in m)x.removeEventListener(y,m[y],!0);x.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var x=this.video;if(!!x){for(x.parentNode&&x.parentNode.removeChild(x);x.hasChildNodes();)x.removeChild(x.firstChild);x.removeAttribute("autoplay"),x.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var x=this.scene.sys.game.events;x.off(u.PAUSE,this.globalPause,this),x.off(u.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(v.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(228),r=i(470),o=i(56),u=new s({initialize:function(f){this.type=o.POLYGON,this.area=0,this.points=[],f&&this.setTo(f)},contains:function(l,f){return h(this,l,f)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var f,v=Number.MAX_VALUE,d=0;d<l.length;d++)f={x:0,y:0},typeof l[d]=="number"||typeof l[d]=="string"?(f.x=parseFloat(l[d]),f.y=parseFloat(l[d+1]),d++):Array.isArray(l[d])?(f.x=l[d][0],f.y=l[d][1]):(f.x=l[d].x,f.y=l[d].y),this.points.push(f),f.y<v&&(v=f.y);return this.calculateArea(v),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l=0,f,v,d=0;d<this.points.length-1;d++)f=this.points[d],v=this.points[d+1],l+=(v.x-f.x)*(f.y+v.y);return f=this.points[0],v=this.points[this.points.length-1],l+=(f.x-v.x)*(v.y+f.y),this.area=-l*.5,this.area},getPoints:function(l,f,v){return r(this,l,f,v)}});e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){for(var o=!1,u=-1,l=s.points.length-1;++u<s.points.length;l=u){var f=s.points[u].x,v=s.points[u].y,d=s.points[l].x,c=s.points[l].y;(v<=r&&r<c||c<=r&&r<v)&&h<(d-f)*(r-v)/(c-v)+f&&(o=!o)}return o};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(2),u=i(17),l=i(478),f=i(1176),v=i(25),d=new s({Extends:r,Mixins:[h.ComputedSize,h.Depth,h.GetBounds,h.Mask,h.Origin,h.ScrollFactor,h.Transform,h.Visible,f],initialize:function(p,g,x,m,y,T,C,S){x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=128),T===void 0&&(T=128),r.call(this,p,"Shader"),this.blendMode=-1,this.shader;var E=p.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(x,m),this.setSize(y,T),this.setOrigin(.5,.5),this.setShader(g,C,S)},willRender:function(c){return this.renderToTexture?!0:!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setRenderToTexture:function(c,p){if(p===void 0&&(p=!1),!this.renderToTexture){var g=this.width,x=this.height,m=this.renderer;this.glTexture=m.createTextureFromSource(null,g,x,0),this.glTexture.flipY=p,this.framebuffer=m.createFramebuffer(g,x,this.glTexture,!1),this._rendererWidth=g,this._rendererHeight=x,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),c&&(this.texture=this.scene.sys.textures.addGLTexture(c,this.glTexture,g,x))}return this.shader&&(m.pipelines.clear(),this.load(),this.flush(),m.pipelines.rebind()),this},setShader:function(c,p,g){if(p===void 0&&(p=[]),typeof c=="string"){var x=this.scene.sys.cache.shader;if(!x.has(c))return console.warn("Shader missing: "+c),this;this.shader=x.get(c)}else this.shader=c;var m=this.gl,y=this.renderer;this.program&&m.deleteProgram(this.program);var T=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);m.uniformMatrix4fv(m.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),m.uniformMatrix4fv(m.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),m.uniform2f(m.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var C=new Date,S={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=u(!0,{},this.shader.uniforms,S):this.uniforms=S;for(var E=0;E<4;E++)p[E]&&this.setSampler2D("iChannel"+E,p[E],E,g);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(c){return this.pointer=c,this},projOrtho:function(c,p,g,x){var m=-1e3,y=1e3,T=1/(c-p),C=1/(g-x),S=1/(m-y),E=this.projectionMatrix;E[0]=-2*T,E[5]=-2*C,E[10]=2*S,E[12]=(c+p)*T,E[13]=(x+g)*C,E[14]=(y+m)*S;var P=this.program,M=this.gl,O=this.renderer;O.setProgram(P),M.uniformMatrix4fv(M.getUniformLocation(P,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=p,this._rendererHeight=g},initUniforms:function(){var c=this.gl,p=this.renderer.glFuncMap,g=this.program;this._textureCount=0;for(var x in this.uniforms){var m=this.uniforms[x],y=m.type,T=p[y];m.uniformLocation=c.getUniformLocation(g,x),y!=="sampler2D"&&(m.glMatrix=T.matrix,m.glValueLength=T.length,m.glFunc=T.func)}},setSampler2DBuffer:function(c,p,g,x,m,y){m===void 0&&(m=0),y===void 0&&(y={});var T=this.uniforms[c];return T.value=p,y.width=g,y.height=x,T.textureData=y,this._textureCount=m,this.initSampler2D(T),this},setSampler2D:function(c,p,g,x){g===void 0&&(g=0);var m=this.scene.sys.textures;if(m.exists(p)){var y=m.getFrame(p);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(c,y.glTexture,y.width,y.height,g,x);var T=this.uniforms[c],C=y.source;T.textureKey=p,T.source=C.image,T.value=y.glTexture,C.isGLTexture&&(x||(x={}),x.width=C.width,x.height=C.height),x&&(T.textureData=x),this._textureCount=g,this.initSampler2D(T)}return this},setUniform:function(c,p){return l(this.uniforms,c,p),this},getUniform:function(c){return o(this.uniforms,c,null)},setChannel0:function(c,p){return this.setSampler2D("iChannel0",c,0,p)},setChannel1:function(c,p){return this.setSampler2D("iChannel1",c,1,p)},setChannel2:function(c,p){return this.setSampler2D("iChannel2",c,2,p)},setChannel3:function(c,p){return this.setSampler2D("iChannel3",c,3,p)},initSampler2D:function(c){if(!!c.value){var p=this.gl;p.activeTexture(p.TEXTURE0+this._textureCount),p.bindTexture(p.TEXTURE_2D,c.value);var g=c.textureData;if(g&&!c.value.isRenderTexture){var x=p[o(g,"magFilter","linear").toUpperCase()],m=p[o(g,"minFilter","linear").toUpperCase()],y=p[o(g,"wrapS","repeat").toUpperCase()],T=p[o(g,"wrapT","repeat").toUpperCase()],C=p[o(g,"format","rgba").toUpperCase()];if(g.repeat&&(y=p.REPEAT,T=p.REPEAT),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,!!g.flipY),g.width){var S=o(g,"width",512),E=o(g,"height",2),P=o(g,"border",0);p.texImage2D(p.TEXTURE_2D,0,C,S,E,P,C,p.UNSIGNED_BYTE,null)}else p.texImage2D(p.TEXTURE_2D,0,C,p.RGBA,p.UNSIGNED_BYTE,c.source);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,x),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,m),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,y),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,T)}this.renderer.setProgram(this.program),p.uniform1i(c.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var c=this.gl,p=this.uniforms,g,x,m,y,T,C=0;for(var S in p)g=p[S],m=g.glFunc,x=g.glValueLength,y=g.uniformLocation,T=g.value,T!==null&&(x===1?g.glMatrix?m.call(c,y,g.transpose,T):m.call(c,y,T):x===2?m.call(c,y,T.x,T.y):x===3?m.call(c,y,T.x,T.y,T.z):x===4?m.call(c,y,T.x,T.y,T.z,T.w):g.type==="sampler2D"&&(c.activeTexture(c.TEXTURE0+C),c.bindTexture(c.TEXTURE_2D,T),c.uniform1i(y,C),C++))},load:function(c){var p=this.gl,g=this.width,x=this.height,m=this.renderer,y=this.program,T=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,S=-this._displayOriginY;T[0]=c[0],T[1]=c[1],T[4]=c[2],T[5]=c[3],T[8]=c[4],T[9]=c[5],T[12]=T[0]*C+T[4]*S,T[13]=T[1]*C+T[5]*S}p.useProgram(y),p.uniformMatrix4fv(p.getUniformLocation(y,"uViewMatrix"),!1,T),p.uniform2f(p.getUniformLocation(y,"uResolution"),this.width,this.height);var E=this.uniforms,P=E.resolution;P.value.x=g,P.value.y=x,E.time.value=m.game.loop.getDuration();var M=this.pointer;if(M){var O=E.mouse,A=M.x/g,R=1-M.y/x;O.value.x=A.toFixed(2),O.value.y=R.toFixed(2)}this.syncUniforms()},flush:function(){var c=this.width,p=this.height,g=this.program,x=this.gl,m=this.vertexBuffer,y=this.renderer,T=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT)),x.bindBuffer(x.ARRAY_BUFFER,m);var C=x.getAttribLocation(g,"inPosition");C!==-1&&(x.enableVertexAttribArray(C),x.vertexAttribPointer(C,2,x.FLOAT,!1,T,0));var S=this.vertexViewF32;S[3]=p,S[4]=c,S[5]=p,S[8]=c,S[9]=p,S[10]=c;var E=6;x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,E*T)),x.drawArrays(x.TRIANGLES,0,E),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var c=this.gl;c.deleteProgram(this.program),c.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(36),o=i(116),u=i(15),l=i(479),f=i(480),v=i(19),d=i(69),c=i(1179),p=i(79),g=i(39),x=i(117),m=new s({Extends:u,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,c],initialize:function(T,C,S,E,P,M,O,A,R,F,I,D){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E="__WHITE"),u.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new d,this.viewPosition=new g,this.viewMatrix=new d,this.projectionMatrix=new d,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var N=T.sys.renderer;this.setPosition(C,S),this.setTexture(E,P),this.setSize(N.width,N.height),this.initPipeline(),this.setPerspective(N.width,N.height),M&&this.addVertices(M,O,A,R,F,I,D)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(y){return this.viewPosition.addScale(g.LEFT,y),this.dirtyCache[10]=1,this},panY:function(y){return this.viewPosition.y+=g.DOWN.y*y,this.dirtyCache[10]=1,this},panZ:function(y){return this.viewPosition.z+=y,this.dirtyCache[10]=1,this},setPerspective:function(y,T,C,S,E){return C===void 0&&(C=45),S===void 0&&(S=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(r(C),y/T,S,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(y,T,C,S){return y===void 0&&(y=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),C===void 0&&(C=-1e3),S===void 0&&(S=1e3),this.projectionMatrix.ortho(-y,y,-T,T,C,S),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(y){y.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(y,T,C,S,E,P,M,O,A){var R=this.scene.sys.cache.obj.get(y);return R&&f(R,this,T,C,S,E,P,M,O,A),this},sortByDepth:function(y,T){return y.depth-T.depth},depthSort:function(){return p(this.faces,this.sortByDepth),this},addVertex:function(y,T,C,S,E,P,M){var O=new x(y,T,C,S,E,P,M);return this.vertices.push(O),O},addFace:function(y,T,C){var S=new o(y,T,C);return this.faces.push(S),this.dirtyCache[9]=-1,S},addVertices:function(y,T,C,S,E,P,M){var O=l(y,T,C,S,E,P,M);return O&&(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(y){return this.faces[y]},getFaceAt:function(y,T,C){C===void 0&&(C=this.scene.sys.cameras.main);for(var S=v(this,C).calc,E=this.faces,P=[],M=0;M<E.length;M++){var O=E[M];O.contains(y,T,S)&&P.push(O)}return p(P,this.sortByDepth)},setDebug:function(y,T){return this.debugGraphic=y,!y&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var y=this.modelPosition,T=this.modelRotation,C=this.modelScale,S=this.dirtyCache,E=y.x,P=y.y,M=y.z,O=T.x,A=T.y,R=T.z,F=C.x,I=C.y,D=C.z,N=this.getFaceCount(),z=S[0],U=S[1],W=S[2],w=S[3],L=S[4],B=S[5],b=S[6],G=S[7],Y=S[8],V=S[9];return S[0]=E,S[1]=P,S[2]=M,S[3]=O,S[4]=A,S[5]=R,S[6]=F,S[7]=I,S[8]=D,S[9]=N,z!==E||U!==P||W!==M||w!==O||L!==A||B!==R||b!==F||G!==I||Y!==D||V!==N},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var y=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!y[10]&&!this.isDirty())){var T=this.width,C=this.height,S=this.viewMatrix,E=this.viewPosition;y[10]&&(S.identity(),S.translate(E),S.invert(),y[10]=0);var P=this.transformMatrix;P.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var M=E.z,O=this.faces,A=0;A<O.length;A++)O[A].transformCoordinatesLocal(P,T,C,M);this.depthSort()}},renderDebug:function(y,T){for(var C=y.debugGraphic,S=0;S<T.length;S++){var E=T[S],P=E.vertex1.tx,M=E.vertex1.ty,O=E.vertex2.tx,A=E.vertex2.ty,R=E.vertex3.tx,F=E.vertex3.ty;C.strokeTriangle(P,M,O,A,R,F)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});e.exports=m},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(50),h=function(r,o){return s(r.x,r.y,o.x,o.y)<=r.radius+o.radius};e.exports=h},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(233),r=function(o,u,l){if(l===void 0&&(l=[]),h(o,u)){var f=o.x1,v=o.y1,d=o.x2,c=o.y2,p=u.x,g=u.y,x=u.radius,m=d-f,y=c-v,T=f-p,C=v-g,S=m*m+y*y,E=2*(m*T+y*C),P=T*T+C*C-x*x,M=E*E-4*S*P,O,A;if(M===0){var R=-E/(2*S);O=f+R*m,A=v+R*y,R>=0&&R<=1&&l.push(new s(O,A))}else if(M>0){var F=(-E-Math.sqrt(M))/(2*S);O=f+F*m,A=v+F*y,F>=0&&F<=1&&l.push(new s(O,A));var I=(-E+Math.sqrt(M))/(2*S);O=f+I*m,A=v+I*y,I>=0&&I<=1&&l.push(new s(O,A))}}return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),h=i(4),r=new h,o=function(u,l,f){if(f===void 0&&(f=r),s(l,u.x1,u.y1))return f.x=u.x1,f.y=u.y1,!0;if(s(l,u.x2,u.y2))return f.x=u.x2,f.y=u.y2,!0;var v=u.x2-u.x1,d=u.y2-u.y1,c=l.x-u.x1,p=l.y-u.y1,g=v*v+d*d,x=v,m=d;if(g>0){var y=(c*v+p*d)/g;x*=y,m*=y}f.x=u.x1+x,f.y=u.y1+m;var T=x*x+m*m;return T<=g&&x*v+m*d>=0&&s(l,f.x,f.y)};e.exports=o},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(96),r=i(488),o=function(u,l,f){if(f===void 0&&(f=[]),r(u,l))for(var v=l.getLineA(),d=l.getLineB(),c=l.getLineC(),p=l.getLineD(),g=[new s,new s,new s,new s],x=[h(v,u,g[0]),h(d,u,g[1]),h(c,u,g[2]),h(p,u,g[3])],m=0;m<4;m++)x[m]&&f.push(g[m]);return f};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r===void 0&&(r=!1),o===void 0&&(o=[]);for(var u=s.x3-s.x1,l=s.y3-s.y1,f=s.x2-s.x1,v=s.y2-s.y1,d=u*u+l*l,c=u*f+l*v,p=f*f+v*v,g=d*p-c*c,x=g===0?0:1/g,m,y,T,C,S,E,P=s.x1,M=s.y1,O=0;O<h.length&&(T=h[O].x-P,C=h[O].y-M,S=u*T+l*C,E=f*T+v*C,m=(p*S-c*E)*x,y=(d*E-c*S)*x,!(m>=0&&y>=0&&m+y<1&&(o.push({x:h[O].x,y:h[O].y}),r)));O++);return o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=Math.cos(o),l=Math.sin(o),f=s.x1-h,v=s.y1-r;return s.x1=f*u-v*l+h,s.y1=f*l+v*u+r,f=s.x2-h,v=s.y2-r,s.x2=f*u-v*l+h,s.y2=f*l+v*u+r,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.height===0?NaN:s.width/s.height};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=Math.cos(o),l=Math.sin(o),f=s.x1-h,v=s.y1-r;return s.x1=f*u-v*l+h,s.y1=f*l+v*u+r,f=s.x2-h,v=s.y2-r,s.x2=f*u-v*l+h,s.y2=f*l+v*u+r,f=s.x3-h,v=s.y3-r,s.x3=f*u-v*l+h,s.y3=f*l+v*u+r,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BUTTON_DOWN:i(1310),BUTTON_UP:i(1311),CONNECTED:i(1312),DISCONNECTED:i(1313),GAMEPAD_BUTTON_DOWN:i(1314),GAMEPAD_BUTTON_UP:i(1315)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),h=i(156),r=function(o,u){var l=o===void 0?h():s({},o);if(u)for(var f in u)u[f]!==void 0&&(l[f]=u[f]);return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=i(408),v=new s({Extends:r,initialize:function(c,p,g,x){var m="xml";if(l(p)){var y=p;p=u(y,"key"),g=u(y,"url"),x=u(y,"xhrSettings"),m=u(y,"extension",m)}var T={type:"xml",cache:c.cacheManager.xml,extension:m,responseType:"text",key:p,url:g,xhrSettings:x};r.call(this,c,T)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=f(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(d,c,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new v(this,d[g]));else this.addFile(new v(this,d,c,p));return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g){var x="text",m="txt",y=d.cacheManager.text;if(l(c)){var T=c;c=u(T,"key"),p=u(T,"url"),g=u(T,"xhrSettings"),m=u(T,"extension",m),x=u(T,"type",x),y=u(T,"cache",y)}var C={type:x,cache:y,extension:m,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,C)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new f(this,v[p]));else this.addFile(new f(this,v,d,c));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Acceleration:i(1368),Angular:i(1369),Bounce:i(1370),Debug:i(1371),Drag:i(1372),Enable:i(1373),Friction:i(1374),Gravity:i(1375),Immovable:i(1376),Mass:i(1377),OverlapCirc:i(523),OverlapRect:i(244),Pushable:i(1378),Size:i(1379),Velocity:i(1380)}},function(e,a){var i=function(s,h,r,o,u,l,f){l===void 0&&(l=!0),f===void 0&&(f=!1);var v=[],d=[],c=s.treeMinMax;if(c.minX=h,c.minY=r,c.maxX=h+o,c.maxY=r+u,f&&(d=s.staticTree.search(c)),l&&s.useTree)v=s.tree.search(c);else if(l){var p=s.bodies,g={position:{x:h,y:r},left:h,top:r,right:h+o,bottom:r+u,isCircle:!1},x=s.intersects;p.iterate(function(m){x(m,g)&&v.push(m)})}return d.concat(v)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={COLLIDE:i(1381),OVERLAP:i(1382),PAUSE:i(1383),RESUME:i(1384),TILE_COLLIDE:i(1385),TILE_OVERLAP:i(1386),WORLD_BOUNDS:i(1387),WORLD_STEP:i(1388)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(62),h=function(r,o,u,l){var f=0,v=r.deltaAbsX()+o.deltaAbsX()+l;return r._dx===0&&o._dx===0?(r.embedded=!0,o.embedded=!0):r._dx>o._dx?(f=r.right-o.x,f>v&&!u||r.checkCollision.right===!1||o.checkCollision.left===!1?f=0:(r.touching.none=!1,r.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===s.STATIC_BODY&&!u&&(r.blocked.none=!1,r.blocked.right=!0),r.physicsType===s.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.left=!0))):r._dx<o._dx&&(f=r.x-o.width-o.x,-f>v&&!u||r.checkCollision.left===!1||o.checkCollision.right===!1?f=0:(r.touching.none=!1,r.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===s.STATIC_BODY&&!u&&(r.blocked.none=!1,r.blocked.left=!0),r.physicsType===s.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.right=!0))),r.overlapX=f,o.overlapX=f,f};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(62),h=function(r,o,u,l){var f=0,v=r.deltaAbsY()+o.deltaAbsY()+l;return r._dy===0&&o._dy===0?(r.embedded=!0,o.embedded=!0):r._dy>o._dy?(f=r.bottom-o.y,f>v&&!u||r.checkCollision.down===!1||o.checkCollision.up===!1?f=0:(r.touching.none=!1,r.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===s.STATIC_BODY&&!u&&(r.blocked.none=!1,r.blocked.down=!0),r.physicsType===s.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.up=!0))):r._dy<o._dy&&(f=r.y-o.bottom,-f>v&&!u||r.checkCollision.up===!1||o.checkCollision.down===!1?f=0:(r.touching.none=!1,r.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===s.STATIC_BODY&&!u&&(r.blocked.none=!1,r.blocked.up=!0),r.physicsType===s.STATIC_BODY&&!u&&(o.blocked.none=!1,o.blocked.down=!0))),r.overlapY=f,o.overlapY=f,f};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return!(h.right<=s.left||h.bottom<=s.top||h.position.x>=s.right||h.position.y>=s.bottom)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bounce:i(1495),Collision:i(1496),Force:i(1497),Friction:i(1498),Gravity:i(1499),Mass:i(1500),Sensor:i(1501),SetBody:i(1502),Sleep:i(1503),Static:i(1520),Transform:i(1521),Velocity:i(1522)}},function(e,a){var i={};e.exports=i,function(){i.create=function(s,h){var r=s.bodyA,o=s.bodyB,u={id:i.id(r,o),bodyA:r,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||o.isSensor,timeCreated:h,timeUpdated:h,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(u,s,h),u},i.update=function(s,h,r){if(s.collision=h,h.collided){var o=h.supports,u=s.activeContacts,l=h.parentA,f=h.parentB;s.inverseMass=l.inverseMass+f.inverseMass,s.friction=Math.min(l.friction,f.friction),s.frictionStatic=Math.max(l.frictionStatic,f.frictionStatic),s.restitution=Math.max(l.restitution,f.restitution),s.slop=Math.max(l.slop,f.slop);for(var v=0;v<o.length;v++)u[v]=o[v].contact;var d=o.length;d<u.length&&(u.length=d),s.separation=h.depth,i.setActive(s,!0,r)}else s.isActive===!0&&i.setActive(s,!1,r)},i.setActive=function(s,h,r){h?(s.isActive=!0,s.timeUpdated=r):(s.isActive=!1,s.activeContacts.length=0)},i.id=function(s,h){return s.id<h.id?"A"+s.id+"B"+h.id:"A"+h.id+"B"+s.id}}()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CalculateFacesAt:i(252),CalculateFacesWithin:i(63),CheckIsoBounds:i(541),Copy:i(1420),CreateFromTiles:i(1421),CullBounds:i(543),CullTiles:i(544),Fill:i(1422),FilterTiles:i(1423),FindByIndex:i(1424),FindTile:i(1425),ForEachTile:i(1426),GetCullTilesFunction:i(1427),GetTileAt:i(158),GetTileAtWorldXY:i(1428),GetTilesWithin:i(26),GetTilesWithinShape:i(1429),GetTilesWithinWorldXY:i(529),GetTileToWorldXFunction:i(1430),GetTileToWorldXYFunction:i(1431),GetTileToWorldYFunction:i(1432),GetWorldToTileXFunction:i(1433),GetWorldToTileXYFunction:i(1434),GetWorldToTileYFunction:i(1435),HasTileAt:i(562),HasTileAtWorldXY:i(1436),HexagonalCullBounds:i(546),HexagonalCullTiles:i(545),HexagonalTileToWorldXY:i(550),HexagonalTileToWorldY:i(554),HexagonalWorldToTileXY:i(556),HexagonalWorldToTileY:i(560),IsInLayerBounds:i(119),IsometricCullTiles:i(547),IsometricTileToWorldXY:i(551),IsometricWorldToTileXY:i(557),PutTileAt:i(257),PutTileAtWorldXY:i(1437),PutTilesAt:i(1438),Randomize:i(1439),RemoveTileAt:i(563),RemoveTileAtWorldXY:i(1440),RenderDebug:i(1441),ReplaceByIndex:i(542),RunCull:i(159),SetCollision:i(1442),SetCollisionBetween:i(1443),SetCollisionByExclusion:i(1444),SetCollisionByProperty:i(1445),SetCollisionFromCollisionGroup:i(1446),SetLayerCollisionIndex:i(160),SetTileCollision:i(72),SetTileIndexCallback:i(1447),SetTileLocationCallback:i(1448),Shuffle:i(1449),StaggeredCullBounds:i(549),StaggeredCullTiles:i(548),StaggeredTileToWorldXY:i(552),StaggeredTileToWorldY:i(555),StaggeredWorldToTileXY:i(558),StaggeredWorldToTileY:i(561),SwapByIndex:i(1450),TileToWorldX:i(253),TileToWorldXY:i(553),TileToWorldY:i(254),WeightedRandomize:i(1451),WorldToTileX:i(255),WorldToTileXY:i(559),WorldToTileY:i(256)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(158),h=function(r,o,u){var l=s(r,o,!0,u),f=s(r,o-1,!0,u),v=s(r,o+1,!0,u),d=s(r-1,o,!0,u),c=s(r+1,o,!0,u),p=l&&l.collides;return p&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),f&&f.collides&&(p&&(l.faceTop=!1),f.faceBottom=!p),v&&v.collides&&(p&&(l.faceBottom=!1),v.faceTop=!p),d&&d.collides&&(p&&(l.faceLeft=!1),d.faceRight=!p),c&&c.collides&&(p&&(l.faceRight=!1),c.faceLeft=!p),l&&!l.collides&&l.resetFaces(),l};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=r.baseTileWidth,u=r.tilemapLayer,l=0;return u&&(h||(h=u.scene.cameras.main),l=u.x+h.scrollX*(1-u.scrollFactorX),o*=u.scaleX),l+s*o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=r.baseTileHeight,u=r.tilemapLayer,l=0;return u&&(h||(h=u.scene.cameras.main),l=u.y+h.scrollY*(1-u.scrollFactorY),o*=u.scaleY),l+s*o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h===void 0&&(h=!0);var u=o.baseTileWidth,l=o.tilemapLayer;return l&&(r||(r=l.scene.cameras.main),s=s-(l.x+r.scrollX*(1-l.scrollFactorX)),u*=l.scaleX),h?Math.floor(s/u):s/u};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h===void 0&&(h=!0);var u=o.baseTileHeight,l=o.tilemapLayer;return l&&(r||(r=l.scene.cameras.main),s=s-(l.y+r.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),h?Math.floor(s/u):s/u};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(85),h=i(119),r=i(252),o=i(72),u=function(l,f,v,d,c){if(d===void 0&&(d=!0),!h(f,v,c))return null;var p=c.data[v][f],g=p&&p.collides;if(l instanceof s)c.data[v][f]===null&&(c.data[v][f]=new s(c,l.index,f,v,c.tileWidth,c.tileHeight)),c.data[v][f].copy(l);else{var x=l;c.data[v][f]===null?c.data[v][f]=new s(c,x,f,v,c.tileWidth,c.tileHeight):c.data[v][f].index=x}var m=c.data[v][f],y=c.collideIndexes.indexOf(m.index)!==-1;return o(m,y),d&&g!==m.collides&&r(f,v,c),m};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=function(r){return r=r.toLowerCase(),r==="isometric"?s.ISOMETRIC:r==="staggered"?s.STAGGERED:r==="hexagonal"?s.HEXAGONAL:s.ORTHOGONAL};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),h=i(120),r=i(121),o=i(85),u=function(l,f,v,d,c){for(var p=new h({tileWidth:v,tileHeight:d}),g=new r({name:l,tileWidth:v,tileHeight:d,format:s.ARRAY_2D,layers:[p]}),x=[],m=f.length,y=0,T=0;T<f.length;T++){x[T]=[];for(var C=f[T],S=0;S<C.length;S++){var E=parseInt(C[S],10);isNaN(E)||E===-1?x[T][S]=c?null:new o(p,-1,S,T,v,d):x[T][S]=new o(p,E,S,T,v,d)}y===0&&(y=C.length)}return g.width=p.width=y,g.height=p.height=m,g.widthInPixels=p.widthInPixels=y*v,g.heightInPixels=p.heightInPixels=m*d,p.data=x,g};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(571),h=i(261),r=function(l){return{x:l.x,y:l.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],u=function(l,f,v){f===void 0&&(f=0),v===void 0&&(v=0);var d=s(l,o);if(d.x+=f,d.y+=v,l.gid){var c=h(l.gid);d.gid=c.gid,d.flippedHorizontal=c.flippedHorizontal,d.flippedVertical=c.flippedVertical,d.flippedAntiDiagonal=c.flippedAntiDiagonal}else l.polyline?d.polyline=l.polyline.map(r):l.polygon?d.polygon=l.polygon.map(r):l.ellipse?d.ellipse=l.ellipse:l.text?d.text=l.text:l.point?d.point=!0:d.rectangle=!0;return d};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=2147483648,s=1073741824,h=536870912,r=function(o){var u=Boolean(o&i),l=Boolean(o&s),f=Boolean(o&h);o=o&~(i|s|h);var v=0,d=!1;return u&&l&&f?(v=Math.PI/2,d=!0):u&&l&&!f?(v=Math.PI,d=!1):u&&!l&&f?(v=Math.PI/2,d=!1):u&&!l&&!f?(v=0,d=!0):!u&&l&&f?(v=3*Math.PI/2,d=!1):!u&&l&&!f?(v=Math.PI,d=!0):!u&&!l&&f?(v=3*Math.PI/2,d=!0):!u&&!l&&!f&&(v=0,d=!1),{gid:o,flippedHorizontal:u,flippedVertical:l,flippedAntiDiagonal:f,rotation:v,flipped:d}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),h=i(121),r=i(564),o=i(580),u=function(l,f,v,d,c,p,g,x){v===void 0&&(v=32),d===void 0&&(d=32),c===void 0&&(c=10),p===void 0&&(p=10),x===void 0&&(x=!1);var m=null;if(Array.isArray(g)){var y=f!==void 0?f:"map";m=r(y,s.ARRAY_2D,g,v,d,x)}else if(f!==void 0){var T=l.cache.tilemap.get(f);T?m=r(f,T.format,T.data,v,d,x):console.warn("No map data found for key "+f)}return m===null&&(m=new h({tileWidth:v,tileHeight:d,width:c,height:p})),new o(l,m)};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),h=function(r){var o=s(r,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(u){return!!u.getActive&&typeof u.getActive=="function"}function s(u){return!!u.getStart&&typeof u.getStart=="function"}function h(u){return!!u.getEnd&&typeof u.getEnd=="function"}function r(u){return s(u)||h(u)||i(u)}var o=function(u,l){var f,v=function(E,P,M){return M},d=function(E,P,M){return M},c=null,p=typeof l;if(p==="number")v=function(){return l};else if(p==="string"){var g=l[0],x=parseFloat(l.substr(2));switch(g){case"+":v=function(E,P,M){return M+x};break;case"-":v=function(E,P,M){return M-x};break;case"*":v=function(E,P,M){return M*x};break;case"/":v=function(E,P,M){return M/x};break;default:v=function(){return parseFloat(l)}}}else if(p==="function")v=l;else if(p==="object")if(r(l))i(l)&&(c=l.getActive),h(l)&&(v=l.getEnd),s(l)&&(d=l.getStart);else if(l.hasOwnProperty("value"))f=o(u,l.value);else{var m=l.hasOwnProperty("to"),y=l.hasOwnProperty("from"),T=l.hasOwnProperty("start");if(m&&(y||T)){if(f=o(u,l.to),T){var C=o(u,l.start);f.getActive=C.getEnd}if(y){var S=o(u,l.from);f.getStart=S.getEnd}}}return f||(f={getActive:c,getEnd:v,getStart:d}),f};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(267),o=i(16),u=i(5),l=i(100),f=i(14),v=new s({Extends:h,initialize:function(c,p,g){h.call(this),this.parent=c,this.parentIsTimeline=c.hasOwnProperty("isTimeline"),this.data=p,this.totalData=p.length,this.targets=g,this.totalTargets=g.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=l.PENDING_ADD,this._pausedState=l.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(d){return d===void 0&&(d=0),this.data[d].current},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===l.ACTIVE},isPaused:function(){return this.state===l.PAUSED},hasTarget:function(d){return this.targets.indexOf(d)!==-1},updateTo:function(d,c,p){p===void 0&&(p=!1);for(var g=0;g<this.totalData;g++){var x=this.data[g];x.key===d&&(x.end=c,p&&(x.start=x.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===l.ACTIVE?this.seek(0):this.state===l.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===l.PENDING_ADD?this:this.play()},calcDuration:function(){for(var d=0,c=f.MAX_SAFE_INTEGER,p=this.data,g=0;g<this.totalData;g++){var x=p[g];x.t1=x.duration+x.hold,x.yoyo&&(x.t1+=x.duration),x.t2=x.t1+x.repeatDelay,x.totalDuration=x.delay+x.t1,x.repeat===-1?x.totalDuration+=x.t2*999999999999:x.repeat>0&&(x.totalDuration+=x.t2*x.repeat),x.totalDuration>d&&(d=x.totalDuration),x.delay<c&&(c=x.delay)}this.duration=Math.max(d,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=c},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=l.PENDING_ADD,this._pausedState=l.INIT,!1;for(var d=this.data,c=this.totalTargets,p=0;p<this.totalData;p++){var g=d[p],x=g.target,m=g.gen,y=g.key,T=g.index;g.delay=m.delay(x,y,0,T,c,this),g.duration=Math.max(m.duration(x,y,0,T,c,this),.001),g.hold=m.hold(x,y,0,T,c,this),g.repeat=m.repeat(x,y,0,T,c,this),g.repeatDelay=m.repeatDelay(x,y,0,T,c,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=l.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=l.LOOP_DELAY):(this.state=l.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=l.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===l.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=l.PAUSED,this)},play:function(d){d===void 0&&(d=!1);var c=this.state;return c===l.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=l.ACTIVE,this):c===l.ACTIVE||c===l.PENDING_ADD&&this._pausedState===l.PENDING_ADD?this:!this.parentIsTimeline&&(c===l.PENDING_REMOVE||c===l.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(d),this.calculatedOffset===0?this.state=l.ACTIVE:(this.countdown=this.calculatedOffset,this.state=l.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(d),this.state=l.ACTIVE,this.makeActive()),this)},resetTweenData:function(d){for(var c=this.data,p=this.totalData,g=this.totalTargets,x=0;x<p;x++){var m=c[x],y=m.target,T=m.key,C=m.index;m.progress=0,m.elapsed=0,m.repeatCounter=m.repeat===-1?999999999999:m.repeat,d?(m.start=m.getStartValue(y,T,m.start,C,g,this),m.end=m.getEndValue(y,T,m.end,C,g,this),m.current=m.start,m.state=l.PLAYING_FORWARD):m.state=l.PENDING_RENDER,m.delay>0&&(m.elapsed=m.delay,m.state=l.DELAY),m.getActiveValue&&(y[T]=m.getActiveValue(m.target,m.key,m.start))}},resume:function(){return this.state===l.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(d,c){c===void 0&&(c=16.6),this.state===l.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var p=this.data,g=this.totalTargets,x=0;x<this.totalData;x++){var m=p[x],y=m.target,T=m.gen,C=m.key,S=m.index;m.progress=0,m.elapsed=0,m.repeatCounter=m.repeat===-1?999999999999:m.repeat,m.delay=T.delay(y,C,0,S,g,this),m.duration=Math.max(T.duration(y,C,0,S,g,this),.001),m.hold=T.hold(y,C,0,S,g,this),m.repeat=T.repeat(y,C,0,S,g,this),m.repeatDelay=T.repeatDelay(y,C,0,S,g,this),m.current=m.start,m.state=l.PLAYING_FORWARD,this.updateTweenData(this,m,0,S,g),m.delay>0&&(m.elapsed=m.delay,m.state=l.DELAY)}this.calcDuration();var E=!1;this.state===l.PAUSED&&(E=!0,this.state=l.ACTIVE),this.isSeeking=!0;do this.update(0,c);while(this.totalProgress<d);return this.isSeeking=!1,E&&(this.state=l.PAUSED),this},setCallback:function(d,c,p,g){return this.callbacks[d]={func:c,scope:g,params:p},this},complete:function(d){return d===void 0&&(d=0),d?(this.state=l.COMPLETE_DELAY,this.countdown=d):(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(d){return this.state===l.ACTIVE&&d!==void 0&&this.seek(d),this.state!==l.REMOVED&&((this.state===l.PAUSED||this.state===l.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=l.PENDING_REMOVE),this},update:function(d,c){if(this.state===l.PAUSED)return!1;switch(this.useFrames&&(c=1*this.parent.timeScale),c*=this.timeScale,this.elapsed+=c,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=c,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case l.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var p=!1,g=0;g<this.totalData;g++){var x=this.data[g];this.updateTweenData(this,x,c)&&(p=!0)}p||this.nextState();break;case l.LOOP_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=l.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case l.OFFSET_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=l.ACTIVE);break;case l.COMPLETE_DELAY:this.countdown-=c,this.countdown<=0&&(this.state=l.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===l.PENDING_REMOVE},dispatchTweenDataEvent:function(d,c,p){this.isSeeking||(this.emit(d,this,p.key,p.target,p.current,p.previous),c&&(c.params[1]=p.target,c.func.apply(c.scope,c.params)))},dispatchTweenEvent:function(d,c){this.isSeeking||(this.emit(d,this,this.targets),c&&(c.params[1]=this.targets,c.func.apply(c.scope,c.params)))},setStateFromEnd:function(d,c,p){return c.yoyo?(c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,d.callbacks.onYoyo,c),c.start=c.getStartValue(c.target,c.key,c.start,c.index,d.totalTargets,d),l.PLAYING_BACKWARD):c.repeatCounter>0?(c.repeatCounter--,c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.start=c.getStartValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.end=c.getEndValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.repeatDelay>0?(c.elapsed=c.repeatDelay-p,c.current=c.start,c.target[c.key]=c.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c),l.PLAYING_FORWARD)):l.COMPLETE},setStateFromStart:function(d,c,p){return c.repeatCounter>0?(c.repeatCounter--,c.elapsed=p,c.progress=p/c.duration,c.flipX&&c.target.toggleFlipX(),c.flipY&&c.target.toggleFlipY(),c.end=c.getEndValue(c.target,c.key,c.start,c.index,d.totalTargets,d),c.repeatDelay>0?(c.elapsed=c.repeatDelay-p,c.current=c.start,c.target[c.key]=c.current,l.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c),l.PLAYING_FORWARD)):l.COMPLETE},updateTweenData:function(d,c,p){var g=c.target;switch(c.state){case l.PLAYING_FORWARD:case l.PLAYING_BACKWARD:if(!g){c.state=l.COMPLETE;break}var x=c.elapsed,m=c.duration,y=0;x+=p,x>m&&(y=x-m,x=m);var T=c.state===l.PLAYING_FORWARD,C=x/m;if(c.elapsed=x,c.progress=C,c.previous=c.current,C===1)T?(c.current=c.end,g[c.key]=c.end,c.hold>0?(c.elapsed=c.hold-y,c.state=l.HOLD_DELAY):c.state=this.setStateFromEnd(d,c,y)):(c.current=c.start,g[c.key]=c.start,c.state=this.setStateFromStart(d,c,y));else{var S=T?c.ease(C):c.ease(1-C);c.current=c.start+(c.end-c.start)*S,g[c.key]=c.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,d.callbacks.onUpdate,c);break;case l.DELAY:c.elapsed-=p,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=l.PENDING_RENDER);break;case l.REPEAT_DELAY:c.elapsed-=p,c.elapsed<=0&&(c.elapsed=Math.abs(c.elapsed),c.state=l.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,d.callbacks.onRepeat,c));break;case l.HOLD_DELAY:c.elapsed-=p,c.elapsed<=0&&(c.state=this.setStateFromEnd(d,c,Math.abs(c.elapsed)));break;case l.PENDING_RENDER:g?(c.start=c.getStartValue(g,c.key,g[c.key],c.index,d.totalTargets,d),c.end=c.getEndValue(g,c.key,c.start,c.index,d.totalTargets,d),c.current=c.start,g[c.key]=c.start,c.state=l.PLAYING_FORWARD):c.state=l.COMPLETE;break}return c.state!==l.COMPLETE}});v.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],u.register("tween",function(d){return this.scene.sys.tweens.add(d)}),o.register("tween",function(d){return this.scene.sys.tweens.create(d)}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TIMELINE_COMPLETE:i(1466),TIMELINE_LOOP:i(1467),TIMELINE_PAUSE:i(1468),TIMELINE_RESUME:i(1469),TIMELINE_START:i(1470),TIMELINE_UPDATE:i(1471),TWEEN_ACTIVE:i(1472),TWEEN_COMPLETE:i(1473),TWEEN_LOOP:i(1474),TWEEN_REPEAT:i(1475),TWEEN_START:i(1476),TWEEN_STOP:i(1477),TWEEN_UPDATE:i(1478),TWEEN_YOYO:i(1479)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l,f,v,d,c,p,g,x,m,y){return{target:s,index:h,key:r,getActiveValue:l,getEndValue:o,getStartValue:u,ease:f,duration:0,totalDuration:0,delay:0,yoyo:c,hold:0,repeat:0,repeatDelay:0,flipX:m,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:v,duration:d,hold:p,repeat:g,repeatDelay:x},state:0}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(68),h=function(r){return s(r,-Math.PI,Math.PI)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(68),h=function(r){return s(r,-180,180)};e.exports=h},function(e,a,i){var s={};e.exports=s;var h=i(83),r=i(32);(function(){s.fromVertices=function(o){for(var u={},l=0;l<o.length;l++){var f=(l+1)%o.length,v=h.normalise({x:o[f].y-o[l].y,y:o[l].x-o[f].x}),d=v.y===0?1/0:v.x/v.y;d=d.toFixed(3).toString(),u[d]=v}return r.values(u)},s.rotate=function(o,u){if(u!==0)for(var l=Math.cos(u),f=Math.sin(u),v=0;v<o.length;v++){var d=o[v],c;c=d.x*l-d.y*f,d.y=d.x*f+d.y*l,d.x=c}}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_ADD:i(1504),AFTER_REMOVE:i(1505),AFTER_UPDATE:i(1506),BEFORE_ADD:i(1507),BEFORE_REMOVE:i(1508),BEFORE_UPDATE:i(1509),COLLISION_ACTIVE:i(1510),COLLISION_END:i(1511),COLLISION_START:i(1512),DRAG_END:i(1513),DRAG:i(1514),DRAG_START:i(1515),PAUSE:i(1516),RESUME:i(1517),SLEEP_END:i(1518),SLEEP_START:i(1519)}},function(e,a,i){var s={};e.exports=s;var h=i(274),r=i(250),o=i(84);(function(){s.collisions=function(u,l){for(var f=[],v=l.pairs.table,d=l.metrics,c=0;c<u.length;c++){var p=u[c][0],g=u[c][1];if(!((p.isStatic||p.isSleeping)&&(g.isStatic||g.isSleeping))&&!!s.canCollide(p.collisionFilter,g.collisionFilter)&&(d.midphaseTests+=1,o.overlaps(p.bounds,g.bounds)))for(var x=p.parts.length>1?1:0;x<p.parts.length;x++)for(var m=p.parts[x],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(m===p&&T===g||o.overlaps(m.bounds,T.bounds)){var C=r.id(m,T),S=v[C],E;S&&S.isActive?E=S.collision:E=null;var P=h.collides(m,T,E);d.narrowphaseTests+=1,P.reused&&(d.narrowReuseCount+=1),P.collided&&(f.push(P),d.narrowDetections+=1)}}}return f},s.canCollide=function(u,l){return u.group===l.group&&u.group!==0?u.group>0:(u.mask&l.category)!==0&&(l.mask&u.category)!==0}})()},function(e,a,i){var s={};e.exports=s;var h=i(64),r=i(83);(function(){s.collides=function(o,u,l){var f,v,d,c,p=!1;if(l){var g=o.parent,x=u.parent,m=g.speed*g.speed+g.angularSpeed*g.angularSpeed+x.speed*x.speed+x.angularSpeed*x.angularSpeed;p=l&&l.collided&&m<.2,c=l}else c={collided:!1,bodyA:o,bodyB:u};if(l&&p){var y=c.axisBody,T=y===o?u:o,C=[y.axes[l.axisNumber]];if(d=s._overlapAxes(y.vertices,T.vertices,C),c.reused=!0,d.overlap<=0)return c.collided=!1,c}else{if(f=s._overlapAxes(o.vertices,u.vertices,o.axes),f.overlap<=0||(v=s._overlapAxes(u.vertices,o.vertices,u.axes),v.overlap<=0))return c.collided=!1,c;f.overlap<v.overlap?(d=f,c.axisBody=o):(d=v,c.axisBody=u),c.axisNumber=d.axisNumber}c.bodyA=o.id<u.id?o:u,c.bodyB=o.id<u.id?u:o,c.collided=!0,c.depth=d.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,o=c.bodyA,u=c.bodyB,r.dot(d.axis,r.sub(u.position,o.position))<0?c.normal={x:d.axis.x,y:d.axis.y}:c.normal={x:-d.axis.x,y:-d.axis.y},c.tangent=r.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var S=s._findSupports(o,u,c.normal),E=[];if(h.contains(o.vertices,S[0])&&E.push(S[0]),h.contains(o.vertices,S[1])&&E.push(S[1]),E.length<2){var P=s._findSupports(u,o,r.neg(c.normal));h.contains(u.vertices,P[0])&&E.push(P[0]),E.length<2&&h.contains(u.vertices,P[1])&&E.push(P[1])}return E.length<1&&(E=[S[0]]),c.supports=E,c},s._overlapAxes=function(o,u,l){for(var f=r._temp[0],v=r._temp[1],d={overlap:Number.MAX_VALUE},c,p,g=0;g<l.length;g++){if(p=l[g],s._projectToAxis(f,o,p),s._projectToAxis(v,u,p),c=Math.min(f.max-v.min,v.max-f.min),c<=0)return d.overlap=c,d;c<d.overlap&&(d.overlap=c,d.axis=p,d.axisNumber=g)}return d},s._projectToAxis=function(o,u,l){for(var f=r.dot(u[0],l),v=f,d=1;d<u.length;d+=1){var c=r.dot(u[d],l);c>v?v=c:c<f&&(f=c)}o.min=f,o.max=v},s._findSupports=function(o,u,l){for(var f=Number.MAX_VALUE,v=r._temp[0],d=u.vertices,c=o.position,p,g,x,m,y=0;y<d.length;y++)g=d[y],v.x=g.x-c.x,v.y=g.y-c.y,p=-r.dot(l,v),p<f&&(f=p,x=g);var T=x.index-1>=0?x.index-1:d.length-1;g=d[T],v.x=g.x-c.x,v.y=g.y-c.y,f=-r.dot(l,v),m=g;var C=(x.index+1)%d.length;return g=d[C],v.x=g.x-c.x,v.y=g.y-c.y,p=-r.dot(l,v),p<f&&(m=g),[x,m]}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AlignTo:i(601),Angle:i(602),Call:i(603),GetFirst:i(604),GetLast:i(605),GridAlign:i(606),IncAlpha:i(678),IncX:i(679),IncXY:i(680),IncY:i(681),PlaceOnCircle:i(682),PlaceOnEllipse:i(683),PlaceOnLine:i(684),PlaceOnRectangle:i(685),PlaceOnTriangle:i(686),PlayAnimation:i(687),PropertyValueInc:i(46),PropertyValueSet:i(27),RandomCircle:i(688),RandomEllipse:i(689),RandomLine:i(690),RandomRectangle:i(691),RandomTriangle:i(692),Rotate:i(693),RotateAround:i(694),RotateAroundDistance:i(695),ScaleX:i(696),ScaleXY:i(697),ScaleY:i(698),SetAlpha:i(699),SetBlendMode:i(700),SetDepth:i(701),SetHitArea:i(702),SetOrigin:i(703),SetRotation:i(704),SetScale:i(705),SetScaleX:i(706),SetScaleY:i(707),SetScrollFactor:i(708),SetScrollFactorX:i(709),SetScrollFactorY:i(710),SetTint:i(711),SetVisible:i(712),SetX:i(713),SetXY:i(714),SetY:i(715),ShiftPosition:i(716),Shuffle:i(717),SmootherStep:i(718),SmoothStep:i(719),Spread:i(720),ToggleVisible:i(721),WrapInRectangle:i(722)}},function(e,a,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),h=[];h[s.BOTTOM_CENTER]=i(277),h[s.BOTTOM_LEFT]=i(278),h[s.BOTTOM_RIGHT]=i(279),h[s.LEFT_BOTTOM]=i(280),h[s.LEFT_CENTER]=i(281),h[s.LEFT_TOP]=i(282),h[s.RIGHT_BOTTOM]=i(283),h[s.RIGHT_CENTER]=i(284),h[s.RIGHT_TOP]=i(285),h[s.TOP_CENTER]=i(286),h[s.TOP_LEFT]=i(287),h[s.TOP_RIGHT]=i(288);var r=function(o,u,l,f,v){return h[l](o,u,f,v)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(87),r=i(88),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,h(f)+v),o(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(43),r=i(53),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,h(f)-v),o(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(44),r=i(54),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,h(f)+v),o(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(43),r=i(55),o=i(54),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)-v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),h=i(43),r=i(90),o=i(54),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)-v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(43),h=i(45),r=i(54),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,s(f)-v),o(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(44),r=i(55),o=i(53),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)+v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),h=i(44),r=i(90),o=i(53),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)+v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(44),h=i(45),r=i(53),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,s(f)+v),o(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(87),h=i(45),r=i(55),o=i(88),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,s(f)+v),r(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(43),h=i(45),r=i(55),o=i(53),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,s(f)-v),r(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(44),h=i(45),r=i(55),o=i(54),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,s(f)+v),r(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),h=[];h[s.BOTTOM_CENTER]=i(290),h[s.BOTTOM_LEFT]=i(291),h[s.BOTTOM_RIGHT]=i(292),h[s.CENTER]=i(293),h[s.LEFT_CENTER]=i(295),h[s.RIGHT_CENTER]=i(296),h[s.TOP_CENTER]=i(297),h[s.TOP_LEFT]=i(298),h[s.TOP_RIGHT]=i(299),h[s.LEFT_BOTTOM]=h[s.BOTTOM_LEFT],h[s.LEFT_TOP]=h[s.TOP_LEFT],h[s.RIGHT_BOTTOM]=h[s.BOTTOM_RIGHT],h[s.RIGHT_TOP]=h[s.TOP_RIGHT];var r=function(o,u,l,f,v){return h[l](o,u,f,v)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(87),r=i(55),o=i(88),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)+v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(43),r=i(55),o=i(53),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)-v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(44),r=i(55),o=i(54),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)+v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(294),h=i(87),r=i(89),o=function(u,l,f,v){return f===void 0&&(f=0),v===void 0&&(v=0),s(u,h(l)+f,r(l)+v),u};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(88),h=i(90),r=function(o,u,l){return s(o,u),h(o,l)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),h=i(43),r=i(90),o=i(53),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)-v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(89),h=i(44),r=i(90),o=i(54),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),o(l,h(f)+v),r(l,s(f)+d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(87),h=i(45),r=i(88),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,s(f)+v),o(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(43),h=i(45),r=i(53),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,s(f)-v),o(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(44),h=i(45),r=i(54),o=i(52),u=function(l,f,v,d){return v===void 0&&(v=0),d===void 0&&(d=0),r(l,s(f)+v),o(l,h(f)-d),l};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(169),h=i(98),r=i(14),o=i(4),u=function(l,f,v){v===void 0&&(v=new o);var d=h(f,0,r.PI2);return s(l,d,v)};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(302),h=i(169),r=i(98),o=i(14),u=function(l,f,v,d){d===void 0&&(d=[]),!f&&v>0&&(f=s(l)/v);for(var c=0;c<f;c++){var p=r(c/f,0,o.PI2);d.push(h(l,p))}return d};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 2*(Math.PI*s.radius)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=2,r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var u=s(o,0,1);this._alpha=u,u===0?this.renderFlags&=~h:this.renderFlags|=h}}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h={_blendMode:s.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=s[r]),r|=0,r>=-1&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_depth:0,depth:{get:function(){return this._depth},set:function(s){this.displayList&&this.displayList.queueDepthSort(),this._depth=s}},setDepth:function(s){return s===void 0&&(s=0),this.depth=s,this}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(171),h=i(130),r=function(o,u,l,f){f===void 0&&(f=[]),!u&&l>0&&(u=h(o)/l);for(var v=0;v<u;v++){var d=v/u;f.push(s(o,d))}return f};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u){return u===void 0&&(u=new s),u.x=r.x1+(r.x2-r.x1)*o,u.y=r.y1+(r.y2-r.y1)*o,u};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=Math.cos(o),l=Math.sin(o),f=s.x-h,v=s.y-r;return s.x=f*u-v*l+h,s.y=f*l+v*u+r,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(310),h=i(311),r={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new s(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new h(this.scene,o)}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(22),r=i(91),o=new s({initialize:function(l,f){var v=l.sys.renderer;this.renderer=v,this.bitmapMask=f,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),l.sys.game.events.on(h.CONTEXT_RESTORED,this.createMask,this),v&&v.on(r.RESIZE,this.createMask,this)},createMask:function(){var u=this.renderer;if(!(!u||!u.gl)){this.mainTexture&&this.clearMask();var l=u.width,f=u.height,v=(l&l-1)===0&&(f&f-1)===0,d=u.gl,c=v?d.REPEAT:d.CLAMP_TO_EDGE,p=d.LINEAR;this.mainTexture=u.createTexture2D(0,p,p,c,c,d.RGBA,null,l,f),this.maskTexture=u.createTexture2D(0,p,p,c,c,d.RGBA,null,l,f),this.mainFramebuffer=u.createFramebuffer(l,f,this.mainTexture,!0),this.maskFramebuffer=u.createFramebuffer(l,f,this.maskTexture,!0)}},clearMask:function(){var u=this.renderer;!u||!u.gl||!this.mainTexture||(u.deleteTexture(this.mainTexture),u.deleteTexture(this.maskTexture),u.deleteFramebuffer(this.mainFramebuffer),u.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,l,f){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,f)},postRenderWebGL:function(u,l){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u){this.geometryMask=u,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(r){return this.geometryMask=r,this},setInvertAlpha:function(r){return r===void 0&&(r=!0),this.invertAlpha=r,this},preRenderWebGL:function(r,o,u){var l=r.gl;r.flush(),r.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),r.maskCount=0),r.currentCameraMask.mask!==this&&(r.currentMask.mask=this),r.maskStack.push({mask:this,camera:u}),this.applyStencil(r,u,!0),r.maskCount++},applyStencil:function(r,o,u){var l=r.gl,f=this.geometryMask,v=r.maskCount;l.colorMask(!1,!1,!1,!1),u?(l.stencilFunc(l.EQUAL,v,255),l.stencilOp(l.KEEP,l.KEEP,l.INCR)):(l.stencilFunc(l.EQUAL,v+1,255),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),f.renderWebGL(r,f,o),r.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),u?this.invertAlpha?l.stencilFunc(l.NOTEQUAL,v+1,255):l.stencilFunc(l.EQUAL,v+1,255):this.invertAlpha?l.stencilFunc(l.NOTEQUAL,v,255):l.stencilFunc(l.EQUAL,v,255)},postRenderWebGL:function(r){var o=r.gl;r.maskStack.pop(),r.maskCount--,r.flush();var u=r.currentMask;if(r.maskStack.length===0)u.mask=null,o.disable(o.STENCIL_TEST);else{var l=r.maskStack[r.maskStack.length-1];l.mask.applyStencil(r,l.camera,!1),r.currentCameraMask.mask!==l.mask?(u.mask=l.mask,u.camera=l.camera):u.mask=null}},preRenderCanvas:function(r,o,u){var l=this.geometryMask;r.currentContext.save(),l.renderCanvas(r,l,u,null,null,!0),r.currentContext.clip()},postRenderCanvas:function(r){r.currentContext.restore()},destroy:function(){this.geometryMask=null}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(s,h){return h===void 0&&(h=s),this.scrollFactorX=s,this.scrollFactorY=h,this}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=i(25),r=i(177),o=i(269),u=i(270),l=i(3),f=4,v={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this._scaleX=d,this._scaleY=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleX:{get:function(){return this._scaleX},set:function(d){this._scaleX=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},scaleY:{get:function(){return this._scaleY},set:function(d){this._scaleY=d,d===0?this.renderFlags&=~f:this.renderFlags|=f}},angle:{get:function(){return u(this._rotation*s.RAD_TO_DEG)},set:function(d){this.rotation=u(d)*s.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(d){this._rotation=o(d)}},setPosition:function(d,c,p,g){return d===void 0&&(d=0),c===void 0&&(c=d),p===void 0&&(p=0),g===void 0&&(g=0),this.x=d,this.y=c,this.z=p,this.w=g,this},copyPosition:function(d){return d.x!==void 0&&(this.x=d.x),d.y!==void 0&&(this.y=d.y),d.z!==void 0&&(this.z=d.z),d.w!==void 0&&(this.w=d.w),this},setRandomPosition:function(d,c,p,g){return d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=d+Math.random()*p,this.y=c+Math.random()*g,this},setRotation:function(d){return d===void 0&&(d=0),this.rotation=d,this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,this},setScale:function(d,c){return d===void 0&&(d=1),c===void 0&&(c=d),this.scaleX=d,this.scaleY=c,this},setX:function(d){return d===void 0&&(d=0),this.x=d,this},setY:function(d){return d===void 0&&(d=0),this.y=d,this},setZ:function(d){return d===void 0&&(d=0),this.z=d,this},setW:function(d){return d===void 0&&(d=0),this.w=d,this},getLocalTransformMatrix:function(d){return d===void 0&&(d=new h),d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(d,c){d===void 0&&(d=new h),c===void 0&&(c=new h);var p=this.parentContainer;if(!p)return this.getLocalTransformMatrix(d);for(d.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);p;)c.applyITRS(p.x,p.y,p._rotation,p._scaleX,p._scaleY),c.multiply(d,d),p=p.parentContainer;return d},getLocalPoint:function(d,c,p,g){p||(p=new l),g||(g=this.scene.sys.cameras.main);var x=g.scrollX,m=g.scrollY,y=d+x*this.scrollFactorX-x,T=c+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(y,T,p):r(y,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,p),this._originComponent&&(p.x+=this._displayOriginX,p.y+=this._displayOriginY),p},getParentRotation:function(){for(var d=0,c=this.parentContainer;c;)d+=c.rotation,c=c.parentContainer;return d}};e.exports=v},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=1,s={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=i):(this._visible=!1,this.renderFlags&=~i)}},setVisible:function(h){return this.visible=h,this}};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CHANGE_DATA:i(638),CHANGE_DATA_KEY:i(639),DESTROY:i(640),REMOVE_DATA:i(641),SET_DATA:i(642)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(130),h=i(4),r=function(o,u,l,f){if(f===void 0&&(f=[]),!u&&!l)return f;u?l=Math.round(s(o)/u):u=s(o)/l;for(var v=o.x,d=o.y,c=0,p=0;p<l;p++)switch(f.push(new h(v,d)),c){case 0:v+=u,v>=o.right&&(c=1,d+=v-o.right,v=o.right);break;case 1:d+=u,d>=o.bottom&&(c=2,v-=d-o.bottom,d=o.bottom);break;case 2:v-=u,v<=o.left&&(c=3,d-=o.left-v,v=o.left);break;case 3:d-=u,d<=o.top&&(c=0,d=o.top);break}return f};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){h===void 0&&(h=1),r===void 0&&(r=[]);var o=Math.round(s.x1),u=Math.round(s.y1),l=Math.round(s.x2),f=Math.round(s.y2),v=Math.abs(l-o),d=Math.abs(f-u),c=o<l?1:-1,p=u<f?1:-1,g=v-d;r.push({x:o,y:u});for(var x=1;!(o===l&&u===f);){var m=g<<1;m>-d&&(g-=d,o+=c),m<v&&(g+=v,u+=p),x%h===0&&r.push({x:o,y:u}),x++}return r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h.length){if(h.length===1)return h[0]}else return NaN;var o=1,u,l;if(r){if(s<h[0][r])return h[0];for(;h[o][r]<s;)o++}else for(;h[o]<s;)o++;return o>h.length&&(o=h.length),r?(u=h[o-1][r],l=h[o][r],l-s<=s-u?h[o]:h[o-1]):(u=h[o-1],l=h[o],l-s<=s-u?l:u)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f,v){v===void 0&&(v=!1),this.textureKey=o,this.textureFrame=u,this.index=l,this.frame=f,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=/\D/g;return s.sort(function(r,o){return parseInt(r.replace(h,""),10)-parseInt(o.replace(h,""),10)}),s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(185),h=i(0),r=i(102),o=i(9),u=i(132),l=i(22),f=i(2),v=i(6),d=i(186),c=i(322),p=new h({Extends:o,initialize:function(x){o.call(this),this.game=x,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",x.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},addMix:function(g,x,m){var y=this.anims,T=this.mixes,C=typeof g=="string"?g:g.key,S=typeof x=="string"?x:x.key;if(y.has(C)&&y.has(S)){var E=T.get(C);E||(E={}),E[S]=m,T.set(C,E)}return this},removeMix:function(g,x){var m=this.mixes,y=typeof g=="string"?g:g.key,T=m.get(y);if(T)if(x){var C=typeof x=="string"?x:x.key;T.hasOwnProperty(C)&&delete T[C]}else x||m.delete(y);return this},getMix:function(g,x){var m=this.mixes,y=typeof g=="string"?g:g.key,T=typeof x=="string"?x:x.key,C=m.get(y);return C&&C.hasOwnProperty(T)?C[T]:0},add:function(g,x){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(x.key=g,this.anims.set(g,x),this.emit(u.ADD_ANIMATION,g,x),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,x){var m=[],y=this.game.cache.json.get(g);if(!y)return m;var T=this,C=v(y,"meta",null),S=v(y,"frames",null);if(C&&S){var E=v(C,"frameTags",[]);E.forEach(function(P){var M=[],O=f(P,"name",null),A=f(P,"from",0),R=f(P,"to",0),F=f(P,"direction","forward");if(!!O&&(!x||x&&x.indexOf(O)>-1)){for(var I=[],D=Number.MAX_SAFE_INTEGER,N=A;N<=R;N++){var z=N.toString(),U=S[z];if(U){var W=f(U,"duration",Number.MAX_SAFE_INTEGER);W<D&&(D=W),I.push({frame:z,duration:W})}}I.forEach(function(b){M.push({key:g,frame:b.frame,duration:D-b.duration})});var w=D*M.length;F==="reverse"&&(M=M.reverse());var L={key:O,frames:M,duration:w,yoyo:F==="pingpong"},B=T.create(L);B&&m.push(B)}})}return m},create:function(g){var x=g.key,m=!1;return x&&(m=this.get(x),m||(m=new s(this,x,g),this.anims.set(x,m),this.emit(u.ADD_ANIMATION,x,m))),m},fromJSON:function(g,x){x===void 0&&(x=!1),x&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var m=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var y=0;y<g.anims.length;y++)m.push(this.create(g.anims[y]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&m.push(this.create(g));return m},generateFrameNames:function(g,x){var m=v(x,"prefix",""),y=v(x,"start",0),T=v(x,"end",0),C=v(x,"suffix",""),S=v(x,"zeroPad",0),E=v(x,"outputArray",[]),P=v(x,"frames",!1),M=this.textureManager.get(g);if(!M)return E;var O;if(x)for(P||(P=c(y,T)),O=0;O<P.length;O++){var A=m+d(P[O],S,"0",1)+C;M.has(A)?E.push({key:g,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+g)}else for(P=M.getFrameNames(),O=0;O<P.length;O++)E.push({key:g,frame:P[O]});return E},generateFrameNumbers:function(g,x){var m=v(x,"start",0),y=v(x,"end",-1),T=v(x,"first",!1),C=v(x,"outputArray",[]),S=v(x,"frames",!1),E=this.textureManager.get(g);if(!E)return C;T&&E.has(T)&&C.push({key:g,frame:T}),S||(y===-1&&(y=E.frameTotal-2),S=c(m,y));for(var P=0;P<S.length;P++)E.has(S[P])?C.push({key:g,frame:S[P]}):console.warn("generateFrameNumbers: Frame "+P+" missing from texture: "+g);return C},get:function(g){return this.anims.get(g)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(u.PAUSE_ALL)),this},play:function(g,x){Array.isArray(x)||(x=[x]);for(var m=0;m<x.length;m++)x[m].anims.play(g);return this},staggerPlay:function(g,x,m,y){m===void 0&&(m=0),y===void 0&&(y=!0),Array.isArray(x)||(x=[x]);var T=x.length;y||T--;for(var C=0;C<x.length;C++){var S=m<0?Math.abs(m)*(T-C):m*C;x[C].anims.playAfterDelay(g,S)}return this},remove:function(g){var x=this.get(g);return x&&(this.emit(u.REMOVE_ANIMATION,g,x),this.anims.delete(g),this.removeMix(g)),x},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(u.RESUME_ALL)),this},toJSON:function(g){var x={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?x.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(m,y){x.anims.push(y.toJSON())}),x},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});e.exports=p},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=[],l,f=!1;if((r||o)&&(f=!0,r||(r=""),o||(o="")),h<s)for(l=s;l>=h;l--)f?u.push(r+l.toString()+o):u.push(l);else for(l=s;l<=h;l++)f?u.push(r+l.toString()+o):u.push(l);return u};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(102),r=i(9),o=i(324),u=new s({initialize:function(){this.entries=new h,this.events=new r},add:function(l,f){return this.entries.set(l,f),this.events.emit(o.ADD,this,l,f),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var f=this.get(l);return f&&(this.entries.delete(l),this.events.emit(o.REMOVE,this,l,f.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ADD:i(736),REMOVE:i(737)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(323),h=i(0),r=i(22),o=new h({initialize:function(l){this.game=l,this.binary=new s,this.bitmapFont=new s,this.json=new s,this.physics=new s,this.shader=new s,this.audio=new s,this.video=new s,this.text=new s,this.html=new s,this.obj=new s,this.tilemap=new s,this.xml=new s,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(u){return this.custom.hasOwnProperty(u)||(this.custom[u]=new s),this.custom[u]},destroy:function(){for(var u=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<u.length;l++)this[u[l]].destroy(),this[u[l]]=null;for(var f in this.custom)this.custom[f].destroy();this.custom=null,this.game=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(133),h=i(190),r=i(18),o=i(0),u=i(11),l=i(333),f=i(37),v=i(135),d=i(10),c=i(3),p=new o({Extends:s,Mixins:[u.Flip,u.Tint,u.Pipeline],initialize:function(x,m,y,T){s.call(this,x,m,y,T),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new c(1,1),this.followOffset=new c,this.deadzone=null,this._follow=null},setDeadzone:function(g,x){if(g===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=g,this.deadzone.height=x):this.deadzone=new d(0,0,g,x),this._follow){var m=this.width/2,y=this.height/2,T=this._follow.x-this.followOffset.x,C=this._follow.y-this.followOffset.y;this.midPoint.set(T,C),this.scrollX=T-m,this.scrollY=C-y}h(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(g,x,m,y,T,C){return this.fadeEffect.start(!1,g,x,m,y,!0,T,C)},fadeOut:function(g,x,m,y,T,C){return this.fadeEffect.start(!0,g,x,m,y,!0,T,C)},fadeFrom:function(g,x,m,y,T,C,S){return this.fadeEffect.start(!1,g,x,m,y,T,C,S)},fade:function(g,x,m,y,T,C,S){return this.fadeEffect.start(!0,g,x,m,y,T,C,S)},flash:function(g,x,m,y,T,C,S){return this.flashEffect.start(g,x,m,y,T,C,S)},shake:function(g,x,m,y,T){return this.shakeEffect.start(g,x,m,y,T)},pan:function(g,x,m,y,T,C,S){return this.panEffect.start(g,x,m,y,T,C,S)},rotateTo:function(g,x,m,y,T,C,S){return this.rotateToEffect.start(g,x,m,y,T,C,S)},zoomTo:function(g,x,m,y,T,C){return this.zoomEffect.start(g,x,m,y,T,C)},preRender:function(){this.renderList.length=0;var g=this.width,x=this.height,m=g*.5,y=x*.5,T=this.zoom,C=this.matrix,S=g*this.originX,E=x*this.originY,P=this._follow,M=this.deadzone,O=this.scrollX,A=this.scrollY;M&&h(M,this.midPoint.x,this.midPoint.y);var R=!1;if(P&&!this.panEffect.isRunning){var F=P.x-this.followOffset.x,I=P.y-this.followOffset.y;M?(F<M.x?O=v(O,O-(M.x-F),this.lerp.x):F>M.right&&(O=v(O,O+(F-M.right),this.lerp.x)),I<M.y?A=v(A,A-(M.y-I),this.lerp.y):I>M.bottom&&(A=v(A,A+(I-M.bottom),this.lerp.y))):(O=v(O,F-S,this.lerp.x),A=v(A,I-E,this.lerp.y)),R=!0}this.useBounds&&(O=this.clampX(O),A=this.clampY(A)),this.roundPixels&&(S=Math.round(S),E=Math.round(E),O=Math.round(O),A=Math.round(A)),this.scrollX=O,this.scrollY=A;var D=O+m,N=A+y;this.midPoint.set(D,N);var z=g/T,U=x/T,W=D-z/2,w=N-U/2;this.roundPixels&&(W=Math.round(W),w=Math.round(w)),this.worldView.setTo(W,w,z,U),C.applyITRS(this.x+S,this.y+E,this.rotation,T,T),C.translate(-S,-E),this.shakeEffect.preRender(),R&&this.emit(f.FOLLOW_UPDATE,this,P)},setLerp:function(g,x){return g===void 0&&(g=1),x===void 0&&(x=g),this.lerp.set(g,x),this},setFollowOffset:function(g,x){return g===void 0&&(g=0),x===void 0&&(x=0),this.followOffset.set(g,x),this},startFollow:function(g,x,m,y,T,C){x===void 0&&(x=!1),m===void 0&&(m=1),y===void 0&&(y=m),T===void 0&&(T=0),C===void 0&&(C=T),this._follow=g,this.roundPixels=x,m=r(m,0,1),y=r(y,0,1),this.lerp.set(m,y),this.followOffset.set(T,C);var S=this.width/2,E=this.height/2,P=g.x-T,M=g.y-C;return this.midPoint.set(P,M),this.scrollX=P-S,this.scrollY=M-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(g,x){this.visible&&(this.rotateToEffect.update(g,x),this.panEffect.update(g,x),this.zoomEffect.update(g,x),this.shakeEffect.update(g,x),this.flashEffect.update(g,x),this.fadeEffect.update(g,x))},destroy:function(){this.resetFX(),s.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),h=function(r){var o=new s;r=r.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(d,c,p,g){return c+c+p+p+g+g});var u=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(u){var l=parseInt(u[1],16),f=parseInt(u[2],16),v=parseInt(u[3],16);o.setTo(l,f,v)}return o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return o<<24|s<<16|h<<8|r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){o===void 0&&(o={h:0,s:0,v:0}),s/=255,h/=255,r/=255;var u=Math.min(s,h,r),l=Math.max(s,h,r),f=l-u,v=0,d=l===0?0:f/l,c=l;return l!==u&&(l===s?v=(h-r)/f+(h<r?6:0):l===h?v=(r-s)/f+2:l===r&&(v=(s-h)/f+4),v/=6),o.hasOwnProperty("_h")?(o._h=v,o._s=d,o._v=c):(o.h=v,o.s=d,o.v=c),o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s>16777215?{a:s>>>24,r:s>>16&255,g:s>>8&255,b:s&255}:{a:255,r:s>>16&255,g:s>>8&255,b:s&255}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),h=function(r){return new s(r.r,r.g,r.b,r.a)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),h=function(r){var o=new s,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(u){var l=parseInt(u[1],10),f=parseInt(u[2],10),v=parseInt(u[3],10),d=u[4]!==void 0?parseFloat(u[4]):1;o.setTo(l,f,v,d*255)}return o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Fade:i(761),Flash:i(762),Pan:i(763),Shake:i(796),RotateTo:i(797),Zoom:i(798)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(764),Out:i(765),InOut:i(766)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(767),Out:i(768),InOut:i(769)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(770),Out:i(771),InOut:i(772)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(773),Out:i(774),InOut:i(775)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(776),Out:i(777),InOut:i(778)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(779),Out:i(780),InOut:i(781)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(782)},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(783),Out:i(784),InOut:i(785)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(786),Out:i(787),InOut:i(788)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(789),Out:i(790),InOut:i(791)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={In:i(792),Out:i(793),InOut:i(794)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=i(795)},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(33),r=i(347),o=i(2),u=i(6),l=i(7),f=i(193),v=i(1),d=i(197),c=i(187),p=new s({initialize:function(x){x===void 0&&(x={});var m=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],y="#ffffff";this.width=u(x,"width",1024),this.height=u(x,"height",768),this.zoom=u(x,"zoom",1),this.parent=u(x,"parent",void 0),this.scaleMode=u(x,"scaleMode",0),this.expandParent=u(x,"expandParent",!0),this.autoRound=u(x,"autoRound",!1),this.autoCenter=u(x,"autoCenter",0),this.resizeInterval=u(x,"resizeInterval",500),this.fullscreenTarget=u(x,"fullscreenTarget",null),this.minWidth=u(x,"minWidth",0),this.maxWidth=u(x,"maxWidth",0),this.minHeight=u(x,"minHeight",0),this.maxHeight=u(x,"maxHeight",0);var T=u(x,"scale",null);T&&(this.width=u(T,"width",this.width),this.height=u(T,"height",this.height),this.zoom=u(T,"zoom",this.zoom),this.parent=u(T,"parent",this.parent),this.scaleMode=u(T,"mode",this.scaleMode),this.expandParent=u(T,"expandParent",this.expandParent),this.autoRound=u(T,"autoRound",this.autoRound),this.autoCenter=u(T,"autoCenter",this.autoCenter),this.resizeInterval=u(T,"resizeInterval",this.resizeInterval),this.fullscreenTarget=u(T,"fullscreenTarget",this.fullscreenTarget),this.minWidth=u(T,"min.width",this.minWidth),this.maxWidth=u(T,"max.width",this.maxWidth),this.minHeight=u(T,"min.height",this.minHeight),this.maxHeight=u(T,"max.height",this.maxHeight)),this.renderType=u(x,"type",h.AUTO),this.canvas=u(x,"canvas",null),this.context=u(x,"context",null),this.canvasStyle=u(x,"canvasStyle",null),this.customEnvironment=u(x,"customEnvironment",!1),this.sceneConfig=u(x,"scene",null),this.seed=u(x,"seed",[(Date.now()*Math.random()).toString()]),f.RND=new f.RandomDataGenerator(this.seed),this.gameTitle=u(x,"title",""),this.gameURL=u(x,"url","https://phaser.io"),this.gameVersion=u(x,"version",""),this.autoFocus=u(x,"autoFocus",!0),this.domCreateContainer=u(x,"dom.createContainer",!1),this.domBehindCanvas=u(x,"dom.behindCanvas",!1),this.domPointerEvents=u(x,"dom.pointerEvents","none"),this.inputKeyboard=u(x,"input.keyboard",!0),this.inputKeyboardEventTarget=u(x,"input.keyboard.target",window),this.inputKeyboardCapture=u(x,"input.keyboard.capture",[]),this.inputMouse=u(x,"input.mouse",!0),this.inputMouseEventTarget=u(x,"input.mouse.target",null),this.inputMousePreventDefaultDown=u(x,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=u(x,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=u(x,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=u(x,"input.mouse.preventDefaultWheel",!0),this.inputTouch=u(x,"input.touch",r.input.touch),this.inputTouchEventTarget=u(x,"input.touch.target",null),this.inputTouchCapture=u(x,"input.touch.capture",!0),this.inputActivePointers=u(x,"input.activePointers",1),this.inputSmoothFactor=u(x,"input.smoothFactor",0),this.inputWindowEvents=u(x,"input.windowEvents",!0),this.inputGamepad=u(x,"input.gamepad",!1),this.inputGamepadEventTarget=u(x,"input.gamepad.target",window),this.disableContextMenu=u(x,"disableContextMenu",!1),this.audio=u(x,"audio",{}),this.hideBanner=u(x,"banner",null)===!1,this.hidePhaser=u(x,"banner.hidePhaser",!1),this.bannerTextColor=u(x,"banner.text",y),this.bannerBackgroundColor=u(x,"banner.background",m),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=u(x,"fps",null);var C=u(x,"render",x);this.pipeline=u(C,"pipeline",null),this.antialias=u(C,"antialias",!0),this.antialiasGL=u(C,"antialiasGL",!0),this.mipmapFilter=u(C,"mipmapFilter","LINEAR"),this.desynchronized=u(C,"desynchronized",!1),this.roundPixels=u(C,"roundPixels",!1),this.pixelArt=u(C,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=u(C,"transparent",!1),this.clearBeforeRender=u(C,"clearBeforeRender",!0),this.preserveDrawingBuffer=u(C,"preserveDrawingBuffer",!1),this.premultipliedAlpha=u(C,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=u(C,"failIfMajorPerformanceCaveat",!1),this.powerPreference=u(C,"powerPreference","default"),this.batchSize=u(C,"batchSize",4096),this.maxTextures=u(C,"maxTextures",-1),this.maxLights=u(C,"maxLights",10);var S=u(x,"backgroundColor",0);this.backgroundColor=c(S),this.transparent&&(this.backgroundColor=c(0),this.backgroundColor.alpha=0),this.preBoot=u(x,"callbacks.preBoot",v),this.postBoot=u(x,"callbacks.postBoot",v),this.physics=u(x,"physics",{}),this.defaultPhysicsSystem=u(this.physics,"default",!1),this.loaderBaseURL=u(x,"loader.baseURL",""),this.loaderPath=u(x,"loader.path","");var E=r.os.android?6:32;this.loaderMaxParallelDownloads=u(x,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=u(x,"loader.crossOrigin",void 0),this.loaderResponseType=u(x,"loader.responseType",""),this.loaderAsync=u(x,"loader.async",!0),this.loaderUser=u(x,"loader.user",""),this.loaderPassword=u(x,"loader.password",""),this.loaderTimeout=u(x,"loader.timeout",0),this.loaderWithCredentials=u(x,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=u(x,"plugins",null),M=d.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:l(P)&&(this.installGlobalPlugins=o(P,"global",[]),this.installScenePlugins=o(P,"scene",[]),Array.isArray(P.default)?M=P.default:Array.isArray(P.defaultMerge)&&(M=M.concat(P.defaultMerge)))),this.defaultPlugins=M;var O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=u(x,"images.default",O+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=u(x,"images.missing",O+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=u(x,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=h.WEBGL:window.FORCE_CANVAS&&(this.renderType=h.CANVAS))}});e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={os:i(105),browser:i(136),features:i(191),input:i(808),audio:i(809),video:i(810),fullscreen:i(811),canvasFeatures:i(348)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h={supportInverseAlpha:!1,supportNewBlendModes:!1};function r(){var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",f="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var d=new Image;d.onload=function(){var c=s.create(d,6,1),p=c.getContext("2d");if(p.globalCompositeOperation="multiply",p.drawImage(v,0,0),p.drawImage(d,2,0),!p.getImageData(2,0,1,1))return!1;var g=p.getImageData(2,0,1,1).data;s.remove(d),h.supportNewBlendModes=g[0]===255&&g[1]===0&&g[2]===0},d.src=l+"/wCKxvRF"+f},v.src=l+"AP804Oa6"+f,!1}function o(){var l=s.create(this,2,1),f=l.getContext("2d");f.fillStyle="rgba(10, 20, 30, 0.5)",f.fillRect(0,0,1,1);var v=f.getImageData(0,0,1,1);if(v===null)return!1;f.putImageData(v,1,0);var d=f.getImageData(1,0,1,1);return d.data[0]===v.data[0]&&d.data[1]===v.data[1]&&d.data[2]===v.data[2]&&d.data[3]===v.data[3]}function u(){return typeof importScripts!="function"&&document!==void 0&&(h.supportNewBlendModes=r(),h.supportInverseAlpha=o()),h}e.exports=u()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return Math.atan2(o-h,r-s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return Math.atan2(h.y-s.y,h.x-s.x)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s=s%(2*Math.PI),s>=0?s:s+2*Math.PI};e.exports=i},function(e,a){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.x-h.x,o=s.y-h.y;return Math.sqrt(r*r+o*o)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=s-r,l=h-o;return u*u+l*l};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return r===void 0&&(r=1e-4),s>h-r};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return r===void 0&&(r=1e-4),s<h+r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(357),h=function(r,o){return s(r)/s(o)/s(r-o)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(s===0)return 1;for(var h=s;--s;)h*=s;return h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(u,l){var f=1-u;return f*f*f*l}function s(u,l){var f=1-u;return 3*f*f*u*l}function h(u,l){return 3*(1-u)*u*u*l}function r(u,l){return u*u*u*l}var o=function(u,l,f,v,d){return i(u,l)+s(u,f)+h(u,v)+r(u,d)};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(o,u){var l=1-o;return l*l*u}function s(o,u){return 2*(1-o)*o*u}function h(o,u){return o*o*u}var r=function(o,u,l,f){return i(o,u)+s(o,l)+h(o,f)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(184),h=function(r,o,u){return o+(u-o)*s(r,0,1)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=Math.log(s)/.6931471805599453;return 1<<Math.ceil(h)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.x,o=s.y;return s.x=r*Math.cos(h)-o*Math.sin(h),s.y=r*Math.sin(h)+o*Math.cos(h),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s>0?Math.ceil(s):Math.floor(s)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new h(this)},set:function(r){return this.copy(r)},copy:function(r){var o=this.val,u=r.val;return o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[4]=u[4],o[5]=u[5],o[6]=u[6],o[7]=u[7],o[8]=u[8],this},fromMat4:function(r){var o=r.val,u=this.val;return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[4],u[4]=o[5],u[5]=o[6],u[6]=o[8],u[7]=o[9],u[8]=o[10],this},fromArray:function(r){var o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],this},identity:function(){var r=this.val;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,this},transpose:function(){var r=this.val,o=r[1],u=r[2],l=r[5];return r[1]=r[3],r[2]=r[6],r[3]=o,r[5]=r[7],r[6]=u,r[7]=l,this},invert:function(){var r=this.val,o=r[0],u=r[1],l=r[2],f=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8],x=g*v-d*p,m=-g*f+d*c,y=p*f-v*c,T=o*x+u*m+l*y;return T?(T=1/T,r[0]=x*T,r[1]=(-g*u+l*p)*T,r[2]=(d*u-l*v)*T,r[3]=m*T,r[4]=(g*o-l*c)*T,r[5]=(-d*o+l*f)*T,r[6]=y*T,r[7]=(-p*o+u*c)*T,r[8]=(v*o-u*f)*T,this):null},adjoint:function(){var r=this.val,o=r[0],u=r[1],l=r[2],f=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8];return r[0]=v*g-d*p,r[1]=l*p-u*g,r[2]=u*d-l*v,r[3]=d*c-f*g,r[4]=o*g-l*c,r[5]=l*f-o*d,r[6]=f*p-v*c,r[7]=u*c-o*p,r[8]=o*v-u*f,this},determinant:function(){var r=this.val,o=r[0],u=r[1],l=r[2],f=r[3],v=r[4],d=r[5],c=r[6],p=r[7],g=r[8];return o*(g*v-d*p)+u*(-g*f+d*c)+l*(p*f-v*c)},multiply:function(r){var o=this.val,u=o[0],l=o[1],f=o[2],v=o[3],d=o[4],c=o[5],p=o[6],g=o[7],x=o[8],m=r.val,y=m[0],T=m[1],C=m[2],S=m[3],E=m[4],P=m[5],M=m[6],O=m[7],A=m[8];return o[0]=y*u+T*v+C*p,o[1]=y*l+T*d+C*g,o[2]=y*f+T*c+C*x,o[3]=S*u+E*v+P*p,o[4]=S*l+E*d+P*g,o[5]=S*f+E*c+P*x,o[6]=M*u+O*v+A*p,o[7]=M*l+O*d+A*g,o[8]=M*f+O*c+A*x,this},translate:function(r){var o=this.val,u=r.x,l=r.y;return o[6]=u*o[0]+l*o[3]+o[6],o[7]=u*o[1]+l*o[4]+o[7],o[8]=u*o[2]+l*o[5]+o[8],this},rotate:function(r){var o=this.val,u=o[0],l=o[1],f=o[2],v=o[3],d=o[4],c=o[5],p=Math.sin(r),g=Math.cos(r);return o[0]=g*u+p*v,o[1]=g*l+p*d,o[2]=g*f+p*c,o[3]=g*v-p*u,o[4]=g*d-p*l,o[5]=g*c-p*f,this},scale:function(r){var o=this.val,u=r.x,l=r.y;return o[0]=u*o[0],o[1]=u*o[1],o[2]=u*o[2],o[3]=l*o[3],o[4]=l*o[4],o[5]=l*o[5],this},fromQuat:function(r){var o=r.x,u=r.y,l=r.z,f=r.w,v=o+o,d=u+u,c=l+l,p=o*v,g=o*d,x=o*c,m=u*d,y=u*c,T=l*c,C=f*v,S=f*d,E=f*c,P=this.val;return P[0]=1-(m+T),P[3]=g+E,P[6]=x-S,P[1]=g-E,P[4]=1-(p+T),P[7]=y+C,P[2]=x+S,P[5]=y-C,P[8]=1-(p+m),this},normalFromMat4:function(r){var o=r.val,u=this.val,l=o[0],f=o[1],v=o[2],d=o[3],c=o[4],p=o[5],g=o[6],x=o[7],m=o[8],y=o[9],T=o[10],C=o[11],S=o[12],E=o[13],P=o[14],M=o[15],O=l*p-f*c,A=l*g-v*c,R=l*x-d*c,F=f*g-v*p,I=f*x-d*p,D=v*x-d*g,N=m*E-y*S,z=m*P-T*S,U=m*M-C*S,W=y*P-T*E,w=y*M-C*E,L=T*M-C*P,B=O*L-A*w+R*W+F*U-I*z+D*N;return B?(B=1/B,u[0]=(p*L-g*w+x*W)*B,u[1]=(g*U-c*L-x*z)*B,u[2]=(c*w-p*U+x*N)*B,u[3]=(v*w-f*L-d*W)*B,u[4]=(l*L-v*U+d*z)*B,u[5]=(f*U-l*w-d*N)*B,u[6]=(E*D-P*I+M*F)*B,u[7]=(P*R-S*D-M*A)*B,u[8]=(S*I-E*R+M*O)*B,this):null}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(364),r=i(1),o=i(39),u=1e-6,l=new Int8Array([1,2,0]),f=new Float32Array([0,0,0]),v=new o(1,0,0),d=new o(0,1,0),c=new o,p=new h,g=new s({initialize:function(m,y,T,C){this.onChangeCallback=r,this.set(m,y,T,C)},x:{get:function(){return this._x},set:function(x){this._x=x,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(x){this._y=x,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(x){this._z=x,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(x){this._w=x,this.onChangeCallback(this)}},copy:function(x){return this.set(x)},set:function(x,m,y,T,C){return C===void 0&&(C=!0),typeof x=="object"?(this._x=x.x||0,this._y=x.y||0,this._z=x.z||0,this._w=x.w||0):(this._x=x||0,this._y=m||0,this._z=y||0,this._w=T||0),C&&this.onChangeCallback(this),this},add:function(x){return this._x+=x.x,this._y+=x.y,this._z+=x.z,this._w+=x.w,this.onChangeCallback(this),this},subtract:function(x){return this._x-=x.x,this._y-=x.y,this._z-=x.z,this._w-=x.w,this.onChangeCallback(this),this},scale:function(x){return this._x*=x,this._y*=x,this._z*=x,this._w*=x,this.onChangeCallback(this),this},length:function(){var x=this.x,m=this.y,y=this.z,T=this.w;return Math.sqrt(x*x+m*m+y*y+T*T)},lengthSq:function(){var x=this.x,m=this.y,y=this.z,T=this.w;return x*x+m*m+y*y+T*T},normalize:function(){var x=this.x,m=this.y,y=this.z,T=this.w,C=x*x+m*m+y*y+T*T;return C>0&&(C=1/Math.sqrt(C),this._x=x*C,this._y=m*C,this._z=y*C,this._w=T*C),this.onChangeCallback(this),this},dot:function(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w},lerp:function(x,m){m===void 0&&(m=0);var y=this.x,T=this.y,C=this.z,S=this.w;return this.set(y+m*(x.x-y),T+m*(x.y-T),C+m*(x.z-C),S+m*(x.w-S))},rotationTo:function(x,m){var y=x.x*m.x+x.y*m.y+x.z*m.z;return y<-.999999?(c.copy(v).cross(x).length()<u&&c.copy(d).cross(x),c.normalize(),this.setAxisAngle(c,Math.PI)):y>.999999?this.set(0,0,0,1):(c.copy(x).cross(m),this._x=c.x,this._y=c.y,this._z=c.z,this._w=1+y,this.normalize())},setAxes:function(x,m,y){var T=p.val;return T[0]=m.x,T[3]=m.y,T[6]=m.z,T[1]=y.x,T[4]=y.y,T[7]=y.z,T[2]=-x.x,T[5]=-x.y,T[8]=-x.z,this.fromMat3(p).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(x,m){m=m*.5;var y=Math.sin(m);return this.set(y*x.x,y*x.y,y*x.z,Math.cos(m))},multiply:function(x){var m=this.x,y=this.y,T=this.z,C=this.w,S=x.x,E=x.y,P=x.z,M=x.w;return this.set(m*M+C*S+y*P-T*E,y*M+C*E+T*S-m*P,T*M+C*P+m*E-y*S,C*M-m*S-y*E-T*P)},slerp:function(x,m){var y=this.x,T=this.y,C=this.z,S=this.w,E=x.x,P=x.y,M=x.z,O=x.w,A=y*E+T*P+C*M+S*O;A<0&&(A=-A,E=-E,P=-P,M=-M,O=-O);var R=1-m,F=m;if(1-A>u){var I=Math.acos(A),D=Math.sin(I);R=Math.sin((1-m)*I)/D,F=Math.sin(m*I)/D}return this.set(R*y+F*E,R*T+F*P,R*C+F*M,R*S+F*O)},invert:function(){var x=this.x,m=this.y,y=this.z,T=this.w,C=x*x+m*m+y*y+T*T,S=C?1/C:0;return this.set(-x*S,-m*S,-y*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(x){x*=.5;var m=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(x),E=Math.cos(x);return this.set(m*E+C*S,y*E+T*S,T*E-y*S,C*E-m*S)},rotateY:function(x){x*=.5;var m=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(x),E=Math.cos(x);return this.set(m*E-T*S,y*E+C*S,T*E+m*S,C*E-y*S)},rotateZ:function(x){x*=.5;var m=this.x,y=this.y,T=this.z,C=this.w,S=Math.sin(x),E=Math.cos(x);return this.set(m*E+y*S,y*E-m*S,T*E+C*S,C*E-T*S)},calculateW:function(){var x=this.x,m=this.y,y=this.z;return this.w=-Math.sqrt(1-x*x-m*m-y*y),this},setFromEuler:function(x,m){var y=x.x/2,T=x.y/2,C=x.z/2,S=Math.cos(y),E=Math.cos(T),P=Math.cos(C),M=Math.sin(y),O=Math.sin(T),A=Math.sin(C);switch(x.order){case"XYZ":{this.set(M*E*P+S*O*A,S*O*P-M*E*A,S*E*A+M*O*P,S*E*P-M*O*A,m);break}case"YXZ":{this.set(M*E*P+S*O*A,S*O*P-M*E*A,S*E*A-M*O*P,S*E*P+M*O*A,m);break}case"ZXY":{this.set(M*E*P-S*O*A,S*O*P+M*E*A,S*E*A+M*O*P,S*E*P-M*O*A,m);break}case"ZYX":{this.set(M*E*P-S*O*A,S*O*P+M*E*A,S*E*A-M*O*P,S*E*P+M*O*A,m);break}case"YZX":{this.set(M*E*P+S*O*A,S*O*P+M*E*A,S*E*A-M*O*P,S*E*P-M*O*A,m);break}case"XZY":{this.set(M*E*P-S*O*A,S*O*P-M*E*A,S*E*A+M*O*P,S*E*P+M*O*A,m);break}}return this},setFromRotationMatrix:function(x){var m=x.val,y=m[0],T=m[4],C=m[8],S=m[1],E=m[5],P=m[9],M=m[2],O=m[6],A=m[10],R=y+E+A,F;return R>0?(F=.5/Math.sqrt(R+1),this.set((O-P)*F,(C-M)*F,(S-T)*F,.25/F)):y>E&&y>A?(F=2*Math.sqrt(1+y-E-A),this.set(.25*F,(T+S)/F,(C+M)/F,(O-P)/F)):E>A?(F=2*Math.sqrt(1+E-y-A),this.set((T+S)/F,.25*F,(P+O)/F,(C-M)/F)):(F=2*Math.sqrt(1+A-y-E),this.set((C+M)/F,(P+O)/F,.25*F,(S-T)/F)),this},fromMat3:function(x){var m=x.val,y=m[0]+m[4]+m[8],T;if(y>0)T=Math.sqrt(y+1),this.w=.5*T,T=.5/T,this._x=(m[7]-m[5])*T,this._y=(m[2]-m[6])*T,this._z=(m[3]-m[1])*T;else{var C=0;m[4]>m[0]&&(C=1),m[8]>m[C*3+C]&&(C=2);var S=l[C],E=l[S];T=Math.sqrt(m[C*3+C]-m[S*3+S]-m[E*3+E]+1),f[C]=.5*T,T=.5/T,f[S]=(m[S*3+C]+m[C*3+S])*T,f[E]=(m[E*3+C]+m[C*3+E])*T,this._x=f[0],this._y=f[1],this._z=f[2],this._w=(m[E*3+S]-m[S*3+E])*T}return this.onChangeCallback(this),this}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(367),h=i(31),r=i(33),o=i(191),u=function(l){var f=l.config;if((f.customEnvironment||f.canvas)&&f.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!f.customEnvironment&&!f.canvas&&f.renderType!==r.HEADLESS)if(f.renderType===r.CANVAS||f.renderType!==r.CANVAS&&!o.webGL)if(o.canvas)f.renderType=r.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else f.renderType=r.WEBGL;f.antialias||h.disableSmoothing();var v=l.scale.baseSize,d=v.width,c=v.height;if(f.canvas?(l.canvas=f.canvas,l.canvas.width=d,l.canvas.height=c):l.canvas=h.create(l,d,c,f.renderType),f.canvasStyle&&(l.canvas.style=f.canvasStyle),f.antialias||s.setCrisp(l.canvas),f.renderType!==r.HEADLESS){var p,g;p=i(368),g=i(371),f.renderType===r.WEBGL?l.renderer=new g(l):(l.renderer=new p(l),l.context=l.renderer.gameContext)}};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCrisp:function(s){var h=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return h.forEach(function(r){s.style["image-rendering"]=r}),s.style.msInterpolationMode="nearest-neighbor",s},setBicubic:function(s){return s.style["image-rendering"]="auto",s.style.msInterpolationMode="bicubic",s}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(37),h=i(369),r=i(0),o=i(33),u=i(9),l=i(91),f=i(370),v=i(104),d=i(106),c=i(25),p=new r({Extends:u,initialize:function(x){u.call(this);var m=x.config;this.config={clearBeforeRender:m.clearBeforeRender,backgroundColor:m.backgroundColor,antialias:m.antialias,roundPixels:m.roundPixels},this.game=x,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=x.canvas;var y={alpha:x.config.transparent,desynchronized:x.config.desynchronized};this.gameContext=m.context?m.context:this.gameCanvas.getContext("2d",y),this.currentContext=this.gameContext,this.antialias=x.config.antialias,this.blendModes=f(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(d.READY,this.boot,this)},boot:function(){var g=this.game,x=g.scale.baseSize;this.width=x.width,this.height=x.height,this.isBooted=!0,g.scale.on(v.RESIZE,this.onResize,this),this.resize(x.width,x.height)},onResize:function(g,x){(x.width!==this.width||x.height!==this.height)&&this.resize(x.width,x.height)},resize:function(g,x){this.width=g,this.height=x,this.emit(l.RESIZE,g,x)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(g){return this.currentContext.globalCompositeOperation=g,this},setContext:function(g){return this.currentContext=g||this.gameContext,this},setAlpha:function(g){return this.currentContext.globalAlpha=g,this},preRender:function(){var g=this.gameContext,x=this.config,m=this.width,y=this.height;g.globalAlpha=1,g.globalCompositeOperation="source-over",g.setTransform(1,0,0,1,0,0),x.clearBeforeRender&&(g.clearRect(0,0,m,y),x.transparent||(g.fillStyle=x.backgroundColor.rgba,g.fillRect(0,0,m,y))),g.save(),this.drawCount=0,this.emit(l.PRE_RENDER)},render:function(g,x,m){var y=x.length;this.emit(l.RENDER,g,m);var T=m.x,C=m.y,S=m.width,E=m.height,P=m.renderToTexture?m.context:g.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(T,C,S,E),P.clip()),this.currentContext=P;var M=m.mask;M&&M.preRenderCanvas(this,null,m._maskCamera),m.transparent||(P.fillStyle=m.backgroundColor.rgba,P.fillRect(T,C,S,E)),P.globalAlpha=m.alpha,P.globalCompositeOperation="source-over",this.drawCount+=y,m.renderToTexture&&m.emit(s.PRE_RENDER,m),m.matrix.copyToContext(P);for(var O=0;O<y;O++){var A=x[O];A.mask&&A.mask.preRenderCanvas(this,A,m),A.renderCanvas(this,A,m),A.mask&&A.mask.postRenderCanvas(this,A,m)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,m.flashEffect.postRenderCanvas(P),m.fadeEffect.postRenderCanvas(P),m.dirty=!1,M&&M.postRenderCanvas(this),P.restore(),m.renderToTexture&&(m.emit(s.POST_RENDER,m),m.renderToGame&&g.sys.context.drawImage(m.canvas,T,C))},postRender:function(){var g=this.gameContext;g.restore(),this.emit(l.POST_RENDER);var x=this.snapshotState;x.callback&&(h(this.gameCanvas,x),x.callback=null)},snapshotCanvas:function(g,x,m,y,T,C,S,E,P){m===void 0&&(m=!1),this.snapshotArea(y,T,C,S,x,E,P);var M=this.snapshotState;return M.getPixel=m,h(this.canvas,M),M.callback=null,this},snapshot:function(g,x,m){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,g,x,m)},snapshotArea:function(g,x,m,y,T,C,S){var E=this.snapshotState;return E.callback=T,E.type=C,E.encoder=S,E.getPixel=!1,E.x=g,E.y=x,E.width=Math.min(m,this.gameCanvas.width),E.height=Math.min(y,this.gameCanvas.height),this},snapshotPixel:function(g,x,m){return this.snapshotArea(g,x,1,1,m),this.snapshotState.getPixel=!0,this},batchSprite:function(g,x,m,y){var T=m.alpha*g.alpha;if(T!==0){var C=this.currentContext,S=this._tempMatrix1,E=this._tempMatrix2,P=x.canvasData,M=P.x,O=P.y,A=x.cutWidth,R=x.cutHeight,F=x.customPivot,I=x.source.resolution,D=g.displayOriginX,N=g.displayOriginY,z=-D+x.x,U=-N+x.y;if(g.isCropped){var W=g._crop;(W.flipX!==g.flipX||W.flipY!==g.flipY)&&x.updateCropUVs(W,g.flipX,g.flipY),A=W.cw,R=W.ch,M=W.cx,O=W.cy,z=-D+W.x,U=-N+W.y,g.flipX&&(z>=0?z=-(z+A):z<0&&(z=Math.abs(z)-A)),g.flipY&&(U>=0?U=-(U+R):U<0&&(U=Math.abs(U)-R))}var w=1,L=1;g.flipX&&(F||(z+=-x.realWidth+D*2),w=-1),g.flipY&&(F||(U+=-x.realHeight+N*2),L=-1),E.applyITRS(g.x,g.y,g.rotation,g.scaleX*w,g.scaleY*L),S.copyFrom(m.matrix),y?(S.multiplyWithOffset(y,-m.scrollX*g.scrollFactorX,-m.scrollY*g.scrollFactorY),E.e=g.x,E.f=g.y):(E.e-=m.scrollX*g.scrollFactorX,E.f-=m.scrollY*g.scrollFactorY),S.multiply(E),C.save(),S.setToContext(C),C.globalCompositeOperation=this.blendModes[g.blendMode],C.globalAlpha=T,C.imageSmoothingEnabled=!(!this.antialias||x.source.scaleMode),g.mask&&g.mask.preRenderCanvas(this,g,m),C.drawImage(x.source.image,M,O,A,R,z,U,A/I,R/I),g.mask&&g.mask.postRenderCanvas(this,g,m),C.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h=i(38),r=i(2),o=function(u,l){var f=r(l,"callback"),v=r(l,"type","image/png"),d=r(l,"encoder",.92),c=Math.abs(Math.round(r(l,"x",0))),p=Math.abs(Math.round(r(l,"y",0))),g=r(l,"width",u.width),x=r(l,"height",u.height),m=r(l,"getPixel",!1);if(m){var y=u.getContext("2d"),T=y.getImageData(c,p,1,1),C=T.data;f.call(null,new h(C[0],C[1],C[2],C[3]/255))}else if(c!==0||p!==0||g!==u.width||x!==u.height){var S=s.createWebGL(this,g,x),E=S.getContext("2d");E.drawImage(u,c,p,g,x,0,0,g,x);var P=new Image;P.onerror=function(){f.call(null),s.remove(S)},P.onload=function(){f.call(null,P),s.remove(S)},P.src=S.toDataURL(v,d)}else{var M=new Image;M.onerror=function(){f.call(null)},M.onload=function(){f.call(null,M)},M.src=u.toDataURL(v,d)}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h=i(348),r=function(){var o=[],u=h.supportNewBlendModes,l="source-over";return o[s.NORMAL]=l,o[s.ADD]="lighter",o[s.MULTIPLY]=u?"multiply":l,o[s.SCREEN]=u?"screen":l,o[s.OVERLAY]=u?"overlay":l,o[s.DARKEN]=u?"darken":l,o[s.LIGHTEN]=u?"lighten":l,o[s.COLOR_DODGE]=u?"color-dodge":l,o[s.COLOR_BURN]=u?"color-burn":l,o[s.HARD_LIGHT]=u?"hard-light":l,o[s.SOFT_LIGHT]=u?"soft-light":l,o[s.DIFFERENCE]=u?"difference":l,o[s.EXCLUSION]=u?"exclusion":l,o[s.HUE]=u?"hue":l,o[s.SATURATION]=u?"saturation":l,o[s.COLOR]=u?"color":l,o[s.LUMINOSITY]=u?"luminosity":l,o[s.ERASE]="destination-out",o[s.SOURCE_IN]="source-in",o[s.SOURCE_OUT]="source-out",o[s.SOURCE_ATOP]="source-atop",o[s.DESTINATION_OVER]="destination-over",o[s.DESTINATION_IN]="destination-in",o[s.DESTINATION_OUT]="destination-out",o[s.DESTINATION_ATOP]="destination-atop",o[s.LIGHTER]="lighter",o[s.COPY]="copy",o[s.XOR]="xor",o};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(93),h=i(37),r=i(0),o=i(33),u=i(9),l=i(91),f=i(22),v=i(138),d=i(69),c=i(1),p=i(372),g=i(141),x=i(104),m=i(106),y=i(12),T=i(383),C=new r({Extends:u,initialize:function(E){u.call(this);var P=E.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!1,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=E,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=c,this.contextRestoredHandler=c,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(S){var E,P=this.game,M=this.canvas,O=S.backgroundColor;if(P.config.context?E=P.config.context:E=M.getContext("webgl",S.contextCreation)||M.getContext("experimental-webgl",S.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var A=this;this.contextLostHandler=function(B){A.contextLost=!0,A.game.events.emit(f.CONTEXT_LOST,A),B.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(f.CONTEXT_RESTORED,A)},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),M.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),P.context=E;for(var R=0;R<=27;R++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var F=E.getSupportedExtensions();(!S.maxTextures||S.maxTextures===-1)&&(S.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),S.maxTextureSize||(S.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var I="WEBGL_compressed_texture_",D="WEBKIT_"+I;this.compression.ETC1=E.getExtension(I+"etc1")||E.getExtension(D+"etc1"),this.compression.PVRTC=E.getExtension(I+"pvrtc")||E.getExtension(D+"pvrtc"),this.compression.S3TC=E.getExtension(I+"s3tc")||E.getExtension(D+"s3tc"),this.supportedExtensions=F;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(N)>-1?E.getExtension(N):null;var z="OES_vertex_array_object";this.vaoExtension=F.indexOf(z)>-1?E.getExtension(z):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(O.redGL,O.greenGL,O.blueGL,O.alphaGL),this.mipmapFilter=E[S.mipmapFilter],this.maxTextures=y.checkShaderMax(E,S.maxTextures),this.textureIndexes=[];var U=this.tempTextures;if(Array.isArray(U))for(var W=0;R<this.maxTextures;W++)E.deleteTexture(U[W]);else U=new Array(this.maxTextures);for(var w=0;w<this.maxTextures;w++){var L=E.createTexture();E.activeTexture(E.TEXTURE0+w),E.bindTexture(E.TEXTURE_2D,L),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),U[w]=L,this.textureIndexes.push(w)}return this.tempTextures=U,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new p(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new d().identity(),P.textures.once(m.READY,this.boot,this),this},boot:function(){var S=this.game,E=this.pipelines,P=S.scale.baseSize;this.width=P.width,this.height=P.height,this.isBooted=!0,this.renderTarget=new g(this,this.width,this.height,1,0,!0,!0),E.boot(S.config.pipeline),this.blankTexture=S.textures.getFrame("__DEFAULT"),this.whiteTexture=S.textures.getFrame("__WHITE");var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,null),M.enable(M.SCISSOR_TEST),S.scale.on(x.RESIZE,this.onResize,this),this.resize(P.width,P.height)},onResize:function(S,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(S,E){S===void 0&&(S=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,S,E),this.setProjectionMatrix(S,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(S,E){var P=this.gl;return this.width=S,this.height=E,this.setProjectionMatrix(S,E),P.viewport(0,0,S,E),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-E,S,E),this.defaultScissor[2]=S,this.defaultScissor[3]=E,this.emit(l.RESIZE,S,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(S,E){return(S!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=S,this.projectionHeight=E,this.projectionMatrix.ortho(0,S,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(S){return this.supportedExtensions?this.supportedExtensions.indexOf(S):!1},getExtension:function(S){return this.hasExtension(S)?(S in this.extensions||(this.extensions[S]=this.gl.getExtension(S)),this.extensions[S]):null},flush:function(){this.pipelines.flush()},pushScissor:function(S,E,P,M,O){O===void 0&&(O=this.drawingBufferHeight);var A=this.scissorStack,R=[S,E,P,M];return A.push(R),this.setScissor(S,E,P,M,O),this.currentScissor=R,R},setScissor:function(S,E,P,M,O){O===void 0&&(O=this.drawingBufferHeight);var A=this.gl,R=this.currentScissor,F=P>0&&M>0;if(R&&F){var I=R[0],D=R[1],N=R[2],z=R[3];F=I!==S||D!==E||N!==P||z!==M}F&&(this.flush(),A.scissor(S,O-E-M,P,M))},resetScissor:function(){var S=this.gl;S.enable(S.SCISSOR_TEST);var E=this.currentScissor;if(E){var P=E[0],M=E[1],O=E[2],A=E[3];O>0&&A>0&&S.scissor(P,this.drawingBufferHeight-M-A,O,A)}},popScissor:function(){var S=this.scissorStack;S.pop();var E=S[S.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var S=this.currentMask.mask,E=this.currentCameraMask.mask;return S&&S.isStencil||E&&E.isStencil},resetViewport:function(){var S=this.gl;S.viewport(0,0,this.width,this.height),this.drawingBufferHeight=S.drawingBufferHeight},setBlendMode:function(S,E){E===void 0&&(E=!1);var P=this.gl,M=this.blendModes[S];return E||S!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==S?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=S,!0):!1},addBlendMode:function(S,E){var P=this.blendModes.push({func:S,equation:E});return P-1},updateBlendMode:function(S,E,P){return this.blendModes[S]&&(this.blendModes[S].func=E,P&&(this.blendModes[S].equation=P)),this},removeBlendMode:function(S){return S>17&&this.blendModes[S]&&this.blendModes.splice(S,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S.glTexture,!0),0;var E=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},isNewNormalMap:function(S,E){return this.textureZero!==S||this.normalTexture!==E},setTextureZero:function(S,E){if(this.textureZero!==S){E&&this.flush();var P=this.gl;P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,S),this.textureZero=S}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(S){if(this.normalTexture!==S){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.normalTexture=S,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var S=this.gl,E=this.tempTextures,P=0;P<E.length;P++)S.activeTexture(S.TEXTURE0+P),S.bindTexture(S.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(S){if(S===void 0&&(S=!1),!this.isTextureClean){this.flush();var E=this.gl,P=this.tempTextures;if(S){for(var M=0;M<P.length;M++)E.activeTexture(E.TEXTURE0+M),E.bindTexture(E.TEXTURE_2D,P[M]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,P[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(S){if(this.pipelines.forceZero())return this.setTextureZero(S,!0),0;var E=this.gl,P=this.currentActiveTexture;return S.glIndexCounter<this.startActiveTexture&&(S.glIndexCounter=this.startActiveTexture,P<this.maxTextures?(S.glIndex=P,E.activeTexture(E.TEXTURE0+P),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,S.glIndexCounter=this.startActiveTexture,S.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,S),this.currentActiveTexture=2)),this.isTextureClean=!1,S.glIndex},pushFramebuffer:function(S,E,P,M){return S===this.currentFramebuffer?this:(this.fboStack.push(S),this.setFramebuffer(S,E,P,M))},setFramebuffer:function(S,E,P,M){if(E===void 0&&(E=!1),P===void 0&&(P=!1),M===void 0&&(M=!0),S===this.currentFramebuffer)return this;var O=this.gl,A=this.width,R=this.height;return S&&S.renderTexture&&M?(A=S.renderTexture.width,R=S.renderTexture.height):this.flush(),O.bindFramebuffer(O.FRAMEBUFFER,S),M&&O.viewport(0,0,A,R),E&&(S?(this.drawingBufferHeight=R,this.pushScissor(0,0,A,R)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=S,P&&this.resetTextures(),this},popFramebuffer:function(S,E,P){S===void 0&&(S=!1),E===void 0&&(E=!1),P===void 0&&(P=!0);var M=this.fboStack;M.pop();var O=M[M.length-1];return O||(O=null),this.setFramebuffer(O,S,E,P),O},setProgram:function(S){return S!==this.currentProgram?(this.flush(),this.gl.useProgram(S),this.currentProgram=S,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(S,E,P,M){var O=this.gl,A=O.NEAREST,R=O.NEAREST,F=O.CLAMP_TO_EDGE,I=null;E=S?S.width:E,P=S?S.height:P;var D=v(E,P);return D&&(F=O.REPEAT),M===o.ScaleModes.LINEAR&&this.config.antialias&&(A=D?this.mipmapFilter:O.LINEAR,R=O.LINEAR),!S&&typeof E=="number"&&typeof P=="number"?I=this.createTexture2D(0,A,R,F,F,O.RGBA,null,E,P):I=this.createTexture2D(0,A,R,F,F,O.RGBA,S),I},createTexture2D:function(S,E,P,M,O,A,R,F,I,D,N,z){D=D==null?!0:D,N===void 0&&(N=!1),z===void 0&&(z=!1);var U=this.gl,W=U.createTexture();U.activeTexture(U.TEXTURE0);var w=U.getParameter(U.TEXTURE_BINDING_2D);return U.bindTexture(U.TEXTURE_2D,W),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,E),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,P),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,O),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,M),U.pixelStorei(U.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D),U.pixelStorei(U.UNPACK_FLIP_Y_WEBGL,z),R==null?U.texImage2D(U.TEXTURE_2D,S,A,F,I,0,A,U.UNSIGNED_BYTE,null):(N||(F=R.width,I=R.height),U.texImage2D(U.TEXTURE_2D,S,A,A,U.UNSIGNED_BYTE,R)),v(F,I)&&U.generateMipmap(U.TEXTURE_2D),w&&U.bindTexture(U.TEXTURE_2D,w),W.isAlphaPremultiplied=D,W.isRenderTexture=!1,W.width=F,W.height=I,W.glIndex=0,W.glIndexCounter=-1,W},createFramebuffer:function(S,E,P,M){var O=this.gl,A=O.createFramebuffer(),R=0;if(this.setFramebuffer(A),M){var F=O.createRenderbuffer();O.bindRenderbuffer(O.RENDERBUFFER,F),O.renderbufferStorage(O.RENDERBUFFER,O.DEPTH_STENCIL,S,E),O.framebufferRenderbuffer(O.FRAMEBUFFER,O.DEPTH_STENCIL_ATTACHMENT,O.RENDERBUFFER,F)}if(P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,P,0),R=O.checkFramebufferStatus(O.FRAMEBUFFER),R!==O.FRAMEBUFFER_COMPLETE){var I={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+I[R])}return A.renderTexture=P,this.setFramebuffer(null),this.resetTextures(),A},createProgram:function(S,E){var P=this.gl,M=P.createProgram(),O=P.createShader(P.VERTEX_SHADER),A=P.createShader(P.FRAGMENT_SHADER);if(P.shaderSource(O,S),P.shaderSource(A,E),P.compileShader(O),P.compileShader(A),!P.getShaderParameter(O,P.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+P.getShaderInfoLog(O));if(!P.getShaderParameter(A,P.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+P.getShaderInfoLog(A));if(P.attachShader(M,O),P.attachShader(M,A),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error(`Link Program failed:
`+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(S,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,S,E),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(S,E){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,S,E),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(S,E){return E&&this.resetTextures(!0),S&&this.gl.deleteTexture(S),this},deleteFramebuffer:function(S){return S&&(this.gl.deleteFramebuffer(S),s(this.fboStack,S),this.currentFramebuffer===S&&(this.currentFramebuffer=null)),this},deleteProgram:function(S){return S&&this.gl.deleteProgram(S),this},deleteBuffer:function(S){return this.gl.deleteBuffer(S),this},preRenderCamera:function(S){var E=S.x,P=S.y,M=S.width,O=S.height,A=S.backgroundColor;if(S.emit(h.PRE_RENDER,S),this.pipelines.preBatchCamera(S),this.pushScissor(E,P,M,O),S.mask&&(this.currentCameraMask.mask=S.mask,this.currentCameraMask.camera=S._maskCamera,S.mask.preRenderWebGL(this,S,S._maskCamera)),A.alphaGL>0){var R=this.pipelines.setMulti();R.drawFillRect(E,P,M,O,y.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)}},getCurrentStencilMask:function(){var S=null,E=this.maskStack,P=this.currentCameraMask;return E.length>0?S=E[E.length-1]:P.mask&&P.mask.isStencil&&(S=P),S},postRenderCamera:function(S){var E=S.flashEffect,P=S.fadeEffect;if(E.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();E.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}S.dirty=!1,this.popScissor(),S.mask&&(this.currentCameraMask.mask=null,S.mask.postRenderWebGL(this,S._maskCamera)),this.pipelines.postBatchCamera(S),S.emit(h.POST_RENDER,S)},preRender:function(){if(!this.contextLost){var S=this.gl;if(S.bindFramebuffer(S.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT)}S.enable(S.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&S.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(l.PRE_RENDER)}},render:function(S,E,P){if(!this.contextLost){var M=E.length;if(this.emit(l.RENDER,S,P),this.preRenderCamera(P),M===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var O=this.currentMask,A=0;A<M;A++){this.finalType=A===M-1;var R=E[A],F=R.mask;O=this.currentMask,O.mask&&O.mask!==F&&O.mask.postRenderWebGL(this,O.camera),F&&O.mask!==F&&F.preRenderWebGL(this,R,P),R.blendMode!==this.currentBlendMode&&this.setBlendMode(R.blendMode);var I=R.type;I!==this.currentType&&(this.newType=!0,this.currentType=I),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[A+1].type===this.currentType,R.renderWebGL(this,R,P),this.newType=!1}O=this.currentMask,O.mask&&O.mask.postRenderWebGL(this,O.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(l.POST_RENDER);var S=this.snapshotState;S.callback&&(T(this.canvas,S),S.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(S,E,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,S,E,P)},snapshotArea:function(S,E,P,M,O,A,R){var F=this.snapshotState;return F.callback=O,F.type=A,F.encoder=R,F.getPixel=!1,F.x=S,F.y=E,F.width=Math.min(P,this.gl.drawingBufferWidth),F.height=Math.min(M,this.gl.drawingBufferHeight),this},snapshotPixel:function(S,E,P){return this.snapshotArea(S,E,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(S,E,P,M,O,A,R,F,I,D,N){O===void 0&&(O=!1),A===void 0&&(A=0),R===void 0&&(R=0),F===void 0&&(F=E),I===void 0&&(I=P);var z=this.currentFramebuffer;this.snapshotArea(A,R,F,I,M,D,N);var U=this.snapshotState;return U.getPixel=O,U.isFramebuffer=!0,U.bufferWidth=E,U.bufferHeight=P,this.setFramebuffer(S),T(this.canvas,U),this.setFramebuffer(z),U.callback=null,U.isFramebuffer=!1,this},canvasToTexture:function(S,E,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),E?this.updateCanvasTexture(S,E,M):this.createCanvasTexture(S,P,M)},createCanvasTexture:function(S,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,O=M.NEAREST,A=M.NEAREST,R=S.width,F=S.height,I=M.CLAMP_TO_EDGE,D=v(R,F);return!E&&D&&(I=M.REPEAT),this.config.antialias&&(O=D?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,O,A,I,I,M.RGBA,S,R,F,!0,!1,P)},updateCanvasTexture:function(S,E,P){P===void 0&&(P=!1);var M=this.gl,O=S.width,A=S.height;if(O>0&&A>0){M.activeTexture(M.TEXTURE0);var R=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,S),E.width=O,E.height=A,R&&M.bindTexture(M.TEXTURE_2D,R)}return E},createVideoTexture:function(S,E,P){E===void 0&&(E=!1),P===void 0&&(P=!1);var M=this.gl,O=M.NEAREST,A=M.NEAREST,R=S.videoWidth,F=S.videoHeight,I=M.CLAMP_TO_EDGE,D=v(R,F);return!E&&D&&(I=M.REPEAT),this.config.antialias&&(O=D?this.mipmapFilter:M.LINEAR,A=M.LINEAR),this.createTexture2D(0,O,A,I,I,M.RGBA,S,R,F,!0,!0,P)},updateVideoTexture:function(S,E,P){P===void 0&&(P=!1);var M=this.gl,O=S.videoWidth,A=S.videoHeight;if(O>0&&A>0){M.activeTexture(M.TEXTURE0);var R=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,E),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,S),E.width=O,E.height=A,R&&M.bindTexture(M.TEXTURE_2D,R)}return E},setTextureFilter:function(S,E){var P=this.gl,M=[P.LINEAR,P.NEAREST][E];P.activeTexture(P.TEXTURE0);var O=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,S),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),O&&P.bindTexture(P.TEXTURE_2D,O),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var S=this.gl,E=this.tempTextures,P=0;P<E.length;P++)S.deleteTexture(E[P]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});e.exports=C},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(92),r=i(102),o=i(373),u=i(376),l=i(377),f=i(108),v=i(378),d=i(379),c=i(380),p=i(381),g=new s({initialize:function(m){this.game=m.game,this.renderer=m,this.classes=new r([[h.UTILITY_PIPELINE,p],[h.MULTI_PIPELINE,f],[h.BITMAPMASK_PIPELINE,o],[h.SINGLE_PIPELINE,c],[h.ROPE_PIPELINE,d],[h.LIGHT_PIPELINE,l],[h.POINTLIGHT_PIPELINE,v],[h.GRAPHICS_PIPELINE,u]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(x){var m,y,T=this,C=this.game;if(this.classes.each(function(E,P){m=T.add(E,new P({game:C})),E===h.UTILITY_PIPELINE&&(T.UTILITY_PIPELINE=m,T.fullFrame1=m.fullFrame1,T.fullFrame2=m.fullFrame2,T.halfFrame1=m.halfFrame1,T.halfFrame2=m.halfFrame2)}),this.MULTI_PIPELINE=this.get(h.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(h.BITMAPMASK_PIPELINE),x)for(y in x){var S=x[y];m=new S(C),m.isPostFX?this.postPipelineClasses.set(y,S):this.has(y)||(this.classes.set(y,S),this.add(y,m))}},add:function(x,m){if(m.isPostFX){console.warn(x+" is a Post Pipeline. Use `addPostPipeline` instead");return}var y=this.pipelines,T=this.renderer;return y.has(x)?console.warn("Pipeline exists: "+x):(m.name=x,m.manager=this,y.set(x,m)),m.hasBooted||m.boot(),T.width!==0&&T.height!==0&&m.resize(T.width,T.height),m},addPostPipeline:function(x,m){this.postPipelineClasses.has(x)||this.postPipelineClasses.set(x,m)},flush:function(){this.current&&this.current.flush()},has:function(x){var m=this.pipelines;return typeof x=="string"?m.has(x):!!m.contains(x)},get:function(x){var m=this.pipelines;if(typeof x=="string")return m.get(x);if(m.contains(x))return x},getPostPipeline:function(x,m){var y=this.postPipelineClasses,T;if(typeof x=="string"?T=y.get(x):typeof x=="function"?y.contains(x)&&(T=x):typeof x=="object"&&(T=y.get(x.name)),T){var C=new T(this.game);return m&&(C.gameObject=m),C}},remove:function(x,m,y){m===void 0&&(m=!0),y===void 0&&(y=!0),this.pipelines.delete(x),m&&this.classes.delete(x),y&&this.postPipelineClasses.delete(x)},set:function(x,m,y){if(!x.isPostFX)return this.isCurrent(x,y)||(this.flush(),this.current&&this.current.unbind(),this.current=x,x.bind(y)),x.updateProjectionMatrix(),x.onBind(m),x},preBatch:function(x){if(x.hasPostPipeline){this.flush();for(var m=x.postPipelines,y=m.length-1;y>=0;y--){var T=m[y];T.active&&T.preBatch(x)}}},postBatch:function(x){if(x.hasPostPipeline){this.flush();for(var m=x.postPipelines,y=0;y<m.length;y++){var T=m[y];T.active&&T.postBatch(x)}}},preBatchCamera:function(x){if(x.hasPostPipeline){this.flush();for(var m=x.postPipelines,y=m.length-1;y>=0;y--){var T=m[y];T.active&&T.preBatch(x)}}},postBatchCamera:function(x){if(x.hasPostPipeline){this.flush();for(var m=x.postPipelines,y=0;y<m.length;y++){var T=m[y];T.active&&T.postBatch(x)}}},isCurrent:function(x,m){var y=this.renderer,T=this.current;return T&&!m&&(m=T.currentShader),!(T!==x||m.program!==y.currentProgram)},copyFrame:function(x,m,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(x,m,y,T,C),this},copyToGame:function(x){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(x),this},drawFrame:function(x,m,y,T){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(x,m,y,T),this},blendFrames:function(x,m,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(x,m,y,T,C),this},blendFramesAdditive:function(x,m,y,T,C){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(x,m,y,T,C),this},clearFrame:function(x,m){return this.UTILITY_PIPELINE.clearFrame(x,m),this},blitFrame:function(x,m,y,T,C,S){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(x,m,y,T,C,S),this},copyFrameRect:function(x,m,y,T,C,S,E,P){return this.UTILITY_PIPELINE.copyFrameRect(x,m,y,T,C,S,E,P),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(x){return this.UTILITY_PIPELINE.bind(x)},rebind:function(x){x===void 0&&this.previous&&(x=this.previous);var m=this.renderer,y=m.gl;y.disable(y.DEPTH_TEST),y.disable(y.CULL_FACE),m.hasActiveStencilMask()?y.clear(y.DEPTH_BUFFER_BIT):(y.disable(y.STENCIL_TEST),y.clear(y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.viewport(0,0,m.width,m.height),m.currentProgram=null,m.setBlendMode(0,!0);var T=this.pipelines.entries;for(var C in T)T[C].glReset=!0;x&&(this.current=x,x.rebind()),m.resetTextures()},clear:function(){var x=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,x.currentProgram=null,x.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=i(866),o=i(867),u=i(107),l=i(58),f=new s({Extends:l,initialize:function(d){d.fragShader=h(d,"fragShader",r),d.vertShader=h(d,"vertShader",o),d.batchSize=h(d,"batchSize",1),d.vertices=h(d,"vertices",[-1,1,-1,-7,7,1]),d.attributes=h(d,"attributes",[{name:"inPosition",size:2,type:u.FLOAT}]),l.call(this,d)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,d){l.prototype.resize.call(this,v,d),this.set2f("uResolution",v,d)},beginMask:function(v,d,c){var p=this.gl;if(v.bitmapMask&&p){var g=this.renderer;g.flush(),g.pushFramebuffer(v.mainFramebuffer),p.disable(p.STENCIL_TEST),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),g.currentCameraMask.mask!==v&&(g.currentMask.mask=v,g.currentMask.camera=c)}},endMask:function(v,d){var c=this.gl,p=this.renderer,g=v.bitmapMask;if(g&&c){p.flush(),p.pushFramebuffer(v.maskFramebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),p.setBlendMode(0,!0),g.renderWebGL(p,g,d),p.flush(),p.popFramebuffer(),p.popFramebuffer();var x=p.getCurrentStencilMask();x?(c.enable(c.STENCIL_TEST),x.mask.applyStencil(p,x.camera,!0)):p.currentMask.mask=null,p.pipelines.set(this),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,v.maskTexture),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,v.mainTexture),this.set1i("uInvertMaskAlpha",v.invertAlpha),c.drawArrays(this.topology,0,3),p.resetTextures()}}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AFTER_FLUSH:i(868),BEFORE_FLUSH:i(869),BIND:i(870),BOOT:i(871),DESTROY:i(872),REBIND:i(873),RESIZE:i(874)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=i(107),o=new s({initialize:function(l,f,v,d,c){this.pipeline=l,this.name=f,this.renderer=l.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(v,d),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(c),this.createUniforms()},createAttributes:function(u){var l=0,f=0,v=[];this.vertexComponentCount=0;for(var d=0;d<u.length;d++){var c=u[d],p=c.name,g=h(c,"size",1),x=h(c,"type",r.FLOAT),m=x.enum,y=x.size,T=!!c.normalized;v.push({name:p,size:g,type:m,normalized:T,offset:f,enabled:!1,location:-1}),y===4?l+=g:l++,f+=g*y}this.vertexSize=f,this.vertexComponentCount=l,this.attributes=v},bind:function(u,l){return u===void 0&&(u=!1),l===void 0&&(l=!1),l&&this.pipeline.flush(),this.renderer.setProgram(this.program),u&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(u){u===void 0&&(u=!1);for(var l=this.gl,f=this.vertexSize,v=this.attributes,d=this.program,c=0;c<v.length;c++){var p=v[c],g=p.size,x=p.type,m=p.offset,y=p.enabled,T=p.location,C=!!p.normalized;if(u){var S=l.getAttribLocation(d,p.name);S>=0?(l.enableVertexAttribArray(S),l.vertexAttribPointer(S,g,x,C,f,m),p.enabled=!0,p.location=S):S!==-1&&l.disableVertexAttribArray(S)}else y?l.vertexAttribPointer(T,g,x,C,f,m):!y&&T>-1&&(l.disableVertexAttribArray(T),p.location=-1)}return this},createUniforms:function(){var u=this.gl,l=this.program,f=this.uniforms,v,d,c,p=u.getProgramParameter(l,u.ACTIVE_UNIFORMS);for(v=0;v<p;v++){var g=u.getActiveUniform(l,v);if(g){d=g.name,c=u.getUniformLocation(l,d),c!==null&&(f[d]={name:d,location:c,value1:null,value2:null,value3:null,value4:null});var x=d.indexOf("[");x>0&&(d=d.substr(0,x),f.hasOwnProperty(d)||(c=u.getUniformLocation(l,d),c!==null&&(f[d]={name:d,location:c,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(u){return this.uniforms.hasOwnProperty(u)},resetUniform:function(u){var l=this.uniforms[u];return l&&(l.value1=null,l.value2=null,l.value3=null,l.value4=null),this},setUniform1:function(u,l,f,v){var d=this.uniforms[l];return d?((v||d.value1!==f)&&(d.value1=f,this.renderer.setProgram(this.program),u.call(this.gl,d.location,f),this.pipeline.currentShader=this),this):this},setUniform2:function(u,l,f,v,d){var c=this.uniforms[l];return c?((d||c.value1!==f||c.value2!==v)&&(c.value1=f,c.value2=v,this.renderer.setProgram(this.program),u.call(this.gl,c.location,f,v),this.pipeline.currentShader=this),this):this},setUniform3:function(u,l,f,v,d,c){var p=this.uniforms[l];return p?((c||p.value1!==f||p.value2!==v||p.value3!==d)&&(p.value1=f,p.value2=v,p.value3=d,this.renderer.setProgram(this.program),u.call(this.gl,p.location,f,v,d),this.pipeline.currentShader=this),this):this},setUniform4:function(u,l,f,v,d,c,p){var g=this.uniforms[l];return g?((p||g.value1!==f||g.value2!==v||g.value3!==d||g.value4!==c)&&(g.value1=f,g.value2=v,g.value3=d,g.value4=c,this.renderer.setProgram(this.program),u.call(this.gl,g.location,f,v,d,c),this.pipeline.currentShader=this),this):this},set1f:function(u,l){return this.setUniform1(this.gl.uniform1f,u,l)},set2f:function(u,l,f){return this.setUniform2(this.gl.uniform2f,u,l,f)},set3f:function(u,l,f,v){return this.setUniform3(this.gl.uniform3f,u,l,f,v)},set4f:function(u,l,f,v,d){return this.setUniform4(this.gl.uniform4f,u,l,f,v,d)},set1fv:function(u,l){return this.setUniform1(this.gl.uniform1fv,u,l,!0)},set2fv:function(u,l){return this.setUniform1(this.gl.uniform2fv,u,l,!0)},set3fv:function(u,l){return this.setUniform1(this.gl.uniform3fv,u,l,!0)},set4fv:function(u,l){return this.setUniform1(this.gl.uniform4fv,u,l,!0)},set1iv:function(u,l){return this.setUniform1(this.gl.uniform1iv,u,l,!0)},set2iv:function(u,l){return this.setUniform1(this.gl.uniform2iv,u,l,!0)},set3iv:function(u,l){return this.setUniform1(this.gl.uniform3iv,u,l,!0)},set4iv:function(u,l){return this.setUniform1(this.gl.uniform4iv,u,l,!0)},set1i:function(u,l){return this.setUniform1(this.gl.uniform1i,u,l)},set2i:function(u,l,f){return this.setUniform2(this.gl.uniform2i,u,l,f)},set3i:function(u,l,f,v){return this.setUniform3(this.gl.uniform3i,u,l,f,v)},set4i:function(u,l,f,v,d){return this.setUniform4(this.gl.uniform4i,u,l,f,v,d)},setMatrix2fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix2fv,u,l,f,!0)},setMatrix3fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix3fv,u,l,f,!0)},setMatrix4fv:function(u,l,f){return this.setUniform2(this.gl.uniformMatrix4fv,u,l,f,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(59),r=i(2),o=i(875),u=i(876),l=i(25),f=i(107),v=i(58),d=new s({Extends:v,initialize:function(p){p.fragShader=r(p,"fragShader",o),p.vertShader=r(p,"vertShader",u),p.attributes=r(p,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:f.UNSIGNED_BYTE,normalized:!0}]),v.call(this,p),this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(c,p,g,x,m,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(m,T);var C=c+g,S=p+x,E=T.getX(c,p),P=T.getY(c,p),M=T.getX(c,S),O=T.getY(c,S),A=T.getX(C,S),R=T.getY(C,S),F=T.getX(C,p),I=T.getY(C,p),D=this.fillTint;this.batchQuad(E,P,M,O,A,R,F,I,D.TL,D.TR,D.BL,D.BR)},batchFillTriangle:function(c,p,g,x,m,y,T,C){this.renderer.pipelines.set(this);var S=this.calcMatrix;C&&C.multiply(T,S);var E=S.getX(c,p),P=S.getY(c,p),M=S.getX(g,x),O=S.getY(g,x),A=S.getX(m,y),R=S.getY(m,y),F=this.fillTint;this.batchTri(E,P,M,O,A,R,F.TL,F.TR,F.BL)},batchStrokeTriangle:function(c,p,g,x,m,y,T,C,S){var E=this.tempTriangle;E[0].x=c,E[0].y=p,E[0].width=T,E[1].x=g,E[1].y=x,E[1].width=T,E[2].x=m,E[2].y=y,E[2].width=T,E[3].x=c,E[3].y=p,E[3].width=T,this.batchStrokePath(E,T,!1,C,S)},batchFillPath:function(c,p,g){this.renderer.pipelines.set(this);var x=this.calcMatrix;g&&g.multiply(p,x);for(var m=c.length,y=this.polygonCache,T,C,S=this.fillTint.TL,E=this.fillTint.TR,P=this.fillTint.BL,M=0;M<m;++M)C=c[M],y.push(C.x,C.y);T=h(y),m=T.length;for(var O=0;O<m;O+=3){var A=T[O+0]*2,R=T[O+1]*2,F=T[O+2]*2,I=y[A+0],D=y[A+1],N=y[R+0],z=y[R+1],U=y[F+0],W=y[F+1],w=x.getX(I,D),L=x.getY(I,D),B=x.getX(N,z),b=x.getY(N,z),G=x.getX(U,W),Y=x.getY(U,W);this.batchTri(w,L,B,b,G,Y,S,E,P)}y.length=0},batchStrokePath:function(c,p,g,x,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var y=c.length-1,T=0;T<y;T++){var C=c[T],S=c[T+1];this.batchLine(C.x,C.y,S.x,S.y,C.width/2,S.width/2,p,T,!g&&T===y-1,x,m)}},batchLine:function(c,p,g,x,m,y,T,C,S,E,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(E,M);var O=g-c,A=x-p,R=Math.sqrt(O*O+A*A),F=m*(x-p)/R,I=m*(c-g)/R,D=y*(x-p)/R,N=y*(c-g)/R,z=g-D,U=x-N,W=c-F,w=p-I,L=g+D,B=x+N,b=c+F,G=p+I,Y=M.getX(z,U),V=M.getY(z,U),X=M.getX(W,w),H=M.getY(W,w),k=M.getX(L,B),$=M.getY(L,B),K=M.getX(b,G),Z=M.getY(b,G),Q=this.strokeTint,J=Q.TL,tt=Q.TR,lt=Q.BL,ot=Q.BR;if(this.batchQuad(K,Z,X,H,Y,V,k,$,J,tt,lt,ot),!(T<=2)){var et=this.prevQuad,j=this.firstQuad;C>0&&et[4]?this.batchQuad(K,Z,X,H,et[0],et[1],et[2],et[3],J,tt,lt,ot):(j[0]=K,j[1]=Z,j[2]=X,j[3]=H,j[4]=1),S&&j[4]?this.batchQuad(Y,V,k,$,j[0],j[1],j[2],j[3],J,tt,lt,ot):(et[0]=Y,et[1]=V,et[2]=k,et[3]=$,et[4]=1)}},batchVert:function(c,p,g){var x=this.vertexViewF32,m=this.vertexViewU32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;x[++y]=c,x[++y]=p,m[++y]=g,this.vertexCount++},batchQuad:function(c,p,g,x,m,y,T,C,S,E,P,M){var O=!1;return this.shouldFlush(6)&&(this.flush(),O=!0),this.batchVert(c,p,S),this.batchVert(g,x,P),this.batchVert(m,y,M),this.batchVert(c,p,S),this.batchVert(m,y,M),this.batchVert(T,C,E),O},batchTri:function(c,p,g,x,m,y,T,C,S){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(c,p,T),this.batchVert(g,x,C),this.batchVert(m,y,S),E},destroy:function(){return v.prototype.destroy.call(this),this.polygonCache=null,this}});e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=i(877),o=i(108),u=i(3),l=i(58),f=10,v=new u,d=new s({Extends:o,initialize:function(p){f=p.game.renderer.config.maxLights;for(var g=h(p,"fragShader",r),x=[],m=1;m<=f;m++)x.push({name:"lights"+m,fragShader:g.replace("%LIGHT_COUNT%",m.toString())});p.shaders=x,o.call(this,p),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){l.prototype.boot.call(this);var c=this.gl,p=c.createTexture();c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,p),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,1,1,0,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:p};for(var g=0;g<this.shaders.length;g++)this["lightShader"+(g+1)]=this.shaders[g]},onRender:function(c,p){var g=c.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var x=g.getLights(p),m=x.length;if(m!==0){this.lightsActive=!0,this.setShader(this["lightShader"+m],!0);var y,T=this.renderer,C=T.height,S=p.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",p.x,p.y,p.rotation,p.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),y=0;y<m;y++){var E=x[y].light,P=E.color,M="uLights["+y+"].";S.transformPoint(E.x,E.y,v),this.set2f(M+"position",v.x-p.scrollX*E.scrollFactorX*p.zoom,C-(v.y-p.scrollY*E.scrollFactorY*p.zoom)),this.set3f(M+"color",P.r,P.g,P.b),this.set1f(M+"intensity",E.intensity),this.set1f(M+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(c){if(c!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var p=this.inverseRotationMatrix;if(c){var g=-c,x=Math.cos(g),m=Math.sin(g);p[1]=m,p[3]=-m,p[0]=p[4]=x}else p[0]=p[4]=1,p[1]=p[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,p),this.currentNormalMapRotation=c}},setTexture2D:function(c,p){var g=this.renderer;c===void 0&&(c=g.tempTextures[0]);var x=this.getNormalMap(p);g.isNewNormalMap(c,x)&&(this.flush(),g.setTextureZero(c),g.setNormalMap(x));var m=p?p.rotation:0;return this.setNormalMapRotation(m),this.currentUnit=0,0},setGameObject:function(c,p){p===void 0&&(p=c.frame);var g=this.renderer,x=p.glTexture,m=this.getNormalMap(c);return g.isNewNormalMap()&&(this.flush(),g.setTextureZero(x),g.setNormalMap(m)),this.setNormalMapRotation(c.rotation),this.currentUnit=0,0},getNormalMap:function(c){var p;return c?c.displayTexture?p=c.displayTexture.dataSource[c.displayFrame.sourceIndex]:c.texture?p=c.texture.dataSource[c.frame.sourceIndex]:c.tileset&&(Array.isArray(c.tileset)?p=c.tileset[0].image.dataSource[0]:p=c.tileset.image.dataSource[0]):p=this.defaultNormalMap,p||(p=this.defaultNormalMap),p.glTexture},batchSprite:function(c,p,g){this.lightsActive&&o.prototype.batchSprite.call(this,c,p,g)},batchTexture:function(c,p,g,x,m,y,T,C,S,E,P,M,O,A,R,F,I,D,N,z,U,W,w,L,B,b,G,Y,V,X,H,k){this.lightsActive&&o.prototype.batchTexture.call(this,c,p,g,x,m,y,T,C,S,E,P,M,O,A,R,F,I,D,N,z,U,W,w,L,B,b,G,Y,V,X,H,k)},batchTextureFrame:function(c,p,g,x,m,y,T){this.lightsActive&&o.prototype.batchTextureFrame.call(this,c,p,g,x,m,y,T)}});d.LIGHT_COUNT=f,e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=i(880),o=i(881),u=i(58),l=new s({Extends:u,initialize:function(v){v.vertShader=h(v,"vertShader",o),v.fragShader=h(v,"fragShader",r),v.attributes=h(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),u.call(this,v)},onRender:function(f,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(f,v,d,c,p,g,x,m,y,T,C,S){var E=f.color,P=f.intensity,M=f.radius,O=f.attenuation,A=E.r*P,R=E.g*P,F=E.b*P,I=v.alpha*f.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(d,c,C,S,M,O,A,R,F,I),this.batchLightVert(p,g,C,S,M,O,A,R,F,I),this.batchLightVert(x,m,C,S,M,O,A,R,F,I),this.batchLightVert(d,c,C,S,M,O,A,R,F,I),this.batchLightVert(x,m,C,S,M,O,A,R,F,I),this.batchLightVert(y,T,C,S,M,O,A,R,F,I)},batchLightVert:function(f,v,d,c,p,g,x,m,y,T){var C=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++S]=f,C[++S]=v,C[++S]=d,C[++S]=c,C[++S]=p,C[++S]=g,C[++S]=x,C[++S]=m,C[++S]=y,C[++S]=T,this.vertexCount++}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=i(108),o=new s({Extends:r,initialize:function(l){l.topology=5,l.batchSize=h(l,"batchSize",256),r.call(this,l)}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=i(108),o=i(882),u=i(883),l=i(58),f=new s({Extends:r,initialize:function(d){d.fragShader=h(d,"fragShader",o),d.vertShader=h(d,"vertShader",u),d.forceZero=!0,r.call(this,d)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0)}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(884),h=i(35),r=i(0),o=i(198),u=i(885),l=i(886),f=i(2),v=i(887),d=i(382),c=i(58),p=new r({Extends:c,initialize:function(x){x.renderTarget=f(x,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),x.vertShader=f(x,"vertShader",d),x.shaders=f(x,"shaders",[{name:"Copy",fragShader:l},{name:"AddBlend",fragShader:s},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:u}]),x.attributes=f(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),x.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],x.batchSize=1,c.call(this,x),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){c.prototype.boot.call(this);var g=this.shaders,x=this.renderTargets;this.copyShader=g[0],this.addShader=g[1],this.linearShader=g[2],this.colorMatrixShader=g[3],this.fullFrame1=x[0],this.fullFrame2=x[1],this.halfFrame1=x[2],this.halfFrame2=x[3]},copyFrame:function(g,x,m,y,T){m===void 0&&(m=1),y===void 0&&(y=!0),T===void 0&&(T=!0);var C=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,g.texture),x?(C.viewport(0,0,x.width,x.height),C.bindFramebuffer(C.FRAMEBUFFER,x.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,x.texture,0)):C.viewport(0,0,g.width,g.height),y&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blitFrame:function(g,x,m,y,T,C){m===void 0&&(m=1),y===void 0&&(y=!0),T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",m),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),g.height>x.height)S.viewport(0,0,g.width,g.height),this.setTargetUVs(g,x);else{var E=x.height-g.height;S.viewport(0,E,g.width,g.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture,0),y&&(T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),C){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),C&&this.renderer.setBlendMode(P),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(g,x,m,y,T,C,S,E){S===void 0&&(S=!0),E===void 0&&(E=!0);var P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),S&&(E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,x.texture),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,m,y,T,C),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},copyToGame:function(g){var x=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,g.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(g,x,m,y){m===void 0&&(m=!0),y===void 0&&(y=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",y.getData()),this.set1f("uAlpha",y.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g.texture),x?(T.viewport(0,0,x.width,x.height),T.bindFramebuffer(T.FRAMEBUFFER,x.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,x.texture,0)):T.viewport(0,0,g.width,g.height),m?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(g,x,m,y,T,C){y===void 0&&(y=1),T===void 0&&(T=!0),C===void 0&&(C=this.linearShader);var S=this.gl;this.setShader(C),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",y),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,g.texture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,x.texture),m?(S.bindFramebuffer(S.FRAMEBUFFER,m.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,m.texture,0),S.viewport(0,0,m.width,m.height)):S.viewport(0,0,g.width,g.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(g,x,m,y,T){this.blendFrames(g,x,m,y,T,this.addShader)},clearFrame:function(g,x){x===void 0&&(x=!0);var m=this.gl;m.viewport(0,0,g.width,g.height),m.bindFramebuffer(m.FRAMEBUFFER,g.framebuffer),x?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT);var y=this.renderer.currentFramebuffer;m.bindFramebuffer(m.FRAMEBUFFER,y)},setUVs:function(g,x,m,y,T,C,S,E){var P=this.vertexViewF32;P[2]=g,P[3]=x,P[6]=m,P[7]=y,P[10]=T,P[11]=C,P[14]=g,P[15]=x,P[18]=T,P[19]=C,P[22]=S,P[23]=E},setTargetUVs:function(g,x){var m=x.height/g.height;m>.5?m=.5-(m-.5):m=.5+(.5-m),this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});e.exports=p},function(e,a){e.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h=i(38),r=i(2),o=function(u,l){var f=u.getContext("experimental-webgl"),v=r(l,"callback"),d=r(l,"type","image/png"),c=r(l,"encoder",.92),p=r(l,"x",0),g=r(l,"y",0),x=r(l,"getPixel",!1),m=r(l,"isFramebuffer",!1),y=m?r(l,"bufferWidth",1):f.drawingBufferWidth,T=m?r(l,"bufferHeight",1):f.drawingBufferHeight;if(x){var C=new Uint8Array(4),S=m?g:T-g;f.readPixels(p,S,1,1,f.RGBA,f.UNSIGNED_BYTE,C),v.call(null,new h(C[0],C[1],C[2],C[3]/255))}else{var E=r(l,"width",y),P=r(l,"height",T),M=E*P*4,O=new Uint8Array(M);f.readPixels(p,T-g-P,E,P,f.RGBA,f.UNSIGNED_BYTE,O);for(var A=s.createWebGL(this,E,P),R=A.getContext("2d"),F=R.getImageData(0,0,E,P),I=F.data,D=0;D<P;D++)for(var N=0;N<E;N++){var z=((P-D-1)*E+N)*4,U=(D*E+N)*4;I[U+0]=O[z+0],I[U+1]=O[z+1],I[U+2]=O[z+2],I[U+3]=O[z+3]}R.putImageData(F,0,0);var W=new Image;W.onerror=function(){v.call(null),s.remove(A)},W.onload=function(){v.call(null,W),s.remove(A)},W.src=A.toDataURL(d,c)}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(33),h=function(r){var o=r.config;if(!o.hideBanner){var u="WebGL";o.renderType===s.CANVAS?u="Canvas":o.renderType===s.HEADLESS&&(u="Headless");var l=o.audio,f=r.device.audio,v;if(f.webAudio&&!l.disableWebAudio?v="Web Audio":l.noAudio||!f.webAudio&&!f.audioData?v="No Audio":v="HTML5 Audio",r.device.browser.ie)window.console&&console.log("Phaser v"+s.VERSION+" / https://phaser.io");else{var d="",c=[d];if(Array.isArray(o.bannerBackgroundColor)){var p;o.bannerBackgroundColor.forEach(function(x){d=d.concat("%c "),c.push("background: "+x),p=x}),c[c.length-1]="color: "+o.bannerTextColor+"; background: "+p}else d=d.concat("%c "),c.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);c.push("background: transparent"),o.gameTitle&&(d=d.concat(o.gameTitle),o.gameVersion&&(d=d.concat(" v"+o.gameVersion)),o.hidePhaser||(d=d.concat(" / ")));var g="";o.hidePhaser||(d=d.concat("Phaser v"+s.VERSION+g+" ("+u+" | "+v+")")),d=d.concat(" %c "+o.gameURL),c[0]=d,console.log.apply(console,c)}}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(6),r=i(1),o=i(386),u=new s({initialize:function(f,v){this.game=f,this.raf=new o,this.started=!1,this.running=!1,this.minFps=h(v,"min",5),this.targetFps=h(v,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=h(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=h(v,"deltaHistory",10),this.panicMax=h(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=h(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=Math.min(this._target,this.deltaHistory[f]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var f=0;f<this.deltaSmoothingMax;f++)this.deltaHistory[f]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var l=window.performance.now();this.now=l;var f=l-this.lastTime;f<0&&(f=0),this.rawDelta=f;var v=this.deltaIndex,d=this.deltaHistory,c=this.deltaSmoothingMax,p=f,g=f;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,p=Math.min(p,this._target)),p>this._min&&(p=d[v],p=Math.min(p,this._min)),d[v]=p,this.deltaIndex++,this.deltaIndex>c&&(this.deltaIndex=0),g=0;for(var x=0;x<c;x++)g+=d[x];g/=c}this.delta=g,this.time+=this.rawDelta,l>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0),this.framesThisSecond++;var m=g/this._target;this.callback(l,g,m),this.lastTime=l,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){this.running||(l&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(1),r=new s({initialize:function(){this.isRunning=!1,this.callback=h,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var u=this;this.step=function l(){var f=window.performance.now();u.lastTime=u.tick,u.tick=f,u.callback(f),u.timeOutID=window.requestAnimationFrame(l)},this.stepTimeout=function l(){var f=Date.now(),v=Math.min(Math.max(u.target*2+u.tick-f,0),u.target);u.lastTime=u.tick,u.tick=f,u.callback(f),u.timeOutID=window.setTimeout(l,v)}},start:function(o,u,l){this.isRunning||(this.callback=o,this.isSetTimeOut=u,this.target=l,this.isRunning=!0,this.timeOutID=u?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=h}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(22),h=function(r){var o,u=r.events;if(document.hidden!==void 0)o="visibilitychange";else{var l=["webkit","moz","ms"];l.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},o=v+"visibilitychange")})}var f=function(v){document.hidden||v.type==="pause"?u.emit(s.HIDDEN):u.emit(s.VISIBLE)};o&&document.addEventListener(o,f,!1),window.onblur=function(){u.emit(s.BLUR)},window.onfocus=function(){u.emit(s.FOCUS)},window.focus&&r.config.autoFocus&&window.focus()};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(389),h=i(31),r=i(6),o=function(u){var l=r(u,"data",[]),f=r(u,"canvas",null),v=r(u,"palette",s),d=r(u,"pixelWidth",1),c=r(u,"pixelHeight",d),p=r(u,"resizeCanvas",!0),g=r(u,"clearCanvas",!0),x=r(u,"preRender",null),m=r(u,"postRender",null),y=Math.floor(Math.abs(l[0].length*d)),T=Math.floor(Math.abs(l.length*c));f||(f=h.create2D(this,y,T),p=!1,g=!1),p&&(f.width=y,f.height=T);var C=f.getContext("2d");g&&C.clearRect(0,0,y,T),x&&x(f,C);for(var S=0;S<l.length;S++)for(var E=l[S],P=0;P<E.length;P++){var M=E[P];M!=="."&&M!==" "&&(C.fillStyle=v[M],C.fillRect(P*d,S*c,d,c))}return m&&m(f,C),f};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(358),r=i(94),o=i(3),u=new s({Extends:r,initialize:function(f,v,d,c){r.call(this,"CubicBezierCurve"),Array.isArray(f)&&(c=new o(f[6],f[7]),d=new o(f[4],f[5]),v=new o(f[2],f[3]),f=new o(f[0],f[1])),this.p0=f,this.p1=v,this.p2=d,this.p3=c},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new o);var v=this.p0,d=this.p1,c=this.p2,p=this.p3;return f.set(h(l,v.x,d.x,c.x,p.x),h(l,v.y,d.y,c.y,p.y))},draw:function(l,f){f===void 0&&(f=32);var v=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)l.lineTo(v[d].x,v[d].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});u.fromJSON=function(l){var f=l.points,v=new o(f[0],f[1]),d=new o(f[2],f[3]),c=new o(f[4],f[5]),p=new o(f[6],f[7]);return new u(v,d,c,p)},e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(94),r=i(36),o=i(6),u=i(196),l=i(3),f=new s({Extends:h,initialize:function(d,c,p,g,x,m,y,T){if(typeof d=="object"){var C=d;d=o(C,"x",0),c=o(C,"y",0),p=o(C,"xRadius",0),g=o(C,"yRadius",p),x=o(C,"startAngle",0),m=o(C,"endAngle",360),y=o(C,"clockwise",!1),T=o(C,"rotation",0)}else g===void 0&&(g=p),x===void 0&&(x=0),m===void 0&&(m=360),y===void 0&&(y=!1),T===void 0&&(T=0);h.call(this,"EllipseCurve"),this.p0=new l(d,c),this._xRadius=p,this._yRadius=g,this._startAngle=r(x),this._endAngle=r(m),this._clockwise=y,this._rotation=r(T)},getStartPoint:function(v){return v===void 0&&(v=new l),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,d){d===void 0&&(d=new l);for(var c=Math.PI*2,p=this._endAngle-this._startAngle,g=Math.abs(p)<Number.EPSILON;p<0;)p+=c;for(;p>c;)p-=c;p<Number.EPSILON&&(g?p=0:p=c),this._clockwise&&!g&&(p===c?p=-c:p=p-c);var x=this._startAngle+v*p,m=this.p0.x+this._xRadius*Math.cos(x),y=this.p0.y+this._yRadius*Math.sin(x);if(this._rotation!==0){var T=Math.cos(this._rotation),C=Math.sin(this._rotation),S=m-this.p0.x,E=y-this.p0.y;m=S*T-E*C+this.p0.x,y=S*C+E*T+this.p0.y}return d.set(m,y)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return u(this._startAngle)},set:function(v){this._startAngle=r(v)}},endAngle:{get:function(){return u(this._endAngle)},set:function(v){this._endAngle=r(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return u(this._rotation)},set:function(v){this._rotation=r(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:u(this._startAngle),endAngle:u(this._endAngle),clockwise:this._clockwise,rotation:u(this._rotation)}}});f.fromJSON=function(v){return new f(v)},e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(94),r=i(199),o=i(10),u=i(3),l=new s({Extends:h,initialize:function(v,d){h.call(this,"LineCurve"),Array.isArray(v)&&(d=new u(v[2],v[3]),v=new u(v[0],v[1])),this.p0=v,this.p1=d,this.arcLengthDivisions=1},getBounds:function(f){return f===void 0&&(f=new o),r([this.p0,this.p1],f)},getStartPoint:function(f){return f===void 0&&(f=new u),f.copy(this.p0)},getResolution:function(f){return f===void 0&&(f=1),f},getPoint:function(f,v){return v===void 0&&(v=new u),f===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(f).add(this.p0),v)},getPointAt:function(f,v){return this.getPoint(f,v)},getTangent:function(f,v){return v===void 0&&(v=new u),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(f,v,d){var c;if(v){var p=this.getLengths(d),g=p[p.length-1],x=Math.min(v,g);c=x/g}else c=f;return c},draw:function(f){return f.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),f},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(f){var v=f.points,d=new u(v[0],v[1]),c=new u(v[2],v[3]);return new l(d,c)},e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(3),r=new s({initialize:function(u,l){this.active=!1,this.p0=new h(u,l)},getPoint:function(o,u){return u===void 0&&(u=new h),u.copy(this.p0)},getPointAt:function(o,u){return this.getPoint(o,u)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(94),r=i(359),o=i(3),u=new s({Extends:h,initialize:function(f,v,d){h.call(this,"QuadraticBezier"),Array.isArray(f)&&(d=new o(f[4],f[5]),v=new o(f[2],f[3]),f=new o(f[0],f[1])),this.p0=f,this.p1=v,this.p2=d},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,f){f===void 0&&(f=new o);var v=this.p0,d=this.p1,c=this.p2;return f.set(r(l,v.x,d.x,c.x),r(l,v.y,d.y,c.y))},draw:function(l,f){f===void 0&&(f=32);var v=this.getPoints(f);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var d=1;d<v.length;d++)l.lineTo(v[d].x,v[d].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});u.fromJSON=function(l){var f=l.points,v=new o(f[0],f[1]),d=new o(f[2],f[3]),c=new o(f[4],f[5]);return new u(v,d,c)},e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(194),h=i(0),r=i(94),o=i(3),u=new h({Extends:r,initialize:function(f){f===void 0&&(f=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(f)},addPoints:function(l){for(var f=0;f<l.length;f++){var v=new o;typeof l[f]=="number"?(v.x=l[f],v.y=l[f+1],f++):Array.isArray(l[f])?(v.x=l[f][0],v.y=l[f][1]):(v.x=l[f].x,v.y=l[f].y),this.points.push(v)}return this},addPoint:function(l,f){var v=new o(l,f);return this.points.push(v),v},getStartPoint:function(l){return l===void 0&&(l=new o),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,f){f===void 0&&(f=new o);var v=this.points,d=(v.length-1)*l,c=Math.floor(d),p=d-c,g=v[c===0?c:c-1],x=v[c],m=v[c>v.length-2?v.length-1:c+1],y=v[c>v.length-3?v.length-1:c+2];return f.set(s(p,g.x,x.x,m.x,y.x),s(p,g.y,x.y,m.y,y.y))},toJSON:function(){for(var l=[],f=0;f<this.points.length;f++)l.push(this.points[f].x),l.push(this.points[f].y);return{type:this.type,points:l}}});u.fromJSON=function(l){return new u(l.points)},e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f){(!u||u==="")&&(u=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!l||l==="")&&(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),f===void 0&&(f=null),this.key=o,this.fragmentSrc=u,this.vertexSrc=l,this.uniforms=f}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38);s.ColorSpectrum=i(909),s.ColorToRGBA=i(910),s.ComponentToHex=i(398),s.GetColor=i(103),s.GetColor32=i(328),s.HexStringToColor=i(327),s.HSLToColor=i(911),s.HSVColorWheel=i(912),s.HSVToRGB=i(188),s.HueToComponent=i(399),s.IntegerToColor=i(189),s.IntegerToRGB=i(330),s.Interpolate=i(913),s.ObjectToColor=i(331),s.RandomRGB=i(914),s.RGBStringToColor=i(332),s.RGBToHSV=i(329),s.RGBToString=i(915),s.ValueToColor=i(187),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=s.toString(16);return h.length===1?"0"+h:h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?s+(h-s)*6*r:r<.5?h:r<.6666666666666666?s+(h-s)*(.6666666666666666-r)*6:s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(105),h=function(r){if(document.readyState==="complete"||document.readyState==="interactive"){r();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),r()};document.body?s.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){if(!s)return window.innerHeight;var h=Math.abs(window.orientation),r={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),r.w=h===90?o.offsetHeight:window.innerWidth,r.h=h===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?r.h:r.w};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(201),h=function(r,o){var u=window.screen,l=u?u.orientation||u.mozOrientation||u.msOrientation:!1;if(l&&typeof l.type=="string")return l.type;if(typeof l=="string")return l;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return s.ORIENTATION.LANDSCAPE}else return o>r?s.ORIENTATION.PORTRAIT:s.ORIENTATION.LANDSCAPE};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h;return s!==""&&(typeof s=="string"?h=document.getElementById(s):s&&s.nodeType===1&&(h=s)),h||(h=document.body),h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h="";try{if(window.DOMParser){var r=new DOMParser;h=r.parseFromString(s,"text/xml")}else h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(s)}catch{h=null}return!h||!h.documentElement||h.getElementsByTagName("parsererror").length?null:h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(203),r=i(9),o=i(51),u=i(22),l=i(410),f=i(411),v=i(412),d=i(413),c=i(25),p=i(177),g=new s({initialize:function(m,y){this.game=m,this.scaleManager,this.canvas,this.config=y,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=y.inputKeyboard?new l(this):null,this.mouse=y.inputMouse?new f(this):null,this.touch=y.inputTouch?new d(this):null,this.pointers=[],this.pointersTotal=y.inputActivePointers,y.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var C=new v(this,T);C.smoothFactor=y.inputSmoothFactor,this.pointers.push(C)}this.mousePointer=y.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new c,this._tempMatrix2=new c,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(u.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(u.PRE_RENDER,this.preRender,this),this.game.events.once(u.DESTROY,this.destroy,this)},setCanvasOver:function(x){this.isOver=!0,this.events.emit(o.GAME_OVER,x)},setCanvasOut:function(x){this.isOver=!1,this.events.emit(o.GAME_OUT,x)},preRender:function(){var x=this.game.loop.now,m=this.game.loop.delta,y=this.game.scene.getScenes(!0,!0);this.time=x,this.events.emit(o.MANAGER_UPDATE);for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input&&C.sys.input.updatePoll(x,m)&&this.globalTopOnly)return}},setDefaultCursor:function(x){this.defaultCursor=x,this.canvas.style.cursor!==x&&(this.canvas.style.cursor=x)},setCursor:function(x){x.cursor&&(this.canvas.style.cursor=x.cursor)},resetCursor:function(x){x.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(x){x===void 0&&(x=1);var m=[];this.pointersTotal+x>10&&(x=10-this.pointersTotal);for(var y=0;y<x;y++){var T=this.pointers.length,C=new v(this,T);C.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(C),this.pointersTotal++,m.push(C)}return m},updateInputPlugins:function(x,m){var y=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var T=0;T<y.length;T++){var C=y[T];if(C.sys.input){var S=C.sys.input.update(x,m);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(x){for(var m=this.pointers,y=[],T=0;T<x.changedTouches.length;T++)for(var C=x.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(!E.active){E.touchstart(C,x),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(h.TOUCH_START,y)},onTouchMove:function(x){for(var m=this.pointers,y=[],T=0;T<x.changedTouches.length;T++)for(var C=x.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(E.active&&E.identifier===C.identifier){E.touchmove(C,x),this.activePointer=E,y.push(E);break}}this.updateInputPlugins(h.TOUCH_MOVE,y)},onTouchEnd:function(x){for(var m=this.pointers,y=[],T=0;T<x.changedTouches.length;T++)for(var C=x.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(E.active&&E.identifier===C.identifier){E.touchend(C,x),y.push(E);break}}this.updateInputPlugins(h.TOUCH_END,y)},onTouchCancel:function(x){for(var m=this.pointers,y=[],T=0;T<x.changedTouches.length;T++)for(var C=x.changedTouches[T],S=1;S<this.pointersTotal;S++){var E=m[S];if(E.active&&E.identifier===C.identifier){E.touchcancel(C,x),y.push(E);break}}this.updateInputPlugins(h.TOUCH_CANCEL,y)},onMouseDown:function(x){var m=this.mousePointer;m.down(x),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(x){var m=this.mousePointer;m.move(x),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(x){var m=this.mousePointer;m.up(x),m.updateMotion(),this.activePointer=m,this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(x){var m=this.mousePointer;m.wheel(x),this.activePointer=m,this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(x){var m=this.mouse.locked;this.mousePointer.locked=m,this.events.emit(o.POINTERLOCK_CHANGE,x,m)},inputCandidate:function(x,m){var y=x.input;if(!y||!y.enabled||!y.alwaysEnabled&&!x.willRender(m))return!1;var T=!0,C=x.parentContainer;if(C)do{if(!C.willRender(m)){T=!1;break}C=C.parentContainer}while(C);return T},hitTest:function(x,m,y,T){T===void 0&&(T=this._tempHitTest);var C=this._tempPoint,S=y.scrollX,E=y.scrollY;T.length=0;var P=x.x,M=x.y;y.getWorldPoint(P,M,C),x.worldX=C.x,x.worldY=C.y;for(var O={x:0,y:0},A=this._tempMatrix,R=this._tempMatrix2,F=0;F<m.length;F++){var I=m[F];if(!!this.inputCandidate(I,y)){var D=C.x+S*I.scrollFactorX-S,N=C.y+E*I.scrollFactorY-E;I.parentContainer?(I.getWorldTransformMatrix(A,R),A.applyInverse(D,N,O)):p(D,N,I.x,I.y,I.rotation,I.scaleX,I.scaleY,O),this.pointWithinHitArea(I,O.x,O.y)&&T.push(I)}}return T},pointWithinHitArea:function(x,m,y){m+=x.displayOriginX,y+=x.displayOriginY;var T=x.input;return T&&T.hitAreaCallback(T.hitArea,m,y,x)?(T.localX=m,T.localY=y,!0):!1},pointWithinInteractiveObject:function(x,m,y){return x.hitArea?(m+=x.gameObject.displayOriginX,y+=x.gameObject.displayOriginY,x.localX=m,x.localY=y,x.hitAreaCallback(x.hitArea,m,y,x)):!1},transformPointer:function(x,m,y,T){var C=x.position,S=x.prevPosition;S.x=C.x,S.y=C.y;var E=this.scaleManager.transformX(m),P=this.scaleManager.transformY(y),M=x.smoothFactor;!T||M===0?(C.x=E,C.y=P):(C.x=E*M+S.x*(1-M),C.y=P*M+S.y*(1-M))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(u.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var x=0;x<this.pointers.length;x++)this.pointers[x].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(93),h=i(0),r=i(22),o=i(51),u=i(143),l=i(1),f=new h({initialize:function(d){this.manager=d,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,d.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(o.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!p&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}},this.onKeyUp=function(c){if(!(c.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(c),v.manager.events.emit(o.MANAGER_PROCESS);var p=c.altKey||c.ctrlKey||c.shiftKey||c.metaKey;v.preventDefault&&!p&&v.captures.indexOf(c.keyCode)>-1&&c.preventDefault()}};var d=this.target;d&&(d.addEventListener("keydown",this.onKeyDown,!1),d.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,c=0;c<v.length;c++){var p=v[c];typeof p=="string"&&(p=u[p.trim().toUpperCase()]),d.indexOf(p)===-1&&d.push(p)}this.preventDefault=d.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var d=this.captures,c=0;c<v.length;c++){var p=v[c];typeof p=="string"&&(p=u[p.toUpperCase()]),s(d,p)}this.preventDefault=d.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(191),r=i(51),o=i(1),u=new s({initialize:function(f){this.manager=f,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,f.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.passive=l.inputMousePassive,this.preventDefaultDown=l.inputMousePreventDefaultDown,this.preventDefaultUp=l.inputMousePreventDefaultUp,this.preventDefaultMove=l.inputMousePreventDefaultMove,this.preventDefaultWheel=l.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){if(h.pointerLock){var l=this.target;l.requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock()}},releasePointerLock:function(){h.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this.target;if(!!l){var f=this,v=this.manager,d=v.canvas,c=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&(v.onMouseMove(g),f.preventDefaultMove&&g.preventDefault())},this.onMouseDown=function(g){c&&window.focus(),!g.defaultPrevented&&f.enabled&&v&&v.enabled&&(v.onMouseDown(g),f.preventDefaultDown&&g.target===d&&g.preventDefault())},this.onMouseDownWindow=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&g.target!==d&&v.onMouseDown(g)},this.onMouseUp=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&(v.onMouseUp(g),f.preventDefaultUp&&g.target===d&&g.preventDefault())},this.onMouseUpWindow=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&g.target!==d&&v.onMouseUp(g)},this.onMouseOver=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&v.setCanvasOver(g)},this.onMouseOut=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&v.setCanvasOut(g)},this.onMouseWheel=function(g){!g.defaultPrevented&&f.enabled&&v&&v.enabled&&v.onMouseWheel(g),f.preventDefaultWheel&&g.target===d&&g.preventDefault()};var p={passive:!0};if(l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),l.addEventListener("mouseover",this.onMouseOver,p),l.addEventListener("mouseout",this.onMouseOut,p),this.preventDefaultWheel?l.addEventListener("wheel",this.onMouseWheel,{passive:!1}):l.addEventListener("wheel",this.onMouseWheel,p),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,p),window.top.addEventListener("mouseup",this.onMouseUpWindow,p)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,p),window.addEventListener("mouseup",this.onMouseUpWindow,p),this.isTop=!1}h.pointerLock&&(this.pointerLockChange=function(g){var x=f.target;f.locked=document.pointerLockElement===x||document.mozPointerLockElement===x||document.webkitPointerLockElement===x,v.onPointerLockChange(g)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(l=this.isTop?window.top:window,l.removeEventListener("mousedown",this.onMouseDownWindow),l.removeEventListener("mouseup",this.onMouseUpWindow)),h.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(349),h=i(0),r=i(50),o=i(124),u=i(360),l=i(3),f=i(105),v=new h({initialize:function(c,p){this.manager=c,this.id=p,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=p===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(d){var c=d.getWorldPoint(this.x,this.y);return this.worldX=c.x,this.worldY=c.y,this},positionToCamera:function(d,c){return d.getWorldPoint(this.x,this.y,c)},updateMotion:function(){var d=this.position.x,c=this.position.y,p=this.midPoint.x,g=this.midPoint.y;if(!(d===p&&c===g)){var x=u(this.motionFactor,p,d),m=u(this.motionFactor,g,c);o(x,d,.1)&&(x=d),o(m,c,.1)&&(m=c),this.midPoint.set(x,m);var y=d-x,T=c-m;this.velocity.set(y,T),this.angle=s(x,m,d,c),this.distance=Math.sqrt(y*y+T*T)}},up:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=d.timeStamp,this.wasTouch=!1)},down:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.button=d.button,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),d.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),f.macOS&&d.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=d.timeStamp),this.wasTouch=!1},move:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.locked&&(this.movementX=d.movementX||d.mozMovementX||d.webkitMovementX||0,this.movementY=d.movementY||d.mozMovementY||d.webkitMovementY||0),this.moveTime=d.timeStamp,this.wasTouch=!1},wheel:function(d){"buttons"in d&&(this.buttons=d.buttons),this.event=d,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.deltaX=d.deltaX,this.deltaY=d.deltaY,this.deltaZ=d.deltaZ,this.wasTouch=!1},touchstart:function(d,c){d.pointerId&&(this.pointerId=d.pointerId),this.identifier=d.identifier,this.target=d.target,this.active=!0,this.buttons=1,this.event=c,this.downElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=c.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(d,c){this.event=c,this.manager.transformPointer(this,d.pageX,d.pageY,!0),this.moveTime=c.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(d,c){this.buttons=0,this.event=c,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(d,c){this.buttons=0,this.event=c,this.upElement=d.target,this.manager.transformPointer(this,d.pageX,d.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=c.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(d,c){d===void 0&&(d=10),c===void 0&&(c=[]);for(var p=this.prevPosition.x,g=this.prevPosition.y,x=this.position.x,m=this.position.y,y=0;y<d;y++){var T=1/d*y;c[y]={x:u(T,p,x),y:u(T,g,m)}}return c},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},time:{get:function(){return this.event?this.event.timeStamp:0}}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(51),r=i(1),o=new s({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,l.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputTouch,this.target=u.inputTouchEventTarget,this.capture=u.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),u.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),this},startListeners:function(){var u=this,l=this.manager.canvas,f=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(p){f&&window.focus(),!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchStart(p),u.capture&&p.cancelable&&p.target===l&&p.preventDefault())},this.onTouchStartWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&p.target!==l&&u.manager.onTouchStart(p)},this.onTouchMove=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchMove(p),u.capture&&p.cancelable&&p.preventDefault())},this.onTouchEnd=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchEnd(p),u.capture&&p.cancelable&&p.target===l&&p.preventDefault())},this.onTouchEndWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&p.target!==l&&u.manager.onTouchEnd(p)},this.onTouchCancel=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&(u.manager.onTouchCancel(p),u.capture&&p.preventDefault())},this.onTouchCancelWindow=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.onTouchCancel(p)},this.onTouchOver=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.setCanvasOver(p)},this.onTouchOut=function(p){!p.defaultPrevented&&u.enabled&&u.manager&&u.manager.enabled&&u.manager.setCanvasOut(p)};var v=this.target;if(!!v){var d={passive:!0},c={passive:!1};v.addEventListener("touchstart",this.onTouchStart,this.capture?c:d),v.addEventListener("touchmove",this.onTouchMove,this.capture?c:d),v.addEventListener("touchend",this.onTouchEnd,this.capture?c:d),v.addEventListener("touchcancel",this.onTouchCancel,this.capture?c:d),v.addEventListener("touchover",this.onTouchOver,this.capture?c:d),v.addEventListener("touchout",this.onTouchOut,this.capture?c:d),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,c),window.addEventListener("touchend",this.onTouchEndWindow,c),window.addEventListener("touchcancel",this.onTouchCancelWindow,c)),this.enabled=!0}},stopListeners:function(){var u=this.target;u.removeEventListener("touchstart",this.onTouchStart),u.removeEventListener("touchmove",this.onTouchMove),u.removeEventListener("touchend",this.onTouchEnd),u.removeEventListener("touchcancel",this.onTouchCancel),u.removeEventListener("touchover",this.onTouchOver),u.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(22),r=i(9),o=i(8),u=i(16),l=i(5),f=i(2),v=i(24),d=i(93),c=new s({Extends:r,initialize:function(g){r.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(h.BOOT,this.boot,this)},boot:function(){var p,g,x,m,y,T,C,S=this.game.config,E=S.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),p=0;p<E.length;p++)g=E[p],x=f(g,"key",null),m=f(g,"plugin",null),y=f(g,"start",!1),T=f(g,"mapping",null),C=f(g,"data",null),x&&(m?this.install(x,m,y,T,C):console.warn("Missing `plugin` for key: "+x));for(E=S.installScenePlugins,E=E.concat(this._pendingScene),p=0;p<E.length;p++)g=E[p],x=f(g,"key",null),m=f(g,"plugin",null),T=f(g,"mapping",null),x&&(m?this.installScenePlugin(x,m,T):console.warn("Missing `plugin` for key: "+x));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(h.DESTROY,this.destroy,this)},addToScene:function(p,g,x){var m,y,T,C=this.game,S=p.scene,E=p.settings.map,P=p.settings.isBooted;for(m=0;m<g.length;m++)y=g[m],C[y]?(p[y]=C[y],E.hasOwnProperty(y)&&(S[E[y]]=p[y])):y==="game"&&E.hasOwnProperty(y)&&(S[E[y]]=C);for(var M=0;M<x.length;M++)for(T=x[M],m=0;m<T.length;m++)if(y=T[m],!!v.hasCore(y)){var O=v.getCore(y),A=O.mapping,R=new O.plugin(S,this,A);p[A]=R,O.custom?S[A]=R:E.hasOwnProperty(A)&&(S[E[A]]=R),P&&R.boot()}for(T=this.plugins,m=0;m<T.length;m++){var F=T[m];F.mapping&&(S[F.mapping]=F.plugin)}},getDefaultScenePlugins:function(){var p=this.game.config.defaultPlugins;return p=p.concat(this.scenePlugins),p},installScenePlugin:function(p,g,x,m,y){if(y===void 0&&(y=!1),typeof g!="function"){console.warn("Invalid Scene Plugin: "+p);return}if(!v.hasCore(p))v.register(p,g,x,!0),this.scenePlugins.push(p);else if(!y&&v.hasCore(p)){console.warn("Scene Plugin key in use: "+p);return}if(m){var T=new g(m,this,p);m.sys[p]=T,x&&x!==""&&(m[x]=T),T.boot()}},install:function(p,g,x,m,y){if(x===void 0&&(x=!1),m===void 0&&(m=null),y===void 0&&(y=null),typeof g!="function")return console.warn("Invalid Plugin: "+p),null;if(v.hasCustom(p))return console.warn("Plugin key in use: "+p),null;if(m!==null&&(x=!0),!this.game.isBooted)this._pendingGlobal.push({key:p,plugin:g,start:x,mapping:m,data:y});else if(v.registerCustom(p,g,m,y),x)return this.start(p);return null},getIndex:function(p){for(var g=this.plugins,x=0;x<g.length;x++){var m=g[x];if(m.key===p)return x}return-1},getEntry:function(p){var g=this.getIndex(p);if(g!==-1)return this.plugins[g]},isActive:function(p){var g=this.getEntry(p);return g&&g.active},start:function(p,g){g===void 0&&(g=p);var x=this.getEntry(g);return x&&!x.active?(x.active=!0,x.plugin.start()):x||(x=this.createEntry(p,g)),x?x.plugin:null},createEntry:function(p,g){var x=v.getCustom(p);if(x){var m=new x.plugin(this);x={key:g,plugin:m,active:!0,mapping:x.mapping,data:x.data},this.plugins.push(x),m.init(x.data),m.start()}return x},stop:function(p){var g=this.getEntry(p);return g&&g.active&&(g.active=!1,g.plugin.stop()),this},get:function(p,g){g===void 0&&(g=!0);var x=this.getEntry(p);if(x)return x.plugin;var m=this.getClass(p);return m&&g?(x=this.createEntry(p,p),x?x.plugin:null):m||null},getClass:function(p){return v.getCustomClass(p)},removeGlobalPlugin:function(p){var g=this.getEntry(p);g&&d(this.plugins,g),v.removeCustom(p)},removeScenePlugin:function(p){d(this.scenePlugins,p),v.remove(p)},registerGameObject:function(p,g,x){return g&&l.register(p,g),x&&u.register(p,x),this},removeGameObject:function(p,g,x){return g===void 0&&(g=!0),x===void 0&&(x=!0),g&&l.remove(p),x&&u.remove(p),this},registerFileType:function(p,g,x){o.register(p,g),x&&x.sys.load&&(x.sys.load[p]=g)},destroy:function(){for(var p=0;p<this.plugins.length;p++)this.plugins[p].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(201),h=i(0),r=i(9),o=i(104),u=i(22),l=i(401),f=i(407),v=i(402),d=i(1),c=i(10),p=i(416),g=i(76),x=i(3),m=new h({Extends:r,initialize:function(T){r.call(this),this.game=T,this.canvas,this.canvasBounds=new c,this.parent=null,this.parentIsWindow=!1,this.parentSize=new p,this.gameSize=new p,this.baseSize=new p,this.displaySize=new p,this.scaleMode=s.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new x(1,1),this.autoRound=!1,this.autoCenter=s.CENTER.NO_CENTER,this.orientation=s.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:d,windowResize:d,fullScreenChange:d,fullScreenError:d}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(u.BOOT,this.boot,this)},boot:function(){var y=this.game;this.canvas=y.canvas,this.fullscreen=y.device.fullscreen,this.scaleMode!==s.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===s.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),y.events.on(u.PRE_STEP,this.step,this),y.events.once(u.READY,this.refresh,this),y.events.once(u.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(y){this.getParent(y),this.getParentBounds();var T=y.width,C=y.height,S=y.scaleMode,E=y.zoom,P=y.autoRound;if(typeof T=="string"){var M=this.parentSize.width;M===0&&(M=window.innerWidth);var O=parseInt(T,10)/100;T=Math.floor(M*O)}if(typeof C=="string"){var A=this.parentSize.height;A===0&&(A=window.innerHeight);var R=parseInt(C,10)/100;C=Math.floor(A*R)}this.scaleMode=S,this.autoRound=P,this.autoCenter=y.autoCenter,this.resizeInterval=y.resizeInterval,P&&(T=Math.floor(T),C=Math.floor(C)),this.gameSize.setSize(T,C),E===s.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,C),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),y.minWidth>0&&this.displaySize.setMin(y.minWidth*E,y.minHeight*E),y.maxWidth>0&&this.displaySize.setMax(y.maxWidth*E,y.maxHeight*E),this.displaySize.setSize(T,C),this.orientation=v(T,C)},getParent:function(y){var T=y.parent;if(T!==null){if(this.parent=f(T),this.parentIsWindow=this.parent===document.body,y.expandParent&&y.scaleMode!==s.SCALE_MODE.NONE){var C=this.parent.getBoundingClientRect();(this.parentIsWindow||C.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",C=this.parent.getBoundingClientRect(),!this.parentIsWindow&&C.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}y.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=f(y.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var y=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=l(!0));var C=T.width,S=T.height;return y.width!==C||y.height!==S?(y.setSize(C,S),!0):!1},lockOrientation:function(y){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,y):!1},setParentSize:function(y,T){return this.parentSize.setSize(y,T),this.refresh()},setGameSize:function(y,T){var C=this.autoRound;C&&(y=Math.floor(y),T=Math.floor(T));var S=this.width,E=this.height;return this.gameSize.resize(y,T),this.baseSize.resize(y,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(y/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(S,E)},resize:function(y,T){var C=this.zoom,S=this.autoRound;S&&(y=Math.floor(y),T=Math.floor(T));var E=this.width,P=this.height;this.gameSize.resize(y,T),this.baseSize.resize(y,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(y*C,T*C),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var M=this.canvas.style,O=y*C,A=T*C;return S&&(O=Math.floor(O),A=Math.floor(A)),(O!==y||A!==T)&&(M.width=O+"px",M.height=A+"px"),this.refresh(E,P)},setZoom:function(y){return this.zoom=y,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(y,T){y===void 0&&(y=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var C=this.game.domContainer;if(C){this.baseSize.setCSS(C);var S=this.canvas.style,E=C.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=S.marginLeft,E.marginTop=S.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,y,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var y=v(this.width,this.height);y!==this.orientation&&(this.orientation=y,this.emit(o.ORIENTATION_CHANGE,y))}},updateScale:function(){var y=this.canvas.style,T=this.gameSize.width,C=this.gameSize.height,S,E,P=this.zoom,M=this.autoRound;this.scaleMode===s.SCALE_MODE.NONE?(this.displaySize.setSize(T*P,C*P),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),this._resetZoom&&(y.width=S+"px",y.height=E+"px",this._resetZoom=!1)):this.scaleMode===s.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),this.canvas.width=S,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),S=this.displaySize.width,E=this.displaySize.height,M&&(S=Math.floor(S),E=Math.floor(E)),y.width=S+"px",y.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var y=g(this.parentSize.width,this.gameSize.width,0,!0),T=g(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(y,T),1)},updateCenter:function(){var y=this.autoCenter;if(y!==s.CENTER.NO_CENTER){var T=this.canvas,C=T.style,S=T.getBoundingClientRect(),E=S.width,P=S.height,M=Math.floor((this.parentSize.width-E)/2),O=Math.floor((this.parentSize.height-P)/2);y===s.CENTER.CENTER_HORIZONTALLY?O=0:y===s.CENTER.CENTER_VERTICALLY&&(M=0),C.marginLeft=M+"px",C.marginTop=O+"px"}},updateBounds:function(){var y=this.canvasBounds,T=this.canvas.getBoundingClientRect();y.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),y.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),y.width=T.width,y.height=T.height},transformX:function(y){return(y-this.canvasBounds.left)*this.displayScale.x},transformY:function(y){return(y-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(y){y===void 0&&(y={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var C=this.getFullscreenTarget();T.keyboard?C[T.request](Element.ALLOW_KEYBOARD_INPUT):C[T.request](y)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(y){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,y)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var y=document.createElement("div");y.style.margin="0",y.style.padding="0",y.style.width="100%",y.style.height="100%",this.fullscreenTarget=y,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var y=this.fullscreenTarget;if(y&&y.parentNode){var T=y.parentNode;T.insertBefore(this.canvas,y),T.removeChild(y)}}},stopFullscreen:function(){var y=this.fullscreen;if(!y.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;y.active&&document[y.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(y){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(y)},startListeners:function(){var y=this,T=this.listeners;if(T.orientationChange=function(){y.updateBounds(),y._checkOrientation=!0,y.dirty=!0},T.windowResize=function(){y.updateBounds(),y.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(S){return y.onFullScreenChange(S)},T.fullScreenError=function(S){return y.onFullScreenError(S)};var C=["webkit","moz",""];C.forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(y,T){!this.parent||(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var y=this.listeners;window.removeEventListener("orientationchange",y.orientationChange,!1),window.removeEventListener("resize",y.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(C){document.removeEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.removeEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",y.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===s.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===s.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});e.exports=m},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(76),o=i(3),u=new h({initialize:function(f,v,d,c){f===void 0&&(f=0),v===void 0&&(v=f),d===void 0&&(d=0),c===void 0&&(c=null),this._width=f,this._height=v,this._parent=c,this.aspectMode=d,this.aspectRatio=v===0?1:f/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.snapTo.set(l,f),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.minWidth=s(l,0,this.maxWidth),this.minHeight=s(f,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,f){return l===void 0&&(l=Number.MAX_VALUE),f===void 0&&(f=l),this.maxWidth=s(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=s(f,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,f){switch(l===void 0&&(l=0),f===void 0&&(f=l),this.aspectMode){case u.NONE:this._width=this.getNewWidth(r(l,this.snapTo.x)),this._height=this.getNewHeight(r(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case u.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case u.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(f,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case u.FIT:this.constrain(l,f,!0);break;case u.ENVELOP:this.constrain(l,f,!1);break}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,f){return this._width=this.getNewWidth(r(l,this.snapTo.x)),this._height=this.getNewHeight(r(f,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,f){return f===void 0&&(f=!0),l=s(l,this.minWidth,this.maxWidth),f&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,f){return f===void 0&&(f=!0),l=s(l,this.minHeight,this.maxHeight),f&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,f,v){l===void 0&&(l=0),f===void 0&&(f=l),v===void 0&&(v=!0),l=this.getNewWidth(l),f=this.getNewHeight(f);var d=this.snapTo,c=f===0?1:l/f;return v&&this.aspectRatio>c||!v&&this.aspectRatio<c?(l=r(l,d.x),f=l/this.aspectRatio,d.y>0&&(f=r(f,d.y),l=f*this.aspectRatio)):(v&&this.aspectRatio<c||!v&&this.aspectRatio>c)&&(f=r(f,d.y),l=f*this.aspectRatio,d.x>0&&(l=r(l,d.x),f=l*(1/this.aspectRatio))),this._width=l,this._height=f,this},fitTo:function(l,f){return this.constrain(l,f,!0)},envelop:function(l,f){return this.constrain(l,f,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});u.NONE=0,u.WIDTH_CONTROLS_HEIGHT=1,u.HEIGHT_CONTROLS_WIDTH=2,u.FIT=3,u.ENVELOP=4,e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(144),r=i(20),o=i(22),u=i(6),l=i(95),f=i(1),v=i(418),d=i(204),c=new s({initialize:function(g,x){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,x){Array.isArray(x)||(x=[x]);for(var m=0;m<x.length;m++)this._pending.push({key:"default",scene:x[m],autoStart:m===0,data:{}})}g.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var p,g,x,m;for(p=0;p<this._pending.length;p++){g=this._pending[p],x=g.key,m=g.scene;var y;m instanceof v?y=this.createSceneFromInstance(x,m):typeof m=="object"?y=this.createSceneFromObject(x,m):typeof m=="function"&&(y=this.createSceneFromFunction(x,m)),x=y.sys.settings.key,this.keys[x]=y,this.scenes.push(y),this._data[x]&&(y.sys.settings.data=this._data[x].data,this._data[x].autoStart&&(g.autoStart=!0)),(g.autoStart||y.sys.settings.active)&&this._start.push(x)}for(this._pending.length=0,this._data={},this.isBooted=!0,p=0;p<this._start.length;p++)g=this._start[p],this.start(g);this._start.length=0}},processQueue:function(){var p=this._pending.length,g=this._queue.length;if(!(p===0&&g===0)){var x,m;if(p){for(x=0;x<p;x++)m=this._pending[x],this.add(m.key,m.scene,m.autoStart,m.data);for(x=0;x<this._start.length;x++)m=this._start[x],this.start(m);this._start.length=0,this._pending.length=0;return}for(x=0;x<this._queue.length;x++)m=this._queue[x],this[m.op](m.keyA,m.keyB);this._queue.length=0}},add:function(p,g,x,m){if(x===void 0&&(x=!1),m===void 0&&(m={}),this.isProcessing||!this.isBooted)return this._pending.push({key:p,scene:g,autoStart:x,data:m}),this.isBooted||(this._data[p]={data:m}),null;p=this.getKey(p,g);var y;return g instanceof v?y=this.createSceneFromInstance(p,g):typeof g=="object"?(g.key=p,y=this.createSceneFromObject(p,g)):typeof g=="function"&&(y=this.createSceneFromFunction(p,g)),y.sys.settings.data=m,p=y.sys.settings.key,this.keys[p]=y,this.scenes.push(y),(x||y.sys.settings.active)&&(this._pending.length?this._start.push(p):this.start(p)),y},remove:function(p){if(this.isProcessing)this._queue.push({op:"remove",keyA:p,keyB:null});else{var g=this.getScene(p);if(!g||g.sys.isTransitioning())return this;var x=this.scenes.indexOf(g),m=g.sys.settings.key;x>-1&&(delete this.keys[m],this.scenes.splice(x,1),this._start.indexOf(m)>-1&&(x=this._start.indexOf(m),this._start.splice(x,1)),g.sys.destroy())}return this},bootScene:function(p){var g=p.sys,x=g.settings;g.sceneUpdate=f,p.init&&(p.init.call(p,x.data),x.status=h.INIT,x.isTransition&&g.events.emit(r.TRANSITION_INIT,x.transitionFrom,x.transitionDuration));var m;g.load&&(m=g.load,m.reset()),m&&p.preload?(p.preload.call(p),m.list.size===0?this.create(p):(x.status=h.LOADING,m.once(l.COMPLETE,this.loadComplete,this),m.start())):this.create(p)},loadComplete:function(p){this.create(p.scene)},payloadComplete:function(p){this.bootScene(p.scene)},update:function(p,g){this.processQueue(),this.isProcessing=!0;for(var x=this.scenes.length-1;x>=0;x--){var m=this.scenes[x].sys;m.settings.status>h.START&&m.settings.status<=h.RUNNING&&m.step(p,g)}},render:function(p){for(var g=0;g<this.scenes.length;g++){var x=this.scenes[g].sys;x.settings.visible&&x.settings.status>=h.LOADING&&x.settings.status<h.SLEEPING&&x.render(p)}this.isProcessing=!1},create:function(p){var g=p.sys,x=g.settings;p.create&&(x.status=h.CREATING,p.create.call(p,x.data),x.status===h.DESTROYED)||(x.isTransition&&g.events.emit(r.TRANSITION_START,x.transitionFrom,x.transitionDuration),p.update&&(g.sceneUpdate=p.update),x.status=h.RUNNING,g.events.emit(r.CREATE,p))},createSceneFromFunction:function(p,g){var x=new g;if(x instanceof v){var m=x.sys.settings.key;if(m!==""&&(p=m),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return this.createSceneFromInstance(p,x)}else return x.sys=new d(x),x.sys.settings.key=p,x.sys.init(this.game),x},createSceneFromInstance:function(p,g){var x=g.sys.settings.key;return x===""&&(g.sys.settings.key=p),g.sys.init(this.game),g},createSceneFromObject:function(p,g){var x=new v(g),m=x.sys.settings.key;m!==""?p=m:x.sys.settings.key=p,x.sys.init(this.game);for(var y=["init","preload","create","update","render"],T=0;T<y.length;T++){var C=u(g,y[T],null);C&&(x[y[T]]=C)}if(g.hasOwnProperty("extend")){for(var S in g.extend)if(!!g.extend.hasOwnProperty(S)){var E=g.extend[S];S==="data"&&x.hasOwnProperty("data")&&typeof E=="object"?x.data.merge(E):S!=="sys"&&(x[S]=E)}}return x},getKey:function(p,g){if(p||(p="default"),typeof g=="function")return p;if(g instanceof v?p=g.sys.settings.key:typeof g=="object"&&g.hasOwnProperty("key")&&(p=g.key),this.keys.hasOwnProperty(p))throw new Error("Cannot add a Scene with duplicate key: "+p);return p},getScenes:function(p,g){p===void 0&&(p=!0),g===void 0&&(g=!1);for(var x=[],m=this.scenes,y=0;y<m.length;y++){var T=m[y];T&&(!p||p&&T.sys.isActive())&&x.push(T)}return g?x.reverse():x},getScene:function(p){if(typeof p=="string"){if(this.keys[p])return this.keys[p]}else for(var g=0;g<this.scenes.length;g++)if(p===this.scenes[g])return p;return null},isActive:function(p){var g=this.getScene(p);return g?g.sys.isActive():null},isPaused:function(p){var g=this.getScene(p);return g?g.sys.isPaused():null},isVisible:function(p){var g=this.getScene(p);return g?g.sys.isVisible():null},isSleeping:function(p){var g=this.getScene(p);return g?g.sys.isSleeping():null},pause:function(p,g){var x=this.getScene(p);return x&&x.sys.pause(g),this},resume:function(p,g){var x=this.getScene(p);return x&&x.sys.resume(g),this},sleep:function(p,g){var x=this.getScene(p);return x&&!x.sys.isTransitioning()&&x.sys.sleep(g),this},wake:function(p,g){var x=this.getScene(p);return x&&x.sys.wake(g),this},run:function(p,g){var x=this.getScene(p);if(!x){for(var m=0;m<this._pending.length;m++)if(this._pending[m].key===p){this.queueOp("start",p,g);break}return this}x.sys.isSleeping()?x.sys.wake(g):x.sys.isPaused()?x.sys.resume(g):this.start(p,g)},start:function(p,g){if(!this.isBooted)return this._data[p]={autoStart:!0,data:g},this;var x=this.getScene(p);if(x){var m=x.sys;if(m.isActive()||m.isPaused())m.shutdown(),m.sceneUpdate=f,m.start(g);else{m.sceneUpdate=f,m.start(g);var y;if(m.load&&(y=m.load),y&&m.settings.hasOwnProperty("pack")&&(y.reset(),y.addPack({payload:m.settings.pack})))return m.settings.status=h.LOADING,y.once(l.COMPLETE,this.payloadComplete,this),y.start(),this}this.bootScene(x)}return this},stop:function(p,g){var x=this.getScene(p);return x&&!x.sys.isTransitioning()&&x.sys.shutdown(g),this},switch:function(p,g){var x=this.getScene(p),m=this.getScene(g);return x&&m&&x!==m&&(this.sleep(p),this.isSleeping(g)?this.wake(g):this.start(g)),this},getAt:function(p){return this.scenes[p]},getIndex:function(p){var g=this.getScene(p);return this.scenes.indexOf(g)},bringToTop:function(p){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g<this.scenes.length){var x=this.getScene(p);this.scenes.splice(g,1),this.scenes.push(x)}}return this},sendToBack:function(p){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g!==-1&&g>0){var x=this.getScene(p);this.scenes.splice(g,1),this.scenes.unshift(x)}}return this},moveDown:function(p){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g>0){var x=g-1,m=this.getScene(p),y=this.getAt(x);this.scenes[g]=y,this.scenes[x]=m}}return this},moveUp:function(p){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:p,keyB:null});else{var g=this.getIndex(p);if(g<this.scenes.length-1){var x=g+1,m=this.getScene(p),y=this.getAt(x);this.scenes[g]=y,this.scenes[x]=m}}return this},moveAbove:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:p,keyB:g});else{var x=this.getIndex(p),m=this.getIndex(g);if(x!==-1&&m!==-1){var y=this.getAt(m);this.scenes.splice(m,1),this.scenes.splice(x+1,0,y)}}return this},moveBelow:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:p,keyB:g});else{var x=this.getIndex(p),m=this.getIndex(g);if(x!==-1&&m!==-1){var y=this.getAt(m);this.scenes.splice(m,1),x===0?this.scenes.unshift(y):this.scenes.splice(x,0,y)}}return this},queueOp:function(p,g,x){return this._queue.push({op:p,keyA:g,keyB:x}),this},swapPosition:function(p,g){if(p===g)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:p,keyB:g});else{var x=this.getIndex(p),m=this.getIndex(g);if(x!==m&&x!==-1&&m!==-1){var y=this.getAt(x);this.scenes[x]=this.scenes[m],this.scenes[m]=y}}return this},dump:function(){for(var p=[],g=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],x=0;x<this.scenes.length;x++){var m=this.scenes[x].sys,y=m.settings.visible&&(m.settings.status===h.RUNNING||m.settings.status===h.PAUSED)?"[*] ":"[-] ";y+=m.settings.key+" ("+g[m.settings.status]+")",p.push(y)}console.log(p.join(`
`))},destroy:function(){for(var p=0;p<this.scenes.length;p++){var g=this.scenes[p].sys;g.destroy()}this.update=f,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(204),r=new s({initialize:function(u){this.sys=new h(this,u),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=i(205),r=function(o){var u=o.game.config.defaultPhysicsSystem,l=s(o.settings,"physics",!1);if(!(!u&&!l)){var f=[];if(u&&f.push(h(u+"Physics")),l)for(var v in l)v=h(v.concat("Physics")),f.indexOf(v)===-1&&f.push(v);return f}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=function(r){var o=r.plugins.getDefaultScenePlugins(),u=s(r.settings,"plugins",!1);return Array.isArray(u)?u:o||[]};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(144),h=i(6),r=i(127),o=i(978),u={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:s.PENDING,key:h(l,"key",""),active:h(l,"active",!1),visible:h(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:h(l,"pack",!1),cameras:h(l,"cameras",null),map:h(l,"map",r(o,h(l,"mapAdd",{}))),physics:h(l,"physics",{}),loader:h(l,"loader",{}),plugins:h(l,"plugins",!1),input:h(l,"input",{})}}};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h=i(423),r=i(0),o=i(38),u=i(33),l=i(9),f=i(106),v=i(22),d=i(388),c=i(6),p=i(425),g=i(206),x=new r({Extends:l,initialize:function(y){l.call(this),this.game=y,this.name="TextureManager",this.list={},this._tempCanvas=s.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,y.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(f.LOAD,this.updatePending,this),this.on(f.ERROR,this.updatePending,this);var m=this.game.config;this.addBase64("__DEFAULT",m.defaultImage),this.addBase64("__MISSING",m.missingImage),this.addBase64("__WHITE",m.whiteImage),this.game.events.once(v.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(f.LOAD),this.off(f.ERROR),this.emit(f.READY))},checkKey:function(m){return this.exists(m)?(console.error("Texture key already in use: "+m),!1):!0},remove:function(m){if(typeof m=="string")if(this.exists(m))m=this.get(m);else return console.warn("No texture found matching key: "+m),this;return this.list.hasOwnProperty(m.key)&&(m.destroy(),this.emit(f.REMOVE,m.key)),this},removeKey:function(m){return this.list.hasOwnProperty(m)&&delete this.list[m],this},addBase64:function(m,y){if(this.checkKey(m)){var T=this,C=new Image;C.onerror=function(){T.emit(f.ERROR,m)},C.onload=function(){var S=T.create(m,C);p.Image(S,0),T.emit(f.ADD,m,S),T.emit(f.LOAD,m,S)},C.src=y}return this},getBase64:function(m,y,T,C){T===void 0&&(T="image/png"),C===void 0&&(C=.92);var S="",E=this.getFrame(m,y);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var P=E.canvasData,M=s.create2D(this,P.width,P.height),O=M.getContext("2d");O.drawImage(E.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),S=M.toDataURL(T,C),s.remove(M)}return S},addImage:function(m,y,T){var C=null;return this.checkKey(m)&&(C=this.create(m,y),p.Image(C,0),T&&C.setDataSource(T),this.emit(f.ADD,m,C)),C},addGLTexture:function(m,y,T,C){var S=null;return this.checkKey(m)&&(T===void 0&&(T=y.width),C===void 0&&(C=y.height),S=this.create(m,y,T,C),S.add("__BASE",0,0,0,T,C),this.emit(f.ADD,m,S)),S},addRenderTexture:function(m,y){var T=null;return this.checkKey(m)&&(T=this.create(m,y),T.add("__BASE",0,0,0,y.width,y.height),this.emit(f.ADD,m,T)),T},generate:function(m,y){if(this.checkKey(m)){var T=s.create(this,1,1);return y.canvas=T,d(y),this.addCanvas(m,T)}else return null},createCanvas:function(m,y,T){if(y===void 0&&(y=256),T===void 0&&(T=256),this.checkKey(m)){var C=s.create(this,y,T,u.CANVAS,!0);return this.addCanvas(m,C)}return null},addCanvas:function(m,y,T){T===void 0&&(T=!1);var C=null;return T?C=new h(this,m,y,y.width,y.height):this.checkKey(m)&&(C=new h(this,m,y,y.width,y.height),this.list[m]=C,this.emit(f.ADD,m,C)),C},addAtlas:function(m,y,T,C){return Array.isArray(T.textures)||Array.isArray(T.frames)?this.addAtlasJSONArray(m,y,T,C):this.addAtlasJSONHash(m,y,T,C)},addAtlasJSONArray:function(m,y,T,C){var S=null;if(this.checkKey(m)){if(S=this.create(m,y),Array.isArray(T))for(var E=T.length===1,P=0;P<S.source.length;P++){var M=E?T[0]:T[P];p.JSONArray(S,P,M)}else p.JSONArray(S,0,T);C&&S.setDataSource(C),this.emit(f.ADD,m,S)}return S},addAtlasJSONHash:function(m,y,T,C){var S=null;if(this.checkKey(m)){if(S=this.create(m,y),Array.isArray(T))for(var E=0;E<T.length;E++)p.JSONHash(S,E,T[E]);else p.JSONHash(S,0,T);C&&S.setDataSource(C),this.emit(f.ADD,m,S)}return S},addAtlasXML:function(m,y,T,C){var S=null;return this.checkKey(m)&&(S=this.create(m,y),p.AtlasXML(S,0,T),C&&S.setDataSource(C),this.emit(f.ADD,m,S)),S},addUnityAtlas:function(m,y,T,C){var S=null;return this.checkKey(m)&&(S=this.create(m,y),p.UnityYAML(S,0,T),C&&S.setDataSource(C),this.emit(f.ADD,m,S)),S},addSpriteSheet:function(m,y,T){var C=null;if(this.checkKey(m)){C=this.create(m,y);var S=C.source[0].width,E=C.source[0].height;p.SpriteSheet(C,0,0,0,S,E,T),this.emit(f.ADD,m,C)}return C},addSpriteSheetFromAtlas:function(m,y){if(!this.checkKey(m))return null;var T=c(y,"atlas",null),C=c(y,"frame",null);if(!(!T||!C)){var S=this.get(T),E=S.get(C);if(E){var P=this.create(m,E.source.image);return E.trimmed?p.SpriteSheetFromAtlas(P,E,y):p.SpriteSheet(P,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,y),this.emit(f.ADD,m,P),P}}},create:function(m,y,T,C){var S=null;return this.checkKey(m)&&(S=new g(this,m,y,T,C),this.list[m]=S),S},exists:function(m){return this.list.hasOwnProperty(m)},get:function(m){return m===void 0&&(m="__DEFAULT"),this.list[m]?this.list[m]:m instanceof g?m:this.list.__MISSING},cloneFrame:function(m,y){if(this.list[m])return this.list[m].get(y).clone()},getFrame:function(m,y){if(this.list[m])return this.list[m].get(y)},getTextureKeys:function(){var m=[];for(var y in this.list)y!=="__DEFAULT"&&y!=="__MISSING"&&m.push(y);return m},getPixel:function(m,y,T,C){var S=this.getFrame(T,C);if(S){m-=S.x,y-=S.y;var E=S.data.cut;if(m+=E.x,y+=E.y,m>=E.x&&m<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,m,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return new o(M.data[0],M.data[1],M.data[2],M.data[3])}}return null},getPixelAlpha:function(m,y,T,C){var S=this.getFrame(T,C);if(S){m-=S.x,y-=S.y;var E=S.data.cut;if(m+=E.x,y+=E.y,m>=E.x&&m<E.r&&y>=E.y&&y<E.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(S.source.image,m,y,1,1,0,0,1,1);var M=P.getImageData(0,0,1,1);return M.data[3]}}return null},setTexture:function(m,y,T){return this.list[y]&&(m.texture=this.list[y],m.frame=m.texture.get(T)),m},renameTexture:function(m,y){var T=this.get(m);return T&&m!==y?(T.key=y,this.list[y]=T,delete this.list[m],!0):!1},each:function(m,y){for(var T=[null],C=1;C<arguments.length;C++)T.push(arguments[C]);for(var S in this.list)T[0]=this.list[S],m.apply(y,T)},destroy:function(){for(var m in this.list)this.list[m].destroy();this.list={},this.game=null,s.remove(this._tempCanvas)}});e.exports=x},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(18),r=i(38),o=i(33),u=i(138),l=i(206),f=new s({Extends:l,initialize:function(d,c,p,g,x){l.call(this,d,c,p,g,x),this.add("__BASE",0,0,0,g,x),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=g,this.height=x,this.imageData=this.context.getImageData(0,0,g,x),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(v,d,c){return this.context.drawImage(c,v,d),this.update()},drawFrame:function(v,d,c,p){c===void 0&&(c=0),p===void 0&&(p=0);var g=this.manager.getFrame(v,d);if(g){var x=g.canvasData,m=g.cutWidth,y=g.cutHeight,T=g.source.resolution;return this.context.drawImage(g.source.image,x.x,x.y,m,y,c,p,m/T,y/T),this.update()}else return this},setPixel:function(v,d,c,p,g,x){x===void 0&&(x=255),v=Math.abs(Math.floor(v)),d=Math.abs(Math.floor(d));var m=this.getIndex(v,d);if(m>-1){var y=this.context.getImageData(v,d,1,1);y.data[0]=c,y.data[1]=p,y.data[2]=g,y.data[3]=x,this.context.putImageData(y,v,d)}return this},putData:function(v,d,c,p,g,x,m){return p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=v.width),m===void 0&&(m=v.height),this.context.putImageData(v,d,c,p,g,x,m),this},getData:function(v,d,c,p){v=h(Math.floor(v),0,this.width-1),d=h(Math.floor(d),0,this.height-1),c=h(c,1,this.width-v),p=h(p,1,this.height-d);var g=this.context.getImageData(v,d,c,p);return g},getPixel:function(v,d,c){c||(c=new r);var p=this.getIndex(v,d);if(p>-1){var g=this.data,x=g[p+0],m=g[p+1],y=g[p+2],T=g[p+3];c.setTo(x,m,y,T)}return c},getPixels:function(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=this.width),p===void 0&&(p=c),v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d));for(var g=h(v,0,this.width),x=h(v+c,0,this.width),m=h(d,0,this.height),y=h(d+p,0,this.height),T=new r,C=[],S=m;S<y;S++){for(var E=[],P=g;P<x;P++)T=this.getPixel(P,S,T),E.push({x:P,y:S,color:T.color,alpha:T.alphaGL});C.push(E)}return C},getIndex:function(v,d){return v=Math.abs(Math.round(v)),d=Math.abs(Math.round(d)),v<this.width&&d<this.height?(v+d*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,d,c,p){return v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=this.width),p===void 0&&(p=this.height),this.context.clearRect(v,d,c,p),this.update()},setSize:function(v,d){return d===void 0&&(d=v),(v!==this.width||d!==this.height)&&(this.canvas.width=v,this.canvas.height=d,this._source.width=v,this._source.height=d,this._source.isPowerOf2=u(v,d),this.frames.__BASE.setSize(v,d,0,0),this.width=v,this.height=d,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h=i(0),r=i(138),o=i(168),u=new h({initialize:function(f,v,d,c,p){p===void 0&&(p=!1);var g=f.manager.game;this.renderer=g.renderer,this.texture=f,this.source=v,this.image=v,this.compressionAlgorithm=null,this.resolution=1,this.width=d||v.naturalWidth||v.videoWidth||v.width||0,this.height=c||v.naturalHeight||v.videoHeight||v.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=v instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&v instanceof HTMLVideoElement,this.isRenderTexture=v.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&v instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=p,this.init(g)},init:function(l){var f=this.renderer;f&&(f.gl?this.isCanvas?this.glTexture=f.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=f.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=f.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=f.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),l.config.antialias||this.setFilter(1)},setFilter:function(l){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,l),this.scaleMode=l},setFlipY:function(l){return l===void 0&&(l=!0),this.flipY=l,this},update:function(){var l=this.renderer.gl;l&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):l&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&s.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AtlasXML:i(979),Canvas:i(980),Image:i(981),JSONArray:i(982),JSONHash:i(983),SpriteSheet:i(984),SpriteSheetFromAtlas:i(985),UnityYAML:i(986)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(427),h=i(430),r=i(432),o={create:function(u){var l=u.config.audio,f=u.device.audio;return l.noAudio||!f.webAudio&&!f.audioData?new h(u):f.webAudio&&!l.disableWebAudio?new r(u):new s(u)}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(145),h=i(0),r=i(70),o=i(429),u=new h({Extends:s,initialize:function(f){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,s.call(this,f)},add:function(l,f){var v=new o(this,l,f);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var l=this;if(this.game.cache.audio.entries.each(function(c,p){for(var g=0;g<p.length;g++)if(p[g].dataset.locked==="true")return l.locked=!0,!1;return!0}),!!this.locked){var f=!1,v=function(){f=!0},d=function(){if(f){f=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",d);var c=[];if(l.game.cache.audio.entries.each(function(g,x){for(var m=0;m<x.length;m++){var y=x[m];y.dataset.locked==="true"&&c.push(y)}return!0}),c.length!==0){var p=c[c.length-1];p.oncanplaythrough=function(){p.oncanplaythrough=null,c.forEach(function(g){g.dataset.locked="false"}),l.unlocked=!0},c.forEach(function(g){g.load()})}};this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(p){p.currentMarker===null&&p.duration===0&&(p.duration=p.tags[0].duration),p.totalDuration=p.tags[0].duration});this.lockedActionsQueue.length;){var c=this.lockedActionsQueue.shift();c.sound[c.prop].apply?c.sound[c.prop].apply(c.sound,c.value||[]):c.sound[c.prop]=c.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",d,!1)}},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){s.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,f,v){return l.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:l,prop:f,value:v}),!0):!1},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(f){f.updateMute()}),this.emit(r.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(f){f.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,l)}}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),h=function(r,o,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=r.length),s(r,l,f))for(var v=l;v<f;v++){var d=r[v];if(!o||o&&u===void 0&&d.hasOwnProperty(o)||o&&u!==void 0&&d[o]===u)return d}return null};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(146),h=i(0),r=i(70),o=i(18),u=new h({Extends:s,initialize:function(f,v,d){if(d===void 0&&(d={}),this.tags=f.game.cache.audio.get(v),!this.tags)throw new Error('There is no audio asset with key "'+v+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,s.call(this,f,v,d)},play:function(l,f){return this.manager.isLocked(this,"play",[l,f])||!s.prototype.play.call(this,l,f)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!s.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!s.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,f=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),f===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+f*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var f=this.tags[l];if(f.dataset.used==="false")return f.dataset.used="true",this.audio=f,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(c){c.key===this.key&&c.audio&&v.push(c)},this),v.sort(function(c,p){return c.loop===p.loop?p.seek/p.duration-c.seek/c.duration:c.loop?1:-1});var d=v[0];return this.audio=d.audio,d.reset(),d.audio=null,d.startTime=0,d.previousTime=0,!0},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(f){console.warn(f)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){s.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l){if(!!this.isPlaying){if(this.startTime>0){this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var f=this.currentMarker?this.currentMarker.start:0,v=f+this.duration,d=this.audio.currentTime;if(this.currentConfig.loop)d>=v-this.manager.loopEndOffset?(this.audio.currentTime=f+Math.max(0,d-v),d=this.audio.currentTime):d<f&&(this.audio.currentTime+=f,d=this.audio.currentTime),d<this.previousTime&&this.emit(r.LOOPED,this);else if(d>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(r.COMPLETE,this);return}this.previousTime=d}},destroy:function(){s.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){s.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,!this.manager.isLocked(this,"mute",l)&&(this.updateMute(),this.emit(r.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,!this.manager.isLocked(this,"volume",l)&&(this.updateVolume(),this.emit(r.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,!this.manager.isLocked(this,r.RATE,l)&&(this.calculateRate(),this.emit(r.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,!this.manager.isLocked(this,r.DETUNE,l)&&(this.calculateRate(),this.emit(r.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||this.startTime>0||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(r.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,!this.manager.isLocked(this,"loop",l)&&(this.audio&&(this.audio.loop=l),this.emit(r.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.currentConfig.pan},set:function(l){this.currentConfig.pan=l,this.emit(r.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(145),h=i(0),r=i(9),o=i(431),u=i(1),l=new h({Extends:r,initialize:function(v){r.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(f,v){var d=new o(this,f,v);return this.sounds.push(d),d},addAudioSprite:function(f,v){var d=this.add(f,v);return d.spritemap={},d},play:function(f,v){return!1},playAudioSprite:function(f,v,d){return!1},remove:function(f){return s.prototype.remove.call(this,f)},removeByKey:function(f){return s.prototype.removeByKey.call(this,f)},pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,forEachActiveSound:function(f,v){s.prototype.forEachActiveSound.call(this,f,v)},destroy:function(){s.prototype.destroy.call(this)}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(146),h=i(0),r=i(9),o=i(17),u=function(){return!1},l=function(){return null},f=function(){return this},v=new h({Extends:r,initialize:function(c,p,g){g===void 0&&(g={}),r.call(this),this.manager=c,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:u,updateMarker:u,removeMarker:l,play:u,pause:u,resume:u,stop:u,destroy:function(){s.prototype.destroy.call(this)},setMute:f,setVolume:f,setRate:f,setDetune:f,setSeek:f,setLoop:f,setPan:f});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(433),h=i(145),r=i(0),o=i(70),u=i(22),l=i(434),f=new r({Extends:h,initialize:function(d){this.context=this.createAudioContext(d),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),h.call(this,d),this.locked&&d.isBooted?this.unlock():d.events.once(u.BOOT,this.unlock,this)},createAudioContext:function(v){var d=v.config.audio;if(d.context)return d.context.resume(),d.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(v){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=v,this.masterMuteNode=v.createGain(),this.masterVolumeNode=v.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(v.destination),this.destination=this.masterMuteNode,this},add:function(v,d){var c=new l(this,v,d);return this.sounds.push(c),c},decodeAudio:function(v,d){var c;Array.isArray(v)?c=v:c=[{key:v,data:d}];for(var p=this.game.cache.audio,g=c.length,x=0;x<c.length;x++){var m=c[x],y=m.key,T=m.data;typeof T=="string"&&(T=s(T));var C=function(E,P){p.add(E,P),this.emit(o.DECODED,E),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y),S=function(E,P){console.error("Error decoding audio: "+E+" - ",P?P.message:""),g--,g===0&&this.emit(o.DECODED_ALL)}.bind(this,y);this.context.decodeAudioData(T,C,S)}},unlock:function(){var v=this,d=document.body,c=function p(){if(v.context&&d){var g=d.removeEventListener;v.context.resume().then(function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p),v.unlocked=!0},function(){g("touchstart",p),g("touchend",p),g("click",p),g("keydown",p)})}};d&&(d.addEventListener("touchstart",c,!1),d.addEventListener("touchend",c,!1),d.addEventListener("click",c,!1),d.addEventListener("keydown",c,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var v=this.context;(v.state==="suspended"||v.state==="interrupted")&&!this.locked&&v.resume()},update:function(v,d){h.prototype.update.call(this,v,d);var c=this.context;c&&c.state==="interrupted"&&c.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var v=this;this.context.close().then(function(){v.context=null})}h.prototype.destroy.call(this)},setMute:function(v){return this.mute=v,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(v){this.masterMuteNode.gain.setValueAtTime(v?0:1,0),this.emit(o.GLOBAL_MUTE,this,v)}},setVolume:function(v){return this.volume=v,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(v){this.masterVolumeNode.gain.setValueAtTime(v,0),this.emit(o.GLOBAL_VOLUME,this,v)}}});e.exports=f},function(e,a){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),h=0;h<i.length;h++)s[i.charCodeAt(h)]=h;var r=function(o){o=o.substr(o.indexOf(",")+1);var u=o.length,l=u*.75,f=0,v,d,c,p;o[u-1]==="="&&(l--,o[u-2]==="="&&l--);for(var g=new ArrayBuffer(l),x=new Uint8Array(g),m=0;m<u;m+=4)v=s[o.charCodeAt(m)],d=s[o.charCodeAt(m+1)],c=s[o.charCodeAt(m+2)],p=s[o.charCodeAt(m+3)],x[f++]=v<<2|d>>4,x[f++]=(d&15)<<4|c>>2,x[f++]=(c&3)<<6|p&63;return g};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(146),h=i(0),r=i(70),o=new h({Extends:s,initialize:function(l,f,v){if(v===void 0&&(v={}),this.audioBuffer=l.game.cache.audio.get(f),!this.audioBuffer)throw new Error('Audio key "'+f+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=l.context.createGain(),this.volumeNode=l.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),l.context.createStereoPanner?(this.pannerNode=l.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(l.destination)):this.volumeNode.connect(l.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,s.call(this,l,f,v)},play:function(u,l){return s.prototype.play.call(this,u,l)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!s.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return s.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0):!1},createAndStartBufferSource:function(){var u=this.currentConfig.seek,l=this.currentConfig.delay,f=this.manager.context.currentTime+l,v=(this.currentMarker?this.currentMarker.start:0)+u,d=this.duration-u;this.playTime=f-u,this.startTime=f,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,f),Math.max(0,v),Math.max(0,d)),this.resetConfig()},createAndStartLoopBufferSource:function(){var u=this.getLoopTime(),l=this.currentMarker?this.currentMarker.start:0,f=this.duration;this.loopTime=u,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,u),Math.max(0,l),Math.max(0,f))},createBufferSource:function(){var u=this,l=this.manager.context.createBufferSource();return l.buffer=this.audioBuffer,l.connect(this.muteNode),l.onended=function(f){f.target===u.source&&(u.currentConfig.loop?u.hasLooped=!0:u.hasEnded=!0)},l},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),s.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,s.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){s.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){s.prototype.calculateRate.call(this);var u=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,u),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,u)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var u=0,l=0;l<this.rateUpdates.length;l++){var f=0;l<this.rateUpdates.length-1?f=this.rateUpdates[l+1].time:f=this.manager.context.currentTime-this.playTime,u+=(f-this.rateUpdates[l].time)*this.rateUpdates[l].rate}return u},getLoopTime:function(){for(var u=0,l=0;l<this.rateUpdates.length-1;l++)u+=(this.rateUpdates[l+1].time-this.rateUpdates[l].time)*this.rateUpdates[l].rate;var f=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+f.time+(this.duration-u)/f.rate},rate:{get:function(){return this.currentConfig.rate},set:function(u){this.currentConfig.rate=u,this.calculateRate(),this.emit(r.RATE,this,u)}},setRate:function(u){return this.rate=u,this},detune:{get:function(){return this.currentConfig.detune},set:function(u){this.currentConfig.detune=u,this.calculateRate(),this.emit(r.DETUNE,this,u)}},setDetune:function(u){return this.detune=u,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(u){this.currentConfig.mute=u,this.muteNode.gain.setValueAtTime(u?0:1,0),this.emit(r.MUTE,this,u)}},setMute:function(u){return this.mute=u,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(u){this.currentConfig.volume=u,this.volumeNode.gain.setValueAtTime(u,0),this.emit(r.VOLUME,this,u)}},setVolume:function(u){return this.volume=u,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(u){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(u=Math.min(Math.max(0,u),this.duration),this.currentConfig.seek=u,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,u))}},setSeek:function(u){return this.seek=u,this},loop:{get:function(){return this.currentConfig.loop},set:function(u){this.currentConfig.loop=u,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),u&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,u)}},setLoop:function(u){return this.loop=u,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(u){this.currentConfig.pan=u,this.pannerNode&&this.pannerNode.pan.setValueAtTime(u,this.manager.context.currentTime),this.emit(r.PAN,this,u)}},setPan:function(u){return this.pan=u,this}});e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var h=s.length,r=s[0].length,o=new Array(r),u=0;u<r;u++){o[u]=new Array(h);for(var l=h-1;l>-1;l--)o[u][l]=s[l][u]}return o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function i(r,o,u){var l=r[o];r[o]=r[u],r[u]=l}function s(r,o){return r<o?-1:r>o?1:0}var h=function(r,o,u,l,f){for(u===void 0&&(u=0),l===void 0&&(l=r.length-1),f===void 0&&(f=s);l>u;){if(l-u>600){var v=l-u+1,d=o-u+1,c=Math.log(v),p=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*p*(v-p)/v)*(d-v/2<0?-1:1),x=Math.max(u,Math.floor(o-d*p/v+g)),m=Math.min(l,Math.floor(o+(v-d)*p/v+g));h(r,o,x,m,f)}var y=r[o],T=u,C=l;for(i(r,u,o),f(r[l],y)>0&&i(r,u,l);T<C;){for(i(r,T,C),T++,C--;f(r[T],y)<0;)T++;for(;f(r[C],y)>0;)C--}f(r[u],y)===0?i(r,u,C):(C++,i(r,C,l)),C<=o&&(u=C+1),o<=C&&(l=C-1)}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),h=i(131),r=function(u,l,f){for(var v=[],d=0;d<u.length;d++)for(var c=0;c<l.length;c++)for(var p=0;p<f;p++)v.push({a:u[d],b:l[c]});return v},o=function(u,l,f){var v=s(f,"max",0),d=s(f,"qty",1),c=s(f,"random",!1),p=s(f,"randomB",!1),g=s(f,"repeat",0),x=s(f,"yoyo",!1),m=[];if(p&&h(l),g===-1)if(v===0)g=0;else{var y=u.length*l.length*d;x&&(y*=2),g=Math.ceil(v/y)}for(var T=0;T<=g;T++){var C=r(u,l,d);c&&h(C),m=m.concat(C),x&&(C.reverse(),m=m.concat(C))}return v&&m.splice(v),m};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={PROCESS_QUEUE_ADD:i(1041),PROCESS_QUEUE_REMOVE:i(1042)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(13),h=function(r,o){var u=s(o,"anims",null);if(u===null)return r;if(typeof u=="string")r.anims.play(u);else if(typeof u=="object"){var l=r.anims,f=s(u,"key",void 0);if(f){var v=s(u,"startFrame",void 0),d=s(u,"delay",0),c=s(u,"repeat",0),p=s(u,"repeatDelay",0),g=s(u,"yoyo",!1),x=s(u,"play",!1),m=s(u,"delayedPlay",0),y={key:f,delay:d,repeat:c,repeatDelay:p,yoyo:g,startFrame:v};x?l.play(y):m>0?l.playAfterDelay(y,m):l.load(y)}}return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(109),r=new s({initialize:function(u,l,f,v,d){this.parent=u,this.x=l,this.y=f,this.frame=v,this.data={},this.tint=16777215,this._visible=d,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof h&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,u,l){return this.x=o,this.y=u,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,l&&this.setFrame(l),this},setPosition:function(o,u){return this.x=o,this.y=u,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,u){return this.flipX=o,this.flipY=u,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r,o,u){u===void 0&&(u=new s);var l=Math.min(r.x,o.x),f=Math.min(r.y,o.y),v=Math.max(r.right,o.right)-l,d=Math.max(r.bottom,o.bottom)-f;return u.setTo(l,f,v,d)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(1055),o=i(15),u=i(7),l=i(202),f=i(20),v=i(140),d=new s({Extends:o,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Origin,h.ScrollFactor,h.Transform,h.Visible,r],initialize:function(p,g,x,m,y,T){o.call(this,p,"DOMElement"),this.parent=p.sys.game.domContainer,this.cache=p.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,x),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),y,T):this.createElement(m,y,T):m&&this.setElement(m,y,T),p.sys.events.on(f.SLEEP,this.handleSceneEvent,this),p.sys.events.on(f.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(c){var p=this.node,g=p.style;p&&(g.display=c.settings.visible?"block":"none")},setSkew:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=c),this.skewX=c,this.skewY=p,this},setPerspective:function(c){return this.parent.style.perspective=c+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(c){this.parent.style.perspective=c+"px"}},addListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.addEventListener(c[p],this.handler,!1)}return this},removeListener:function(c){if(this.node){c=c.split(" ");for(var p=0;p<c.length;p++)this.node.removeEventListener(c[p],this.handler)}return this},dispatchNativeEvent:function(c){this.emit(c.type,c)},createElement:function(c,p,g){return this.setElement(document.createElement(c),p,g)},setElement:function(c,p,g){this.removeElement();var x;if(typeof c=="string"?(c[0]==="#"&&(c=c.substr(1)),x=document.getElementById(c)):typeof c=="object"&&c.nodeType===1&&(x=c),!x)return this;if(this.node=x,p&&u(p))for(var m in p)x.style[m]=p[m];else typeof p=="string"&&(x.style=p);return x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent&&this.parent.appendChild(x),g&&(x.innerText=g),this.updateSize()},createFromCache:function(c,p){var g=this.cache.get(c);return g&&this.createFromHTML(g,p),this},createFromHTML:function(c,p){p===void 0&&(p="div"),this.removeElement();var g=document.createElement(p);return this.node=g,g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),g.innerHTML=c,this.updateSize()},removeElement:function(){return this.node&&(l(this.node),this.node=null),this},updateSize:function(){var c=this.node,p=c.getBoundingClientRect();return this.width=c.clientWidth,this.height=c.clientHeight,this.displayWidth=p.width||0,this.displayHeight=p.height||0,this},getChildByProperty:function(c,p){if(this.node){for(var g=this.node.querySelectorAll("*"),x=0;x<g.length;x++)if(g[x][c]===p)return g[x]}return null},getChildByID:function(c){return this.getChildByProperty("id",c)},getChildByName:function(c){return this.getChildByProperty("name",c)},setClassName:function(c){return this.node&&(this.node.className=c,this.updateSize()),this},setText:function(c){return this.node&&(this.node.innerText=c,this.updateSize()),this},setHTML:function(c){return this.node&&(this.node.innerHTML=c,this.updateSize()),this},preUpdate:function(){var c=this.parentContainer,p=this.node;p&&c&&!c.willRender()&&(p.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(f.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(f.WAKE,this.handleSceneEvent,this)}});e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1056),h=i(15),r=i(25),o=new r,u=new r,l=new r,f=function(v,d,c,p){if(!!d.node){var g=d.node.style,x=d.scene.sys.settings;if(!g||!x.visible||h.RENDER_MASK!==d.renderFlags||d.cameraFilter!==0&&d.cameraFilter&c.id||d.parentContainer&&!d.parentContainer.willRender()){g.display="none";return}var m=d.parentContainer,y=c.alpha*d.alpha;m&&(y*=m.alpha);var T=o,C=u,S=l,E=0,P=0,M="0%",O="0%";p?(E=d.width*d.scaleX*d.originX,P=d.height*d.scaleY*d.originY,C.applyITRS(d.x-E,d.y-P,d.rotation,d.scaleX,d.scaleY),T.copyFrom(c.matrix),T.multiplyWithOffset(p,-c.scrollX*d.scrollFactorX,-c.scrollY*d.scrollFactorY),C.e=d.x-E,C.f=d.y-P,T.multiply(C,S)):(E=d.width*d.originX,P=d.height*d.originY,C.applyITRS(d.x-E,d.y-P,d.rotation,d.scaleX,d.scaleY),T.copyFrom(c.matrix),M=100*d.originX+"%",O=100*d.originY+"%",C.e-=c.scrollX*d.scrollFactorX,C.f-=c.scrollY*d.scrollFactorY,T.multiply(C,S)),d.transformOnly||(g.display="block",g.opacity=y,g.zIndex=d._depth,g.pointerEvents=d.pointerEvents,g.mixBlendMode=s[d._blendMode]),g.transform=S.getCSSMatrix()+" skew("+d.skewX+"rad, "+d.skewY+"rad) rotate3d("+d.rotate3d.x+","+d.rotate3d.y+","+d.rotate3d.z+","+d.rotate3d.w+d.rotate3dAngle+")",g.transformOrigin=M+" "+O}};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(1060),u=new s({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.Origin,h.ScrollFactor,h.Size,h.Texture,h.Tint,h.Transform,h.Visible,o],initialize:function(f){r.call(this,f,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(218),h=i(98),r=i(14),o=i(4),u=function(l,f,v){v===void 0&&(v=new o);var d=h(f,0,r.PI2);return s(l,d,v)};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(447),h=i(218),r=i(98),o=i(14),u=function(l,f,v,d){d===void 0&&(d=[]),!f&&v>0&&(f=s(l)/v);for(var c=0;c<f;c++){var p=r(c/f,0,o.PI2);d.push(h(l,p))}return d};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=s.width/2,r=s.height/2,o=Math.pow(h-r,2)/Math.pow(h+r,2);return Math.PI*(h+r)*(1+3*o/(10+Math.sqrt(4-3*o)))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(217),h=i(30),r=function(o,u,l,f,v,d){var c=u.commandBuffer,p=c.length,g=v||o.currentContext;if(!(p===0||!h(o,g,u,l,f))){l.addToRenderList(u);var x=1,m=1,y=0,T=0,C=1,S=0,E=0,P=0;g.beginPath();for(var M=0;M<p;++M){var O=c[M];switch(O){case s.ARC:g.arc(c[M+1],c[M+2],c[M+3],c[M+4],c[M+5],c[M+6]),M+=7;break;case s.LINE_STYLE:C=c[M+1],y=c[M+2],x=c[M+3],S=(y&16711680)>>>16,E=(y&65280)>>>8,P=y&255,g.strokeStyle="rgba("+S+","+E+","+P+","+x+")",g.lineWidth=C,M+=3;break;case s.FILL_STYLE:T=c[M+1],m=c[M+2],S=(T&16711680)>>>16,E=(T&65280)>>>8,P=T&255,g.fillStyle="rgba("+S+","+E+","+P+","+m+")",M+=2;break;case s.BEGIN_PATH:g.beginPath();break;case s.CLOSE_PATH:g.closePath();break;case s.FILL_PATH:d||g.fill();break;case s.STROKE_PATH:d||g.stroke();break;case s.FILL_RECT:d?g.rect(c[M+1],c[M+2],c[M+3],c[M+4]):g.fillRect(c[M+1],c[M+2],c[M+3],c[M+4]),M+=4;break;case s.FILL_TRIANGLE:g.beginPath(),g.moveTo(c[M+1],c[M+2]),g.lineTo(c[M+3],c[M+4]),g.lineTo(c[M+5],c[M+6]),g.closePath(),d||g.fill(),M+=6;break;case s.STROKE_TRIANGLE:g.beginPath(),g.moveTo(c[M+1],c[M+2]),g.lineTo(c[M+3],c[M+4]),g.lineTo(c[M+5],c[M+6]),g.closePath(),d||g.stroke(),M+=6;break;case s.LINE_TO:g.lineTo(c[M+1],c[M+2]),M+=2;break;case s.MOVE_TO:g.moveTo(c[M+1],c[M+2]),M+=2;break;case s.LINE_FX_TO:g.lineTo(c[M+1],c[M+2]),M+=5;break;case s.MOVE_FX_TO:g.moveTo(c[M+1],c[M+2]),M+=5;break;case s.SAVE:g.save();break;case s.RESTORE:g.restore();break;case s.TRANSLATE:g.translate(c[M+1],c[M+2]),M+=2;break;case s.SCALE:g.scale(c[M+1],c[M+2]),M+=2;break;case s.ROTATE:g.rotate(c[M+1]),M+=1;break;case s.GRADIENT_FILL_STYLE:M+=5;break;case s.GRADIENT_LINE_STYLE:M+=6;break}}g.restore()}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(137),r=i(80),o=i(2),u=i(68),l=new s({initialize:function(v,d,c,p){p===void 0&&(p=!1),this.propertyKey=d,this.propertyValue=c,this.defaultValue=c,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(v)},loadConfig:function(f,v){f===void 0&&(f={}),v&&(this.propertyKey=v),this.propertyValue=o(f,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(f){return this.propertyValue=f,this.setMethods()},setMethods:function(){var f=this.propertyValue,v=typeof f;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,v==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(f))this.onEmit=this.randomStaticValueEmit;else if(v==="function")this.emitOnly?this.onEmit=f:this.onUpdate=f;else if(v==="object"&&this.hasBoth(f,"start","end")){this.start=f.start,this.end=f.end;var d=this.has(f,"random");if(d&&(this.onEmit=this.randomRangedValueEmit),this.has(f,"steps"))this.steps=f.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var c=this.has(f,"ease")?f.ease:"Linear";this.ease=r(c,f.easeParams),d||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(v==="object"&&this.hasBoth(f,"min","max"))this.start=f.min,this.end=f.max,this.onEmit=this.randomRangedValueEmit;else if(v==="object"&&this.has(f,"random")){var p=f.random;Array.isArray(p)&&(this.start=p[0],this.end=p[1]),this.onEmit=this.randomRangedValueEmit}else v==="object"&&this.hasEither(f,"onEmit","onUpdate")&&(this.has(f,"onEmit")&&(this.onEmit=f.onEmit),this.has(f,"onUpdate")&&(this.onUpdate=f.onUpdate));return this},has:function(f,v){return f.hasOwnProperty(v)},hasBoth:function(f,v,d){return f.hasOwnProperty(v)&&f.hasOwnProperty(d)},hasEither:function(f,v,d){return f.hasOwnProperty(v)||f.hasOwnProperty(d)},defaultEmit:function(f,v,d){return d},defaultUpdate:function(f,v,d,c){return c},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var f=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[f]},randomRangedValueEmit:function(f,v){var d=h(this.start,this.end);return f&&f.data[v]&&(f.data[v].min=d),d},steppedEmit:function(){var f=this.counter,v=this.counter+(this.end-this.start)/this.steps;return this.counter=u(v,this.start,this.end),f},easedValueEmit:function(f,v){if(f&&f.data[v]){var d=f.data[v];d.min=this.start,d.max=this.end}return this.start},easeValueUpdate:function(f,v,d){var c=f.data[v];return(c.max-c.min)*this.ease(d)+c.min}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=new s({initialize:function(u,l,f,v,d){if(typeof u=="object"){var c=u;u=h(c,"x",0),l=h(c,"y",0),f=h(c,"power",0),v=h(c,"epsilon",100),d=h(c,"gravity",50)}else u===void 0&&(u=0),l===void 0&&(l=0),f===void 0&&(f=0),v===void 0&&(v=100),d===void 0&&(d=50);this.x=u,this.y=l,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=f,this.epsilon=v},update:function(o,u){var l=this.x-o.x,f=this.y-o.y,v=l*l+f*f;if(v!==0){var d=Math.sqrt(v);v<this._epsilon&&(v=this._epsilon);var c=this._power*u/(v*d)*100;o.velocityX+=l*c,o.velocityY+=f*c}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var u=this.power;this._gravity=o,this.power=u}}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(36),r=i(50),o=new s({initialize:function(l){this.emitter=l,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(u,l){var f=this.emitter;this.frame=f.getFrame(),f.emitZone&&f.emitZone.getPoint(this),u===void 0?this.x+=f.x.onEmit(this,"x"):this.x+=u,l===void 0?this.y+=f.y.onEmit(this,"y"):this.y+=l,this.life=f.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var v=f.speedX.onEmit(this,"speedX"),d=f.speedY?f.speedY.onEmit(this,"speedY"):v;if(f.radial){var c=h(f.angle.onEmit(this,"angle"));this.velocityX=Math.cos(c)*Math.abs(v),this.velocityY=Math.sin(c)*Math.abs(d)}else if(f.moveTo){var p=f.moveToX.onEmit(this,"moveToX"),g=f.moveToY?f.moveToY.onEmit(this,"moveToY"):p,x=Math.atan2(g-this.y,p-this.x),m=r(this.x,this.y,p,g)/(this.life/1e3);this.velocityX=Math.cos(x)*m,this.velocityY=Math.sin(x)*m}else this.velocityX=v,this.velocityY=d;f.acceleration&&(this.accelerationX=f.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=f.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=f.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=f.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=f.delay.onEmit(this,"delay"),this.scaleX=f.scaleX.onEmit(this,"scaleX"),this.scaleY=f.scaleY?f.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=f.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),this.bounce=f.bounce.onEmit(this,"bounce"),this.alpha=f.alpha.onEmit(this,"alpha"),this.tint=f.tint.onEmit(this,"tint")},computeVelocity:function(u,l,f,v){var d=this.velocityX,c=this.velocityY,p=this.accelerationX,g=this.accelerationY,x=this.maxVelocityX,m=this.maxVelocityY;d+=u.gravityX*f,c+=u.gravityY*f,p&&(d+=p*f),g&&(c+=g*f),d>x?d=x:d<-x&&(d=-x),c>m?c=m:c<-m&&(c=-m),this.velocityX=d,this.velocityY=c;for(var y=0;y<v.length;y++)v[y].update(this,l,f)},checkBounds:function(u){var l=u.bounds,f=-this.bounce;this.x<l.x&&u.collideLeft?(this.x=l.x,this.velocityX*=f):this.x>l.right&&u.collideRight&&(this.x=l.right,this.velocityX*=f),this.y<l.y&&u.collideTop?(this.y=l.y,this.velocityY*=f):this.y>l.bottom&&u.collideBottom&&(this.y=l.bottom,this.velocityY*=f)},update:function(u,l,f){if(this.delayCurrent>0)return this.delayCurrent-=u,!1;var v=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(v,u,l,f),this.x+=this.velocityX*l,this.y+=this.velocityY*l,v.bounds&&this.checkBounds(v),v.deathZone&&v.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=v.scaleX.onUpdate(this,"scaleX",d,this.scaleX),v.scaleY?this.scaleY=v.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=v.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=h(this.angle),this.alpha=v.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=v.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=u,this.lifeCurrent<=0)}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(35),h=i(0),r=i(11),o=i(453),u=i(454),l=i(449),f=i(2),v=i(210),d=i(455),c=i(126),p=i(451),g=i(456),x=i(10),m=i(79),y=i(3),T=i(68),C=new h({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(E,P){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=p,this.x=new l(P,"x",0,!0),this.y=new l(P,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new l(P,"accelerationX",0,!0),this.accelerationY=new l(P,"accelerationY",0,!0),this.maxVelocityX=new l(P,"maxVelocityX",1e4,!0),this.maxVelocityY=new l(P,"maxVelocityY",1e4,!0),this.speedX=new l(P,"speedX",0,!0),this.speedY=new l(P,"speedY",0,!0),this.moveTo=!1,this.moveToX=new l(P,"moveToX",0,!0),this.moveToY=new l(P,"moveToY",0,!0),this.bounce=new l(P,"bounce",0,!0),this.scaleX=new l(P,"scaleX",1),this.scaleY=new l(P,"scaleY",1),this.tint=new l(P,"tint",16777215),this.alpha=new l(P,"alpha",1),this.lifespan=new l(P,"lifespan",1e3,!0),this.angle=new l(P,"angle",{min:0,max:360},!0),this.rotate=new l(P,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new l(P,"quantity",1,!0),this.delay=new l(P,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=s.NORMAL,this.follow=null,this.followOffset=new y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,P&&this.fromJSON(P)},fromJSON:function(S){if(!S)return this;var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],c(S,P)&&(this[P]=f(S,P));for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],c(S,P)&&this[P].loadConfig(S);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,c(S,"speed")&&(this.speedX.loadConfig(S,"speed"),this.speedY=null),(d(S,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),c(S,"scale")&&(this.scaleX.loadConfig(S,"scale"),this.scaleY=null),c(S,"callbackScope")){var M=f(S,"callbackScope",null);this.emitCallbackScope=M,this.deathCallbackScope=M}return c(S,"emitZone")&&this.setEmitZone(S.emitZone),c(S,"deathZone")&&this.setDeathZone(S.deathZone),c(S,"bounds")&&this.setBounds(S.bounds),c(S,"followOffset")&&this.followOffset.setFromObject(f(S,"followOffset",0)),c(S,"frame")&&this.setFrame(S.frame),c(S,"reserve")&&this.reserve(S.reserve),this},toJSON:function(S){S===void 0&&(S={});var E=0,P="";for(E=0;E<this.configFastMap.length;E++)P=this.configFastMap[E],S[P]=this[P];for(E=0;E<this.configOpMap.length;E++)P=this.configOpMap[E],this[P]&&(S[P]=this[P].toJSON());return this.speedY||(delete S.speedX,S.speed=this.speedX.toJSON()),this.scaleY||(delete S.scaleX,S.scale=this.scaleX.toJSON()),S},startFollow:function(S,E,P,M){return E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=!1),this.follow=S,this.followOffset.set(E,P),this.trackVisible=M,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return v(this.frames);var S=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=T(this.currentFrame+1,0,this._frameLength)),S},setFrame:function(S,E,P){E===void 0&&(E=!0),P===void 0&&(P=1),this.randomFrame=E,this.frameQuantity=P,this.currentFrame=0,this._frameCounter=0;var M=typeof S;if(Array.isArray(S)||M==="string"||M==="number")this.manager.setEmitterFrames(S,this);else if(M==="object"){var O=S;S=f(O,"frames",null),S&&this.manager.setEmitterFrames(S,this);var A=f(O,"cycle",!1);this.randomFrame=!A,this.frameQuantity=f(O,"quantity",P)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(S){return S===void 0&&(S=!0),this.radial=S,this},setPosition:function(S,E){return this.x.onChange(S),this.y.onChange(E),this},setBounds:function(S,E,P,M){if(typeof S=="object"){var O=S;S=O.x,E=O.y,P=c(O,"w")?O.w:O.width,M=c(O,"h")?O.h:O.height}return this.bounds?this.bounds.setTo(S,E,P,M):this.bounds=new x(S,E,P,M),this},setSpeedX:function(S){return this.speedX.onChange(S),this.radial=!1,this},setSpeedY:function(S){return this.speedY&&(this.speedY.onChange(S),this.radial=!1),this},setSpeed:function(S){return this.speedX.onChange(S),this.speedY=null,this.radial=!0,this},setScaleX:function(S){return this.scaleX.onChange(S),this},setScaleY:function(S){return this.scaleY.onChange(S),this},setScale:function(S){return this.scaleX.onChange(S),this.scaleY=null,this},setGravityX:function(S){return this.gravityX=S,this},setGravityY:function(S){return this.gravityY=S,this},setGravity:function(S,E){return this.gravityX=S,this.gravityY=E,this},setAlpha:function(S){return this.alpha.onChange(S),this},setTint:function(S){return this.tint.onChange(S),this},setEmitterAngle:function(S){return this.angle.onChange(S),this},setAngle:function(S){return this.angle.onChange(S),this},setLifespan:function(S){return this.lifespan.onChange(S),this},setQuantity:function(S){return this.quantity.onChange(S),this},setFrequency:function(S,E){return this.frequency=S,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(S){if(S===void 0)this.emitZone=null;else{var E=f(S,"type","random"),P=f(S,"source",null);switch(E){case"random":this.emitZone=new g(P);break;case"edge":var M=f(S,"quantity",1),O=f(S,"stepRate",0),A=f(S,"yoyo",!1),R=f(S,"seamless",!0);this.emitZone=new u(P,M,O,A,R);break}}return this},setDeathZone:function(S){if(S===void 0)this.deathZone=null;else{var E=f(S,"type","onEnter"),P=f(S,"source",null);if(P&&typeof P.contains=="function"){var M=E==="onEnter";this.deathZone=new o(P,M)}}return this},reserve:function(S){for(var E=this.dead,P=0;P<S;P++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(S,E){return S===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof S=="function"&&(this.emitCallback=S,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(S,E){return S===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof S=="function"&&(this.deathCallback=S,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var S=this.dead,E=this.alive;E.length>0;)S.push(E.pop());return this},forEachAlive:function(S,E){for(var P=this.alive,M=P.length,O=0;O<M;++O)S.call(E,P[O],this);return this},forEachDead:function(S,E){for(var P=this.dead,M=P.length,O=0;O<M;++O)S.call(E,P[O],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return m(this.alive,this.depthSortCallback),this},flow:function(S,E){return E===void 0&&(E=1),this.frequency=S,this.quantity.onChange(E),this.start()},explode:function(S,E,P){return this.frequency=-1,this.emitParticle(S,E,P)},emitParticleAt:function(S,E,P){return this.emitParticle(P,S,E)},emitParticle:function(S,E,P){if(!this.atLimit()){S===void 0&&(S=this.quantity.onEmit());for(var M=this.dead,O=this.follow?this.follow.x+this.followOffset.x:E,A=this.follow?this.follow.y+this.followOffset.y:P,R=0;R<S;R++){var F=M.pop();if(F||(F=new this.particleClass(this)),F.fire(O,A),this.particleBringToTop?this.alive.push(F):this.alive.unshift(F),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,F,this),this.atLimit())break}return F}},preUpdate:function(S,E){E*=this.timeScale;var P=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var M=this.manager.getProcessors(),O=this.alive,A=this.dead,R=0,F=[],I=O.length;for(R=0;R<I;R++){var D=O[R];D.update(E,P,M)&&F.push({index:R,particle:D})}if(I=F.length,I>0){var N=this.deathCallback,z=this.deathCallbackScope;for(R=I-1;R>=0;R--){var U=F[R];O.splice(U.index,1),A.push(U.particle),N&&N.call(z,U.particle),U.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(S,E){return S.y-E.y}});e.exports=C},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u){this.source=o,this.killOnEnter=u},willKill:function(r){var o=this.source.contains(r.x,r.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f,v){f===void 0&&(f=!1),v===void 0&&(v=!0),this.source=o,this.points=[],this.quantity=u,this.stepRate=l,this.yoyo=f,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var r=this.points[0],o=this.points[this.points.length-1];r.x===o.x&&r.y===o.y&&this.points.pop()}var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(r){return this.source=r,this.updateSource()},getPoint:function(r){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(r.x=o.x,r.y=o.y)}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){for(var r=0;r<h.length;r++)if(s.hasOwnProperty(h[r]))return!0;return!1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(3),r=new s({initialize:function(u){this.source=u,this._tempVec=new h},getPoint:function(o){var u=this._tempVec;this.source.getRandomPoint(u),o.x=u.x,o.y=u.y}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(73),o=new s({Extends:r,Mixins:[h.PathFollower],initialize:function(l,f,v,d,c,p){r.call(this,l,v,d,c,p),this.path=f},preUpdate:function(u,l){this.anims.update(u,l),this.pathUpdate(u)}});e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=s.canvas,u=s.context,l=s.style,f=[],v=0,d=r.length;l.maxLines>0&&l.maxLines<r.length&&(d=l.maxLines),l.syncFont(o,u);for(var c=0;c<d;c++){var p=l.strokeThickness;p+=u.measureText(r[c]).width,l.wordWrap&&(p-=u.measureText(" ").width),f[c]=Math.ceil(p),v=Math.max(v,f[c])}var g=h.fontSize+l.strokeThickness,x=g*d,m=s.lineSpacing;return d>1&&(x+=m*(d-1)),{width:v,height:x,lines:d,lineWidths:f,lineSpacing:m,lineHeight:g}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(13),r=i(6),o=i(460),u={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new s({initialize:function(v,d){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(d,!1,!0);var c=r(d,"metrics",!1);c?this.metrics={ascent:r(c,"ascent",0),descent:r(c,"descent",0),fontSize:r(c,"fontSize",0)}:this.metrics=o(this)},setStyle:function(f,v,d){v===void 0&&(v=!0),d===void 0&&(d=!1),f&&f.hasOwnProperty("fontSize")&&typeof f.fontSize=="number"&&(f.fontSize=f.fontSize.toString()+"px");for(var c in u){var p=d?u[c][1]:this[c];c==="wordWrapCallback"||c==="wordWrapCallbackScope"?this[c]=r(f,u[c][0],p):this[c]=h(f,u[c][0],p)}var g=r(f,"font",null);g!==null&&this.setFont(g,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var x=r(f,"fill",null);return x!==null&&(this.color=x),v?this.update(!0):this.parent},syncFont:function(f,v){v.font=this._font},syncStyle:function(f,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(f,v){v?(f.shadowOffsetX=this.shadowOffsetX,f.shadowOffsetY=this.shadowOffsetY,f.shadowColor=this.shadowColor,f.shadowBlur=this.shadowBlur):(f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowColor=0,f.shadowBlur=0)},update:function(f){return f&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(f,v){v===void 0&&(v=!0);var d=f,c="",p="";if(typeof f!="string")d=r(f,"fontFamily","Courier"),c=r(f,"fontSize","16px"),p=r(f,"fontStyle","");else{var g=f.split(" "),x=0;p=g.length>2?g[x++]:"",c=g[x++]||"16px",d=g[x++]||"Courier"}return(d!==this.fontFamily||c!==this.fontSize||p!==this.fontStyle)&&(this.fontFamily=d,this.fontSize=c,this.fontStyle=p,v&&this.update(!0)),this.parent},setFontFamily:function(f){return this.fontFamily!==f&&(this.fontFamily=f,this.update(!0)),this.parent},setFontStyle:function(f){return this.fontStyle!==f&&(this.fontStyle=f,this.update(!0)),this.parent},setFontSize:function(f){return typeof f=="number"&&(f=f.toString()+"px"),this.fontSize!==f&&(this.fontSize=f,this.update(!0)),this.parent},setTestString:function(f){return this.testString=f,this.update(!0)},setFixedSize:function(f,v){return this.fixedWidth=f,this.fixedHeight=v,f&&(this.parent.width=f),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(f){return this.backgroundColor=f,this.update(!1)},setFill:function(f){return this.color=f,this.update(!1)},setColor:function(f){return this.color=f,this.update(!1)},setResolution:function(f){return this.resolution=f,this.update(!1)},setStroke:function(f,v){return v===void 0&&(v=this.strokeThickness),f===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==f||this.strokeThickness!==v)&&(this.stroke=f,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(f,v,d,c,p,g){return f===void 0&&(f=0),v===void 0&&(v=0),d===void 0&&(d="#000"),c===void 0&&(c=0),p===void 0&&(p=!1),g===void 0&&(g=!0),this.shadowOffsetX=f,this.shadowOffsetY=v,this.shadowColor=d,this.shadowBlur=c,this.shadowStroke=p,this.shadowFill=g,this.update(!1)},setShadowOffset:function(f,v){return f===void 0&&(f=0),v===void 0&&(v=f),this.shadowOffsetX=f,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(f){return f===void 0&&(f="#000"),this.shadowColor=f,this.update(!1)},setShadowBlur:function(f){return f===void 0&&(f=0),this.shadowBlur=f,this.update(!1)},setShadowStroke:function(f){return this.shadowStroke=f,this.update(!1)},setShadowFill:function(f){return this.shadowFill=f,this.update(!1)},setWordWrapWidth:function(f,v){return v===void 0&&(v=!1),this.wordWrapWidth=f,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(f,v){return v===void 0&&(v=null),this.wordWrapCallback=f,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(f){return f===void 0&&(f="left"),this.align=f,this.update(!1)},setMaxLines:function(f){return f===void 0&&(f=0),this.maxLines=f,this.update(!1)},getTextMetrics:function(){var f=this.metrics;return{ascent:f.ascent,descent:f.descent,fontSize:f.fontSize}},toJSON:function(){var f={};for(var v in u)f[v]=this[v];return f.metrics=this.getTextMetrics(),f},destroy:function(){this.parent=void 0}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(31),h=function(r){var o=s.create(this),u=o.getContext("2d");r.syncFont(o,u);var l=u.measureText(r.testString);if("actualBoundingBoxAscent"in l){var f=l.actualBoundingBoxAscent,v=l.actualBoundingBoxDescent;return s.remove(o),{ascent:f,descent:v,fontSize:f+v}}var d=Math.ceil(l.width*r.baselineX),c=d,p=2*c;c=c*r.baselineY|0,o.width=d,o.height=p,u.fillStyle="#f00",u.fillRect(0,0,d,p),u.font=r._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(r.testString,0,c);var g={ascent:0,descent:0,fontSize:0},x=u.getImageData(0,0,d,p);if(!x)return g.ascent=c,g.descent=c+6,g.fontSize=g.ascent+g.descent,s.remove(o),g;var m=x.data,y=m.length,T=d*4,C,S,E=0,P=!1;for(C=0;C<c;C++){for(S=0;S<T;S+=4)if(m[E+S]!==255){P=!0;break}if(!P)E+=T;else break}for(g.ascent=c-C,E=y-T,P=!1,C=p;C>c;C--){for(S=0;S<T;S+=4)if(m[E+S]!==255){P=!0;break}if(!P)E-=T;else break}return g.descent=C-c,g.fontSize=g.ascent+g.descent,s.remove(o),g};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1097),h=i(0),r=i(36),o=i(59),u=i(65),l=i(14),f=i(34),v=new h({Extends:f,Mixins:[s],initialize:function(c,p,g,x,m,y,T,C,S){p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=128),m===void 0&&(m=0),y===void 0&&(y=360),T===void 0&&(T=!1),f.call(this,c,"Arc",new u(0,0,x)),this._startAngle=m,this._endAngle=y,this._anticlockwise=T,this._iterations=.01,this.setPosition(p,g);var E=this.geom.radius*2;this.setSize(E,E),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(d){this._iterations=d,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(d){this.geom.radius=d;var c=d*2;this.setSize(c,c),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(d){this._startAngle=d,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(d){this._endAngle=d,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(d){this._anticlockwise=d,this.updateData()}},setRadius:function(d){return this.radius=d,this},setIterations:function(d){return d===void 0&&(d=.01),this.iterations=d,this},setStartAngle:function(d,c){return this._startAngle=d,c!==void 0&&(this._anticlockwise=c),this.updateData()},setEndAngle:function(d,c){return this._endAngle=d,c!==void 0&&(this._anticlockwise=c),this.updateData()},updateData:function(){var d=this._iterations,c=d,p=this.geom.radius,g=r(this._startAngle),x=r(this._endAngle),m=this._anticlockwise,y=p,T=p;x-=g,m?x<-l.PI2?x=-l.PI2:x>0&&(x=-l.PI2+x%l.PI2):x>l.PI2?x=l.PI2:x<0&&(x=l.PI2+x%l.PI2);for(var C=[y+Math.cos(g)*p,T+Math.sin(g)*p],S;c<1;)S=x*c+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),c+=d;return S=x+g,C.push(y+Math.cos(S)*p,T+Math.sin(S)*p),C.push(y+Math.cos(g)*p,T+Math.sin(g)*p),this.pathIndexes=o(C),this.pathData=C,this}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(1100),r=i(59),o=i(10),u=i(34),l=new s({Extends:u,Mixins:[h],initialize:function(v,d,c,p,g,x){d===void 0&&(d=0),c===void 0&&(c=0),u.call(this,v,"Curve",p),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(d,c),g!==void 0&&this.setFillStyle(g,x),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){var f=this._curveBounds,v=this._smoothness;this.geom.getBounds(f,v),this.setSize(f.width,f.height),this.updateDisplayOrigin();for(var d=[],c=this.geom.getPoints(v),p=0;p<c.length;p++)d.push(c[p].x,c[p].y);return d.push(c[0].x,c[0].y),this.pathIndexes=r(d),this.pathData=d,this}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(59),r=i(1103),o=i(111),u=i(34),l=new s({Extends:u,Mixins:[r],initialize:function(v,d,c,p,g,x,m){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=128),u.call(this,v,"Ellipse",new o(p/2,g/2,p,g)),this._smoothness=64,this.setPosition(d,c),this.width=p,this.height=g,x!==void 0&&this.setFillStyle(x,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(f){this._smoothness=f,this.updateData()}},setSize:function(f,v){return this.width=f,this.height=v,this.geom.setPosition(f/2,v/2),this.geom.setSize(f,v),this.updateData()},setSmoothness:function(f){return this._smoothness=f,this.updateData()},updateData:function(){for(var f=[],v=this.geom.getPoints(this._smoothness),d=0;d<v.length;d++)f.push(v[d].x,v[d].y);return f.push(v[0].x,v[0].y),this.pathIndexes=h(f),this.pathData=f,this}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(34),r=i(1106),o=new s({Extends:h,Mixins:[r],initialize:function(l,f,v,d,c,p,g,x,m,y,T){f===void 0&&(f=0),v===void 0&&(v=0),d===void 0&&(d=128),c===void 0&&(c=128),p===void 0&&(p=32),g===void 0&&(g=32),h.call(this,l,"Grid",null),this.cellWidth=p,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(f,v),this.setSize(d,c),this.setFillStyle(x,m),y!==void 0&&this.setOutlineStyle(y,T),this.updateDisplayOrigin()},setFillStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showCells=!1:(this.fillColor=u,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showAltCells=!1:(this.altFillColor=u,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(u,l){return l===void 0&&(l=1),u===void 0?this.showOutline=!1:(this.outlineFillColor=u,this.outlineFillAlpha=l,this.showOutline=!0),this}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1109),h=i(0),r=i(34),o=new h({Extends:r,Mixins:[s],initialize:function(l,f,v,d,c,p,g,x){f===void 0&&(f=0),v===void 0&&(v=0),d===void 0&&(d=48),c===void 0&&(c=32),p===void 0&&(p=15658734),g===void 0&&(g=10066329),x===void 0&&(x=13421772),r.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=p,this.fillLeft=g,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(f,v),this.setSize(d,c),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setFaces:function(u,l,f){return u===void 0&&(u=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=u,this.showLeft=l,this.showRight=f,this},setFillStyle:function(u,l,f){return this.fillTop=u,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(1112),r=i(34),o=new s({Extends:r,Mixins:[h],initialize:function(l,f,v,d,c,p,g,x,m){f===void 0&&(f=0),v===void 0&&(v=0),d===void 0&&(d=48),c===void 0&&(c=32),p===void 0&&(p=!1),g===void 0&&(g=15658734),x===void 0&&(x=10066329),m===void 0&&(m=13421772),r.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=x,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=p,this.isFilled=!0,this.setPosition(f,v),this.setSize(d,c),this.updateDisplayOrigin()},setProjection:function(u){return this.projection=u,this},setReversed:function(u){return this.isReversed=u,this},setFaces:function(u,l,f){return u===void 0&&(u=!0),l===void 0&&(l=!0),f===void 0&&(f=!0),this.showTop=u,this.showLeft=l,this.showRight=f,this},setFillStyle:function(u,l,f){return this.fillTop=u,this.fillLeft=l,this.fillRight=f,this.isFilled=!0,this}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(34),r=i(47),o=i(1115),u=new s({Extends:h,Mixins:[o],initialize:function(f,v,d,c,p,g,x,m,y){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=0),h.call(this,f,"Line",new r(c,p,g,x));var T=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,d),this.setSize(T,C),m!==void 0&&this.setStrokeStyle(1,m,y),this.updateDisplayOrigin()},setLineWidth:function(l,f){return f===void 0&&(f=l),this._startWidth=l,this._endWidth=f,this.lineWidth=l,this},setTo:function(l,f,v,d){return this.geom.setTo(l,f,v,d),this}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1118),h=i(0),r=i(59),o=i(469),u=i(227),l=i(34),f=i(472),v=new h({Extends:l,Mixins:[s],initialize:function(c,p,g,x,m,y){p===void 0&&(p=0),g===void 0&&(g=0),l.call(this,c,"Polygon",new u(x));var T=o(this.geom);this.setPosition(p,g),this.setSize(T.width,T.height),m!==void 0&&this.setFillStyle(m,y),this.updateDisplayOrigin(),this.updateData()},smooth:function(d){d===void 0&&(d=1);for(var c=0;c<d;c++)f(this.geom);return this.updateData()},updateData:function(){for(var d=[],c=this.geom.points,p=0;p<c.length;p++)d.push(c[p].x,c[p].y);return d.push(c[0].x,c[0].y),this.pathIndexes=r(d),this.pathData=d,this}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r,o){o===void 0&&(o=new s);for(var u=1/0,l=1/0,f=-u,v=-l,d,c=0;c<r.points.length;c++)d=r.points[c],u=Math.min(u,d.x),l=Math.min(l,d.y),f=Math.max(f,d.x),v=Math.max(v,d.y);return o.x=u,o.y=l,o.width=f-u,o.height=v-l,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),h=i(47),r=i(471),o=function(u,l,f,v){v===void 0&&(v=[]);var d=u.points,c=r(u);!l&&f>0&&(l=c/f);for(var p=0;p<l;p++)for(var g=c*(p/l),x=0,m=0;m<d.length;m++){var y=d[m],T=d[(m+1)%d.length],C=new h(y.x,y.y,T.x,T.y),S=s(C);if(g<x||g>x+S){x+=S;continue}var E=C.getPoint((g-x)/S);v.push(E);break}return v};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),h=i(47),r=function(o){for(var u=o.points,l=0,f=0;f<u.length;f++){var v=u[f],d=u[(f+1)%u.length],c=new h(v.x,v.y,d.x,d.y);l+=s(c)}return l};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(h,r){return h[0]=r[0],h[1]=r[1],h},s=function(h){var r,o=[],u=h.points;for(r=0;r<u.length;r++)o.push([u[r].x,u[r].y]);var l=[];for(o.length>0&&l.push(i([0,0],o[0])),r=0;r<o.length-1;r++){var f=o[r],v=o[r+1],d=f[0],c=f[1],p=v[0],g=v[1];l.push([.85*d+.15*p,.85*c+.15*g]),l.push([.15*d+.85*p,.15*c+.85*g])}return o.length>1&&l.push(i([0,0],o[o.length-1])),h.setTo(l)};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(10),r=i(34),o=i(1121),u=new s({Extends:r,Mixins:[o],initialize:function(f,v,d,c,p,g,x){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=128),p===void 0&&(p=128),r.call(this,f,"Rectangle",new h(0,0,c,p)),this.setPosition(v,d),this.setSize(c,p),g!==void 0&&this.setFillStyle(g,x),this.updateDisplayOrigin(),this.updateData()},setSize:function(l,f){return this.width=l,this.height=f,this.geom.setSize(l,f),this.updateData(),this},updateData:function(){var l=[],f=this.geom,v=this._tempLine;return f.getLineA(v),l.push(v.x1,v.y1,v.x2,v.y2),f.getLineB(v),l.push(v.x2,v.y2),f.getLineC(v),l.push(v.x2,v.y2),f.getLineD(v),l.push(v.x2,v.y2),this.pathData=l,this}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1124),h=i(0),r=i(59),o=i(34),u=new h({Extends:o,Mixins:[s],initialize:function(f,v,d,c,p,g,x,m){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=5),p===void 0&&(p=32),g===void 0&&(g=64),o.call(this,f,"Star",null),this._points=c,this._innerRadius=p,this._outerRadius=g,this.setPosition(v,d),this.setSize(g*2,g*2),x!==void 0&&this.setFillStyle(x,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(l){return this._points=l,this.updateData()},setInnerRadius:function(l){return this._innerRadius=l,this.updateData()},setOuterRadius:function(l){return this._outerRadius=l,this.updateData()},points:{get:function(){return this._points},set:function(l){this._points=l,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(l){this._innerRadius=l,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(l){this._outerRadius=l,this.updateData()}},updateData:function(){var l=[],f=this._points,v=this._innerRadius,d=this._outerRadius,c=Math.PI/2*3,p=Math.PI/f,g=d,x=d;l.push(g,x+-d);for(var m=0;m<f;m++)l.push(g+Math.cos(c)*d,x+Math.sin(c)*d),c+=p,l.push(g+Math.cos(c)*v,x+Math.sin(c)*v),c+=p;return l.push(g,x+-d),this.pathIndexes=r(l),this.pathData=l,this}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(34),r=i(82),o=i(1127),u=new s({Extends:h,Mixins:[o],initialize:function(f,v,d,c,p,g,x,m,y,T,C){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=64),x===void 0&&(x=0),m===void 0&&(m=128),y===void 0&&(y=128),h.call(this,f,"Triangle",new r(c,p,g,x,m,y));var S=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(v,d),this.setSize(S,E),T!==void 0&&this.setFillStyle(T,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(l,f,v,d,c,p){return this.geom.setTo(l,f,v,d,c,p),this.updateData()},updateData:function(){var l=[],f=this.geom,v=this._tempLine;return f.getLineA(v),l.push(v.x1,v.y1,v.x2,v.y2),f.getLineB(v),l.push(v.x2,v.y2),f.getLineC(v),l.push(v.x2,v.y2),this.pathData=l,this}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(67),r=function(o,u,l){l===void 0&&(l=new s);var f=o.getLineA(),v=o.getLineB(),d=o.getLineC();if(u<=0||u>=1)return l.x=f.x1,l.y=f.y1,l;var c=h(f),p=h(v),g=h(d),x=c+p+g,m=x*u,y=0;return m<c?(y=m/c,l.x=f.x1+(f.x2-f.x1)*y,l.y=f.y1+(f.y2-f.y1)*y):m>c+p?(m-=c+p,y=m/g,l.x=d.x1+(d.x2-d.x1)*y,l.y=d.y1+(d.y2-d.y1)*y):(m-=c,y=m/p,l.x=v.x1+(v.x2-v.x1)*y,l.y=v.y1+(v.y2-v.y1)*y),l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),h=i(4),r=function(o,u,l,f){f===void 0&&(f=[]);var v=o.getLineA(),d=o.getLineB(),c=o.getLineC(),p=s(v),g=s(d),x=s(c),m=p+g+x;!u&&l>0&&(u=m/l);for(var y=0;y<u;y++){var T=m*(y/u),C=0,S=new h;T<p?(C=T/p,S.x=v.x1+(v.x2-v.x1)*C,S.y=v.y1+(v.y2-v.y1)*C):T>p+g?(T-=p+g,C=T/x,S.x=c.x1+(c.x2-c.x1)*C,S.y=c.y1+(c.y2-c.y1)*C):(T-=p,C=T/g,S.x=d.x1+(d.x2-d.x1)*C,S.y=d.y1+(d.y2-d.y1)*C),f.push(S)}return f};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(!s||typeof s=="number")return!1;if(s.hasOwnProperty(h))return s[h]=r,!0;if(h.indexOf(".")!==-1){for(var o=h.split("."),u=s,l=s,f=0;f<o.length;f++)if(u.hasOwnProperty(o[f]))l=u,u=u[o[f]];else return!1;return l[o[o.length-1]]=r,!0}return!1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(116),h=i(117),r=function(o,u,l,f,v,d,c){if(f===void 0&&(f=!1),d===void 0&&(d=16777215),c===void 0&&(c=1),o.length!==u.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var p={faces:[],vertices:[]},g,x,m,y,T,C,S,E,P,M,O,A=f?3:2,R=Array.isArray(d),F=Array.isArray(c);if(Array.isArray(l)&&l.length>0)for(g=0;g<l.length;g++){var I=l[g],D=l[g]*2,N=l[g]*A;x=o[N],m=o[N+1],y=f?o[N+2]:0,T=u[D],C=u[D+1],S=R?d[I]:d,E=F?c[I]:c,P=0,M=0,O=0,v&&(P=v[N],M=v[N+1],O=f?v[N+2]:0),p.vertices.push(new h(x,m,y,T,C,S,E,P,M,O))}else{var z=0,U=0;for(g=0;g<o.length;g+=A)x=o[g],m=o[g+1],y=f?o[g+2]:0,T=u[z],C=u[z+1],S=R?d[U]:d,E=F?c[U]:c,P=0,M=0,O=0,v&&(P=v[g],M=v[g+1],O=f?v[g+2]:0),p.vertices.push(new h(x,m,y,T,C,S,E,P,M,O)),z+=2,U++}for(g=0;g<p.vertices.length;g+=3){var W=p.vertices[g],w=p.vertices[g+1],L=p.vertices[g+2];p.faces.push(new s(W,w,L))}return p};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(116),h=i(69),r=i(39),o=i(117),u=new r,l=new r,f=new h,v=function(d,c,p,g,x,m,y,T,C,S){p===void 0&&(p=1),g===void 0&&(g=0),x===void 0&&(x=0),m===void 0&&(m=0),y===void 0&&(y=0),T===void 0&&(T=0),C===void 0&&(C=0),S===void 0&&(S=!0);var E={faces:[],verts:[]},P=d.materials;u.set(g,x,m),l.set(y,T,C),f.fromRotationXYTranslation(l,u,S);for(var M=0;M<d.models.length;M++)for(var O=d.models[M],A=O.vertices,R=O.textureCoords,F=O.faces,I=0;I<F.length;I++){var D=F[I],N=D.vertices[0],z=D.vertices[1],U=D.vertices[2],W=A[N.vertexIndex],w=A[z.vertexIndex],L=A[U.vertexIndex],B=N.textureCoordsIndex,b=z.textureCoordsIndex,G=U.textureCoordsIndex,Y=B===-1?{u:0,v:1}:R[B],V=b===-1?{u:0,v:0}:R[b],X=G===-1?{u:1,v:1}:R[G],H=16777215;D.material!==""&&P[D.material]&&(H=P[D.material]);var k=new o(W.x*p,W.y*p,W.z*p,Y.u,Y.v,H).transformMat4(f),$=new o(w.x*p,w.y*p,w.z*p,V.u,V.v,H).transformMat4(f),K=new o(L.x*p,L.y*p,L.z*p,X.u,X.v,H).transformMat4(f);E.verts.push(k,$,K),E.faces.push(new s(k,$,K))}return c&&(c.faces=c.faces.concat(E.faces),c.vertices=c.vertices.concat(E.verts)),E};e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),h=i(0),r=i(11),o=i(200),u=i(12),l=new h({Extends:s,Mixins:[r.ScrollFactor,r.Visible],initialize:function(v,d,c,p,g,x,m){s.call(this,v,d,c),this.color=new o(p,g,x),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(f){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&f.id)},setColor:function(f){var v=u.getFloatsFromUintRGB(f);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(f){return this.intensity=f,this},setRadius:function(f){return this.radius=f,this}});l.RENDER_MASK=15,e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(151),h=i(0),r=i(50),o=i(481),u=i(150),l=i(200),f=i(74),v=i(79),d=i(12),c=new h({initialize:function(){this.lights=[],this.ambientColor=new l(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(p,g,x,m,y,T){return this.systems.displayList.add(new u(this.scene,p,g,x,m,y,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(p){for(var g=this.lights,x=p.worldView,m=[],y=0;y<g.length;y++){var T=g[y];T.willRender(p)&&s(T,x)&&m.push({light:T,distance:r(T.x,T.y,x.centerX,x.centerY)})}return m.length>this.maxLights&&(v(m,this.sortByDistance),m=m.slice(0,this.maxLights)),this.visibleLights=m.length,m},sortByDistance:function(p,g){return p.distance>=g.distance},setAmbientColor:function(p){var g=d.getFloatsFromUintRGB(p);return this.ambientColor.set(g[0],g[1],g[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(p,g,x,m,y){p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=128),m===void 0&&(m=16777215),y===void 0&&(y=1);var T=d.getFloatsFromUintRGB(m),C=new o(p,g,x,T[0],T[1],T[2],y);return this.lights.push(C),C},removeLight:function(p){var g=this.lights.indexOf(p);return g>=0&&f(this.lights,g),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(56),h=i(17),r={Circle:i(1191),Ellipse:i(1201),Intersects:i(484),Line:i(1221),Mesh:i(1243),Point:i(1246),Polygon:i(1260),Rectangle:i(502),Triangle:i(1293)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CircleToCircle:i(231),CircleToRectangle:i(151),GetCircleToCircle:i(1211),GetCircleToRectangle:i(1212),GetLineToCircle:i(232),GetLineToLine:i(485),GetLineToPoints:i(486),GetLineToPolygon:i(487),GetLineToRectangle:i(234),GetRaysFromPointToPolygon:i(1213),GetRectangleIntersection:i(1214),GetRectangleToRectangle:i(1215),GetRectangleToTriangle:i(1216),GetTriangleToCircle:i(1217),GetTriangleToLine:i(492),GetTriangleToTriangle:i(1218),LineToCircle:i(233),LineToLine:i(96),LineToRectangle:i(488),PointToLine:i(496),PointToLineSegment:i(1219),RectangleToRectangle:i(152),RectangleToTriangle:i(489),RectangleToValues:i(1220),TriangleToCircle:i(491),TriangleToLine:i(493),TriangleToTriangle:i(494)}},function(e,a,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),h=function(r,o,u){var l=r.x1,f=r.y1,v=r.x2,d=r.y2,c=o.x1,p=o.y1,g=o.x2,x=o.y2,m=v-l,y=d-f,T=g-c,C=x-p,S=C*m-T*y;if(m===0||S===0)return!1;var E=(m*(p-f)+y*(l-c))/(T*y-C*m),P=(c+T*E-l)/m;return P<0||E<0||E>1?null:(u===void 0&&(u=new s),u.set(l+m*P,f+y*P,P))};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),h=i(485),r=i(47),o=new r,u=new s,l=function(f,v,d){d===void 0&&(d=new s);var c=!1;d.set(),u.set();for(var p=v[0],g=1;g<v.length;g++){var x=v[g];o.setTo(p.x,p.y,x.x,x.y),p=x,h(f,o,u)&&(!c||u.z<d.z)&&(d.copy(u),c=!0)}return c?d:null};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),h=i(140),r=i(486),o=new s,u=function(l,f,v){v===void 0&&(v=new h),Array.isArray(f)||(f=[f]);var d=!1;v.set(),o.set();for(var c=0;c<f.length;c++)r(l,f[c].points,o)&&(!d||o.z<v.z)&&(v.set(o.x,o.y,o.z,c),d=!0);return d?v:null};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.x1,o=s.y1,u=s.x2,l=s.y2,f=h.x,v=h.y,d=h.right,c=h.bottom,p=0;if(r>=f&&r<=d&&o>=v&&o<=c||u>=f&&u<=d&&l>=v&&l<=c)return!0;if(r<f&&u>=f){if(p=o+(l-o)*(f-r)/(u-r),p>v&&p<=c)return!0}else if(r>d&&u<=d&&(p=o+(l-o)*(d-r)/(u-r),p>=v&&p<=c))return!0;if(o<v&&l>=v){if(p=r+(u-r)*(v-o)/(l-o),p>=f&&p<=d)return!0}else if(o>c&&l<=c&&(p=r+(u-r)*(c-o)/(l-o),p>=f&&p<=d))return!0;return!1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(96),h=i(57),r=i(235),o=i(490),u=function(l,f){if(f.left>l.right||f.right<l.left||f.top>l.bottom||f.bottom<l.top)return!1;var v=f.getLineA(),d=f.getLineB(),c=f.getLineC();if(h(l,v.x1,v.y1)||h(l,v.x2,v.y2)||h(l,d.x1,d.y1)||h(l,d.x2,d.y2)||h(l,c.x1,c.y1)||h(l,c.x2,c.y2))return!0;var p=l.getLineA(),g=l.getLineB(),x=l.getLineC(),m=l.getLineD();if(s(v,p)||s(v,g)||s(v,x)||s(v,m)||s(d,p)||s(d,g)||s(d,x)||s(d,m)||s(c,p)||s(c,g)||s(c,x)||s(c,m))return!0;var y=o(l),T=r(f,y,!0);return T.length>0};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=[]),h.push({x:s.x,y:s.y}),h.push({x:s.right,y:s.y}),h.push({x:s.right,y:s.bottom}),h.push({x:s.x,y:s.bottom}),h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(233),h=i(115),r=function(o,u){return o.left>u.right||o.right<u.left||o.top>u.bottom||o.bottom<u.top?!1:!!(h(o,u.x,u.y)||s(o.getLineA(),u)||s(o.getLineB(),u)||s(o.getLineC(),u))};e.exports=r},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(493),r=i(96),o=function(u,l,f){if(f===void 0&&(f=[]),h(u,l))for(var v=u.getLineA(),d=u.getLineB(),c=u.getLineC(),p=[new s,new s,new s],g=[r(v,l,p[0]),r(d,l,p[1]),r(c,l,p[2])],x=0;x<3;x++)g[x]&&f.push(p[x]);return f};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(96),h=function(r,o){return!!(r.contains(o.x1,o.y1)||r.contains(o.x2,o.y2)||s(r.getLineA(),o)||s(r.getLineB(),o)||s(r.getLineC(),o))};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(235),h=i(495),r=i(96),o=function(u,l){if(u.left>l.right||u.right<l.left||u.top>l.bottom||u.bottom<l.top)return!1;var f=u.getLineA(),v=u.getLineB(),d=u.getLineC(),c=l.getLineA(),p=l.getLineB(),g=l.getLineC();if(r(f,c)||r(f,p)||r(f,g)||r(v,c)||r(v,p)||r(v,g)||r(d,c)||r(d,p)||r(d,g))return!0;var x=h(u),m=s(l,x,!0);return m.length>0||(x=h(l),m=s(u,x,!0),m.length>0)};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=[]),h.push({x:s.x1,y:s.y1}),h.push({x:s.x2,y:s.y2}),h.push({x:s.x3,y:s.y3}),h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){r===void 0&&(r=1);var o=h.x1,u=h.y1,l=h.x2,f=h.y2,v=s.x,d=s.y,c=(l-o)*(l-o)+(f-u)*(f-u);if(c===0)return!1;var p=((v-o)*(l-o)+(d-u)*(f-u))/c;if(p<0)return Math.sqrt((o-v)*(o-v)+(u-d)*(u-d))<=r;if(p>=0&&p<=1){var g=((u-d)*(l-o)-(o-v)*(f-u))/c;return Math.abs(g)*Math.sqrt(c)<=r}else return Math.sqrt((l-v)*(l-v)+(f-d)*(f-d))<=r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=i(68),r=i(97),o=function(u){var l=r(u)-s.TAU;return h(l,-Math.PI,Math.PI)};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=!0,s="untitled",h="",r="";function o(y){var T=y.indexOf("#");return T>-1?y.substring(0,T):y}function u(y){return y.models.length===0&&y.models.push({faces:[],name:s,textureCoords:[],vertexNormals:[],vertices:[]}),h="",y.models[y.models.length-1]}function l(y,T){var C=y.length>=2?y[1]:s;T.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function f(y){y.length===2&&(h=y[1])}function v(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;u(T).vertices.push({x:S,y:E,z:P})}function d(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;isNaN(S)&&(S=0),isNaN(E)&&(E=0),isNaN(P)&&(P=0),i&&(E=1-E),u(T).textureCoords.push({u:S,v:E,w:P})}function c(y,T){var C=y.length,S=C>=2?parseFloat(y[1]):0,E=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;u(T).vertexNormals.push({x:S,y:E,z:P})}function p(y,T){var C=y.length-1;if(!(C<3)){for(var S={group:h,material:r,vertices:[]},E=0;E<C;E++){var P=y[E+1],M=P.split("/"),O=M.length;if(!(O<1||O>3)){var A=0,R=0,F=0;A=parseInt(M[0],10),O>1&&M[1]!==""&&(R=parseInt(M[1],10)),O>2&&(F=parseInt(M[2],10)),A!==0&&(A<0&&(A=u(T).vertices.length+1+A),R-=1,A-=1,F-=1,S.vertices.push({textureCoordsIndex:R,vertexIndex:A,vertexNormalIndex:F}))}}u(T).faces.push(S)}}function g(y,T){y.length>=2&&T.materialLibraries.push(y[1])}function x(y){y.length>=2&&(r=y[1])}var m=function(y,T){T===void 0&&(T=!0),i=T;var C={materials:{},materialLibraries:[],models:[]};h="",r="";for(var S=y.split(`
`),E=0;E<S.length;E++){var P=o(S[E]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":l(M,C);break;case"g":f(M);break;case"v":v(M,C);break;case"vt":d(M,C);break;case"vn":c(M,C);break;case"f":p(M,C);break;case"mtllib":g(M,C);break;case"usemtl":x(M);break}}return C};e.exports=m},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(103),h=function(r){for(var o={},u=r.split(`
`),l="",f=0;f<u.length;f++){var v=u[f].trim();if(!(v.indexOf("#")===0||v==="")){var d=v.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":{l=d[1];break}case"kd":{var c=Math.floor(d[1]*255),p=d.length>=2?Math.floor(d[2]*255):c,g=d.length>=3?Math.floor(d[3]*255):c;o[l]=s(c,p,g);break}}}}return o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x*s.x+s.y*s.y};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10);s.Area=i(1267),s.Ceil=i(1268),s.CeilAll=i(1269),s.CenterOn=i(190),s.Clone=i(1270),s.Contains=i(57),s.ContainsPoint=i(1271),s.ContainsRect=i(503),s.CopyFrom=i(1272),s.Decompose=i(490),s.Equals=i(1273),s.FitInside=i(1274),s.FitOutside=i(1275),s.Floor=i(1276),s.FloorAll=i(1277),s.FromPoints=i(199),s.FromXY=i(1278),s.GetAspectRatio=i(237),s.GetCenter=i(1279),s.GetPoint=i(171),s.GetPoints=i(306),s.GetSize=i(1280),s.Inflate=i(1281),s.Intersection=i(1282),s.MarchingAnts=i(316),s.MergePoints=i(1283),s.MergeRect=i(1284),s.MergeXY=i(1285),s.Offset=i(1286),s.OffsetPoint=i(1287),s.Overlaps=i(1288),s.Perimeter=i(130),s.PerimeterPoint=i(1289),s.Random=i(174),s.RandomOutside=i(1290),s.SameDimensions=i(1291),s.Scale=i(1292),s.Union=i(441),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.width*h.height>s.width*s.height?!1:h.x>s.x&&h.x<s.right&&h.right>s.x&&h.right<s.right&&h.y>s.y&&h.y<s.bottom&&h.bottom>s.y&&h.bottom<s.bottom};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){return o===void 0&&(o=new s),o.x=(r.x1+r.x2+r.x3)/3,o.y=(r.y1+r.y2+r.y3)/3,o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.x1+=h,s.y1+=r,s.x2+=h,s.y2+=r,s.x3+=h,s.y3+=r,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4);function h(o,u,l,f){var v=o-l,d=u-f,c=v*v+d*d;return Math.sqrt(c)}var r=function(o,u){u===void 0&&(u=new s);var l=o.x1,f=o.y1,v=o.x2,d=o.y2,c=o.x3,p=o.y3,g=h(c,p,v,d),x=h(l,f,c,p),m=h(v,d,l,f),y=g+x+m;return u.x=(l*g+v*x+c*m)/y,u.y=(f*g+d*x+p*m)/y,u};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return function(r,o,u,l){var f=s.getPixelAlpha(o,u,l.texture.key,l.frame.name);return f&&f>=h}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return{gameObject:s,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u){this.pad=o,this.events=o.events,this.index=u,this.value=0,this.threshold=.1},update:function(r){this.value=r},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(239),r=new s({initialize:function(u,l){this.pad=u,this.events=u.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var u=this.pad,l=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(h.BUTTON_DOWN,u,this,o),this.pad.emit(h.GAMEPAD_BUTTON_DOWN,l,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(h.BUTTON_UP,u,this,o),this.pad.emit(h.GAMEPAD_BUTTON_UP,l,o,this))},destroy:function(){this.pad=null,this.events=null}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(509),h=i(510),r=i(0),o=i(9),u=i(3),l=new r({Extends:o,initialize:function(v,d){o.call(this),this.manager=v,this.pad=d,this.id=d.id,this.index=d.index;for(var c=[],p=0;p<d.buttons.length;p++)c.push(new h(this,p));this.buttons=c;var g=[];for(p=0;p<d.axes.length;p++)g.push(new s(this,p));this.axes=g,this.vibration=d.vibrationActuator;var x={value:0,pressed:!1};this._LCLeft=c[14]?c[14]:x,this._LCRight=c[15]?c[15]:x,this._LCTop=c[12]?c[12]:x,this._LCBottom=c[13]?c[13]:x,this._RCLeft=c[2]?c[2]:x,this._RCRight=c[1]?c[1]:x,this._RCTop=c[3]?c[3]:x,this._RCBottom=c[0]?c[0]:x,this._FBLeftTop=c[4]?c[4]:x,this._FBLeftBottom=c[6]?c[6]:x,this._FBRightTop=c[5]?c[5]:x,this._FBRightBottom=c[7]?c[7]:x;var m={value:0};this._HAxisLeft=g[0]?g[0]:m,this._VAxisLeft=g[1]?g[1]:m,this._HAxisRight=g[2]?g[2]:m,this._VAxisRight=g[3]?g[3]:m,this.leftStick=new u,this.rightStick=new u,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(f){return this.axes[f].getValue()},setAxisThreshold:function(f){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=f},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(f){return this.buttons[f].value},isButtonDown:function(f){return this.buttons[f].pressed},update:function(f){if(!(f.timestamp<this._created)){var v,d=this.buttons,c=f.buttons,p=d.length;for(v=0;v<p;v++)d[v].update(c[v].value);var g=this.axes,x=f.axes;for(p=g.length,v=0;v<p;v++)g[v].update(x[v]);p>=2&&(this.leftStick.set(g[0].getValue(),g[1].getValue()),p>=4&&this.rightStick.set(g[2].getValue(),g[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var f;for(f=0;f<this.buttons.length;f++)this.buttons[f].destroy();for(f=0;f<this.axes.length;f++)this.axes[f].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(154),o=new s({Extends:h,initialize:function(l,f){h.call(this),this.plugin=l,this.keyCode=f,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(u){return this.emitOnRepeat=u,this},onDown:function(u){this.originalEvent=u,this.enabled&&(this.altKey=u.altKey,this.ctrlKey=u.ctrlKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.location=u.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,u):(this.isDown=!0,this.isUp=!1,this.timeDown=u.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,u)))},onUp:function(u){this.originalEvent=u,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=u.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,u))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(154),r=i(2),o=i(514),u=i(516),l=new s({initialize:function(v,d,c){if(c===void 0&&(c={}),d.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var p=0;p<d.length;p++){var g=d[p];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(c,"resetOnWrongKey",!0),this.maxKeyDelay=r(c,"maxKeyDelay",0),this.resetOnMatch=r(c,"resetOnMatch",!1),this.deleteOnMatch=r(c,"deleteOnMatch",!1);var x=this,m=function(y){if(!(x.matched||!x.enabled)){var T=o(y,x);T&&(x.manager.emit(h.COMBO_MATCH,x,y),x.resetOnMatch?u(x):x.deleteOnMatch&&x.destroy())}};this.onKeyDown=m,this.manager.on(h.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(h.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(515),h=function(r,o){if(o.matched)return!0;var u=!1,l=!1;if(r.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var f=o.timeLastMatched+o.maxKeyDelay;r.timeStamp<=f&&(l=!0,u=s(r,o))}else l=!0,u=s(r,o);return!l&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),u&&(o.timeLastMatched=r.timeStamp,o.matched=!0,o.timeMatched=r.timeStamp),u};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.timeLastMatched=s.timeStamp,h.index++,h.index===h.size?!0:(h.current=h.keyCodes[h.index],!1)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.current=s.keyCodes[0],s.index=0,s.timeLastMatched=0,s.matched=!1,s.timeMatched=0,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(240),h=function(r,o){var u=s(o,r.xhrSettings),l=new XMLHttpRequest;if(l.open("GET",r.src,u.async,u.user,u.password),l.responseType=r.xhrSettings.responseType,l.timeout=u.timeout,u.headers)for(var f in u.headers)l.setRequestHeader(f,u.headers[f]);return u.header&&u.headerValue&&l.setRequestHeader(u.header,u.headerValue),u.requestedWith&&l.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&l.overrideMimeType(u.overrideMimeType),u.withCredentials&&(l.withCredentials=!0),l.onload=r.onLoad.bind(r,l),l.onerror=r.onError.bind(r,l),l.onprogress=r.onProgress.bind(r),l.send(),l};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(519),f=i(7),v=new s({Extends:r,initialize:function(c,p,g,x,m){if(f(p)){var y=p;p=u(y,"key"),x=u(y,"xhrSettings"),m=u(y,"context",m)}var T={type:"audio",cache:c.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:p,url:g.url,xhrSettings:x,config:{context:m}};r.call(this,c,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var d=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(c){d.data=c,d.onProcessComplete()},function(c){console.error("Error decoding audio: "+d.key+" - ",c?c.message:null),d.onProcessError()}),this.config.context=null}});v.create=function(d,c,p,g,x){var m=d.systems.game,y=m.config.audio,T=m.device.audio;f(c)&&(p=u(c,"url",[]),g=u(c,"config",{}));var C=v.getAudioURL(m,p);return C?T.webAudio&&!y.disableWebAudio?new v(d,c,C,x,m.sound.context):new l(d,c,C,g):null},v.getAudioURL=function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var g=u(c[p],"url",c[p]);if(g.indexOf("blob:")===0||g.indexOf("data:")===0)return{url:g,type:""};var x=g.match(/\.([a-zA-Z0-9]+)($|\?)/);if(x=u(c[p],"type",x?x[1]:"").toLowerCase(),d.device.audio[x])return{url:g,type:x}}return null},o.register("audio",function(d,c,p,g){var x=this.systems.game,m=x.config.audio,y=x.device.audio;if(m.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(d))for(var C=0;C<d.length;C++)T=v.create(this,d[C]),T&&this.addFile(T);else T=v.create(this,d,c,p,g),T&&this.addFile(T);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(95),r=i(23),o=i(2),u=i(155),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g){if(l(c)){var x=c;c=o(x,"key"),g=o(x,"config",g)}var m={type:"audio",cache:d.cacheManager.audio,extension:p.type,key:c,url:p.url,config:g};r.call(this,d,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var d=this.data[v];d.oncanplaythrough=null,d.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var d=v.target;d.oncanplaythrough=null,d.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var d=0;d<v;d++){var c=new Audio;c.dataset||(c.dataset={}),c.dataset.name=this.key+("0"+d).slice(-2),c.dataset.used="false",this.locked?c.dataset.locked="true":(c.dataset.locked="false",c.preload="auto",c.oncanplaythrough=this.onProgress.bind(this),c.onerror=this.onError.bind(this)),this.data.push(c)}for(d=0;d<this.data.length;d++)c=this.data[d],c.src=u(this,this.loader.baseURL),this.locked||c.load();this.locked&&setTimeout(this.onLoad.bind(this))}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g){var x="js";if(l(c)){var m=c;c=u(m,"key"),p=u(m,"url"),g=u(m,"xhrSettings"),x=u(m,"extension",x)}var y={type:"script",cache:!1,extension:x,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new f(this,v[p]));else this.addFile(new f(this,v,d,c));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(522),h=i(157),r=i(0),o=i(62),u=i(524),l=i(525),f=new r({initialize:function(d){this.world=d,this.scene=d.scene,this.sys=d.scene.sys},collider:function(v,d,c,p,g){return this.world.addCollider(v,d,c,p,g)},overlap:function(v,d,c,p,g){return this.world.addOverlap(v,d,c,p,g)},existing:function(v,d){var c=d?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(v,c),v},staticImage:function(v,d,c,p){var g=new s(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},image:function(v,d,c,p){var g=new s(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticSprite:function(v,d,c,p){var g=new h(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.STATIC_BODY),g},sprite:function(v,d,c,p){var g=new h(this.scene,v,d,c,p);return this.sys.displayList.add(g),this.sys.updateList.add(g),this.world.enableBody(g,o.DYNAMIC_BODY),g},staticGroup:function(v,d){return this.sys.updateList.add(new l(this.world,this.world.scene,v,d))},group:function(v,d){return this.sys.updateList.add(new u(this.world,this.world.scene,v,d))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(243),r=i(125),o=new s({Extends:r,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(l,f,v,d,c){r.call(this,l,f,v,d,c),this.body=null}});e.exports=o},function(e,a,i){var s=i(244),h=i(65),r=i(231),o=i(151),u=function(l,f,v,d,c,p){var g=s(l,f-d,v-d,2*d,2*d,c,p);if(g.length===0)return g;for(var x=new h(f,v,d),m=new h,y=[],T=0;T<g.length;T++){var C=g[T];C.isCircle?(m.setTo(C.center.x,C.center.y,C.halfWidth),r(x,m)&&y.push(C)):o(x,C)&&y.push(C)}return y};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(157),h=i(0),r=i(62),o=i(2),u=i(113),l=i(7),f=new h({Extends:u,initialize:function(d,c,p,g){if(!p&&!g)g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(l(p))g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(p)&&l(p[0])){g=p[0];var x=this;p.forEach(function(m){m.internalCreateCallback=x.createCallbackHandler,m.internalRemoveCallback=x.removeCallbackHandler}),p=null}else g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=d,g.classType=o(g,"classType",s),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(g,"collideWorldBounds",!1),setBoundsRectangle:o(g,"customBoundsRectangle",null),setAccelerationX:o(g,"accelerationX",0),setAccelerationY:o(g,"accelerationY",0),setAllowDrag:o(g,"allowDrag",!0),setAllowGravity:o(g,"allowGravity",!0),setAllowRotation:o(g,"allowRotation",!0),setBounceX:o(g,"bounceX",0),setBounceY:o(g,"bounceY",0),setDragX:o(g,"dragX",0),setDragY:o(g,"dragY",0),setEnable:o(g,"enable",!0),setGravityX:o(g,"gravityX",0),setGravityY:o(g,"gravityY",0),setFrictionX:o(g,"frictionX",0),setFrictionY:o(g,"frictionY",0),setMaxVelocityX:o(g,"maxVelocityX",1e4),setMaxVelocityY:o(g,"maxVelocityY",1e4),setVelocityX:o(g,"velocityX",0),setVelocityY:o(g,"velocityY",0),setAngularVelocity:o(g,"angularVelocity",0),setAngularAcceleration:o(g,"angularAcceleration",0),setAngularDrag:o(g,"angularDrag",0),setMass:o(g,"mass",1),setImmovable:o(g,"immovable",!1)},u.call(this,c,p,g),this.type="PhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,r.DYNAMIC_BODY);var d=v.body;for(var c in this.defaults)d[c](this.defaults[c])},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},setVelocity:function(v,d,c){c===void 0&&(c=0);for(var p=this.getChildren(),g=0;g<p.length;g++)p[g].body.velocity.set(v+g*c,d+g*c);return this},setVelocityX:function(v,d){d===void 0&&(d=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.x=v+p*d;return this},setVelocityY:function(v,d){d===void 0&&(d=0);for(var c=this.getChildren(),p=0;p<c.length;p++)c[p].body.velocity.y=v+p*d;return this}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(157),h=i(0),r=i(62),o=i(2),u=i(113),l=i(7),f=new h({Extends:u,initialize:function(d,c,p,g){!p&&!g?g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:s}:l(p)?(g=p,p=null,g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=o(g,"classType",s)):Array.isArray(p)&&l(p[0])?(g=p,p=null,g.forEach(function(x){x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=o(x,"classType",s)})):g={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=d,this.physicsType=r.STATIC_BODY,u.call(this,c,p,g),this.type="StaticPhysicsGroup"},createCallbackHandler:function(v){v.body||this.world.enableBody(v,r.STATIC_BODY)},removeCallbackHandler:function(v){v.body&&this.world.disableBody(v)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var v=this.children.entries,d=0;d<v.length;d++)v[d].body.reset();return this}});e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(350),h=i(527),r=i(18),o=i(0),u=i(528),l=i(62),f=i(50),v=i(9),d=i(245),c=i(124),p=i(354),g=i(355),x=i(246),m=i(247),y=i(529),T=i(6),C=i(14),S=i(211),E=i(530),P=i(10),M=i(531),O=i(532),A=i(537),R=i(538),F=i(149),I=i(539),D=i(248),N=i(25),z=i(3),U=i(68),W=new o({Extends:v,initialize:function(L,B){v.call(this),this.scene=L,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new S,this.gravity=new z(T(B,"gravity.x",0),T(B,"gravity.y",0)),this.bounds=new P(T(B,"x",0),T(B,"y",0),T(B,"width",L.sys.scale.width),T(B,"height",L.sys.scale.height)),this.checkCollision={up:T(B,"checkCollision.up",!0),down:T(B,"checkCollision.down",!0),left:T(B,"checkCollision.left",!0),right:T(B,"checkCollision.right",!0)},this.fps=T(B,"fps",60),this.fixedStep=T(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(B,"timeScale",1),this.OVERLAP_BIAS=T(B,"overlapBias",4),this.TILE_BIAS=T(B,"tileBias",16),this.forceX=T(B,"forceX",!1),this.isPaused=T(B,"isPaused",!1),this._total=0,this.drawDebug=T(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(B,"debugShowBody",!0),debugShowStaticBody:T(B,"debugShowStaticBody",!0),debugShowVelocity:T(B,"debugShowVelocity",!0),bodyDebugColor:T(B,"debugBodyColor",16711935),staticBodyDebugColor:T(B,"debugStaticBodyColor",255),velocityDebugColor:T(B,"debugVelocityColor",65280)},this.maxEntries=T(B,"maxEntries",16),this.useTree=T(B,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new N,this._tempMatrix2=new N,this.drawDebug&&this.createDebugGraphic()},enable:function(w,L){L===void 0&&(L=l.DYNAMIC_BODY),Array.isArray(w)||(w=[w]);for(var B=0;B<w.length;B++){var b=w[B];if(b.isParent)for(var G=b.getChildren(),Y=0;Y<G.length;Y++){var V=G[Y];V.isParent?this.enable(V,L):this.enableBody(V,L)}else this.enableBody(b,L)}},enableBody:function(w,L){return L===void 0&&(L=l.DYNAMIC_BODY),w.body||(L===l.DYNAMIC_BODY?w.body=new h(this,w):L===l.STATIC_BODY&&(w.body=new I(this,w))),this.add(w.body),w},add:function(w){return w.physicsType===l.DYNAMIC_BODY?this.bodies.set(w):w.physicsType===l.STATIC_BODY&&(this.staticBodies.set(w),this.staticTree.insert(w)),w.enable=!0,w},disable:function(w){Array.isArray(w)||(w=[w]);for(var L=0;L<w.length;L++){var B=w[L];if(B.isParent)for(var b=B.getChildren(),G=0;G<b.length;G++){var Y=b[G];Y.isParent?this.disable(Y):this.disableBody(Y.body)}else this.disableBody(B.body)}},disableBody:function(w){this.remove(w),w.enable=!1},remove:function(w){w.physicsType===l.DYNAMIC_BODY?(this.tree.remove(w),this.bodies.delete(w)):w.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(w),this.staticTree.remove(w))},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});return w.setDepth(Number.MAX_VALUE),this.debugGraphic=w,this.drawDebug=!0,w},setBounds:function(w,L,B,b,G,Y,V,X){return this.bounds.setTo(w,L,B,b),G!==void 0&&this.setBoundsCollision(G,Y,V,X),this},setBoundsCollision:function(w,L,B,b){return w===void 0&&(w=!0),L===void 0&&(L=!0),B===void 0&&(B=!0),b===void 0&&(b=!0),this.checkCollision.left=w,this.checkCollision.right=L,this.checkCollision.up=B,this.checkCollision.down=b,this},pause:function(){return this.isPaused=!0,this.emit(d.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(d.RESUME),this},addCollider:function(w,L,B,b,G){B===void 0&&(B=null),b===void 0&&(b=null),G===void 0&&(G=B);var Y=new u(this,!1,w,L,B,b,G);return this.colliders.add(Y),Y},addOverlap:function(w,L,B,b,G){B===void 0&&(B=null),b===void 0&&(b=null),G===void 0&&(G=B);var Y=new u(this,!0,w,L,B,b,G);return this.colliders.add(Y),Y},removeCollider:function(w){return this.colliders.remove(w),this},setFPS:function(w){return this.fps=w,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(w,L){if(!(this.isPaused||this.bodies.size===0)){var B,b=this._frameTime,G=this._frameTimeMS*this.timeScale;this._elapsed+=L;var Y,V=this.bodies.entries,X=this._elapsed>=G;for(this.fixedStep||(b=L*.001,X=!0,this._elapsed=0),B=0;B<V.length;B++)Y=V[B],Y.enable&&Y.preUpdate(X,b);if(X){this._elapsed-=G,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(V));var H=this.colliders.update();for(B=0;B<H.length;B++){var k=H[B];k.active&&k.update()}this.emit(d.WORLD_STEP,b)}for(;this._elapsed>=G;)this._elapsed-=G,this.step(b)}},step:function(w){var L,B,b=this.bodies.entries,G=b.length;for(L=0;L<G;L++)B=b[L],B.enable&&B.update(w);this.useTree&&(this.tree.clear(),this.tree.load(b));var Y=this.colliders.update();for(L=0;L<Y.length;L++){var V=Y[L];V.active&&V.update()}this.emit(d.WORLD_STEP,w),this.stepsLastFrame++},postUpdate:function(){var w,L,B=this.bodies.entries,b=B.length,G=this.bodies,Y=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,w=0;w<b;w++)L=B[w],L.enable&&L.postUpdate();if(this.drawDebug){var V=this.debugGraphic;for(V.clear(),w=0;w<b;w++)L=B[w],L.willDrawDebug()&&L.drawDebug(V);for(B=Y.entries,b=B.length,w=0;w<b;w++)L=B[w],L.willDrawDebug()&&L.drawDebug(V)}var X=this.pendingDestroy;if(X.size>0){var H=this.tree,k=this.staticTree;for(B=X.entries,b=B.length,w=0;w<b;w++)L=B[w],L.physicsType===l.DYNAMIC_BODY?(H.remove(L),G.delete(L)):L.physicsType===l.STATIC_BODY&&(k.remove(L),Y.delete(L)),L.world=void 0,L.gameObject=void 0;X.clear()}},updateMotion:function(w,L){w.allowRotation&&this.computeAngularVelocity(w,L),this.computeVelocity(w,L)},computeAngularVelocity:function(w,L){var B=w.angularVelocity,b=w.angularAcceleration,G=w.angularDrag,Y=w.maxAngular;b?B+=b*L:w.allowDrag&&G&&(G*=L,p(B-G,0,.1)?B-=G:g(B+G,0,.1)?B+=G:B=0),B=r(B,-Y,Y);var V=B-w.angularVelocity;w.angularVelocity+=V,w.rotation+=w.angularVelocity*L},computeVelocity:function(w,L){var B=w.velocity.x,b=w.acceleration.x,G=w.drag.x,Y=w.maxVelocity.x,V=w.velocity.y,X=w.acceleration.y,H=w.drag.y,k=w.maxVelocity.y,$=w.speed,K=w.maxSpeed,Z=w.allowDrag,Q=w.useDamping;w.allowGravity&&(B+=(this.gravity.x+w.gravity.x)*L,V+=(this.gravity.y+w.gravity.y)*L),b?B+=b*L:Z&&G&&(Q?(G=Math.pow(G,L),B*=G,$=Math.sqrt(B*B+V*V),c($,0,.001)&&(B=0)):(G*=L,p(B-G,0,.01)?B-=G:g(B+G,0,.01)?B+=G:B=0)),X?V+=X*L:Z&&H&&(Q?(H=Math.pow(H,L),V*=H,$=Math.sqrt(B*B+V*V),c($,0,.001)&&(V=0)):(H*=L,p(V-H,0,.01)?V-=H:g(V+H,0,.01)?V+=H:V=0)),B=r(B,-Y,Y),V=r(V,-k,k),w.velocity.set(B,V),K>-1&&$>K&&(w.velocity.normalize().scale(K),$=K),w.speed=$},separate:function(w,L,B,b,G,Y){if(!Y&&!w.enable||!L.enable||w.checkCollision.none||L.checkCollision.none||!this.intersects(w,L)||B&&B.call(b,w.gameObject,L.gameObject)===!1)return!1;if(w.isCircle&&L.isCircle)return this.separateCircle(w,L,G);if(w.isCircle!==L.isCircle){var V=w.isCircle?L:w,X=w.isCircle?w:L,H={x:V.x,y:V.y,right:V.right,bottom:V.bottom},k=X.center;if((k.y<H.y||k.y>H.bottom)&&(k.x<H.x||k.x>H.right))return this.separateCircle(w,L,G)}var $=!1,K=!1;G?($=A(w,L,G,this.OVERLAP_BIAS),K=R(w,L,G,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+w.gravity.y)<Math.abs(this.gravity.x+w.gravity.x)?($=A(w,L,G,this.OVERLAP_BIAS),this.intersects(w,L)&&(K=R(w,L,G,this.OVERLAP_BIAS))):(K=R(w,L,G,this.OVERLAP_BIAS),this.intersects(w,L)&&($=A(w,L,G,this.OVERLAP_BIAS)));var Z=$||K;return Z&&(G?(w.onOverlap||L.onOverlap)&&this.emit(d.OVERLAP,w.gameObject,L.gameObject,w,L):(w.onCollide||L.onCollide)&&this.emit(d.COLLIDE,w.gameObject,L.gameObject,w,L)),Z},separateCircle:function(w,L,B,b){x(w,L,!1,b),m(w,L,!1,b);var G=0;if(w.isCircle!==L.isCircle){var Y={x:L.isCircle?w.position.x:L.position.x,y:L.isCircle?w.position.y:L.position.y,right:L.isCircle?w.right:L.right,bottom:L.isCircle?w.bottom:L.bottom},V={x:w.isCircle?w.center.x:L.center.x,y:w.isCircle?w.center.y:L.center.y,radius:w.isCircle?w.halfWidth:L.halfWidth};V.y<Y.y?V.x<Y.x?G=f(V.x,V.y,Y.x,Y.y)-V.radius:V.x>Y.right&&(G=f(V.x,V.y,Y.right,Y.y)-V.radius):V.y>Y.bottom&&(V.x<Y.x?G=f(V.x,V.y,Y.x,Y.bottom)-V.radius:V.x>Y.right&&(G=f(V.x,V.y,Y.right,Y.bottom)-V.radius)),G*=-1}else G=w.halfWidth+L.halfWidth-f(w.center.x,w.center.y,L.center.x,L.center.y);if(w.overlapR=G,L.overlapR=G,B||G===0||w.immovable&&L.immovable||w.customSeparateX||L.customSeparateX)return G!==0&&(w.onOverlap||L.onOverlap)&&this.emit(d.OVERLAP,w.gameObject,L.gameObject,w,L),G!==0;var X=w.center.x-L.center.x,H=w.center.y-L.center.y,k=Math.sqrt(Math.pow(X,2)+Math.pow(H,2)),$=(L.center.x-w.center.x)/k||0,K=(L.center.y-w.center.y)/k||0,Z=2*(w.velocity.x*$+w.velocity.y*K-L.velocity.x*$-L.velocity.y*K)/(w.mass+L.mass);(w.immovable||L.immovable)&&(Z*=2),w.immovable||(w.velocity.x=w.velocity.x-Z/w.mass*$,w.velocity.y=w.velocity.y-Z/w.mass*K),L.immovable||(L.velocity.x=L.velocity.x+Z/L.mass*$,L.velocity.y=L.velocity.y+Z/L.mass*K),!w.immovable&&!L.immovable&&(G/=2);var Q=s(w.center,L.center),J=(G+C.EPSILON)*Math.cos(Q),tt=(G+C.EPSILON)*Math.sin(Q);return w.immovable||(w.x-=J,w.y-=tt,w.updateCenter()),L.immovable||(L.x+=J,L.y+=tt,L.updateCenter()),w.velocity.x*=w.bounce.x,w.velocity.y*=w.bounce.y,L.velocity.x*=L.bounce.x,L.velocity.y*=L.bounce.y,(w.onCollide||L.onCollide)&&this.emit(d.COLLIDE,w.gameObject,L.gameObject,w,L),!0},intersects:function(w,L){return w===L?!1:!w.isCircle&&!L.isCircle?!(w.right<=L.position.x||w.bottom<=L.position.y||w.position.x>=L.right||w.position.y>=L.bottom):w.isCircle?L.isCircle?f(w.center.x,w.center.y,L.center.x,L.center.y)<=w.halfWidth+L.halfWidth:this.circleBodyIntersects(w,L):this.circleBodyIntersects(L,w)},circleBodyIntersects:function(w,L){var B=r(w.center.x,L.left,L.right),b=r(w.center.y,L.top,L.bottom),G=(w.center.x-B)*(w.center.x-B),Y=(w.center.y-b)*(w.center.y-b);return G+Y<=w.halfWidth*w.halfWidth},overlap:function(w,L,B,b,G){return B===void 0&&(B=null),b===void 0&&(b=null),G===void 0&&(G=B),this.collideObjects(w,L,B,b,G,!0)},collide:function(w,L,B,b,G){return B===void 0&&(B=null),b===void 0&&(b=null),G===void 0&&(G=B),this.collideObjects(w,L,B,b,G,!1)},collideObjects:function(w,L,B,b,G,Y){var V,X;w.isParent&&w.physicsType===void 0&&(w=w.children.entries),L&&L.isParent&&L.physicsType===void 0&&(L=L.children.entries);var H=Array.isArray(w),k=Array.isArray(L);if(this._total=0,!H&&!k)this.collideHandler(w,L,B,b,G,Y);else if(!H&&k)for(V=0;V<L.length;V++)this.collideHandler(w,L[V],B,b,G,Y);else if(H&&!k)if(L)for(V=0;V<w.length;V++)this.collideHandler(w[V],L,B,b,G,Y);else for(V=0;V<w.length;V++){var $=w[V];for(X=V+1;X<w.length;X++)V!==X&&this.collideHandler($,w[X],B,b,G,Y)}else for(V=0;V<w.length;V++)for(X=0;X<L.length;X++)this.collideHandler(w[V],L[X],B,b,G,Y);return this._total>0},collideHandler:function(w,L,B,b,G,Y){if(L===void 0&&w.isParent)return this.collideGroupVsGroup(w,w,B,b,G,Y);if(!w||!L)return!1;if(w.body){if(L.body)return this.collideSpriteVsSprite(w,L,B,b,G,Y);if(L.isParent)return this.collideSpriteVsGroup(w,L,B,b,G,Y);if(L.isTilemap)return this.collideSpriteVsTilemapLayer(w,L,B,b,G,Y)}else if(w.isParent){if(L.body)return this.collideSpriteVsGroup(L,w,B,b,G,Y);if(L.isParent)return this.collideGroupVsGroup(w,L,B,b,G,Y);if(L.isTilemap)return this.collideGroupVsTilemapLayer(w,L,B,b,G,Y)}else if(w.isTilemap){if(L.body)return this.collideSpriteVsTilemapLayer(L,w,B,b,G,Y);if(L.isParent)return this.collideGroupVsTilemapLayer(L,w,B,b,G,Y)}},collideSpriteVsSprite:function(w,L,B,b,G,Y){return!w.body||!L.body?!1:(this.separate(w.body,L.body,b,G,Y)&&(B&&B.call(G,w,L),this._total++),!0)},collideSpriteVsGroup:function(w,L,B,b,G,Y){var V=w.body;if(!(L.length===0||!V||!V.enable||V.checkCollision.none)){var X,H,k;if(this.useTree||L.physicsType===l.STATIC_BODY){var $=this.treeMinMax;$.minX=V.left,$.minY=V.top,$.maxX=V.right,$.maxY=V.bottom;var K=L.physicsType===l.DYNAMIC_BODY?this.tree.search($):this.staticTree.search($);for(H=K.length,X=0;X<H;X++)k=K[X],!(V===k||!k.enable||k.checkCollision.none||!L.contains(k.gameObject))&&this.separate(V,k,b,G,Y,!0)&&(B&&B.call(G,V.gameObject,k.gameObject),this._total++)}else{var Z=L.getChildren(),Q=L.children.entries.indexOf(w);for(H=Z.length,X=0;X<H;X++)k=Z[X].body,!(!k||X===Q||!k.enable)&&this.separate(V,k,b,G,Y)&&(B&&B.call(G,V.gameObject,k.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(w,L,B,b,G,Y){var V=w.getChildren();if(V.length===0)return!1;for(var X=!1,H=0;H<V.length;H++)V[H].body&&this.collideSpriteVsTilemapLayer(V[H],L,B,b,G,Y)&&(X=!0);return X},collideTiles:function(w,L,B,b,G){return!w.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(w,L,B,b,G,!1,!1)},overlapTiles:function(w,L,B,b,G){return!w.body.enable||L.length===0?!1:this.collideSpriteVsTilesHandler(w,L,B,b,G,!0,!1)},collideSpriteVsTilemapLayer:function(w,L,B,b,G,Y){var V=w.body;if(!V.enable||V.checkCollision.none)return!1;var X=V.position.x,H=V.position.y,k=V.width,$=V.height,K=L.layer;if(K.tileWidth>K.baseTileWidth){var Z=(K.tileWidth-K.baseTileWidth)*L.scaleX;X-=Z,k+=Z}if(K.tileHeight>K.baseTileHeight){var Q=(K.tileHeight-K.baseTileHeight)*L.scaleY;$+=Q}var J=y(X,H,k,$,null,L.scene.cameras.main,L.layer);return J.length===0?!1:this.collideSpriteVsTilesHandler(w,J,B,b,G,Y,!0)},collideSpriteVsTilesHandler:function(w,L,B,b,G,Y,V){for(var X=w.body,H,k={left:0,right:0,top:0,bottom:0},$,K=!1,Z=0;Z<L.length;Z++){H=L[Z],$=H.tilemapLayer;var Q=$.tileToWorldXY(H.x,H.y);k.left=Q.x,k.top=Q.y,H.baseHeight!==H.height&&(k.top-=(H.height-H.baseHeight)*$.scaleY),k.right=k.left+H.width*$.scaleX,k.bottom=k.top+H.height*$.scaleY,D(k,X)&&(!b||b.call(G,w,H))&&E(H,w)&&(Y||O(Z,X,H,k,$,this.TILE_BIAS,V))&&(this._total++,K=!0,B&&B.call(G,w,H),Y&&X.onOverlap?this.emit(d.TILE_OVERLAP,w,H,X):X.onCollide&&this.emit(d.TILE_COLLIDE,w,H,X))}return K},collideGroupVsGroup:function(w,L,B,b,G,Y){if(!(w.length===0||L.length===0))for(var V=w.getChildren(),X=0;X<V.length;X++)this.collideSpriteVsGroup(V[X],L,B,b,G,Y)},wrap:function(w,L){w.body?this.wrapObject(w,L):w.getChildren?this.wrapArray(w.getChildren(),L):Array.isArray(w)?this.wrapArray(w,L):this.wrapObject(w,L)},wrapArray:function(w,L){for(var B=0;B<w.length;B++)this.wrapObject(w[B],L)},wrapObject:function(w,L){L===void 0&&(L=0),w.x=U(w.x,this.bounds.left-L,this.bounds.right+L),w.y=U(w.y,this.bounds.top-L,this.bounds.bottom+L)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});e.exports=W},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(62),r=i(245),o=i(196),u=i(10),l=i(57),f=i(3),v=new s({initialize:function(c,p){var g=p.displayWidth?p.displayWidth:64,x=p.displayHeight?p.displayHeight:64;this.world=c,this.gameObject=p,this.transform={x:p.x,y:p.y,rotation:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,displayOriginX:p.displayOriginX,displayOriginY:p.displayOriginY},this.debugShowBody=c.defaults.debugShowBody,this.debugShowVelocity=c.defaults.debugShowVelocity,this.debugBodyColor=c.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new f,this.position=new f(p.x-p.scaleX*p.displayOriginX,p.y-p.scaleY*p.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=p.angle,this.preRotation=p.angle,this.width=g,this.height=x,this.sourceWidth=g,this.sourceHeight=x,p.frame&&(this.sourceWidth=p.frame.realWidth,this.sourceHeight=p.frame.realHeight),this.halfWidth=Math.abs(g/2),this.halfHeight=Math.abs(x/2),this.center=new f(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new f,this.newVelocity=new f,this.deltaMax=new f,this.acceleration=new f,this.allowDrag=!0,this.drag=new f,this.allowGravity=!0,this.gravity=new f,this.bounce=new f,this.worldBounce=null,this.customBoundsRectangle=c.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new f(1e4,1e4),this.maxSpeed=-1,this.friction=new f(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=h.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=h.DYNAMIC_BODY,this._sx=p.scaleX,this._sy=p.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new u},updateBounds:function(){var d=this.gameObject,c=this.transform;if(d.parentContainer){var p=d.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);c.x=p.tx,c.y=p.ty,c.rotation=o(p.rotation),c.scaleX=p.scaleX,c.scaleY=p.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY}else c.x=d.x,c.y=d.y,c.rotation=d.angle,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.displayOriginX=d.displayOriginX,c.displayOriginY=d.displayOriginY;var g=!1;if(this.syncBounds){var x=d.getBounds(this._bounds);this.width=x.width,this.height=x.height,g=!0}else{var m=Math.abs(c.scaleX),y=Math.abs(c.scaleY);(this._sx!==m||this._sy!==y)&&(this.width=this.sourceWidth*m,this.height=this.sourceHeight*y,this._sx=m,this._sy=y,g=!0)}g&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var d=this.transform;this.position.x=d.x+d.scaleX*(this.offset.x-d.displayOriginX),this.position.y=d.y+d.scaleY*(this.offset.y-d.displayOriginY),this.updateCenter()},resetFlags:function(d){d===void 0&&(d=!1);var c=this.wasTouching,p=this.touching,g=this.blocked;d?(c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1):(c.none=p.none,c.up=p.up,c.down=p.down,c.left=p.left,c.right=p.right),p.none=!0,p.up=!1,p.down=!1,p.left=!1,p.right=!1,g.none=!0,g.up=!1,g.down=!1,g.left=!1,g.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(d,c){d&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),d&&this.update(c)},update:function(d){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,d);var c=this.velocity.x,p=this.velocity.y;this.newVelocity.set(c*d,p*d),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(p,c),this.speed=Math.sqrt(c*c+p*p),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var d=this.position.x-this.prevFrame.x,c=this.position.y-this.prevFrame.y;if(this.moves){var p=this.deltaMax.x,g=this.deltaMax.y;p!==0&&d!==0&&(d<0&&d<-p?d=-p:d>0&&d>p&&(d=p)),g!==0&&c!==0&&(c<0&&c<-g?c=-g:c>0&&c>g&&(c=g)),this.gameObject.x+=d,this.gameObject.y+=c}d<0?this.facing=h.FACING_LEFT:d>0&&(this.facing=h.FACING_RIGHT),c<0?this.facing=h.FACING_UP:c>0&&(this.facing=h.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=d,this._ty=c},setBoundsRectangle:function(d){return this.customBoundsRectangle=d||this.world.bounds,this},checkWorldBounds:function(){var d=this.position,c=this.customBoundsRectangle,p=this.world.checkCollision,g=this.worldBounce?-this.worldBounce.x:-this.bounce.x,x=this.worldBounce?-this.worldBounce.y:-this.bounce.y,m=!1;return d.x<c.x&&p.left?(d.x=c.x,this.velocity.x*=g,this.blocked.left=!0,m=!0):this.right>c.right&&p.right&&(d.x=c.right-this.width,this.velocity.x*=g,this.blocked.right=!0,m=!0),d.y<c.y&&p.up?(d.y=c.y,this.velocity.y*=x,this.blocked.up=!0,m=!0):this.bottom>c.bottom&&p.down&&(d.y=c.bottom-this.height,this.velocity.y*=x,this.blocked.down=!0,m=!0),m&&(this.blocked.none=!1,this.updateCenter()),m},setOffset:function(d,c){return c===void 0&&(c=d),this.offset.set(d,c),this},setSize:function(d,c,p){p===void 0&&(p=!0);var g=this.gameObject;if(!d&&g.frame&&(d=g.frame.realWidth),!c&&g.frame&&(c=g.frame.realHeight),this.sourceWidth=d,this.sourceHeight=c,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),p&&g.getCenter){var x=(g.width-d)/2,m=(g.height-c)/2;this.offset.set(x,m)}return this.isCircle=!1,this.radius=0,this},setCircle:function(d,c,p){return c===void 0&&(c=this.offset.x),p===void 0&&(p=this.offset.y),d>0?(this.isCircle=!0,this.radius=d,this.sourceWidth=d*2,this.sourceHeight=d*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(c,p),this.updateCenter()):this.isCircle=!1,this},reset:function(d,c){this.stop();var p=this.gameObject;p.setPosition(d,c),p.getTopLeft?p.getTopLeft(this.position):this.position.set(d,c),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=p.angle,this.preRotation=p.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(d){return d.x=this.x,d.y=this.y,d.right=this.right,d.bottom=this.bottom,d},hitTest:function(d,c){if(!this.isCircle)return l(this,d,c);if(this.radius>0&&d>=this.left&&d<=this.right&&c>=this.top&&c<=this.bottom){var p=(this.center.x-d)*(this.center.x-d),g=(this.center.y-c)*(this.center.y-c);return p+g<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(d){var c=this.position,p=c.x+this.halfWidth,g=c.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor),this.isCircle?d.strokeCircle(p,g,this.width/2):(this.checkCollision.up&&d.lineBetween(c.x,c.y,c.x+this.width,c.y),this.checkCollision.right&&d.lineBetween(c.x+this.width,c.y,c.x+this.width,c.y+this.height),this.checkCollision.down&&d.lineBetween(c.x,c.y+this.height,c.x+this.width,c.y+this.height),this.checkCollision.left&&d.lineBetween(c.x,c.y,c.x,c.y+this.height))),this.debugShowVelocity&&(d.lineStyle(d.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),d.lineBetween(p,g,p+this.velocity.x/2,g+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(d,c,p,g){d===void 0&&(d=!0),this.collideWorldBounds=d;var x=c!==void 0,m=p!==void 0;return(x||m)&&(this.worldBounce||(this.worldBounce=new f),x&&(this.worldBounce.x=c),m&&(this.worldBounce.y=p)),g!==void 0&&(this.onWorldBounds=g),this},setVelocity:function(d,c){return this.velocity.set(d,c),d=this.velocity.x,c=this.velocity.y,this.speed=Math.sqrt(d*d+c*c),this},setVelocityX:function(d){this.velocity.x=d;var c=d,p=this.velocity.y;return this.speed=Math.sqrt(c*c+p*p),this},setVelocityY:function(d){this.velocity.y=d;var c=this.velocity.x,p=d;return this.speed=Math.sqrt(c*c+p*p),this},setMaxVelocity:function(d,c){return this.maxVelocity.set(d,c),this},setMaxVelocityX:function(d){return this.maxVelocity.x=d,this},setMaxVelocityY:function(d){return this.maxVelocity.y=d,this},setMaxSpeed:function(d){return this.maxSpeed=d,this},setBounce:function(d,c){return this.bounce.set(d,c),this},setBounceX:function(d){return this.bounce.x=d,this},setBounceY:function(d){return this.bounce.y=d,this},setAcceleration:function(d,c){return this.acceleration.set(d,c),this},setAccelerationX:function(d){return this.acceleration.x=d,this},setAccelerationY:function(d){return this.acceleration.y=d,this},setAllowDrag:function(d){return d===void 0&&(d=!0),this.allowDrag=d,this},setAllowGravity:function(d){return d===void 0&&(d=!0),this.allowGravity=d,this},setAllowRotation:function(d){return d===void 0&&(d=!0),this.allowRotation=d,this},setDrag:function(d,c){return this.drag.set(d,c),this},setDamping:function(d){return this.useDamping=d,this},setDragX:function(d){return this.drag.x=d,this},setDragY:function(d){return this.drag.y=d,this},setGravity:function(d,c){return this.gravity.set(d,c),this},setGravityX:function(d){return this.gravity.x=d,this},setGravityY:function(d){return this.gravity.y=d,this},setFriction:function(d,c){return this.friction.set(d,c),this},setFrictionX:function(d){return this.friction.x=d,this},setFrictionY:function(d){return this.friction.y=d,this},setAngularVelocity:function(d){return this.angularVelocity=d,this},setAngularAcceleration:function(d){return this.angularAcceleration=d,this},setAngularDrag:function(d){return this.angularDrag=d,this},setMass:function(d){return this.mass=d,this},setImmovable:function(d){return d===void 0&&(d=!0),this.immovable=d,this},setEnable:function(d){return d===void 0&&(d=!0),this.enable=d,this},processX:function(d,c,p,g){this.x+=d,this.updateCenter(),c!==null&&(this.velocity.x=c);var x=this.blocked;p&&(x.left=!0),g&&(x.right=!0)},processY:function(d,c,p,g){this.y+=d,this.updateCenter(),c!==null&&(this.velocity.y=c);var x=this.blocked;p&&(x.up=!0),g&&(x.down=!0)},x:{get:function(){return this.position.x},set:function(d){this.position.x=d}},y:{get:function(){return this.position.y},set:function(d){this.position.y=d}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f,v,d,c){this.world=o,this.name="",this.active=!0,this.overlapOnly=u,this.object1=l,this.object2=f,this.collideCallback=v,this.processCallback=d,this.callbackContext=c},setName:function(r){return this.name=r,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(3),r=new h,o=new h,u=function(l,f,v,d,c,p,g){var x=g.tilemapLayer.tilemap._convert.WorldToTileXY;x(l,f,!0,r,p,g);var m=r.x,y=r.y;x(l+v,f+d,!1,o,p,g);var T=Math.ceil(o.x),C=Math.ceil(o.y);return s(m,y,T-m,C-y,c,g)};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.collisionCallback?!s.collisionCallback.call(s.collisionCallbackContext,h,s):s.layer.callbacks[s.index]?!s.layer.callbacks[s.index].callback.call(s.layer.callbacks[s.index].callbackContext,h,s):!0};e.exports=i},function(e,a,i){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(436);function h(C){if(!(this instanceof h))return new h(C);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}h.prototype={all:function(){return this._all(this.data,[])},search:function(C){var S=this.data,E=[],P=this.toBBox;if(!m(C,S))return E;for(var M=[],O,A,R,F;S;){for(O=0,A=S.children.length;O<A;O++)R=S.children[O],F=S.leaf?P(R):R,m(C,F)&&(S.leaf?E.push(R):x(C,F)?this._all(R,E):M.push(R));S=M.pop()}return E},collides:function(C){var S=this.data,E=this.toBBox;if(!m(C,S))return!1;for(var P=[],M,O,A,R;S;){for(M=0,O=S.children.length;M<O;M++)if(A=S.children[M],R=S.leaf?E(A):A,m(C,R)){if(S.leaf||x(C,R))return!0;P.push(A)}S=P.pop()}return!1},load:function(C){if(!(C&&C.length))return this;if(C.length<this._minEntries){for(var S=0,E=C.length;S<E;S++)this.insert(C[S]);return this}var P=this._build(C.slice(),0,C.length-1,0);if(!this.data.children.length)this.data=P;else if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var M=this.data;this.data=P,P=M}this._insert(P,this.data.height-P.height-1,!0)}return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(C,S){if(!C)return this;for(var E=this.data,P=this.toBBox(C),M=[],O=[],A,R,F,I;E||M.length;){if(E||(E=M.pop(),R=M[M.length-1],A=O.pop(),I=!0),E.leaf&&(F=r(C,E.children,S),F!==-1))return E.children.splice(F,1),M.push(E),this._condense(M),this;!I&&!E.leaf&&x(E,P)?(M.push(E),O.push(A),A=0,R=E,E=E.children[0]):R?(A++,E=R.children[A],I=!1):E=null}return this},toBBox:function(C){return C},compareMinX:f,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,S){for(var E=[];C;)C.leaf?S.push.apply(S,C.children):E.push.apply(E,C.children),C=E.pop();return S},_build:function(C,S,E,P){var M=E-S+1,O=this._maxEntries,A;if(M<=O)return A=y(C.slice(S,E+1)),o(A,this.toBBox),A;P||(P=Math.ceil(Math.log(M)/Math.log(O)),O=Math.ceil(M/Math.pow(O,P-1))),A=y([]),A.leaf=!1,A.height=P;var R=Math.ceil(M/O),F=R*Math.ceil(Math.sqrt(O)),I,D,N,z;for(T(C,S,E,F,this.compareMinX),I=S;I<=E;I+=F)for(N=Math.min(I+F-1,E),T(C,I,N,R,this.compareMinY),D=I;D<=N;D+=R)z=Math.min(D+R-1,N),A.children.push(this._build(C,D,z,P-1));return o(A,this.toBBox),A},_chooseSubtree:function(C,S,E,P){for(var M,O,A,R,F,I,D,N;P.push(S),!(S.leaf||P.length-1===E);){for(D=N=1/0,M=0,O=S.children.length;M<O;M++)A=S.children[M],F=d(A),I=p(C,A)-F,I<N?(N=I,D=F<D?F:D,R=A):I===N&&F<D&&(D=F,R=A);S=R||S.children[0]}return S},_insert:function(C,S,E){var P=this.toBBox,M=E?C:P(C),O=[],A=this._chooseSubtree(M,this.data,S,O);for(A.children.push(C),l(A,M);S>=0&&O[S].children.length>this._maxEntries;)this._split(O,S),S--;this._adjustParentBBoxes(M,O,S)},_split:function(C,S){var E=C[S],P=E.children.length,M=this._minEntries;this._chooseSplitAxis(E,M,P);var O=this._chooseSplitIndex(E,M,P),A=y(E.children.splice(O,E.children.length-O));A.height=E.height,A.leaf=E.leaf,o(E,this.toBBox),o(A,this.toBBox),S?C[S-1].children.push(A):this._splitRoot(E,A)},_splitRoot:function(C,S){this.data=y([C,S]),this.data.height=C.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(C,S,E){var P,M,O,A,R,F,I,D;for(F=I=1/0,P=S;P<=E-S;P++)M=u(C,0,P,this.toBBox),O=u(C,P,E,this.toBBox),A=g(M,O),R=d(M)+d(O),A<F?(F=A,D=P,I=R<I?R:I):A===F&&R<I&&(I=R,D=P);return D},_chooseSplitAxis:function(C,S,E){var P=C.leaf?this.compareMinX:f,M=C.leaf?this.compareMinY:v,O=this._allDistMargin(C,S,E,P),A=this._allDistMargin(C,S,E,M);O<A&&C.children.sort(P)},_allDistMargin:function(C,S,E,P){C.children.sort(P);var M=this.toBBox,O=u(C,0,S,M),A=u(C,E-S,E,M),R=c(O)+c(A),F,I;for(F=S;F<E-S;F++)I=C.children[F],l(O,C.leaf?M(I):I),R+=c(O);for(F=E-S-1;F>=S;F--)I=C.children[F],l(A,C.leaf?M(I):I),R+=c(A);return R},_adjustParentBBoxes:function(C,S,E){for(var P=E;P>=0;P--)l(S[P],C)},_condense:function(C){for(var S=C.length-1,E;S>=0;S--)C[S].children.length===0?S>0?(E=C[S-1].children,E.splice(E.indexOf(C[S]),1)):this.clear():o(C[S],this.toBBox)},compareMinX:function(C,S){return C.left-S.left},compareMinY:function(C,S){return C.top-S.top},toBBox:function(C){return{minX:C.left,minY:C.top,maxX:C.right,maxY:C.bottom}}};function r(C,S,E){if(!E)return S.indexOf(C);for(var P=0;P<S.length;P++)if(E(C,S[P]))return P;return-1}function o(C,S){u(C,0,C.children.length,S,C)}function u(C,S,E,P,M){M||(M=y(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var O=S,A;O<E;O++)A=C.children[O],l(M,C.leaf?P(A):A);return M}function l(C,S){return C.minX=Math.min(C.minX,S.minX),C.minY=Math.min(C.minY,S.minY),C.maxX=Math.max(C.maxX,S.maxX),C.maxY=Math.max(C.maxY,S.maxY),C}function f(C,S){return C.minX-S.minX}function v(C,S){return C.minY-S.minY}function d(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function c(C){return C.maxX-C.minX+(C.maxY-C.minY)}function p(C,S){return(Math.max(S.maxX,C.maxX)-Math.min(S.minX,C.minX))*(Math.max(S.maxY,C.maxY)-Math.min(S.minY,C.minY))}function g(C,S){var E=Math.max(C.minX,S.minX),P=Math.max(C.minY,S.minY),M=Math.min(C.maxX,S.maxX),O=Math.min(C.maxY,S.maxY);return Math.max(0,M-E)*Math.max(0,O-P)}function x(C,S){return C.minX<=S.minX&&C.minY<=S.minY&&S.maxX<=C.maxX&&S.maxY<=C.maxY}function m(C,S){return S.minX<=C.maxX&&S.minY<=C.maxY&&S.maxX>=C.minX&&S.maxY>=C.minY}function y(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(C,S,E,P,M){for(var O=[S,E],A;O.length;)E=O.pop(),S=O.pop(),!(E-S<=P)&&(A=S+Math.ceil((E-S)/P/2)*P,s(C,A,S,E,M),O.push(S,A,A,E))}e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(533),h=i(535),r=i(248),o=function(u,l,f,v,d,c,p){var g=v.left,x=v.top,m=v.right,y=v.bottom,T=f.faceLeft||f.faceRight,C=f.faceTop||f.faceBottom;if(p||(T=!0,C=!0),!T&&!C)return!1;var S=0,E=0,P=0,M=1;if(l.deltaAbsX()>l.deltaAbsY()?P=-1:l.deltaAbsX()<l.deltaAbsY()&&(M=-1),l.deltaX()!==0&&l.deltaY()!==0&&T&&C&&(P=Math.min(Math.abs(l.position.x-m),Math.abs(l.right-g)),M=Math.min(Math.abs(l.position.y-y),Math.abs(l.bottom-x))),P<M){if(T&&(S=s(l,f,g,m,c,p),S!==0&&!r(v,l)))return!0;C&&(E=h(l,f,x,y,c,p))}else{if(C&&(E=h(l,f,x,y,c,p),E!==0&&!r(v,l)))return!0;T&&(S=s(l,f,g,m,c,p))}return S!==0||E!==0};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(534),h=function(r,o,u,l,f,v){var d=0,c=o.faceLeft,p=o.faceRight,g=o.collideLeft,x=o.collideRight;return v||(c=!0,p=!0,g=!0,x=!0),r.deltaX()<0&&x&&r.checkCollision.left?p&&r.x<l&&(d=r.x-l,d<-f&&(d=0)):r.deltaX()>0&&g&&r.checkCollision.right&&c&&r.right>u&&(d=r.right-u,d>f&&(d=0)),d!==0&&(r.customSeparateX?r.overlapX=d:s(r,d)),d};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h<0?(s.blocked.none=!1,s.blocked.left=!0):h>0&&(s.blocked.none=!1,s.blocked.right=!0),s.position.x-=h,s.bounce.x===0?s.velocity.x=0:s.velocity.x=-s.velocity.x*s.bounce.x};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(536),h=function(r,o,u,l,f,v){var d=0,c=o.faceTop,p=o.faceBottom,g=o.collideUp,x=o.collideDown;return v||(c=!0,p=!0,g=!0,x=!0),r.deltaY()<0&&x&&r.checkCollision.up?p&&r.y<l&&(d=r.y-l,d<-f&&(d=0)):r.deltaY()>0&&g&&r.checkCollision.down&&c&&r.bottom>u&&(d=r.bottom-u,d>f&&(d=0)),d!==0&&(r.customSeparateY?r.overlapY=d:s(r,d)),d};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h<0?(s.blocked.none=!1,s.blocked.up=!0):h>0&&(s.blocked.none=!1,s.blocked.down=!0),s.position.y-=h,s.bounce.y===0?s.velocity.y=0:s.velocity.y=-s.velocity.y*s.bounce.y};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(246),h=i(1389),r=function(o,u,l,f){var v=s(o,u,l,f),d=o.immovable,c=u.immovable;if(l||v===0||d&&c||o.customSeparateX||u.customSeparateX)return v!==0||o.embedded&&u.embedded;var p=h.Set(o,u,v);return!d&&!c?p>0?!0:h.Check():(d?h.RunImmovableBody1(p):c&&h.RunImmovableBody2(p),!0)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(247),h=i(1390),r=function(o,u,l,f){var v=s(o,u,l,f),d=o.immovable,c=u.immovable;if(l||v===0||d&&c||o.customSeparateY||u.customSeparateY)return v!==0||o.embedded&&u.embedded;var p=h.Set(o,u,v);return!d&&!c?p>0?!0:h.Check():(d?h.RunImmovableBody1(p):c&&h.RunImmovableBody2(p),!0)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),h=i(0),r=i(62),o=i(57),u=i(3),l=new h({initialize:function(v,d){var c=d.displayWidth?d.displayWidth:64,p=d.displayHeight?d.displayHeight:64;this.world=v,this.gameObject=d,this.debugShowBody=v.defaults.debugShowStaticBody,this.debugBodyColor=v.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(d.x-c*d.originX,d.y-p*d.originY),this.width=c,this.height=p,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=u.ZERO,this.allowGravity=!1,this.gravity=u.ZERO,this.bounce=u.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(f,v){return f&&f!==this.gameObject&&(this.gameObject.body=null,f.body=this,this.gameObject=f),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var f=this.gameObject;return f.getTopLeft(this.position),this.width=f.displayWidth,this.height=f.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(f,v){return v===void 0&&(v=f),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(f,v,d){d===void 0&&(d=!0);var c=this.gameObject;if(!f&&c.frame&&(f=c.frame.realWidth),!v&&c.frame&&(v=c.frame.realHeight),this.world.staticTree.remove(this),this.width=f,this.height=v,this.halfWidth=Math.floor(f/2),this.halfHeight=Math.floor(v/2),d&&c.getCenter){var p=c.displayWidth/2,g=c.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(p-this.halfWidth,g-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(f,v,d){return v===void 0&&(v=this.offset.x),d===void 0&&(d=this.offset.y),f>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=f,this.width=f*2,this.height=f*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,d),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(f,v){var d=this.gameObject;f===void 0&&(f=d.x),v===void 0&&(v=d.y),this.world.staticTree.remove(this),d.setPosition(f,v),d.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,v){return this.isCircle?s(this,f,v):o(this,f,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(f){var v=this.position,d=v.x+this.halfWidth,c=v.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?f.strokeCircle(d,c,this.width/2):f.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(f){return f<=0&&(f=.1),this.mass=f,this},x:{get:function(){return this.position.x},set:function(f){this.world.staticTree.remove(this),this.position.x=f,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(f){this.world.staticTree.remove(this),this.position.y=f,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});e.exports=l},function(e,a,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=i(0),h=new s({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=new s,r=function(o,u,l,f){var v=l.tilemapLayer,d=v.cullPaddingX,c=v.cullPaddingY,p=v.tilemap.tileToWorldXY(o,u,h,f,v);return p.x>f.worldView.x+v.scaleX*l.tileWidth*(-d-.5)&&p.x<f.worldView.right+v.scaleX*l.tileWidth*(d-.5)&&p.y>f.worldView.y+v.scaleY*l.tileHeight*(-c-1)&&p.y<f.worldView.bottom+v.scaleY*l.tileHeight*(c-.5)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v,d){for(var c=s(u,l,f,v,null,d),p=0;p<c.length;p++)c[p]&&c[p].index===r&&(c[p].index=o)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=i(139),r=i(76),o=new s,u=function(l,f){var v=l.tilemapLayer.tilemap,d=l.tilemapLayer,c=Math.floor(v.tileWidth*d.scaleX),p=Math.floor(v.tileHeight*d.scaleY),g=r(f.worldView.x-d.x,c,0,!0)-d.cullPaddingX,x=h(f.worldView.right-d.x,c,0,!0)+d.cullPaddingX,m=r(f.worldView.y-d.y,p,0,!0)-d.cullPaddingY,y=h(f.worldView.bottom-d.y,p,0,!0)+d.cullPaddingY;return o.setTo(g,m,x-g,y-m)};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(543),h=i(159),r=function(o,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var v=o.tilemapLayer,d=s(o,u);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(d.left=0,d.right=o.width,d.top=0,d.bottom=o.height),h(o,d,f,l),l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(546),h=i(159),r=function(o,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var v=o.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var d=s(o,u);h(o,d,f,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(139),h=i(76),r=function(o,u){var l=o.tilemapLayer.tilemap,f=o.tilemapLayer,v=Math.floor(l.tileWidth*f.scaleX),d=Math.floor(l.tileHeight*f.scaleY),c=o.hexSideLength,p=(d-c)/2+c,g=h(u.worldView.x-f.x,v,0,!0)-f.cullPaddingX,x=s(u.worldView.right-f.x,v,0,!0)+f.cullPaddingX,m=h(u.worldView.y-f.y,p,0,!0)-f.cullPaddingY,y=s(u.worldView.bottom-f.y,p,0,!0)+f.cullPaddingY;return{left:g,right:x,top:m,bottom:y}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(541),h=function(r,o,u,l){u===void 0&&(u=[]),l===void 0&&(l=0),u.length=0;var f=r.tilemapLayer,v=r.data,d=r.width,c=r.height,p=0,g=d,x=0,m=c;if(!f.skipCull){var y,T,C;if(l===0){for(T=x;T<m;T++)for(y=p;v[T]&&y<g;y++)if(s(y,T,r,o)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}else if(l===1){for(T=x;T<m;T++)for(y=g;v[T]&&y>=p;y--)if(s(y,T,r,o)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}else if(l===2){for(T=m;T>=x;T--)for(y=p;v[T]&&y<g;y++)if(s(y,T,r,o)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}else if(l===3){for(T=m;T>=x;T--)for(y=g;v[T]&&y>=p;y--)if(s(y,T,r,o)){if(C=v[T][y],!C||C.index===-1||!C.visible||C.alpha===0)continue;u.push(C)}}}return f.tilesDrawn=u.length,f.tilesTotal=d*c,u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(549),h=i(159),r=function(o,u,l,f){l===void 0&&(l=[]),f===void 0&&(f=0),l.length=0;var v=o.tilemapLayer;if(!v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1){var d=s(o,u);h(o,d,f,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(139),h=i(76),r=function(o,u){var l=o.tilemapLayer.tilemap,f=o.tilemapLayer,v=Math.floor(l.tileWidth*f.scaleX),d=Math.floor(l.tileHeight*f.scaleY),c=h(u.worldView.x-f.x,v,0,!0)-f.cullPaddingX,p=s(u.worldView.right-f.x,v,0,!0)+f.cullPaddingX,g=h(u.worldView.y-f.y,d/2,0,!0)-f.cullPaddingY,x=s(u.worldView.bottom-f.y,d/2,0,!0)+f.cullPaddingY;return{left:c,right:p,top:g,bottom:x}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f){u||(u=new s);var v=f.baseTileWidth,d=f.baseTileHeight,c=f.tilemapLayer,p=0,g=0;c&&(l||(l=c.scene.cameras.main),p=c.x+l.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+l.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var x=f.hexSideLength,m=(d-x)/2+x,y=p+r*v+o%2*(v/2),T=g+o*m;return u.set(y,T)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f){u||(u=new s);var v=f.baseTileWidth,d=f.baseTileHeight,c=f.tilemapLayer,p=0,g=0;c&&(l||(l=c.scene.cameras.main),p=c.x+l.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+l.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var x=p+(r-o)*(v/2),m=g+(r+o)*(d/2);return u.set(x,m)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f){u||(u=new s);var v=f.baseTileWidth,d=f.baseTileHeight,c=f.tilemapLayer,p=0,g=0;c&&(l||(l=c.scene.cameras.main),p=c.x+l.scrollX*(1-c.scrollFactorX),v*=c.scaleX,g=c.y+l.scrollY*(1-c.scrollFactorY),d*=c.scaleY);var x=p+r*v+o%2*(v/2),m=g+o*(d/2);return u.set(x,m)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(253),h=i(254),r=i(3),o=function(u,l,f,v,d){return f||(f=new r(0,0)),f.x=s(u,v,d),f.y=h(l,v,d),f};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=r.baseTileHeight,u=r.tilemapLayer,l=0;u&&(h===void 0&&(h=u.scene.cameras.main),l=u.y+h.scrollY*(1-u.scrollFactorY),o*=u.scaleY);var f=u.tilemap.hexSideLength,v=(o-f)/2+f;return l+s*v};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=r.baseTileHeight,u=r.tilemapLayer,l=0;return u&&(h===void 0&&(h=u.scene.cameras.main),l=u.y+h.scrollY*(1-u.scrollFactorY),o*=u.scaleY),l+s*(o/2)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f,v){l||(l=new s);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(f||(f=p.scene.cameras.main),o=o-(p.y+f.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=v.hexSideLength,x=(c-g)/2+g,m=u?Math.floor(o/x):o/x,y=u?Math.floor((r-m%2*.5*d)/d):(r-m%2*.5*d)/d;return l.set(y,m)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f,v){l||(l=new s);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(f||(f=p.scene.cameras.main),o=o-(p.y+f.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=u?Math.floor((r/(d/2)+o/(c/2))/2):(r/(d/2)+o/(c/2))/2,x=u?Math.floor((o/(c/2)-r/(d/2))/2):(o/(c/2)-r/(d/2))/2;return l.set(g,x)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f,v){l||(l=new s);var d=v.baseTileWidth,c=v.baseTileHeight,p=v.tilemapLayer;p&&(f||(f=p.scene.cameras.main),o=o-(p.y+f.scrollY*(1-p.scrollFactorY)),c*=p.scaleY,r=r-(p.x+f.scrollX*(1-p.scrollFactorX)),d*=p.scaleX);var g=u?Math.floor(o/(c/2)):o/(c/2),x=u?Math.floor((r+g%2*.5*d)/d):(r+g%2*.5*d)/d;return l.set(x,g)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(255),h=i(256),r=i(3),o=function(u,l,f,v,d,c){return f===void 0&&(f=!0),v||(v=new r(0,0)),v.x=s(u,f,d,c),v.y=h(l,f,d,c),v};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=o.baseTileHeight,l=o.tilemapLayer;l&&(r||(r=l.scene.cameras.main),s=s-(l.y+r.scrollY*(1-l.scrollFactorY)),u*=l.scaleY);var f=o.hexSideLength,v=(u-f)/2+f;return h?Math.floor(s/v):s/v};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=o.baseTileHeight,l=o.tilemapLayer;return l&&(r||(r=l.scene.cameras.main),s=s-(l.y+r.scrollY*(1-l.scrollFactorY)),u*=l.scaleY),h?Math.floor(s/(u/2)):s/(u/2)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(119),h=function(r,o,u){if(s(r,o,u)){var l=u.data[o][r];return l!==null&&l.index>-1}else return!1};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(85),h=i(119),r=i(252),o=function(u,l,f,v,d){if(f===void 0&&(f=!0),v===void 0&&(v=!0),!h(u,l,d))return null;var c=d.data[l][u];if(c)d.data[l][u]=f?null:new s(d,-1,u,l,d.tileWidth,d.tileHeight);else return null;return v&&c&&c.collides&&r(u,l,d),c};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),h=i(259),r=i(565),o=i(566),u=i(577),l=function(f,v,d,c,p,g){var x;switch(v){case s.ARRAY_2D:x=h(f,d,c,p,g);break;case s.CSV:x=r(f,d,c,p,g);break;case s.TILED_JSON:x=o(f,d,g);break;case s.WELTMEISTER:x=u(f,d,g);break;default:console.warn("Unrecognized tilemap data format: "+v),x=null}return x};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),h=i(259),r=function(o,u,l,f,v){var d=u.trim().split(`
`).map(function(p){return p.split(",")}),c=h(o,d,l,f,v);return c.format=s.CSV,c};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(567),h=i(568),r=i(29),o=i(40),u=i(258),l=i(121),f=i(569),v=i(570),d=i(573),c=i(575),p=function(g,x,m){var y=new l({width:x.width,height:x.height,name:g,tileWidth:x.tilewidth,tileHeight:x.tileheight,orientation:u(x.orientation),format:o.TILED_JSON,version:x.version,properties:x.properties,renderOrder:x.renderorder,infinite:x.infinite});y.orientation===r.HEXAGONAL&&(y.hexSideLength=x.hexsidelength),y.layers=d(x,m),y.images=f(x);var T=c(x);return y.tilesets=T.tilesets,y.imageCollections=T.imageCollections,y.objects=v(x),y.tiles=h(y),s(y),y};e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),h=function(r){for(var o,u,l,f,v,d=0;d<r.layers.length;d++){o=r.layers[d],f=null;for(var c=0;c<o.data.length;c++){v=o.data[c];for(var p=0;p<v.length;p++)u=v[p],!(u===null||u.index<0)&&(l=r.tiles[u.index][2],f=r.tilesets[l],u.width=f.tileWidth,u.height=f.tileHeight,f.tileProperties&&f.tileProperties[u.index-f.firstgid]&&(u.properties=s(u.properties,f.tileProperties[u.index-f.firstgid])))}}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(122),h=function(r){var o,u,l=[];for(o=0;o<r.imageCollections.length;o++)for(var f=r.imageCollections[o],v=f.images,d=0;d<v.length;d++){var c=v[d];u=new s(c.image,c.gid,f.imageWidth,f.imageHeight,0,0),u.updateTileData(f.imageWidth,f.imageHeight),r.tilesets.push(u)}for(o=0;o<r.tilesets.length;o++){u=r.tilesets[o];for(var p=u.tileMargin,g=u.tileMargin,x=0,m=0,y=0,T=u.firstgid;T<u.firstgid+u.total&&(l[T]=[p,g,o],p+=u.tileWidth+u.tileSpacing,x++,!(x===u.total||(m++,m===u.columns&&(p=u.tileMargin,g+=u.tileHeight+u.tileSpacing,m=0,y++,y===u.rows))));T++);}return l};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=i(161),r=function(o){for(var u=[],l=[],f=h(o);f.i<f.layers.length||l.length>0;){if(f.i>=f.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=l.pop();continue}var v=f.layers[f.i];if(f.i++,v.type!=="imagelayer"){if(v.type==="group"){var d=h(o,v,f);l.push(f),f=d}continue}var c=s(v,"offsetx",0)+s(v,"startx",0),p=s(v,"offsety",0)+s(v,"starty",0);u.push({name:f.name+v.name,image:v.image,x:f.x+c+v.x,y:f.y+p+v.y,alpha:f.opacity*v.opacity,visible:f.visible&&v.visible,properties:s(v,"properties",{})})}return u};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=i(260),r=i(572),o=i(161),u=function(l){for(var f=[],v=[],d=o(l);d.i<d.layers.length||v.length>0;){if(d.i>=d.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=v.pop();continue}var c=d.layers[d.i];if(d.i++,c.opacity*=d.opacity,c.visible=d.visible&&c.visible,c.type!=="objectgroup"){if(c.type==="group"){var p=o(l,c,d);v.push(d),d=p}continue}c.name=d.name+c.name;for(var g=d.x+s(c,"startx",0)+s(c,"offsetx",0),x=d.y+s(c,"starty",0)+s(c,"offsety",0),m=[],y=0;y<c.objects.length;y++){var T=h(c.objects[y],g,x);m.push(T)}var C=new r(c);C.objects=m,f.push(C)}return f};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(126),h=function(r,o){for(var u={},l=0;l<o.length;l++){var f=o[l];s(r,f)&&(u[f]=r[f])}return u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=new s({initialize:function(u){u===void 0&&(u={}),this.name=h(u,"name","object layer"),this.opacity=h(u,"opacity",1),this.properties=h(u,"properties",{}),this.propertyTypes=h(u,"propertytypes",{}),this.type=h(u,"type","objectgroup"),this.visible=h(u,"visible",!0),this.objects=h(u,"objects",[])}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(574),h=i(29),r=i(161),o=i(258),u=i(2),l=i(120),f=i(261),v=i(85),d=function(c,p){for(var g=u(c,"infinite",!1),x=[],m=[],y=r(c);y.i<y.layers.length||m.length>0;){if(y.i>=y.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}y=m.pop();continue}var T=y.layers[y.i];if(y.i++,T.type!=="tilelayer"){if(T.type==="group"){var C=r(c,T,y);m.push(y),y=C}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=s(T.chunks[S].data);T.data&&(T.data=s(T.data)),delete T.encoding}var E,P,M,O,A=[],R=0;if(g){var F=u(T,"startx",0)+T.x,I=u(T,"starty",0)+T.y;E=new l({name:y.name+T.name,x:y.x+u(T,"offsetx",0)+F*c.tilewidth,y:y.y+u(T,"offsety",0)+I*c.tileheight,width:T.width,height:T.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:u(T,"properties",[]),orientation:o(c.orientation)}),E.orientation===h.HEXAGONAL&&(E.hexSideLength=c.hexsidelength);for(var D=0;D<T.height;D++){A.push([null]);for(var N=0;N<T.width;N++)A[D][N]=null}for(D=0,X=T.chunks.length;D<X;D++)for(var z=T.chunks[D],U=z.x-F,W=z.y-I,w=0,L=0,B=z.data.length;L<B;L++){var b=R+U,G=w+W;P=f(z.data[L]),P.gid>0?(M=new v(E,P.gid,b,G,c.tilewidth,c.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,A[G][b]=M):(O=p?null:new v(E,-1,b,G,c.tilewidth,c.tileheight),A[G][b]=O),R++,R===z.width&&(w++,R=0)}}else{E=new l({name:y.name+T.name,x:y.x+u(T,"offsetx",0)+T.x,y:y.y+u(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:c.tilewidth,tileHeight:c.tileheight,alpha:y.opacity*T.opacity,visible:y.visible&&T.visible,properties:u(T,"properties",[]),orientation:o(c.orientation)}),E.orientation===h.HEXAGONAL&&(E.hexSideLength=c.hexsidelength);for(var Y=[],V=0,X=T.data.length;V<X;V++)P=f(T.data[V]),P.gid>0?(M=new v(E,P.gid,R,A.length,c.tilewidth,c.tileheight),M.rotation=P.rotation,M.flipX=P.flipped,Y.push(M)):(O=p?null:new v(E,-1,R,A.length,c.tilewidth,c.tileheight),Y.push(O)),R++,R===T.width&&(A.push(Y),R=0,Y=[])}E.data=A,x.push(E)}return x};e.exports=d},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var h=window.atob(s),r=h.length,o=new Array(r/4),u=0;u<r;u+=4)o[u/4]=(h.charCodeAt(u)|h.charCodeAt(u+1)<<8|h.charCodeAt(u+2)<<16|h.charCodeAt(u+3)<<24)>>>0;return o};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(122),h=i(576),r=i(260),o=i(1453),u=function(l){for(var f=[],v=[],d=null,c,p=0;p<l.tilesets.length;p++){var g=l.tilesets[p];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var x=new s(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing);if(l.version>1){var m=void 0,y=void 0;if(Array.isArray(g.tiles)){m=m||{},y=y||{};for(var T=0;T<g.tiles.length;T++){var C=g.tiles[T];if(C.properties){var S={};C.properties.forEach(function(D){S[D.name]=D.value}),y[C.id]=S}if(C.objectgroup&&((m[C.id]||(m[C.id]={})).objectgroup=C.objectgroup,C.objectgroup.objects)){var E=C.objectgroup.objects.map(function(D){return r(D)});m[C.id].objectgroup.objects=E}C.animation&&((m[C.id]||(m[C.id]={})).animation=C.animation),C.type&&((m[C.id]||(m[C.id]={})).type=C.type)}}Array.isArray(g.wangsets)&&(m=m||{},y=y||{},o(g.wangsets,m)),m&&(x.tileData=m,x.tileProperties=y)}else if(g.tileproperties&&(x.tileProperties=g.tileproperties),g.tiles){x.tileData=g.tiles;for(c in x.tileData){var P=x.tileData[c].objectgroup;if(P&&P.objects){var M=P.objects.map(function(D){return r(D)});x.tileData[c].objectgroup.objects=M}}}x.updateTileData(g.imagewidth,g.imageheight),f.push(x)}else{var O=new h(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),A=0;for(T=0;T<g.tiles.length;T++){C=g.tiles[T];var R=C.image,F=parseInt(C.id,10),I=g.firstgid+F;O.addImage(I,R),A=Math.max(F,A)}O.maxId=A,v.push(O)}d&&(d.lastgid=g.firstgid-1),d=g}return{tilesets:f,imageCollections:v}};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o,u,l,f,v,d,c){(l===void 0||l<=0)&&(l=32),(f===void 0||f<=0)&&(f=32),v===void 0&&(v=0),d===void 0&&(d=0),this.name=o,this.firstgid=u|0,this.imageWidth=l|0,this.imageHeight=f|0,this.imageMargin=v|0,this.imageSpacing=d|0,this.properties=c||{},this.images=[],this.total=0},containsImageIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},addImage:function(r,o){return this.images.push({gid:r,image:o}),this.total++,this}});e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(40),h=i(121),r=i(578),o=i(579),u=function(l,f,v){if(f.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var d=0,c=0,p=0;p<f.layer.length;p++)f.layer[p].width>d&&(d=f.layer[p].width),f.layer[p].height>c&&(c=f.layer[p].height);var g=new h({width:d,height:c,name:l,tileWidth:f.layer[0].tilesize,tileHeight:f.layer[0].tilesize,format:s.WELTMEISTER});return g.layers=r(f,v),g.tilesets=o(f),g};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(120),h=i(85),r=function(o,u){for(var l=[],f=0;f<o.layer.length;f++){for(var v=o.layer[f],d=new s({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),c=[],p=[],g=0;g<v.data.length;g++){for(var x=0;x<v.data[g].length;x++){var m=v.data[g][x]-1,y;m>-1?y=new h(d,m,x,g,v.tilesize,v.tilesize):y=u?null:new h(d,-1,x,g,v.tilesize,v.tilesize),c.push(y)}p.push(c),c=[]}d.data=p,l.push(d)}return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(122),h=function(r){for(var o=[],u=[],l=0;l<r.layer.length;l++){var f=r.layer[l],v=f.tilesetName;v!==""&&u.indexOf(v)===-1&&(u.push(v),o.push(new s(v,0,f.tilesize,f.tilesize,0,0)))}return o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(36),r=i(40),o=i(2),u=i(120),l=i(29),f=i(362),v=i(74),d=i(73),c=i(85),p=i(251),g=i(581),x=i(122),m=new s({initialize:function(T,C){this.scene=T,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var S=this.orientation;this._convert={WorldToTileXY:p.GetWorldToTileXYFunction(S),WorldToTileX:p.GetWorldToTileXFunction(S),WorldToTileY:p.GetWorldToTileYFunction(S),TileToWorldXY:p.GetTileToWorldXYFunction(S),TileToWorldX:p.GetTileToWorldXFunction(S),TileToWorldY:p.GetTileToWorldYFunction(S)}},createBlankDynamicLayer:function(y,T,C,S,E,P,M,O){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(y,T,C,S,E,P,M,O)},createDynamicLayer:function(y,T,C,S){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},createStaticLayer:function(y,T,C,S){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(y,T,C,S)},setRenderOrder:function(y){var T=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=T[y]),T.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,T,C,S,E,P,M){if(y===void 0)return null;if(T==null&&(T=y),!this.scene.sys.textures.exists(T))return console.warn("Invalid Tileset Image: "+T),null;var O=this.scene.sys.textures.get(T),A=this.getTilesetIndex(y);if(A===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+y),null;var R=this.tilesets[A];return R?(R.setTileSize(C,S),R.setSpacing(E,P),R.setImage(O),R):(C===void 0&&(C=this.tileWidth),S===void 0&&(S=this.tileHeight),E===void 0&&(E=0),P===void 0&&(P=0),M===void 0&&(M=0),R=new x(y,M,C,S,E,P),R.setImage(O),this.tilesets.push(R),R)},copy:function(y,T,C,S,E,P,M,O){return O=this.getLayer(O),O!==null?(p.Copy(y,T,C,S,E,P,M,O),this):null},createBlankLayer:function(y,T,C,S,E,P,M,O){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.width),P===void 0&&(P=this.height),M===void 0&&(M=this.tileWidth),O===void 0&&(O=this.tileHeight);var A=this.getLayerIndex(y);if(A!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var R=new u({name:y,tileWidth:M,tileHeight:O,width:E,height:P,orientation:this.orientation}),F,I=0;I<P;I++){F=[];for(var D=0;D<E;D++)F.push(new c(R,-1,D,I,M,O,this.tileWidth,this.tileHeight));R.data.push(F)}this.layers.push(R),this.currentLayerIndex=this.layers.length-1;var N=new g(this.scene,this,this.currentLayerIndex,T,C,S);return N.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(N),N},createLayer:function(y,T,C,S){var E=this.getLayerIndex(y);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var P=this.layers[E];if(P.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=E,C===void 0&&(C=P.x),S===void 0&&(S=P.y);var M=new g(this.scene,this,E,T,C,S);return M.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(M),M},createFromObjects:function(y,T){var C=[],S=this.getObjectLayer(y);if(!S)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),C;Array.isArray(T)||(T=[T]);for(var E=S.objects,P=0;P<T.length;P++){for(var M=T[P],O=o(M,"id",null),A=o(M,"gid",null),R=o(M,"name",null),F,I=[],D=0;D<E.length;D++)F=E[D],(O===null&&A===null&&R===null||O!==null&&F.id===O||A!==null&&F.gid===A||R!==null&&F.name===R)&&I.push(F);for(var N=o(M,"classType",d),z=o(M,"scene",this.scene),U=o(M,"container",null),W=o(M,"key",null),w=o(M,"frame",null),L=0;L<I.length;L++){F=I[L];var B=new N(z);B.setName(F.name),B.setPosition(F.x,F.y),B.setTexture(W,w),F.width&&(B.displayWidth=F.width),F.height&&(B.displayHeight=F.height);var b={x:B.originX*F.width,y:(B.originY-1)*F.height};if(F.rotation){var G=h(F.rotation);f(b,G),B.rotation=G}if(B.x+=b.x,B.y+=b.y,(F.flippedHorizontal!==void 0||F.flippedVertical!==void 0)&&B.setFlip(F.flippedHorizontal,F.flippedVertical),F.visible||(B.visible=!1),Array.isArray(F.properties))F.properties.forEach(function(V){var X=V.name;B[X]!==void 0?B[X]=V.value:B.setData(X,V.value)});else for(var Y in F.properties)B[Y]!==void 0?B[Y]=F.properties[Y]:B.setData(Y,F.properties[Y]);U?U.add(B):z.add.existing(B),C.push(B)}}return C},createFromTiles:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:p.CreateFromTiles(y,T,C,S,E,P)},fill:function(y,T,C,S,E,P,M){return P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(p.Fill(y,T,C,S,E,P,M),this)},filterObjects:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.filter(T,C)},filterTiles:function(y,T,C,S,E,P,M,O){return O=this.getLayer(O),O===null?null:p.FilterTiles(y,T,C,S,E,P,M,O)},findByIndex:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.FindByIndex(y,T,C,S)},findObject:function(y,T,C){if(typeof y=="string"){var S=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+S),null}return y.objects.find(T,C)||null},findTile:function(y,T,C,S,E,P,M,O){return O=this.getLayer(O),O===null?null:p.FindTile(y,T,C,S,E,P,M,O)},forEachTile:function(y,T,C,S,E,P,M,O){return O=this.getLayer(O),O===null?null:(p.ForEachTile(y,T,C,S,E,P,M,O),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,T){for(var C=0;C<y.length;C++)if(y[C].name===T)return C;return null},getLayer:function(y){var T=this.getLayerIndex(y);return T!==null?this.layers[T]:null},getObjectLayer:function(y){var T=this.getIndex(this.objects,y);return T!==null?this.objects[T]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof g?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTileAt(y,T,C,S)},getTileAtWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:p.GetTileAtWorldXY(y,T,C,S,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:p.GetTilesWithin(y,T,C,S,E,P)},getTilesWithinShape:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.GetTilesWithinShape(y,T,C,S)},getTilesWithinWorldXY:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:p.GetTilesWithinWorldXY(y,T,C,S,E,P,M)},getTileset:function(y){var T=this.getIndex(this.tilesets,y);return T!==null?this.tilesets[T]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,T,C){return C=this.getLayer(C),C===null?null:p.HasTileAt(y,T,C)},hasTileAtWorldXY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:p.HasTileAtWorldXY(y,T,C,S)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.PutTileAt(y,T,C,S,E)},putTileAtWorldXY:function(y,T,C,S,E,P){return S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:p.PutTileAtWorldXY(y,T,C,S,E,P)},putTilesAt:function(y,T,C,S,E){return S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.PutTilesAt(y,T,C,S,E),this)},randomize:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:(p.Randomize(y,T,C,S,E,P),this)},calculateFacesAt:function(y,T,C){return C=this.getLayer(C),C===null?null:(p.CalculateFacesAt(y,T,C),this)},calculateFacesWithin:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.CalculateFacesWithin(y,T,C,S,E),this)},removeLayer:function(y){var T=this.getLayerIndex(y);if(T!==null){v(this.layers,T);for(var C=T;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===T&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var T=this.getLayerIndex(y);return T!==null?(y=this.layers[T],y.destroy(),v(this.layers,T),this.currentLayerIndex===T&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,T=0;T<y.length;T++)y[T].tilemapLayer&&y[T].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,T,C){T===void 0&&(T=-1),C===void 0&&(C=!0);var S=[];Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var P=y[E];S.push(this.removeTileAt(P.x,P.y,!0,C,P.tilemapLayer)),T>-1&&this.putTileAt(T,P.x,P.y,C,P.tilemapLayer)}return S},removeTileAt:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:p.RemoveTileAt(y,T,C,S,E)},removeTileAtWorldXY:function(y,T,C,S,E,P){return C===void 0&&(C=!0),S===void 0&&(S=!0),P=this.getLayer(P),P===null?null:p.RemoveTileAtWorldXY(y,T,C,S,E,P)},renderDebug:function(y,T,C){return C=this.getLayer(C),C===null?null:(this.orientation===l.ORTHOGONAL&&p.RenderDebug(y,T,C),this)},renderDebugFull:function(y,T){for(var C=this.layers,S=0;S<C.length;S++)p.RenderDebug(y,T,C[S]);return this},replaceByIndex:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(p.ReplaceByIndex(y,T,C,S,E,P,M),this)},setCollision:function(y,T,C,S,E){return T===void 0&&(T=!0),C===void 0&&(C=!0),E===void 0&&(E=!0),S=this.getLayer(S),S===null?null:(p.SetCollision(y,T,C,S,E),this)},setCollisionBetween:function(y,T,C,S,E){return C===void 0&&(C=!0),S===void 0&&(S=!0),E=this.getLayer(E),E===null?null:(p.SetCollisionBetween(y,T,C,S,E),this)},setCollisionByProperty:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByProperty(y,T,C,S),this)},setCollisionByExclusion:function(y,T,C,S){return T===void 0&&(T=!0),C===void 0&&(C=!0),S=this.getLayer(S),S===null?null:(p.SetCollisionByExclusion(y,T,C,S),this)},setCollisionFromCollisionGroup:function(y,T,C){return y===void 0&&(y=!0),T===void 0&&(T=!0),C=this.getLayer(C),C===null?null:(p.SetCollisionFromCollisionGroup(y,T,C),this)},setTileIndexCallback:function(y,T,C,S){return S=this.getLayer(S),S===null?null:(p.SetTileIndexCallback(y,T,C,S),this)},setTileLocationCallback:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(p.SetTileLocationCallback(y,T,C,S,E,P,M),this)},setLayer:function(y){var T=this.getLayerIndex(y);return T!==null&&(this.currentLayerIndex=T),this},setBaseTileSize:function(y,T){this.tileWidth=y,this.tileHeight=T,this.widthInPixels=this.width*y,this.heightInPixels=this.height*T;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=T;for(var S=this.layers[C].data,E=this.layers[C].width,P=this.layers[C].height,M=0;M<P;M++)for(var O=0;O<E;O++){var A=S[M][O];A!==null&&A.setSize(void 0,void 0,y,T)}}return this},setLayerTileSize:function(y,T,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=T;for(var S=C.data,E=C.width,P=C.height,M=0;M<P;M++)for(var O=0;O<E;O++){var A=S[M][O];A!==null&&A.setSize(y,T)}return this},shuffle:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:(p.Shuffle(y,T,C,S,E),this)},swapByIndex:function(y,T,C,S,E,P,M){return M=this.getLayer(M),M===null?null:(p.SwapByIndex(y,T,C,S,E,P,M),this)},tileToWorldX:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,T,C)},tileToWorldY:function(y,T,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,T,C)},tileToWorldXY:function(y,T,C,S,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(y,T,C,S,E)},weightedRandomize:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:(p.WeightedRandomize(T,C,S,E,y,P),this)},worldToTileX:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileX(y,T,C,S)},worldToTileY:function(y,T,C,S){return S=this.getLayer(S),S===null?null:this._convert.WorldToTileY(y,T,C,S)},worldToTileXY:function(y,T,C,S,E,P){return P=this.getLayer(P),P===null?null:this._convert.WorldToTileXY(y,T,C,S,E,P)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});e.exports=m},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(11),r=i(15),o=i(251),u=i(1456),l=new s({Extends:r,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Origin,h.Pipeline,h.Transform,h.Visible,h.ScrollFactor,u],initialize:function(v,d,c,p,g,x){r.call(this,v,"TilemapLayer"),this.isTilemap=!0,this.tilemap=d,this.layerIndex=c,this.layer=d.layers[c],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(p),this.setAlpha(this.layer.alpha),this.setPosition(g,x),this.setOrigin(),this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(f){var v=[],d=[],c=this.tilemap;Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++){var g=f[p];if(typeof g=="string"&&(g=c.getTileset(g)),g){d.push(g);for(var x=g.firstgid,m=0;m<g.total;m++)v[x+m]=g}}this.gidMap=v,this.tileset=d},setRenderOrder:function(f){var v=["right-down","left-down","right-up","left-up"];return typeof f=="string"&&(f=v.indexOf(f)),f>=0&&f<4&&(this._renderOrder=f),this},calculateFacesAt:function(f,v){return o.CalculateFacesAt(f,v,this.layer),this},calculateFacesWithin:function(f,v,d,c){return o.CalculateFacesWithin(f,v,d,c,this.layer),this},createFromTiles:function(f,v,d,c,p){return o.CreateFromTiles(f,v,d,c,p,this.layer)},cull:function(f){return this.cullCallback(this.layer,f,this.culledTiles,this._renderOrder)},copy:function(f,v,d,c,p,g,x){return o.Copy(f,v,d,c,p,g,x,this.layer),this},fill:function(f,v,d,c,p,g){return o.Fill(f,v,d,c,p,g,this.layer),this},filterTiles:function(f,v,d,c,p,g,x){return o.FilterTiles(f,v,d,c,p,g,x,this.layer)},findByIndex:function(f,v,d){return o.FindByIndex(f,v,d,this.layer)},findTile:function(f,v,d,c,p,g,x){return o.FindTile(f,v,d,c,p,g,x,this.layer)},forEachTile:function(f,v,d,c,p,g,x){return o.ForEachTile(f,v,d,c,p,g,x,this.layer),this},getTileAt:function(f,v,d){return o.GetTileAt(f,v,d,this.layer)},getTileAtWorldXY:function(f,v,d,c){return o.GetTileAtWorldXY(f,v,d,c,this.layer)},getTilesWithin:function(f,v,d,c,p){return o.GetTilesWithin(f,v,d,c,p,this.layer)},getTilesWithinShape:function(f,v,d){return o.GetTilesWithinShape(f,v,d,this.layer)},getTilesWithinWorldXY:function(f,v,d,c,p,g){return o.GetTilesWithinWorldXY(f,v,d,c,p,g,this.layer)},hasTileAt:function(f,v){return o.HasTileAt(f,v,this.layer)},hasTileAtWorldXY:function(f,v,d){return o.HasTileAtWorldXY(f,v,d,this.layer)},putTileAt:function(f,v,d,c){return o.PutTileAt(f,v,d,c,this.layer)},putTileAtWorldXY:function(f,v,d,c,p){return o.PutTileAtWorldXY(f,v,d,c,p,this.layer)},putTilesAt:function(f,v,d,c){return o.PutTilesAt(f,v,d,c,this.layer),this},randomize:function(f,v,d,c,p){return o.Randomize(f,v,d,c,p,this.layer),this},removeTileAt:function(f,v,d,c){return o.RemoveTileAt(f,v,d,c,this.layer)},removeTileAtWorldXY:function(f,v,d,c,p){return o.RemoveTileAtWorldXY(f,v,d,c,p,this.layer)},renderDebug:function(f,v){return o.RenderDebug(f,v,this.layer),this},replaceByIndex:function(f,v,d,c,p,g){return o.ReplaceByIndex(f,v,d,c,p,g,this.layer),this},setSkipCull:function(f){return f===void 0&&(f=!0),this.skipCull=f,this},setCullPadding:function(f,v){return f===void 0&&(f=1),v===void 0&&(v=1),this.cullPaddingX=f,this.cullPaddingY=v,this},setCollision:function(f,v,d,c){return o.SetCollision(f,v,d,this.layer,c),this},setCollisionBetween:function(f,v,d,c){return o.SetCollisionBetween(f,v,d,c,this.layer),this},setCollisionByProperty:function(f,v,d){return o.SetCollisionByProperty(f,v,d,this.layer),this},setCollisionByExclusion:function(f,v,d){return o.SetCollisionByExclusion(f,v,d,this.layer),this},setCollisionFromCollisionGroup:function(f,v){return o.SetCollisionFromCollisionGroup(f,v,this.layer),this},setTileIndexCallback:function(f,v,d){return o.SetTileIndexCallback(f,v,d,this.layer),this},setTileLocationCallback:function(f,v,d,c,p,g){return o.SetTileLocationCallback(f,v,d,c,p,g,this.layer),this},shuffle:function(f,v,d,c){return o.Shuffle(f,v,d,c,this.layer),this},swapByIndex:function(f,v,d,c,p,g){return o.SwapByIndex(f,v,d,c,p,g,this.layer),this},tileToWorldX:function(f,v){return this.tilemap.tileToWorldX(f,v,this)},tileToWorldY:function(f,v){return this.tilemap.tileToWorldY(f,v,this)},tileToWorldXY:function(f,v,d,c){return this.tilemap.tileToWorldXY(f,v,d,c,this)},weightedRandomize:function(f,v,d,c,p){return o.WeightedRandomize(v,d,c,p,f,this.layer),this},worldToTileX:function(f,v,d){return this.tilemap.worldToTileX(f,v,d,this)},worldToTileY:function(f,v,d){return this.tilemap.worldToTileY(f,v,d,this)},worldToTileXY:function(f,v,d,c,p){return this.tilemap.worldToTileXY(f,v,d,c,p,this)},destroy:function(f){f===void 0&&(f=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),f&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(2),r=new s({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(o){return this.delay=h(o,"delay",0),this.repeat=h(o,"repeat",0),this.loop=h(o,"loop",!1),this.callback=h(o,"callback",void 0),this.callbackScope=h(o,"callbackScope",this.callback),this.args=h(o,"args",[]),this.timeScale=h(o,"timeScale",1),this.startAt=h(o,"startAt",0),this.paused=h(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,u=this.elapsed+this.delay*(this.repeat-this.repeatCount);return u/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1465),h=function(r){var o,u=[];if(r.hasOwnProperty("props"))for(o in r.props)o.substr(0,1)!=="_"&&u.push({key:o,value:r.props[o]});else for(o in r)s.indexOf(o)===-1&&o.substr(0,1)!=="_"&&u.push({key:o,value:r[o]});return u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),h=function(r){var o=s(r,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(265),h=i(13),r=i(99),o=i(80),u=i(162),l=i(6),f=i(264),v=i(266),d=i(268),c=function(p,g,x){x===void 0&&(x=s);var m=l(g,"from",0),y=l(g,"to",1),T=[{value:m}],C=u(g,"delay",x.delay),S=u(g,"duration",x.duration),E=l(g,"easeParams",x.easeParams),P=o(l(g,"ease",x.ease),E),M=u(g,"hold",x.hold),O=u(g,"repeat",x.repeat),A=u(g,"repeatDelay",x.repeatDelay),R=r(g,"yoyo",x.yoyo),F=[],I=f("value",y),D=d(T[0],0,"value",I.getEnd,I.getStart,I.getActive,P,C,S,R,M,O,A,!1,!1);D.start=m,D.current=m,D.to=y,F.push(D);var N=new v(p,F,T);N.offset=h(g,"offset",null),N.completeDelay=h(g,"completeDelay",0),N.loop=Math.round(h(g,"loop",0)),N.loopDelay=Math.round(h(g,"loopDelay",0)),N.paused=r(g,"paused",!1),N.useFrames=r(g,"useFrames",!1);for(var z=l(g,"callbackScope",N),U=[N,null],W=v.TYPES,w=0;w<W.length;w++){var L=W[w],B=l(g,L,!1);if(B){var b=l(g,L+"Scope",z),G=l(g,L+"Params",[]);N.setCallback(L,B,U.concat(G),b)}}return N};e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(80),h=i(6),r=i(14),o=function(u,l){l===void 0&&(l={});var f,v=h(l,"start",0),d=h(l,"ease",null),c=h(l,"grid",null),p=h(l,"from",0),g=p==="first",x=p==="center",m=p==="last",y=typeof p=="number",T=Array.isArray(u),C=parseFloat(T?u[0]:u),S=T?parseFloat(u[1]):0,E=Math.max(C,S);if(T&&(v+=C),c){var P=c[0],M=c[1],O=0,A=0,R=0,F=0,I=[];m?(O=P-1,A=M-1):y?(O=p%P,A=Math.floor(p/P)):x&&(O=(P-1)/2,A=(M-1)/2);for(var D=r.MIN_SAFE_INTEGER,N=0;N<M;N++){I[N]=[];for(var z=0;z<P;z++){R=O-z,F=A-N;var U=Math.sqrt(R*R+F*F);U>D&&(D=U),I[N][z]=U}}}var W=d?s(d):null;return c?f=function(w,L,B,b){var G=0,Y=b%P,V=Math.floor(b/P);Y>=0&&Y<P&&V>=0&&V<M&&(G=I[V][Y]);var X;if(T){var H=S-C;W?X=G/D*H*W(G/D):X=G/D*H}else W?X=G*C*W(G/D):X=G*C;return X+v}:f=function(w,L,B,b,G){G--;var Y;g?Y=b:x?Y=Math.abs(G/2-b):m?Y=G-b:y&&(Y=Math.abs(p-b));var V;if(T){var X;x?X=(S-C)/G*(Y*2):X=(S-C)/G*Y,W?V=X*W(Y/G):V=X}else W?V=G*E*W(Y/G):V=Y*C;return V+v},f};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),h=i(265),r=i(13),o=i(99),u=i(80),l=i(162),f=i(263),v=i(584),d=i(6),c=i(588),p=i(163),g=function(x,m){var y=new c(x);y.completeDelay=r(m,"completeDelay",0),y.loop=Math.round(r(m,"loop",0)),y.loopDelay=Math.round(r(m,"loopDelay",0)),y.paused=o(m,"paused",!1),y.useFrames=o(m,"useFrames",!1);var T=d(m,"callbackScope",y),C=[y],S=d(m,"onStart",!1);if(S){var E=d(m,"onStartScope",T),P=d(m,"onStartParams",[]);y.setCallback("onStart",S,C.concat(P),E)}var M=d(m,"onUpdate",!1);if(M){var O=d(m,"onUpdateScope",T),A=d(m,"onUpdateParams",[]);y.setCallback("onUpdate",M,C.concat(A),O)}var R=d(m,"onLoop",!1);if(R){var F=d(m,"onLoopScope",T),I=d(m,"onLoopParams",[]);y.setCallback("onLoop",R,C.concat(I),F)}var D=d(m,"onYoyo",!1);if(D){var N=d(m,"onYoyoScope",T),z=d(m,"onYoyoParams",[]);y.setCallback("onYoyo",D,C.concat(null,z),N)}var U=d(m,"onComplete",!1);if(U){var W=d(m,"onCompleteScope",T),w=d(m,"onCompleteParams",[]);y.setCallback("onComplete",U,C.concat(w),W)}var L=v(m);if(L.length===0)return y.paused=!0,y;var B=s(h);B.targets=f(m);var b=r(m,"totalDuration",0);b>0?B.duration=Math.floor(b/L.length):B.duration=l(m,"duration",B.duration),B.delay=l(m,"delay",B.delay),B.easeParams=d(m,"easeParams",B.easeParams),B.ease=u(d(m,"ease",B.ease),B.easeParams),B.hold=l(m,"hold",B.hold),B.repeat=l(m,"repeat",B.repeat),B.repeatDelay=l(m,"repeatDelay",B.repeatDelay),B.yoyo=o(m,"yoyo",B.yoyo),B.flipX=o(m,"flipX",B.flipX),B.flipY=o(m,"flipY",B.flipY);for(var G=0;G<L.length;G++)y.queue(p(y,L[G],B));return y};e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(267),o=i(163),u=i(100),l=new s({Extends:h,initialize:function(v){h.call(this),this.manager=v,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING_ADD,this._pausedState=u.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(f,v){this.emit(f,this),v&&v.func.apply(v.scope,v.params)},setTimeScale:function(f){return this.timeScale=f,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===u.ACTIVE},add:function(f){return this.queue(o(this,f))},queue:function(f){return this.isPlaying()||(f.parent=this,f.parentIsTimeline=!0,this.data.push(f),this.totalData=this.data.length),this},hasOffset:function(f){return f.offset!==null},isOffsetAbsolute:function(f){return typeof f=="number"},isOffsetRelative:function(f){var v=typeof f;if(v==="string"){var d=f[0];if(d==="-"||d==="+")return!0}return!1},getRelativeOffset:function(f,v){var d=f[0],c=parseFloat(f.substr(2)),p=v;switch(d){case"+":p+=c;break;case"-":p-=c;break}return Math.max(0,p)},calcDuration:function(){for(var f=0,v=0,d=0,c=0;c<this.totalData;c++){var p=this.data[c];p.init(),this.hasOffset(p)?this.isOffsetAbsolute(p.offset)?(p.calculatedOffset=p.offset,p.offset===0&&(d=0)):this.isOffsetRelative(p.offset)&&(p.calculatedOffset=this.getRelativeOffset(p.offset,f)):p.calculatedOffset=d,f=p.totalDuration+p.calculatedOffset,v+=p.totalDuration,d+=p.totalDuration}this.duration=v,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=u.PAUSED,!1):!0},resetTweens:function(f){for(var v=0;v<this.totalData;v++){var d=this.data[v];d.play(f)}},setCallback:function(f,v,d,c){return l.TYPES.indexOf(f)!==-1&&(this.callbacks[f]={func:v,scope:c,params:d}),this},makeActive:function(f){return this.manager.makeActive(f)},play:function(){if(this.state!==u.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=u.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=u.LOOP_DELAY):(this.state=u.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=u.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(f,v){if(this.state!==u.PAUSED){switch(this.useFrames&&(v=1*this.manager.timeScale),v*=this.timeScale,this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case u.ACTIVE:for(var d=this.totalData,c=0;c<this.totalData;c++){var p=this.data[c];p.update(f,v)&&d--}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),d===0&&this.nextState();break;case u.LOOP_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=u.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case u.COMPLETE_DELAY:this.countdown-=v,this.countdown<=0&&(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===u.PENDING_REMOVE}},stop:function(){this.state=u.PENDING_REMOVE},pause:function(){if(this.state!==u.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=u.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===u.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(f){for(var v=0;v<this.data.length;v++)if(this.data[v].hasTarget(f))return!0;return!1},destroy:function(){for(var f=0;f<this.data.length;f++)this.data[f].stop()}});l.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],e.exports=l},function(e,a,i){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),h=i(41),r=i(32),o=i(2),u=i(64),l={parseBody:function(f,v,d,c){c===void 0&&(c={});for(var p=o(d,"fixtures",[]),g=[],x=0;x<p.length;x++)for(var m=this.parseFixture(p[x]),y=0;y<m.length;y++)g.push(m[y]);var T=r.clone(d,!0);r.extend(T,c,!0),delete T.fixtures,delete T.type;var C=h.create(T);return h.setParts(C,g),h.setPosition(C,{x:f,y:v}),C},parseFixture:function(f){var v=r.extend({},!1,f);delete v.circle,delete v.vertices;var d;if(f.circle){var c=o(f.circle,"x"),p=o(f.circle,"y"),g=o(f.circle,"radius");d=[s.circle(c,p,g,v)]}else f.vertices&&(d=this.parseVertices(f.vertices,v));return d},parseVertices:function(f,v){v===void 0&&(v={});for(var d=[],c=0;c<f.length;c++)u.clockwiseSort(f[c]),d.push(h.create(r.extend({position:u.centre(f[c]),vertices:f[c]},v)));return s.flagCoincidentParts(d)}};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),h=i(41),r={parseBody:function(o,u,l,f){f===void 0&&(f={});var v,d=l.vertices;if(d.length===1)f.vertices=d[0],v=h.create(f),s.flagCoincidentParts(v.parts);else{for(var c=[],p=0;p<d.length;p++){var g=h.create({vertices:d[p]});c.push(g)}s.flagCoincidentParts(c),f.parts=c,v=h.create(f)}return v.label=l.label,h.setPosition(v,{x:o,y:u}),v}};e.exports=r},function(e,a,i){var s={};e.exports=s;var h=i(118),r=i(128),o=i(32),u=i(41),l=i(86);(function(){s.stack=function(f,v,d,c,p,g,x){for(var m=h.create({label:"Stack"}),y=f,T=v,C,S=0,E=0;E<c;E++){for(var P=0,M=0;M<d;M++){var O=x(y,T,M,E,C,S);if(O){var A=O.bounds.max.y-O.bounds.min.y,R=O.bounds.max.x-O.bounds.min.x;A>P&&(P=A),u.translate(O,{x:R*.5,y:A*.5}),y=O.bounds.max.x+p,h.addBody(m,O),C=O,S+=1}else y+=p}T+=P+g,y=f}return m},s.chain=function(f,v,d,c,p,g){for(var x=f.bodies,m=1;m<x.length;m++){var y=x[m-1],T=x[m],C=y.bounds.max.y-y.bounds.min.y,S=y.bounds.max.x-y.bounds.min.x,E=T.bounds.max.y-T.bounds.min.y,P=T.bounds.max.x-T.bounds.min.x,M={bodyA:y,pointA:{x:S*v,y:C*d},bodyB:T,pointB:{x:P*c,y:E*p}},O=o.extend(M,g);h.addConstraint(f,r.create(O))}return f.label+=" Chain",f},s.mesh=function(f,v,d,c,p){var g=f.bodies,x,m,y,T,C;for(x=0;x<d;x++){for(m=1;m<v;m++)y=g[m-1+x*v],T=g[m+x*v],h.addConstraint(f,r.create(o.extend({bodyA:y,bodyB:T},p)));if(x>0)for(m=0;m<v;m++)y=g[m+(x-1)*v],T=g[m+x*v],h.addConstraint(f,r.create(o.extend({bodyA:y,bodyB:T},p))),c&&m>0&&(C=g[m-1+(x-1)*v],h.addConstraint(f,r.create(o.extend({bodyA:C,bodyB:T},p)))),c&&m<v-1&&(C=g[m+1+(x-1)*v],h.addConstraint(f,r.create(o.extend({bodyA:C,bodyB:T},p))))}return f.label+=" Mesh",f},s.pyramid=function(f,v,d,c,p,g,x){return s.stack(f,v,d,c,p,g,function(m,y,T,C,S,E){var P=Math.min(c,Math.ceil(d/2)),M=S?S.bounds.max.x-S.bounds.min.x:0;if(!(C>P)){C=P-C;var O=C,A=d-1-C;if(!(T<O||T>A)){E===1&&u.translate(S,{x:(T+(d%2===1?1:-1))*M,y:0});var R=S?T*M:0;return x(f+R+T*p,y,T,C,S,E)}}})},s.newtonsCradle=function(f,v,d,c,p){for(var g=h.create({label:"Newtons Cradle"}),x=0;x<d;x++){var m=1.9,y=l.circle(f+x*(c*m),v+p,c,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=r.create({pointA:{x:f+x*(c*m),y:v},bodyB:y});h.addBody(g,y),h.addConstraint(g,T)}return g},s.car=function(f,v,d,c,p){var g=u.nextGroup(!0),x=20,m=-d*.5+x,y=d*.5-x,T=0,C=h.create({label:"Car"}),S=l.rectangle(f,v,d,c,{collisionFilter:{group:g},chamfer:{radius:c*.5},density:2e-4}),E=l.circle(f+m,v+T,p,{collisionFilter:{group:g},friction:.8}),P=l.circle(f+y,v+T,p,{collisionFilter:{group:g},friction:.8}),M=r.create({bodyB:S,pointB:{x:m,y:T},bodyA:E,stiffness:1,length:0}),O=r.create({bodyB:S,pointB:{x:y,y:T},bodyA:P,stiffness:1,length:0});return h.addBody(C,S),h.addBody(C,E),h.addBody(C,P),h.addConstraint(C,M),h.addConstraint(C,O),C},s.softBody=function(f,v,d,c,p,g,x,m,y,T){y=o.extend({inertia:1/0},y),T=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var C=s.stack(f,v,d,c,p,g,function(S,E){return l.circle(S,E,m,y)});return s.mesh(C,d,c,x,T),C.label="Soft Body",C}})()},function(e,a,i){var s={};e.exports=s,i(84);var h=i(32);(function(){s.pathToVertices=function(r,o){typeof window<"u"&&!("SVGPathSeg"in window)&&h.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,l,f,v,d,c,p,g,x,m,y=[],T,C,S=0,E=0,P=0;o=o||15;var M=function(A,R,F){var I=F%2===1&&F>1;if(!x||A!=x.x||R!=x.y){x&&I?(T=x.x,C=x.y):(T=0,C=0);var D={x:T+A,y:C+R};(I||!x)&&(x=D),y.push(D),E=T+A,P=C+R}},O=function(A){var R=A.pathSegTypeAsLetter.toUpperCase();if(R!=="Z"){switch(R){case"M":case"L":case"T":case"C":case"S":case"Q":E=A.x,P=A.y;break;case"H":E=A.x;break;case"V":P=A.y;break}M(E,P,A.pathSegType)}};for(s._svgPathToAbsolute(r),f=r.getTotalLength(),c=[],u=0;u<r.pathSegList.numberOfItems;u+=1)c.push(r.pathSegList.getItem(u));for(p=c.concat();S<f;){if(m=r.getPathSegAtLength(S),d=c[m],d!=g){for(;p.length&&p[0]!=d;)O(p.shift());g=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":v=r.getPointAtLength(S),M(v.x,v.y,0);break}S+=o}for(u=0,l=p.length;u<l;++u)O(p[u]);return y},s._svgPathToAbsolute=function(r){for(var o,u,l,f,v,d,c=r.pathSegList,p=0,g=0,x=c.numberOfItems,m=0;m<x;++m){var y=c.getItem(m),T=y.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in y&&(p=y.x),"y"in y&&(g=y.y);else switch("x1"in y&&(l=p+y.x1),"x2"in y&&(v=p+y.x2),"y1"in y&&(f=g+y.y1),"y2"in y&&(d=g+y.y2),"x"in y&&(p+=y.x),"y"in y&&(g+=y.y),T){case"m":c.replaceItem(r.createSVGPathSegMovetoAbs(p,g),m);break;case"l":c.replaceItem(r.createSVGPathSegLinetoAbs(p,g),m);break;case"h":c.replaceItem(r.createSVGPathSegLinetoHorizontalAbs(p),m);break;case"v":c.replaceItem(r.createSVGPathSegLinetoVerticalAbs(g),m);break;case"c":c.replaceItem(r.createSVGPathSegCurvetoCubicAbs(p,g,l,f,v,d),m);break;case"s":c.replaceItem(r.createSVGPathSegCurvetoCubicSmoothAbs(p,g,v,d),m);break;case"q":c.replaceItem(r.createSVGPathSegCurvetoQuadraticAbs(p,g,l,f),m);break;case"t":c.replaceItem(r.createSVGPathSegCurvetoQuadraticSmoothAbs(p,g),m);break;case"a":c.replaceItem(r.createSVGPathSegArcAbs(p,g,y.r1,y.r2,y.angle,y.largeArcFlag,y.sweepFlag),m);break;case"z":case"Z":p=o,g=u;break}(T=="M"||T=="m")&&(o=p,u=g)}}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),h=i(41),r=i(0),o=i(249),u=i(9),l=i(2),f=i(126),v=i(64),d=new r({Extends:u,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(p,g,x){u.call(this),this.tile=g,this.world=p,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var m=l(x,"body",null),y=l(x,"addToWorld",!0);if(m)this.setBody(m,y);else{var T=g.getCollisionGroup(),C=l(T,"objects",[]);C.length>0?this.setFromTileCollision(x):this.setFromTileRectangle(x)}},setFromTileRectangle:function(c){c===void 0&&(c={}),f(c,"isStatic")||(c.isStatic=!0),f(c,"addToWorld")||(c.addToWorld=!0);var p=this.tile.getBounds(),g=p.x+p.width/2,x=p.y+p.height/2,m=s.rectangle(g,x,p.width,p.height,c);return this.setBody(m,c.addToWorld),this},setFromTileCollision:function(c){c===void 0&&(c={}),f(c,"isStatic")||(c.isStatic=!0),f(c,"addToWorld")||(c.addToWorld=!0);for(var p=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,x=this.tile.getLeft(),m=this.tile.getTop(),y=this.tile.getCollisionGroup(),T=l(y,"objects",[]),C=[],S=0;S<T.length;S++){var E=T[S],P=x+E.x*p,M=m+E.y*g,O=E.width*p,A=E.height*g,R=null;if(E.rectangle)R=s.rectangle(P+O/2,M+A/2,O,A,c);else if(E.ellipse)R=s.circle(P+O/2,M+A/2,O/2,c);else if(E.polygon||E.polyline){var F=E.polygon?E.polygon:E.polyline,I=F.map(function(z){return{x:z.x*p,y:z.y*g}}),D=v.create(I),N=v.centre(D);P+=N.x,M+=N.y,R=s.fromVertices(P,M,D,c)}R&&C.push(R)}return C.length===1?this.setBody(C[0],c.addToWorld):C.length>1&&(c.parts=C,this.setBody(h.create(c),c.addToWorld)),this},setBody:function(c,p){return p===void 0&&(p=!0),this.body&&this.removeBody(),this.body=c,this.body.gameObject=this,p&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1399);s.Body=i(41),s.Composite=i(118),s.World=i(596),s.Detector=i(273),s.Grid=i(597),s.Pairs=i(598),s.Pair=i(250),s.Query=i(1400),s.Resolver=i(599),s.SAT=i(274),s.Constraint=i(128),s.Common=i(32),s.Engine=i(1401),s.Events=i(166),s.Sleeping=i(165),s.Plugin=i(595),s.Bodies=i(86),s.Composites=i(591),s.Axes=i(271),s.Bounds=i(84),s.Svg=i(592),s.Vector=i(83),s.Vertices=i(64),s.World.add=s.Composite.add,s.World.remove=s.Composite.remove,s.World.addComposite=s.Composite.addComposite,s.World.addBody=s.Composite.addBody,s.World.addConstraint=s.Composite.addConstraint,s.World.clear=s.Composite.clear,e.exports=s},function(e,a,i){var s={};e.exports=s;var h=i(32);(function(){s._registry={},s.register=function(r){if(s.isPlugin(r)||h.warn("Plugin.register:",s.toString(r),"does not implement all required fields."),r.name in s._registry){var o=s._registry[r.name],u=s.versionParse(r.version).number,l=s.versionParse(o.version).number;u>l?(h.warn("Plugin.register:",s.toString(o),"was upgraded to",s.toString(r)),s._registry[r.name]=r):u<l?h.warn("Plugin.register:",s.toString(o),"can not be downgraded to",s.toString(r)):r!==o&&h.warn("Plugin.register:",s.toString(r),"is already registered to different plugin object")}else s._registry[r.name]=r;return r},s.resolve=function(r){return s._registry[s.dependencyParse(r).name]},s.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},s.isPlugin=function(r){return r&&r.name&&r.version&&r.install},s.isUsed=function(r,o){return r.used.indexOf(o)>-1},s.isFor=function(r,o){var u=r.for&&s.dependencyParse(r.for);return!r.for||o.name===u.name&&s.versionSatisfies(o.version,u.range)},s.use=function(r,o){if(r.uses=(r.uses||[]).concat(o||[]),r.uses.length===0){h.warn("Plugin.use:",s.toString(r),"does not specify any dependencies to install.");return}for(var u=s.dependencies(r),l=h.topologicalSort(u),f=[],v=0;v<l.length;v+=1)if(l[v]!==r.name){var d=s.resolve(l[v]);if(!d){f.push("\u274C "+l[v]);continue}s.isUsed(r,d.name)||(s.isFor(d,r)||(h.warn("Plugin.use:",s.toString(d),"is for",d.for,"but installed on",s.toString(r)+"."),d._warned=!0),d.install?d.install(r):(h.warn("Plugin.use:",s.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(f.push("\u{1F536} "+s.toString(d)),delete d._warned):f.push("\u2705 "+s.toString(d)),r.used.push(d.name))}f.length>0&&!d.silent&&h.info(f.join("  "))},s.dependencies=function(r,o){var u=s.dependencyParse(r),l=u.name;if(o=o||{},!(l in o)){r=s.resolve(r)||r,o[l]=h.map(r.uses||[],function(v){s.isPlugin(v)&&s.register(v);var d=s.dependencyParse(v),c=s.resolve(v);return c&&!s.versionSatisfies(c.version,d.range)?(h.warn("Plugin.dependencies:",s.toString(c),"does not satisfy",s.toString(d),"used by",s.toString(u)+"."),c._warned=!0,r._warned=!0):c||(h.warn("Plugin.dependencies:",s.toString(v),"used by",s.toString(u),"could not be resolved."),r._warned=!0),d.name});for(var f=0;f<o[l].length;f+=1)s.dependencies(o[l][f],o);return o}},s.dependencyParse=function(r){if(h.isString(r)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(r)||h.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},s.versionParse=function(r){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(r)||h.warn("Plugin.versionParse:",r,"is not a valid version or range.");var u=r.split("-");r=u[0];var l=isNaN(Number(r[0])),f=l?r.substr(1):r,v=h.map(f.split("."),function(d){return Number(d)});return{isRange:l,version:f,range:r,operator:l?r[0]:"",parts:v,prerelease:u[1],number:v[0]*1e8+v[1]*1e4+v[2]}},s.versionSatisfies=function(r,o){o=o||"*";var u=s.versionParse(o),l=u.parts,f=s.versionParse(r),v=f.parts;if(u.isRange){if(u.operator==="*"||r==="*")return!0;if(u.operator==="~")return v[0]===l[0]&&v[1]===l[1]&&v[2]>=l[2];if(u.operator==="^")return l[0]>0?v[0]===l[0]&&f.number>=u.number:l[1]>0?v[1]===l[1]&&v[2]>=l[2]:v[2]===l[2]}return r===o||r==="*"}})()},function(e,a,i){var s={};e.exports=s;var h=i(118);i(128);var r=i(32);(function(){s.create=function(o){var u=h.create(),l={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return r.extend(u,l,o)}})()},function(e,a,i){var s={};e.exports=s;var h=i(250),r=i(273),o=i(32);(function(){s.create=function(u){var l={controller:s,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(l,u)},s.update=function(u,l,f,v){var d,c,p,g=f.world,x=u.buckets,m,y,T=!1,C=f.metrics;for(C.broadphaseTests=0,d=0;d<l.length;d++){var S=l[d];if(!(S.isSleeping&&!v)&&!(S.bounds.max.x<g.bounds.min.x||S.bounds.min.x>g.bounds.max.x||S.bounds.max.y<g.bounds.min.y||S.bounds.min.y>g.bounds.max.y)){var E=s._getRegion(u,S);if(!S.region||E.id!==S.region.id||v){C.broadphaseTests+=1,(!S.region||v)&&(S.region=E);var P=s._regionUnion(E,S.region);for(c=P.startCol;c<=P.endCol;c++)for(p=P.startRow;p<=P.endRow;p++){y=s._getBucketId(c,p),m=x[y];var M=c>=E.startCol&&c<=E.endCol&&p>=E.startRow&&p<=E.endRow,O=c>=S.region.startCol&&c<=S.region.endCol&&p>=S.region.startRow&&p<=S.region.endRow;!M&&O&&O&&m&&s._bucketRemoveBody(u,m,S),(S.region===E||M&&!O||v)&&(m||(m=s._createBucket(x,y)),s._bucketAddBody(u,m,S))}S.region=E,T=!0}}}T&&(u.pairsList=s._createActivePairsList(u))},s.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},s._regionUnion=function(u,l){var f=Math.min(u.startCol,l.startCol),v=Math.max(u.endCol,l.endCol),d=Math.min(u.startRow,l.startRow),c=Math.max(u.endRow,l.endRow);return s._createRegion(f,v,d,c)},s._getRegion=function(u,l){var f=l.bounds,v=Math.floor(f.min.x/u.bucketWidth),d=Math.floor(f.max.x/u.bucketWidth),c=Math.floor(f.min.y/u.bucketHeight),p=Math.floor(f.max.y/u.bucketHeight);return s._createRegion(v,d,c,p)},s._createRegion=function(u,l,f,v){return{id:u+","+l+","+f+","+v,startCol:u,endCol:l,startRow:f,endRow:v}},s._getBucketId=function(u,l){return"C"+u+"R"+l},s._createBucket=function(u,l){var f=u[l]=[];return f},s._bucketAddBody=function(u,l,f){for(var v=0;v<l.length;v++){var d=l[v];if(!(f.id===d.id||f.isStatic&&d.isStatic)){var c=h.id(f,d),p=u.pairs[c];p?p[2]+=1:u.pairs[c]=[f,d,1]}}l.push(f)},s._bucketRemoveBody=function(u,l,f){l.splice(l.indexOf(f),1);for(var v=0;v<l.length;v++){var d=l[v],c=h.id(f,d),p=u.pairs[c];p&&(p[2]-=1)}},s._createActivePairsList=function(u){var l,f,v=[];l=o.keys(u.pairs);for(var d=0;d<l.length;d++)f=u.pairs[l[d]],f[2]>0?v.push(f):delete u.pairs[l[d]];return v}})()},function(e,a,i){var s={};e.exports=s;var h=i(250),r=i(32);(function(){s._pairMaxIdleLife=1e3,s.create=function(o){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},s.update=function(o,u,l){var f=o.list,v=o.table,d=o.collisionStart,c=o.collisionEnd,p=o.collisionActive,g,x,m,y;for(d.length=0,c.length=0,p.length=0,y=0;y<f.length;y++)f[y].confirmedActive=!1;for(y=0;y<u.length;y++)g=u[y],g.collided&&(x=h.id(g.bodyA,g.bodyB),m=v[x],m?(m.isActive?p.push(m):d.push(m),h.update(m,g,l),m.confirmedActive=!0):(m=h.create(g,l),v[x]=m,d.push(m),f.push(m)));for(y=0;y<f.length;y++)m=f[y],m.isActive&&!m.confirmedActive&&(h.setActive(m,!1,l),c.push(m))},s.removeOld=function(o,u){var l=o.list,f=o.table,v=[],d,c,p,g;for(g=0;g<l.length;g++){if(d=l[g],c=d.collision,c.bodyA.isSleeping||c.bodyB.isSleeping){d.timeUpdated=u;continue}u-d.timeUpdated>s._pairMaxIdleLife&&v.push(g)}for(g=0;g<v.length;g++)p=v[g]-g,d=l[p],delete f[d.id],l.splice(p,1)},s.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(e,a,i){var s={};e.exports=s;var h=i(64),r=i(83),o=i(32),u=i(84);(function(){s._restingThresh=4,s._restingThreshTangent=6,s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s.preSolvePosition=function(l){var f,v,d;for(f=0;f<l.length;f++)v=l[f],v.isActive&&(d=v.activeContacts.length,v.collision.parentA.totalContacts+=d,v.collision.parentB.totalContacts+=d)},s.solvePosition=function(l,f,v){var d,c,p,g,x,m,y,T,C,S,E,P,M,O,A,R,F=v*s._positionDampen;for(d=0;d<f.length;d++){var I=f[d];I.previousPositionImpulse.x=I.positionImpulse.x,I.previousPositionImpulse.y=I.positionImpulse.y}for(d=0;d<l.length;d++)g=l[d],!(!g.isActive||g.isSensor)&&(x=g.collision,m=x.parentA,y=x.parentB,T=x.normal,E=m.previousPositionImpulse,P=y.previousPositionImpulse,S=x.penetration,O=P.x-E.x+S.x,A=P.y-E.y+S.y,c=T.x,p=T.y,C=c*O+p*A,g.separation=C,R=(C-g.slop)*F,(m.isStatic||y.isStatic)&&(R*=2),m.isStatic||m.isSleeping||(M=R/m.totalContacts,m.positionImpulse.x+=c*M,m.positionImpulse.y+=p*M),y.isStatic||y.isSleeping||(M=R/y.totalContacts,y.positionImpulse.x-=c*M,y.positionImpulse.y-=p*M))},s.postSolvePosition=function(l){for(var f=0;f<l.length;f++){var v=l[f];if(v.totalContacts=0,v.positionImpulse.x!==0||v.positionImpulse.y!==0){for(var d=0;d<v.parts.length;d++){var c=v.parts[d];h.translate(c.vertices,v.positionImpulse),u.update(c.bounds,c.vertices,v.velocity),c.position.x+=v.positionImpulse.x,c.position.y+=v.positionImpulse.y}v.positionPrev.x+=v.positionImpulse.x,v.positionPrev.y+=v.positionImpulse.y,r.dot(v.positionImpulse,v.velocity)<0?(v.positionImpulse.x=0,v.positionImpulse.y=0):(v.positionImpulse.x*=s._positionWarming,v.positionImpulse.y*=s._positionWarming)}}},s.preSolveVelocity=function(l){var f,v,d,c,p,g,x,m,y,T,C,S,E,P,M=r._temp[0],O=r._temp[1];for(f=0;f<l.length;f++)if(d=l[f],!(!d.isActive||d.isSensor))for(c=d.activeContacts,p=d.collision,g=p.parentA,x=p.parentB,m=p.normal,y=p.tangent,v=0;v<c.length;v++)T=c[v],C=T.vertex,S=T.normalImpulse,E=T.tangentImpulse,(S!==0||E!==0)&&(M.x=m.x*S+y.x*E,M.y=m.y*S+y.y*E,g.isStatic||g.isSleeping||(P=r.sub(C,g.position,O),g.positionPrev.x+=M.x*g.inverseMass,g.positionPrev.y+=M.y*g.inverseMass,g.anglePrev+=r.cross(P,M)*g.inverseInertia),x.isStatic||x.isSleeping||(P=r.sub(C,x.position,O),x.positionPrev.x-=M.x*x.inverseMass,x.positionPrev.y-=M.y*x.inverseMass,x.anglePrev-=r.cross(P,M)*x.inverseInertia))},s.solveVelocity=function(l,f){for(var v=f*f,d=r._temp[0],c=r._temp[1],p=r._temp[2],g=r._temp[3],x=r._temp[4],m=r._temp[5],y=0;y<l.length;y++){var T=l[y];if(!(!T.isActive||T.isSensor)){var C=T.collision,S=C.parentA,E=C.parentB,P=C.normal,M=C.tangent,O=T.activeContacts,A=1/O.length;S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var R=0;R<O.length;R++){var F=O[R],I=F.vertex,D=r.sub(I,S.position,c),N=r.sub(I,E.position,p),z=r.add(S.velocity,r.mult(r.perp(D),S.angularVelocity),g),U=r.add(E.velocity,r.mult(r.perp(N),E.angularVelocity),x),W=r.sub(z,U,m),w=r.dot(P,W),L=r.dot(M,W),B=Math.abs(L),b=o.sign(L),G=(1+T.restitution)*w,Y=o.clamp(T.separation+w,0,1)*s._frictionNormalMultiplier,V=L,X=1/0;B>T.friction*T.frictionStatic*Y*v&&(X=B,V=o.clamp(T.friction*b*v,-X,X));var H=r.cross(D,P),k=r.cross(N,P),$=A/(S.inverseMass+E.inverseMass+S.inverseInertia*H*H+E.inverseInertia*k*k);if(G*=$,V*=$,w<0&&w*w>s._restingThresh*v)F.normalImpulse=0;else{var K=F.normalImpulse;F.normalImpulse=Math.min(F.normalImpulse+G,0),G=F.normalImpulse-K}if(L*L>s._restingThreshTangent*v)F.tangentImpulse=0;else{var Z=F.tangentImpulse;F.tangentImpulse=o.clamp(F.tangentImpulse+V,-X,X),V=F.tangentImpulse-Z}d.x=P.x*G+M.x*V,d.y=P.y*G+M.y*V,S.isStatic||S.isSleeping||(S.positionPrev.x+=d.x*S.inverseMass,S.positionPrev.y+=d.y*S.inverseMass,S.anglePrev+=r.cross(D,d)*S.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=d.x*E.inverseMass,E.positionPrev.y-=d.y*E.inverseMass,E.anglePrev-=r.cross(N,d)*E.inverseInertia)}}}}})()},function(e,a){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}e.exports=i},function(e,a,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(276),h=function(r,o,u,l){for(var f=r[0],v=1;v<r.length;v++){var d=r[v];s(d,f,o,u,l),f=d}return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"angle",o,u,l,f)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){for(var o=0;o<s.length;o++){var u=s[o];h.call(r,u)}return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){r===void 0&&(r=0);for(var o=r;o<s.length;o++){var u=s[o],l=!0;for(var f in h)u[f]!==h[f]&&(l=!1);if(l)return u}return null};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){r===void 0&&(r=0);for(var o=r;o<s.length;o++){var u=s[o],l=!0;for(var f in h)u[f]!==h[f]&&(l=!1);if(l)return u}return null};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(289),h=i(123),r=i(2),o=i(1),u=i(129),l=new u({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),f=function(v,d){d===void 0&&(d={});var c=d.hasOwnProperty("width"),p=d.hasOwnProperty("height"),g=r(d,"width",-1),x=r(d,"height",-1),m=r(d,"cellWidth",1),y=r(d,"cellHeight",m),T=r(d,"position",h.TOP_LEFT),C=r(d,"x",0),S=r(d,"y",0),E=0,P=0,M=g*m,O=x*y;l.setPosition(C,S),l.setSize(m,y);for(var A=0;A<v.length;A++)if(s(v[A],l,T),c&&g===-1)l.x+=m;else if(p&&x===-1)l.y+=y;else if(p&&!c){if(P+=y,l.y+=y,P===O&&(P=0,E+=m,l.y=S,l.x+=m,E===M))break}else if(E+=m,l.x+=m,E===M&&(E=0,P+=y,l.x=C,l.y+=y,P===O))break;return v};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=2,r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,u,l,f){return o===void 0&&(o=1),u===void 0?this.alpha=o:(this._alphaTL=s(o,0,1),this._alphaTR=s(u,0,1),this._alphaBL=s(l,0,1),this._alphaBR=s(f,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var u=s(o,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=~h:this.renderFlags|=h}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var u=s(o,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=h)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var u=s(o,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=h)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var u=s(o,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=h)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var u=s(o,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=h)}}};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}},setSize:function(s,h){return this.width=s,this.height=h,this},setDisplaySize:function(s,h){return this.displayWidth=s,this.displayHeight=h,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={texture:null,frame:null,isCropped:!1,setCrop:function(s,h,r,o){if(s===void 0)this.isCropped=!1;else if(this.frame){if(typeof s=="number")this.frame.setCropUVs(this._crop,s,h,r,o,this.flipX,this.flipY);else{var u=s;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(s){return this.flipX=s,this},setFlipY:function(s){return this.flipY=s,this},setFlip:function(s,h){return this.flipX=s,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=i(308),r=i(3),o={prepareBoundsOutput:function(u,l){if(l===void 0&&(l=!1),this.rotation!==0&&h(u,this.x,this.y,this.rotation),l&&this.parentContainer){var f=this.parentContainer.getBoundsTransformMatrix();f.transformPoint(u.x,u.y,u)}return u},getCenter:function(u){return u===void 0&&(u=new r),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,u},getTopLeft:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getTopCenter:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getTopRight:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(u,l)},getLeftCenter:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,l)},getRightCenter:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(u,l)},getBottomLeft:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBottomCenter:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBottomRight:function(u,l){return u||(u=new r),u.x=this.x-this.displayWidth*this.originX+this.displayWidth,u.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(u,l)},getBounds:function(u){u===void 0&&(u=new s);var l,f,v,d,c,p,g,x;if(this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(u),m.transformPoint(u.x,u.y,u),l=u.x,f=u.y,this.getTopRight(u),m.transformPoint(u.x,u.y,u),v=u.x,d=u.y,this.getBottomLeft(u),m.transformPoint(u.x,u.y,u),c=u.x,p=u.y,this.getBottomRight(u),m.transformPoint(u.x,u.y,u),g=u.x,x=u.y}else this.getTopLeft(u),l=u.x,f=u.y,this.getTopRight(u),v=u.x,d=u.y,this.getBottomLeft(u),c=u.x,p=u.y,this.getBottomRight(u),g=u.x,x=u.y;return u.x=Math.min(l,v,c,g),u.y=Math.min(f,d,p,x),u.width=Math.max(l,v,c,g)-u.x,u.height=Math.max(f,d,p,x)-u.y,u}};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="blur"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextlost"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="contextrestored"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="focus"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="hidden"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="poststep"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prestep"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="step"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="visible"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(s){this._displayOriginX=s,this.originX=s/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(s){this._displayOriginY=s,this.originY=s/this.height}},setOrigin:function(s,h){return s===void 0&&(s=.5),h===void 0&&(h=s),this.originX=s,this.originY=h,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(s,h){return s===void 0&&(s=0),h===void 0&&(h=s),this.displayOriginX=s,this.displayOriginY=h,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(36),h=i(99),r=i(6),o=i(100),u=i(3),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(f,v){v===void 0&&(v=this.pathConfig);var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this.path=f,v&&this.startFollow(v),this},setRotateToPath:function(f,v){return v===void 0&&(v=0),this.rotateToPath=f,this.pathRotationOffset=v,this},isFollowing:function(){var f=this.pathTween;return f&&f.isPlaying()},startFollow:function(f,v){f===void 0&&(f={}),v===void 0&&(v=0);var d=this.pathTween;d&&d.isPlaying()&&d.stop(),typeof f=="number"&&(f={duration:f}),f.from=r(f,"from",0),f.to=r(f,"to",1);var c=h(f,"positionOnPath",!1);this.rotateToPath=h(f,"rotateToPath",!1),this.pathRotationOffset=r(f,"rotationOffset",0);var p=r(f,"startAt",v);if(p&&(f.onStart=function(x){var m=x.data[0];m.progress=p,m.elapsed=m.duration*p;var y=m.ease(m.progress);m.current=m.start+(m.end-m.start)*y,m.target[m.key]=m.current}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(f),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var g=this.path.getPoint(.1);this.rotation=Math.atan2(g.y-this.y,g.x-this.x)+s(this.pathRotationOffset)}return this.pathConfig=f,this},pauseFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.pause(),this},resumeFollow:function(){var f=this.pathTween;return f&&f.isPaused()&&f.resume(),this},stopFollow:function(){var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this},pathUpdate:function(){var f=this.pathTween;if(f){var v=f.data[0],d=this.pathDelta,c=this.pathVector;if(d.copy(c).negate(),v.state===o.COMPLETE){this.path.getPoint(1,c),d.add(c),c.add(this.pathOffset),this.setPosition(c.x,c.y);return}else if(v.state!==o.PLAYING_FORWARD&&v.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(f.getValue(),c),d.add(c),c.add(this.pathOffset);var p=this.x,g=this.y;this.setPosition(c.x,c.y);var x=this.x-p,m=this.y-g;if(x===0&&m===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(m,x)+s(this.pathRotationOffset))}}};e.exports=l},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(s){this.scaleX=s/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(s){this.scaleY=s/this.frame.realHeight}},setSizeToFrame:function(s){return s===void 0&&(s=this.frame),this.width=s.realWidth,this.height=s.realHeight,this},setSize:function(s,h){return this.width=s,this.height=h,this},setDisplaySize:function(s,h){return this.displayWidth=s,this.displayHeight=h,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,s={texture:null,frame:null,isCropped:!1,setTexture:function(h,r){return this.texture=this.scene.sys.textures.get(h),this.setFrame(r)},setFrame:function(h,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=8,s={texture:null,frame:null,isCropped:!1,setCrop:function(h,r,o,u){if(h===void 0)this.isCropped=!1;else if(this.frame){if(typeof h=="number")this.frame.setCropUVs(this._crop,h,r,o,u,this.flipX,this.flipY);else{var l=h;this.frame.setCropUVs(this._crop,l.x,l.y,l.width,l.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(h,r){return this.texture=this.scene.sys.textures.get(h),this.setFrame(r)},setFrame:function(h,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(h),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~i:this.renderFlags|=i,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(s,h,r,o){return s===void 0&&(s=16777215),h===void 0&&(h=s,r=s,o=s),this.tintTopLeft=s,this.tintTopRight=h,this.tintBottomLeft=r,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(s,h,r,o){return this.setTint(s,h,r,o),this.tintFill=!0,this},tint:{set:function(s){this.setTint(s,s,s,s)}},isTinted:{get:function(){var s=16777215;return this.tintFill||this.tintTopLeft!==s||this.tintTopRight!==s||this.tintBottomLeft!==s||this.tintBottomRight!==s}}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="changedata-"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedata"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="setdata"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="created"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="error"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeked"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seeking"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="timeout"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addedtoscene"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="create"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postupdate"},function(e,a){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removedfromscene"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="render"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleep"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioncomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitioninit"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionout"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="transitionwake"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wake"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"alpha",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"x",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f,v,d){return u==null&&(u=o),s(r,"x",o,l,v,d),s(r,"y",u,f,v,d)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"y",o,u,l,f)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var u=r,l=(o-r)/s.length,f=0;f<s.length;f++)s[f].x=h.x+h.radius*Math.cos(u),s[f].y=h.y+h.radius*Math.sin(u),u+=l;return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var u=r,l=(o-r)/s.length,f=h.width/2,v=h.height/2,d=0;d<s.length;d++)s[d].x=h.x+f*Math.cos(u),s[d].y=h.y+v*Math.sin(u),u+=l;return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(172),h=function(r,o){for(var u=s(o,r.length),l=0;l<r.length;l++){var f=r[l],v=u[l];f.x=v.x,f.y=v.y}return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(316),h=i(178),r=i(179),o=function(u,l,f){f===void 0&&(f=0);var v=s(l,!1,u.length);f>0?h(v,f):f<0&&r(v,Math.abs(f));for(var d=0;d<u.length;d++)u[d].x=v[d].x,u[d].y=v[d].y;return u};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(317),h=function(r,o,u){var l=s({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},u),f=s({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},u),v=s({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},u);l.pop(),f.pop(),v.pop(),l=l.concat(f,v);for(var d=l.length/r.length,c=0,p=0;p<r.length;p++){var g=r[p],x=l[Math.floor(c)];g.x=x.x,g.y=x.y,c+=d}return r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){for(var o=0;o<s.length;o++){var u=s[o];u.anims&&u.anims.play(h,r)}return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(170),h=function(r,o){for(var u=0;u<r.length;u++)s(o,r[u]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(180),h=function(r,o){for(var u=0;u<r.length;u++)s(o,r[u]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(173),h=function(r,o){for(var u=0;u<r.length;u++)s(o,r[u]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(174),h=function(r,o){for(var u=0;u<r.length;u++)s(o,r[u]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(181),h=function(r,o){for(var u=0;u<r.length;u++)s(o,r[u]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"rotation",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(182),h=i(50),r=function(o,u,l){for(var f=u.x,v=u.y,d=0;d<o.length;d++){var c=o[d];s(c,f,v,l,Math.max(1,h(c.x,c.y,f,v)))}return o};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(182),h=function(r,o,u,l){var f=o.x,v=o.y;if(l===0)return r;for(var d=0;d<r.length;d++)s(r[d],f,v,u,l);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"scaleX",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f,v,d){return u==null&&(u=o),s(r,"scaleX",o,l,v,d),s(r,"scaleY",u,f,v,d)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(46),h=function(r,o,u,l,f){return s(r,"scaleY",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"alpha",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l){return s(r,"blendMode",o,0,u,l)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"depth",o,u,l,f)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){for(var o=0;o<s.length;o++)s[o].setInteractive(h,r);return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f,v,d){return u==null&&(u=o),s(r,"originX",o,l,v,d),s(r,"originY",u,f,v,d),r.forEach(function(c){c.updateDisplayOrigin()}),r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"rotation",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f,v,d){return u==null&&(u=o),s(r,"scaleX",o,l,v,d),s(r,"scaleY",u,f,v,d)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"scaleX",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"scaleY",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f,v,d){return u==null&&(u=o),s(r,"scrollFactorX",o,l,v,d),s(r,"scrollFactorY",u,f,v,d)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"scrollFactorX",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"scrollFactorY",o,u,l,f)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){for(var l=0;l<s.length;l++)s[l].setTint(h,r,o,u);return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l){return s(r,"visible",o,0,u,l)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"x",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f,v,d){return u==null&&(u=o),s(r,"x",o,l,v,d),s(r,"y",u,f,v,d)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(27),h=function(r,o,u,l,f){return s(r,"y",o,u,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l,f){l===void 0&&(l=0),f===void 0&&(f=new s);var v,d;if(r.length>1){var c,p,g,x;if(l===0){var m=r.length-1;for(v=r[m].x,d=r[m].y,c=m-1;c>=0;c--)x=r[c],p=x.x,g=x.y,x.x=v,x.y=d,v=p,d=g;r[m].x=o,r[m].y=u}else{for(v=r[0].x,d=r[0].y,c=1;c<r.length;c++)x=r[c],p=x.x,g=x.y,x.x=v,x.y=d,v=p,d=g;r[0].x=o,r[0].y=u}}else v=r[0].x,d=r[0].y,r[0].x=o,r[0].y=u;return f.x=v,f.y=d,f};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(131),h=function(r){return s(r)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(183),h=function(r,o,u,l,f){f===void 0&&(f=!1);var v=Math.abs(l-u)/r.length,d;if(f)for(d=0;d<r.length;d++)r[d][o]+=s(d*v,u,l);else for(d=0;d<r.length;d++)r[d][o]=s(d*v,u,l);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(184),h=function(r,o,u,l,f){f===void 0&&(f=!1);var v=Math.abs(l-u)/r.length,d;if(f)for(d=0;d<r.length;d++)r[d][o]+=s(d*v,u,l);else for(d=0;d<r.length;d++)r[d][o]=s(d*v,u,l);return r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){u===void 0&&(u=!1);var l=Math.abs(o-r)/s.length,f;if(u)for(f=0;f<s.length;f++)s[f][h]+=f*l+r;else for(f=0;f<s.length;f++)s[f][h]=f*l+r;return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var h=0;h<s.length;h++)s[h].visible=!s[h].visible;return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(68),h=function(r,o,u){u===void 0&&(u=0);for(var l=0;l<r.length;l++){var f=r[l];f.x=s(f.x,o.left-u,o.right+u),f.y=s(f.y,o.top-u,o.bottom+u)}return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Animation:i(185),AnimationFrame:i(319),AnimationManager:i(321),AnimationState:i(164),Events:i(132)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationcomplete-"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrepeat"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationrestart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationstop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="animationupdate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BaseCache:i(323),CacheManager:i(325),Events:i(324)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Controls:i(739),Scene2D:i(742)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FixedKeyControl:i(740),SmoothedKeyControl:i(741)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(6),r=new s({initialize:function(u){this.camera=h(u,"camera",null),this.left=h(u,"left",null),this.right=h(u,"right",null),this.up=h(u,"up",null),this.down=h(u,"down",null),this.zoomIn=h(u,"zoomIn",null),this.zoomOut=h(u,"zoomOut",null),this.zoomSpeed=h(u,"zoomSpeed",.01),this.minZoom=h(u,"minZoom",.001),this.maxZoom=h(u,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=h(u,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=h(u,"speed.x",0),this.speedY=h(u,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var u=this.camera;this.up&&this.up.isDown?u.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(u.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?u.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(u.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(u.zoom-=this.zoomSpeed,u.zoom<this.minZoom&&(u.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(u.zoom+=this.zoomSpeed,u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(6),r=new s({initialize:function(u){this.camera=h(u,"camera",null),this.left=h(u,"left",null),this.right=h(u,"right",null),this.up=h(u,"up",null),this.down=h(u,"down",null),this.zoomIn=h(u,"zoomIn",null),this.zoomOut=h(u,"zoomOut",null),this.zoomSpeed=h(u,"zoomSpeed",.01),this.minZoom=h(u,"minZoom",.001),this.maxZoom=h(u,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=h(u,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=h(u,"acceleration.x",0),this.accelY=h(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var f=h(u,"drag",null);typeof f=="number"?(this.dragX=f,this.dragY=f):(this.dragX=h(u,"drag.x",0),this.dragY=h(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=h(u,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=h(u,"maxSpeed.x",0),this.maxSpeedY=h(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var u=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(u.scrollX-=this._speedX*o|0),this._speedY!==0&&(u.scrollY-=this._speedY*o|0),this._zoom!==0&&(u.zoom+=this._zoom,u.zoom<this.minZoom?u.zoom=this.minZoom:u.zoom>this.maxZoom&&(u.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Camera:i(326),BaseCamera:i(133),CameraManager:i(799),Effects:i(333),Events:i(37)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameradestroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeincomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeinstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutcomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerafadeoutstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashcomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="cameraflashstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="followupdate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapancomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerapanstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postrender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="prerender"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatecomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerarotatestart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakecomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerashakestart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomcomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="camerazoomstart"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(37),o=new h({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,l,f,v,d,c,p,g){if(u===void 0&&(u=!0),l===void 0&&(l=1e3),f===void 0&&(f=0),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),!c&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=u,this.progress=0,this.red=f,this.green=v,this.blue=d,this.alpha=u?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g;var x=u?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(x,this.camera,this,l,f,v,d),this.camera},update:function(u,l){!this.isRunning||(this._elapsed+=l,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(u){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(u,l){if(!this.isRunning&&!this.isComplete)return!1;var f=this.camera,v=this.red/255,d=this.green/255,c=this.blue/255;return u.drawFillRect(f.x,f.y,f.width,f.height,l(c,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var u=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(u,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(37),o=new h({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(u,l,f,v,d,c,p){return u===void 0&&(u=250),l===void 0&&(l=255),f===void 0&&(f=255),v===void 0&&(v=255),d===void 0&&(d=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene),!d&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=u,this.progress=0,this.red=l,this.green=f,this.blue=v,this.alpha=1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(r.FLASH_START,this.camera,this,u,l,f,v),this.camera)},update:function(u,l){!this.isRunning||(this._elapsed+=l,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(u){if(!this.isRunning)return!1;var l=this.camera;return u.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",u.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(u,l){if(!this.isRunning)return!1;var f=this.camera,v=this.red/255,d=this.green/255,c=this.blue/255;return u.drawFillRect(f.x,f.y,f.width,f.height,l(c,d,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(134),o=i(37),u=i(3),l=new h({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new u,this.current=new u,this.destination=new u,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(f,v,d,c,p,g,x){d===void 0&&(d=1e3),c===void 0&&(c=r.Linear),p===void 0&&(p=!1),g===void 0&&(g=null),x===void 0&&(x=this.camera.scene);var m=this.camera;return!p&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source.set(m.scrollX,m.scrollY),this.destination.set(f,v),m.getScroll(f,v,this.current),typeof c=="string"&&r.hasOwnProperty(c)?this.ease=r[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=x,this.camera.emit(o.PAN_START,this.camera,this,d,f,v)),m},update:function(f,v){if(!!this.isRunning){this._elapsed+=v;var d=s(this._elapsed/this.duration,0,1);this.progress=d;var c=this.camera;if(this._elapsed<this.duration){var p=this.ease(d);c.getScroll(this.destination.x,this.destination.y,this.current);var g=this.source.x+(this.current.x-this.source.x)*p,x=this.source.y+(this.current.y-this.source.y)*p;c.setScroll(g,x),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,d,g,x)}else c.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,d,c.scrollX,c.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=l},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=1.70158),s*s*((h+1)*s-h)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=1.70158),--s*s*((h+1)*s+h)+1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=1.70158);var r=h*1.525;return(s*=2)<1?.5*(s*s*((r+1)*s-r)):.5*((s-=2)*s*((r+1)*s+r)+2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s=1-s,s<.36363636363636365?1-7.5625*s*s:s<.7272727272727273?1-(7.5625*(s-=.5454545454545454)*s+.75):s<.9090909090909091?1-(7.5625*(s-=.8181818181818182)*s+.9375):1-(7.5625*(s-=.9545454545454546)*s+.984375)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s<.36363636363636365?7.5625*s*s:s<.7272727272727273?7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?7.5625*(s-=.8181818181818182)*s+.9375:7.5625*(s-=.9545454545454546)*s+.984375};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=!1;return s<.5?(s=1-s*2,h=!0):s=s*2-1,s<.36363636363636365?s=7.5625*s*s:s<.7272727272727273?s=7.5625*(s-=.5454545454545454)*s+.75:s<.9090909090909091?s=7.5625*(s-=.8181818181818182)*s+.9375:s=7.5625*(s-=.9545454545454546)*s+.984375,h?(1-s)*.5:s*.5+.5};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 1-Math.sqrt(1-s*s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.sqrt(1- --s*s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s*s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return--s*s*s+1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),s===0)return 0;if(s===1)return 1;var o=r/4;return h<1?h=1:o=r*Math.asin(1/h)/(2*Math.PI),-(h*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/r))};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),s===0)return 0;if(s===1)return 1;var o=r/4;return h<1?h=1:o=r*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/r)+1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h===void 0&&(h=.1),r===void 0&&(r=.1),s===0)return 0;if(s===1)return 1;var o=r/4;return h<1?h=1:o=r*Math.asin(1/h)/(2*Math.PI),(s*=2)<1?-.5*(h*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/r)):h*Math.pow(2,-10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/r)*.5+1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.pow(2,10*(s-1))-.001};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 1-Math.pow(2,-10*s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*Math.pow(2,10*(s-1)):.5*(2-Math.pow(2,-10*(s-1)))};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*(2-s)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s*s*s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return 1- --s*s*s*s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s*s*s*s*s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return--s*s*s*s*s+1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===0?0:s===1?1:1-Math.cos(s*Math.PI/2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===0?0:s===1?1:Math.sin(s*Math.PI/2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===0?0:s===1?1:.5*(1-Math.cos(Math.PI*s))};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=1),s<=0?0:s>=1?1:((h*s|0)+1)*(1/h)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(37),o=i(3),u=new h({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,f,v,d,c){return l===void 0&&(l=100),f===void 0&&(f=.05),v===void 0&&(v=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,typeof f=="number"?this.intensity.set(f):this.intensity.set(f.x,f.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=d,this._onUpdateScope=c,this.camera.emit(r.SHAKE_START,this.camera,this,l,f),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,f){if(!!this.isRunning)if(this._elapsed+=f,this.progress=s(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,d=this.camera.width,c=this.camera.height,p=this.camera.zoom;this._offsetX=(Math.random()*v.x*d*2-v.x*d)*p,this._offsetY=(Math.random()*v.y*c*2-v.y*c)*p,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});e.exports=u},function(e,a,i){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var s=i(18),h=i(0),r=i(37),o=i(134),u=new h({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,f,v,d,c,p,g){v===void 0&&(v=1e3),d===void 0&&(d=o.Linear),c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=this.camera.scene),f===void 0&&(f=!1),this.shortestPath=f;var x=l;l<0?(x=-1*l,this.clockwise=!1):this.clockwise=!0;var m=360*Math.PI/180;x=x-Math.floor(x/m)*m;var y=this.camera;if(!c&&this.isRunning)return y;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=y.rotation,this.destination=x,typeof d=="string"&&o.hasOwnProperty(d)?this.ease=o[d]:typeof d=="function"&&(this.ease=d),this._elapsed=0,this._onUpdate=p,this._onUpdateScope=g,this.shortestPath){var T=0,C=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+m)-this.source,this.source>this.destination?C=Math.abs(this.source-this.destination):C=Math.abs(this.source+m)-this.destination,T<C?this.clockwise=!0:T>C&&(this.clockwise=!1)}return this.camera.emit(r.ROTATE_START,this.camera,this,v,x),y},update:function(l,f){if(!!this.isRunning){this._elapsed+=f;var v=s(this._elapsed/this.duration,0,1);this.progress=v;var d=this.camera;if(this._elapsed<this.duration){var c=this.ease(v);this.current=d.rotation;var p=0,g=360*Math.PI/180,x=this.destination,m=this.current;this.clockwise===!1&&(x=this.current,m=this.destination),x>=m?p=Math.abs(x-m):p=Math.abs(x+g)-m;var y=0;this.clockwise?y=d.rotation+p*c:y=d.rotation-p*c,d.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,y)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(134),o=i(37),u=new h({initialize:function(f){this.camera=f,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,f,v,d,c,p){f===void 0&&(f=1e3),v===void 0&&(v=r.Linear),d===void 0&&(d=!1),c===void 0&&(c=null),p===void 0&&(p=this.camera.scene);var g=this.camera;return!d&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source=g.zoom,this.destination=l,typeof v=="string"&&r.hasOwnProperty(v)?this.ease=r[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=p,this.camera.emit(o.ZOOM_START,this.camera,this,f,l)),g},update:function(l,f){!this.isRunning||(this._elapsed+=f,this.progress=s(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(326),h=i(0),r=i(2),o=i(24),u=i(57),l=i(104),f=i(20),v=new h({initialize:function(c){this.scene=c,this.systems=c.sys,this.roundPixels=c.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,c.sys.events.once(f.BOOT,this.boot,this),c.sys.events.on(f.START,this.start,this)},boot:function(){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new s(0,0,d.scale.width,d.scale.height).setScene(this.scene),d.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){if(!this.main){var d=this.systems;d.settings.cameras?this.fromJSON(d.settings.cameras):this.add(),this.main=this.cameras[0]}var c=this.systems.events;c.on(f.UPDATE,this.update,this),c.once(f.SHUTDOWN,this.shutdown,this)},add:function(d,c,p,g,x,m){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),x===void 0&&(x=!1),m===void 0&&(m="");var y=new s(d,c,p,g);return y.setName(m),y.setScene(this.scene),y.setRoundPixels(this.roundPixels),y.id=this.getNextID(),this.cameras.push(y),x&&(this.main=y),y},addExisting:function(d,c){c===void 0&&(c=!1);var p=this.cameras.indexOf(d);return p===-1?(d.id=this.getNextID(),d.setRoundPixels(this.roundPixels),this.cameras.push(d),c&&(this.main=d),d):null},getNextID:function(){for(var d=this.cameras,c=1,p=0;p<32;p++){for(var g=!1,x=0;x<d.length;x++){var m=d[x];if(m&&m.id===c){g=!0;continue}}if(g)c=c<<1;else return c}return 0},getTotal:function(d){d===void 0&&(d=!1);for(var c=0,p=this.cameras,g=0;g<p.length;g++){var x=p[g];(!d||d&&x.visible)&&c++}return c},fromJSON:function(d){Array.isArray(d)||(d=[d]);for(var c=this.scene.sys.scale.width,p=this.scene.sys.scale.height,g=0;g<d.length;g++){var x=d[g],m=r(x,"x",0),y=r(x,"y",0),T=r(x,"width",c),C=r(x,"height",p),S=this.add(m,y,T,C);S.name=r(x,"name",""),S.zoom=r(x,"zoom",1),S.rotation=r(x,"rotation",0),S.scrollX=r(x,"scrollX",0),S.scrollY=r(x,"scrollY",0),S.roundPixels=r(x,"roundPixels",!1),S.visible=r(x,"visible",!0);var E=r(x,"backgroundColor",!1);E&&S.setBackgroundColor(E);var P=r(x,"bounds",null);if(P){var M=r(P,"x",0),O=r(P,"y",0),A=r(P,"width",c),R=r(P,"height",p);S.setBounds(M,O,A,R)}}return this},getCamera:function(d){for(var c=this.cameras,p=0;p<c.length;p++)if(c[p].name===d)return c[p];return null},getCamerasBelowPointer:function(d){for(var c=this.cameras,p=d.x,g=d.y,x=[],m=0;m<c.length;m++){var y=c[m];y.visible&&y.inputEnabled&&u(y,p,g)&&x.unshift(y)}return x},remove:function(d,c){c===void 0&&(c=!0),Array.isArray(d)||(d=[d]);for(var p=0,g=this.cameras,x=0;x<d.length;x++){var m=g.indexOf(d[x]);m!==-1&&(c?g[m].destroy():g[m].renderList=[],g.splice(m,1),p++)}return!this.main&&g[0]&&(this.main=g[0]),p},render:function(d,c){for(var p=this.scene,g=this.cameras,x=0;x<this.cameras.length;x++){var m=g[x];if(m.visible&&m.alpha>0){m.preRender();var y=this.getVisibleChildren(c.getChildren(),m);d.render(p,y,m)}}},getVisibleChildren:function(d,c){for(var p=[],g=0;g<d.length;g++){var x=d[g];x.willRender(c)&&p.push(x)}return p},resetAll:function(){for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(d,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].update(d,c)},onResize:function(d,c,p,g,x){for(var m=0;m<this.cameras.length;m++){var y=this.cameras[m];y._x===0&&y._y===0&&y._width===g&&y._height===x&&y.setSize(c.width,c.height)}},resize:function(d,c){for(var p=0;p<this.cameras.length;p++)this.cameras[p].setSize(d,c)},shutdown:function(){this.main=void 0;for(var d=0;d<this.cameras.length;d++)this.cameras[d].destroy();this.cameras=[];var c=this.systems.events;c.off(f.UPDATE,this.update,this),c.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",v,"cameras"),e.exports=v},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="enterfullscreen"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenfailed"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fullscreenunsupported"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="leavefullscreen"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="orientationchange"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resize"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Config:i(346),CreateRenderer:i(366),DebugHeader:i(384),Events:i(22),TimeStep:i(385),VisibilityHandler:i(387)}},function(e,a){var i=e.exports={},s,h;function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=r}catch{s=r}try{typeof clearTimeout=="function"?h=clearTimeout:h=o}catch{h=o}})();function u(y){if(s===setTimeout)return setTimeout(y,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(y,0);try{return s(y,0)}catch{try{return s.call(null,y,0)}catch{return s.call(this,y,0)}}}function l(y){if(h===clearTimeout)return clearTimeout(y);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(y);try{return h(y)}catch{try{return h.call(null,y)}catch{return h.call(this,y)}}}var f=[],v=!1,d,c=-1;function p(){!v||!d||(v=!1,d.length?f=d.concat(f):c=-1,f.length&&g())}function g(){if(!v){var y=u(p);v=!0;for(var T=f.length;T;){for(d=f,f=[];++c<T;)d&&d[c].run();c=-1,T=f.length}d=null,v=!1,l(y)}}i.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)T[C-1]=arguments[C];f.push(new x(y,T)),f.length===1&&!v&&u(g)};function x(y,T){this.fun=y,this.array=T}x.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function m(){}i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(136),h={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function r(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(h.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(h.mspointer=!0),navigator.getGamepads&&(h.gamepads=!0),"onwheel"in window||s.ie&&"WheelEvent"in window?h.wheelEvent="wheel":"onmousewheel"in window?h.wheelEvent="mousewheel":s.firefox&&"MouseScrollEvent"in window&&(h.wheelEvent="DOMMouseScroll")),h}e.exports=r()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(136),h={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function r(){if(typeof importScripts=="function")return h;h.audioData=!!window.Audio,h.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),u=!!o.canPlayType;try{if(u&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(h.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(h.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(h.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(h.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(h.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(h.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(s.edge)h.dolby=!0;else if(s.safari&&s.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var l=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10);(l===10&&f>=11||l>10)&&(h.dolby=!0)}}}catch{}return h}e.exports=r()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function s(){if(typeof importScripts=="function")return i;var h=document.createElement("video"),r=!!h.canPlayType;try{r&&(h.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(i.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.h264=!0,i.mp4=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(i.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(i.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(i.hls=!0))}catch{}return i}e.exports=s()},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={available:!1,cancel:"",keyboard:!1,request:""};function s(){if(typeof importScripts=="function")return i;var h,r="Fullscreen",o="FullScreen",u=["request"+r,"request"+o,"webkitRequest"+r,"webkitRequest"+o,"msRequest"+r,"msRequest"+o,"mozRequest"+o,"mozRequest"+r];for(h=0;h<u.length;h++)if(document.documentElement[u[h]]){i.available=!0,i.request=u[h];break}var l=["cancel"+o,"exit"+r,"webkitCancel"+o,"webkitExit"+r,"msCancel"+o,"msExit"+r,"mozCancel"+o,"mozExit"+r];if(i.available){for(h=0;h<l.length;h++)if(document[l[h]]){i.cancel=l[h];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(i.keyboard=!0),Object.defineProperty(i,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),i}e.exports=s()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(349),BetweenPoints:i(350),BetweenPointsY:i(813),BetweenY:i(814),CounterClockwise:i(815),Normalize:i(351),Random:i(816),RandomDegrees:i(817),Reverse:i(818),RotateTo:i(819),ShortestBetween:i(820),Wrap:i(269),WrapDegrees:i(270)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return Math.atan2(h.x-s.x,h.y-s.y)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return Math.atan2(r-s,o-h)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=function(r){return r>Math.PI&&(r-=s.PI2),Math.abs(((r+s.TAU)%s.PI2-s.PI2)%s.PI2)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(137),h=function(){return s(-Math.PI,Math.PI)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(137),h=function(){return s(-180,180)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(351),h=function(r){return s(r+Math.PI)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=function(r,o,u){return u===void 0&&(u=.05),r===o||(Math.abs(o-r)<=u||Math.abs(o-r)>=s.PI2-u?r=o:(Math.abs(o-r)>Math.PI&&(o<r?o+=s.PI2:o-=s.PI2),o>r?r+=u:o<r&&(r-=u))),r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=h-s;if(r===0)return 0;var o=Math.floor((r- -180)/360);return r-o*360};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Between:i(50),BetweenPoints:i(352),BetweenPointsSquared:i(822),Chebyshev:i(823),Power:i(824),Snake:i(825),Squared:i(353)}},function(e,a){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.x-h.x,o=s.y-h.y;return r*r+o*o};e.exports=i},function(e,a){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return Math.max(Math.abs(s-r),Math.abs(h-o))};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(r-s,u)+Math.pow(o-h,u))};e.exports=i},function(e,a){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return Math.abs(s-r)+Math.abs(h-o)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Back:i(334),Bounce:i(335),Circular:i(336),Cubic:i(337),Elastic:i(338),Expo:i(339),Linear:i(340),Quadratic:i(341),Quartic:i(342),Quintic:i(343),Sine:i(344),Stepped:i(345)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(828),Equal:i(124),Floor:i(829),GreaterThan:i(354),LessThan:i(355)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=1e-4),Math.ceil(s-h)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=1e-4),Math.floor(s+h)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Bezier:i(831),CatmullRom:i(832),CubicBezier:i(358),Linear:i(833),QuadraticBezier:i(359),SmoothStep:i(360),SmootherStep:i(834)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(356),h=function(r,o){for(var u=0,l=r.length-1,f=0;f<=l;f++)u+=Math.pow(1-o,l-f)*Math.pow(o,f)*r[f]*s(l,f);return u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(194),h=function(r,o){var u=r.length-1,l=u*o,f=Math.floor(l);return r[0]===r[u]?(o<0&&(f=Math.floor(l=u*(1+o))),s(l-f,r[(f-1+u)%u],r[f],r[(f+1)%u],r[(f+2)%u])):o<0?r[0]-(s(-l,r[0],r[0],r[1],r[1])-r[0]):o>1?r[u]-(s(l-u,r[u],r[u],r[u-1],r[u-1])-r[u]):s(l-f,r[f?f-1:0],r[f],r[u<f+1?u:f+1],r[u<f+2?u:f+2])};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(135),h=function(r,o){var u=r.length-1,l=u*o,f=Math.floor(l);return o<0?s(r[0],r[1],l):o>1?s(r[u],r[u-1],u-l):s(r[f],r[f+1>u?u:f+1],l-f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(183),h=function(r,o,u){return o+(u-o)*s(r,0,1)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetNext:i(361),IsSize:i(138),IsValue:i(836)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s>0&&(s&s-1)===0};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Ceil:i(139),Floor:i(76),To:i(838)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){return r===void 0&&(r=0),h===0?s:(s-=r,s=h*Math.round(s/h),o?(r+s)/h:r+s)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=new s({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var r=2091639*this.s0+this.c*23283064365386963e-26;return this.c=r|0,this.s0=this.s1,this.s1=this.s2,this.s2=r-this.c,this.s2},hash:function(r){var o,u=this.n;r=r.toString();for(var l=0;l<r.length;l++)u+=r.charCodeAt(l),o=.02519603282416938*u,u=o>>>0,o-=u,o*=u,u=o>>>0,o-=u,u+=o*4294967296;return this.n=u,(u>>>0)*23283064365386963e-26},init:function(r){typeof r=="string"?this.state(r):this.sow(r)},sow:function(r){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!r)for(var o=0;o<r.length&&r[o]!=null;o++){var u=r[o];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},between:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},realInRange:function(r,o){return this.frac()*(o-r)+r},normal:function(){return 1-2*this.frac()},uuid:function(){var r="",o="";for(o=r="";r++<36;o+=~r%5|r*3&4?(r^15?8^this.frac()*(r^20?16:4):4).toString(16):"-");return o},pick:function(r){return r[this.integerInRange(0,r.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(r){return r[~~(Math.pow(this.frac(),2)*(r.length-1)+.5)]},timestamp:function(r,o){return this.realInRange(r||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(r){return typeof r=="string"&&r.match(/^!rnd/)&&(r=r.split(","),this.c=parseFloat(r[1]),this.s0=parseFloat(r[2]),this.s1=parseFloat(r[3]),this.s2=parseFloat(r[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(r){for(var o=r.length-1,u=o;u>0;u--){var l=Math.floor(this.frac()*(u+1)),f=r[l];r[l]=r[u],r[u]=f}return r}});e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var h=0,r=0;r<s.length;r++)h+=+s[r];return h/s.length};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var o=Math.pow(r,-h);return Math.ceil(s*o)/o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return Math.abs(s-h)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(69),o=i(1),u=new r,l=new h({initialize:function f(v,d,c,p){v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=f.DefaultOrder),this._x=v,this._y=d,this._z=c,this._order=p,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(f){this._x=f,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(f){this._y=f,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(f){this._z=f,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(f){this._order=f,this.onChangeCallback(this)}},set:function(f,v,d,c){return c===void 0&&(c=this._order),this._x=f,this._y=v,this._z=d,this._order=c,this.onChangeCallback(this),this},copy:function(f){return this.set(f.x,f.y,f.z,f.order)},setFromQuaternion:function(f,v,d){return v===void 0&&(v=this._order),d===void 0&&(d=!1),u.fromQuat(f),this.setFromRotationMatrix(u,v,d)},setFromRotationMatrix:function(f,v,d){v===void 0&&(v=this._order),d===void 0&&(d=!1);var c=f.val,p=c[0],g=c[4],x=c[8],m=c[1],y=c[5],T=c[9],C=c[2],S=c[6],E=c[10],P=0,M=0,O=0,A=.99999;switch(v){case"XYZ":{M=Math.asin(s(x,-1,1)),Math.abs(x)<A?(P=Math.atan2(-T,E),O=Math.atan2(-g,p)):P=Math.atan2(S,y);break}case"YXZ":{P=Math.asin(-s(T,-1,1)),Math.abs(T)<A?(M=Math.atan2(x,E),O=Math.atan2(m,y)):M=Math.atan2(-C,p);break}case"ZXY":{P=Math.asin(s(S,-1,1)),Math.abs(S)<A?(M=Math.atan2(-C,E),O=Math.atan2(-g,y)):O=Math.atan2(m,p);break}case"ZYX":{M=Math.asin(-s(C,-1,1)),Math.abs(C)<A?(P=Math.atan2(S,E),O=Math.atan2(m,p)):O=Math.atan2(-g,y);break}case"YZX":{O=Math.asin(s(m,-1,1)),Math.abs(m)<A?(P=Math.atan2(-T,y),M=Math.atan2(-C,p)):M=Math.atan2(x,E);break}case"XZY":{O=Math.asin(-s(g,-1,1)),Math.abs(g)<A?(P=Math.atan2(S,y),M=Math.atan2(x,p)):P=Math.atan2(-T,E);break}}return this._x=P,this._y=M,this._z=O,this._order=v,d&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",e.exports=l},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var o=Math.pow(r,-h);return Math.floor(s*o)/o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s/h/1e3};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s==parseFloat(s)?!(s%2):void 0};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s===parseFloat(s)?!(s%2):void 0};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return Math.min(s+h,r)};e.exports=i},function(e,a){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=s.length;if(h===0)return 0;s.sort(function(o,u){return o-u});var r=Math.floor(h/2);return h%2===0?(s[r]+s[r-1])/2:s[r]};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return Math.max(s-h,r)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r===void 0&&(r=h+1);var u=(s-h)/(r-h);return u>1?o!==void 0?(u=(o-s)/(o-r),u<0&&(u=0)):u=1:u<0&&(u=0),u};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=1);var r=Math.random()*2*Math.PI;return s.x=Math.cos(r)*h,s.y=Math.sin(r)*h,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=1);var r=Math.random()*2*Math.PI,o=Math.random()*2-1,u=Math.sqrt(1-o*o)*h;return s.x=Math.cos(r)*u,s.y=Math.sin(r)*u,s.z=o*h,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h=1),s.x=(Math.random()*2-1)*h,s.y=(Math.random()*2-1)*h,s.z=(Math.random()*2-1)*h,s.w=(Math.random()*2-1)*h,s};e.exports=i},function(e,a){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){return s.x=h+u*Math.cos(o),s.y=r+u*Math.sin(o),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){h===void 0&&(h=0),r===void 0&&(r=10);var o=Math.pow(r,-h);return Math.round(s*o)/o};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h===void 0&&(h=1),r===void 0&&(r=1),o===void 0&&(o=1),o*=Math.PI/s;for(var u=[],l=[],f=0;f<s;f++)r-=h*o,h+=r*o,u[f]=r,l[f]=h;return{sin:l,cos:u,length:s}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3),h=function(r,o,u,l){l===void 0&&(l=new s);var f=0,v=0,d=o*u;return r>0&&r<=d&&(r>o-1?(v=Math.floor(r/o),f=r-v*o):f=r),l.set(f,v)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return Math.abs(s-h)<=r};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(39),h=i(69),r=i(365),o=new h,u=new r,l=new s,f=function(v,d,c){return u.setAxisAngle(d,c),o.fromRotationTranslation(u,l.set(0,0,0)),v.transformMat4(o)};e.exports=f},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addtexture"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onerror"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="onload"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="ready"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="removetexture"},function(e,a){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineafterflush"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebeforeflush"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinebind"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineboot"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinedestroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelinerebind"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pipelineresize"},function(e,a){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(e,a){e.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GenerateTexture:i(388),Palettes:i(889)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ARNE16:i(389),C64:i(890),CGA:i(891),JMP:i(892),MSX:i(893)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Path:i(895),MoveTo:i(393),CubicBezier:i(390),Curve:i(94),Ellipse:i(391),Line:i(392),QuadraticBezier:i(394),Spline:i(395)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(390),r=i(391),o=i(5),u=i(392),l=i(393),f=i(394),v=i(10),d=i(395),c=i(3),p=i(14),g=new s({initialize:function(m,y){m===void 0&&(m=0),y===void 0&&(y=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new c,this._tmpVec2A=new c,this._tmpVec2B=new c,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,y)},add:function(x){return this.curves.push(x),this},circleTo:function(x,m,y){return m===void 0&&(m=!1),this.ellipseTo(x,x,0,360,m,y)},closePath:function(){var x=this.curves[0].getPoint(0),m=this.curves[this.curves.length-1].getPoint(1);return x.equals(m)||this.curves.push(new u(m,x)),this},cubicBezierTo:function(x,m,y,T,C,S){var E=this.getEndPoint(),P,M,O;return x instanceof c?(P=x,M=m,O=y):(P=new c(y,T),M=new c(C,S),O=new c(x,m)),this.add(new h(E,P,M,O))},quadraticBezierTo:function(x,m,y,T){var C=this.getEndPoint(),S,E;return x instanceof c?(S=x,E=m):(S=new c(y,T),E=new c(x,m)),this.add(new f(C,S,E))},draw:function(x,m){for(var y=0;y<this.curves.length;y++){var T=this.curves[y];!T.active||T.draw(x,m)}return x},ellipseTo:function(x,m,y,T,C,S){var E=new r(0,0,x,m,y,T,C,S),P=this.getEndPoint(this._tmpVec2A),M=E.getStartPoint(this._tmpVec2B);return P.subtract(M),E.x=P.x,E.y=P.y,this.add(E)},fromJSON:function(x){this.curves=[],this.cacheLengths=[],this.startPoint.set(x.x,x.y),this.autoClose=x.autoClose;for(var m=0;m<x.curves.length;m++){var y=x.curves[m];switch(y.type){case"LineCurve":this.add(u.fromJSON(y));break;case"EllipseCurve":this.add(r.fromJSON(y));break;case"SplineCurve":this.add(d.fromJSON(y));break;case"CubicBezierCurve":this.add(h.fromJSON(y));break;case"QuadraticBezierCurve":this.add(f.fromJSON(y));break}}return this},getBounds:function(x,m){x===void 0&&(x=new v),m===void 0&&(m=16),x.x=Number.MAX_VALUE,x.y=Number.MAX_VALUE;for(var y=new v,T=p.MIN_SAFE_INTEGER,C=p.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var E=this.curves[S];!E.active||(E.getBounds(y,m),x.x=Math.min(x.x,y.x),x.y=Math.min(x.y,y.y),T=Math.max(T,y.right),C=Math.max(C,y.bottom))}return x.right=T,x.bottom=C,x},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var x=[],m=0,y=0;y<this.curves.length;y++)m+=this.curves[y].getLength(),x.push(m);return this.cacheLengths=x,x},getEndPoint:function(x){return x===void 0&&(x=new c),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,x):x.copy(this.startPoint),x},getLength:function(){var x=this.getCurveLengths();return x[x.length-1]},getPoint:function(x,m){m===void 0&&(m=new c);for(var y=x*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],P=E.getLength(),M=P===0?0:1-S/P;return E.getPointAt(M,m)}C++}return null},getPoints:function(x){x===void 0&&(x=12);for(var m=[],y,T=0;T<this.curves.length;T++){var C=this.curves[T];if(!!C.active)for(var S=C.getResolution(x),E=C.getPoints(S),P=0;P<E.length;P++){var M=E[P];y&&y.equals(M)||(m.push(M),y=M)}}return this.autoClose&&m.length>1&&!m[m.length-1].equals(m[0])&&m.push(m[0]),m},getRandomPoint:function(x){return x===void 0&&(x=new c),this.getPoint(Math.random(),x)},getSpacedPoints:function(x){x===void 0&&(x=40);for(var m=[],y=0;y<=x;y++)m.push(this.getPoint(y/x));return this.autoClose&&m.push(m[0]),m},getStartPoint:function(x){return x===void 0&&(x=new c),x.copy(this.startPoint)},getTangent:function(x,m){m===void 0&&(m=new c);for(var y=x*this.getLength(),T=this.getCurveLengths(),C=0;C<T.length;){if(T[C]>=y){var S=T[C]-y,E=this.curves[C],P=E.getLength(),M=P===0?0:1-S/P;return E.getTangentAt(M,m)}C++}return null},lineTo:function(x,m){x instanceof c?this._tmpVec2B.copy(x):this._tmpVec2B.set(x,m);var y=this.getEndPoint(this._tmpVec2A);return this.add(new u([y.x,y.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(x){return x.unshift(this.getEndPoint()),this.add(new d(x))},moveTo:function(x,m){return x instanceof c?this.add(new l(x.x,x.y)):this.add(new l(x,m))},toJSON:function(){for(var x=[],m=0;m<this.curves.length;m++)x.push(this.curves[m].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:x}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(x,m){return new g(x,m)}),e.exports=g},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DataManager:i(101),DataManagerPlugin:i(897),Events:i(315)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(101),r=i(24),o=i(20),u=new s({Extends:h,initialize:function(f){h.call(this,f,f.sys.events),this.scene=f,this.systems=f.sys,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){h.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",u,"data"),e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Align:i(899),BaseShader:i(396),Bounds:i(902),Canvas:i(906),Color:i(397),ColorMatrix:i(198),Masks:i(916),RGB:i(200)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),h=i(17),r={In:i(900),To:i(901)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(290),BottomLeft:i(291),BottomRight:i(292),Center:i(293),LeftCenter:i(295),QuickSet:i(289),RightCenter:i(296),TopCenter:i(297),TopLeft:i(298),TopRight:i(299)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BottomCenter:i(277),BottomLeft:i(278),BottomRight:i(279),LeftBottom:i(280),LeftCenter:i(281),LeftTop:i(282),QuickSet:i(276),RightBottom:i(283),RightCenter:i(284),RightTop:i(285),TopCenter:i(286),TopLeft:i(287),TopRight:i(288)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CenterOn:i(294),GetBottom:i(42),GetBounds:i(903),GetCenterX:i(87),GetCenterY:i(89),GetLeft:i(43),GetOffsetX:i(904),GetOffsetY:i(905),GetRight:i(44),GetTop:i(45),SetBottom:i(55),SetCenterX:i(88),SetCenterY:i(90),SetLeft:i(53),SetRight:i(54),SetTop:i(52)}},function(e,a,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(42),h=i(43),r=i(44),o=i(45),u=function(l,f){f===void 0&&(f={});var v=h(l),d=o(l);return f.x=v,f.y=d,f.width=r(l)-v,f.height=s(l)-d,f};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.width*s.originX};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.height*s.originY};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasInterpolation:i(367),CanvasPool:i(31),Smoothing:i(192),TouchAction:i(907),UserSelect:i(908)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===void 0&&(h="none"),s.style.msTouchAction=h,s.style["ms-touch-action"]=h,s.style["touch-action"]=h,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h="none");var r=["-webkit-","-khtml-","-moz-","-ms-",""];return r.forEach(function(o){s.style[o+"user-select"]=h}),s.style["-webkit-touch-callout"]=h,s.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(103),h=function(r){r===void 0&&(r=1024);var o=[],u=255,l,f=255,v=0,d=0;for(l=0;l<=u;l++)o.push({r:f,g:l,b:d,color:s(f,l,d)});for(v=255,l=u;l>=0;l--)o.push({r:l,g:v,b:d,color:s(l,v,d)});for(f=0,l=0;l<=u;l++,v--)o.push({r:f,g:v,b:l,color:s(f,v,l)});for(v=0,d=255,l=0;l<=u;l++,d--,f++)o.push({r:f,g:v,b:d,color:s(f,v,d)});if(r===1024)return o;var c=[],p=0,g=1024/r;for(l=0;l<r;l++)c.push(o[Math.floor(p)]),p+=g;return c};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h={r:s>>16&255,g:s>>8&255,b:s&255,a:255};return s>16777215&&(h.a=s>>>24),h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(38),h=i(399),r=function(o,u,l){var f=l,v=l,d=l;if(u!==0){var c=l<.5?l*(1+u):l+u-l*u,p=2*l-c;f=h(p,c,o+1/3),v=h(p,c,o),d=h(p,c,o-1/3)}var g=new s;return g.setGLTo(f,v,d,1)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(188),h=function(r,o){r===void 0&&(r=1),o===void 0&&(o=1);for(var u=[],l=0;l<=359;l++)u.push(s(l/359,r,o));return u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(135),h=function(u,l,f,v,d,c,p,g){p===void 0&&(p=100),g===void 0&&(g=0);var x=g/p;return{r:s(u,v,x),g:s(l,d,x),b:s(f,c,x)}},r=function(u,l,f,v){return f===void 0&&(f=100),v===void 0&&(v=0),h(u.r,u.g,u.b,l.r,l.g,l.b,f,v)},o=function(u,l,f,v,d,c){return d===void 0&&(d=100),c===void 0&&(c=0),h(u.r,u.g,u.b,l,f,v,d,c)};e.exports={RGBWithRGB:h,ColorWithRGB:o,ColorWithColor:r}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(195),h=i(38),r=function(o,u){return o===void 0&&(o=0),u===void 0&&(u=255),new h(s(o,u),s(o,u),s(o,u))};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(398),h=function(r,o,u,l,f){return l===void 0&&(l=255),f===void 0&&(f="#"),f==="#"?"#"+((1<<24)+(r<<16)+(o<<8)+u).toString(16).slice(1,7):"0x"+s(l)+s(r)+s(o)+s(u)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BitmapMask:i(310),GeometryMask:i(311)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={AddToDOM:i(142),DOMContentLoaded:i(400),GetInnerHeight:i(401),GetScreenOrientation:i(402),GetTarget:i(407),ParseXML:i(408),RemoveFromDOM:i(202),RequestAnimationFrame:i(386)};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EventEmitter:i(919)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(24),o=new s({Extends:h,initialize:function(){h.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",o,"events"),e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(142),h=i(321),r=i(325),o=i(31),u=i(0),l=i(346),f=i(921),v=i(366),d=i(101),c=i(384),p=i(347),g=i(400),x=i(9),m=i(22),y=i(409),T=i(24),C=i(414),S=i(415),E=i(417),P=i(106),M=i(422),O=i(385),A=i(387),R=i(426),F=new u({initialize:function(D){this.config=new l(D),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new x,this.anims=new h(this),this.textures=new M(this),this.cache=new r(this),this.registry=new d(this),this.input=new y(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=p,this.scale=new S(this,this.config),this.sound=null,this.sound=R.create(this),this.loop=new O(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,g(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),f(this),c(this),s(this.canvas,this.config.parent),this.textures.once(P.READY,this.texturesReady,this),this.events.emit(m.BOOT)},texturesReady:function(){this.events.emit(m.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),A(this);var I=this.events;I.on(m.HIDDEN,this.onHidden,this),I.on(m.VISIBLE,this.onVisible,this),I.on(m.BLUR,this.onBlur,this),I.on(m.FOCUS,this.onFocus,this)},step:function(I,D){if(this.pendingDestroy)return this.runDestroy();var N=this.events;N.emit(m.PRE_STEP,I,D),N.emit(m.STEP,I,D),this.scene.update(I,D),N.emit(m.POST_STEP,I,D);var z=this.renderer;z.preRender(),N.emit(m.PRE_RENDER,z,I,D),this.scene.render(z),z.postRender(),N.emit(m.POST_RENDER,z,I,D)},headlessStep:function(I,D){if(this.pendingDestroy)return this.runDestroy();var N=this.events;N.emit(m.PRE_STEP,I,D),N.emit(m.STEP,I,D),this.scene.update(I,D),N.emit(m.POST_STEP,I,D),N.emit(m.PRE_RENDER),N.emit(m.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(m.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(m.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(I,D){D===void 0&&(D=!1),this.pendingDestroy=!0,this.removeCanvas=I,this.noReturn=D},runDestroy:function(){this.scene.destroy(),this.events.emit(m.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});e.exports=F},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(142),h=function(r){var o=r.config;if(!(!o.parent||!o.domCreateContainer)){var u=document.createElement("div");u.style.cssText=["display: block;","width: "+r.scale.width+"px;","height: "+r.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),r.domContainer=u,s(u,o.parent)}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameout"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameover"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectdown"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragenter"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragleave"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragover"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectmove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectout"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectover"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectup"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="gameobjectwheel"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="boot"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="process"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdown"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerdownoutside"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointermove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerout"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerover"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerup"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerupoutside"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="wheel"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pointerlockchange"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="preupdate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="shutdown"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="addfile"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="filecomplete-"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loaderror"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="load"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="fileprogress"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="postprocess"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="progress"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(!r.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=s.source[h];s.add("__BASE",h,0,0,o.width,o.height);for(var u=r.getElementsByTagName("SubTexture"),l,f=0;f<u.length;f++){var v=u[f].attributes,d=v.name.value,c=parseInt(v.x.value,10),p=parseInt(v.y.value,10),g=parseInt(v.width.value,10),x=parseInt(v.height.value,10);if(l=s.add(d,h,c,p,g,x),v.frameX){var m=Math.abs(parseInt(v.frameX.value,10)),y=Math.abs(parseInt(v.frameY.value,10)),T=parseInt(v.frameWidth.value,10),C=parseInt(v.frameHeight.value,10);l.setTrim(g,x,m,y,T,C)}}return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.source[h];return s.add("__BASE",h,0,0,r.width,r.height),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.source[h];return s.add("__BASE",h,0,0,r.width,r.height),s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),h=function(r,o,u){if(!u.frames&&!u.textures){console.warn("Invalid Texture Atlas JSON Array");return}var l=r.source[o];r.add("__BASE",o,0,0,l.width,l.height);for(var f=Array.isArray(u.textures)?u.textures[o].frames:u.frames,v,d=0;d<f.length;d++){var c=f[d];v=r.add(c.filename,o,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var p=c.anchor||c.pivot;p&&(v.customPivot=!0,v.pivotX=p.x,v.pivotY=p.y),v.customData=s(c)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?r.customData[g]=u[g].slice(0):r.customData[g]=u[g]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),h=function(r,o,u){if(!u.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var l=r.source[o];r.add("__BASE",o,0,0,l.width,l.height);var f=u.frames,v;for(var d in f)if(!!f.hasOwnProperty(d)){var c=f[d];v=r.add(d,o,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&v.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(v.rotated=!0,v.updateUVsInverted());var p=c.anchor||c.pivot;p&&(v.customPivot=!0,v.pivotX=p.x,v.pivotY=p.y),v.customData=s(c)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?r.customData[g]=u[g].slice(0):r.customData[g]=u[g]);return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=function(r,o,u,l,f,v,d){var c=s(d,"frameWidth",null),p=s(d,"frameHeight",c);if(c===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=r.source[o];r.add("__BASE",o,0,0,g.width,g.height);var x=s(d,"startFrame",0),m=s(d,"endFrame",-1),y=s(d,"margin",0),T=s(d,"spacing",0),C=Math.floor((f-y+T)/(c+T)),S=Math.floor((v-y+T)/(p+T)),E=C*S;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",r.key),(x>E||x<-E)&&(x=0),x<0&&(x=E+x),m!==-1&&(E=x+(m+1));for(var P=y,M=y,O=0,A=0,R=0;R<E;R++){O=0,A=0;var F=P+c,I=M+p;F>f&&(O=F-f),I>v&&(A=I-v),r.add(R,o,u+P,l+M,c-O,p-A),P+=c+T,P+c>f&&(P=y,M+=p+T)}return r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(2),h=function(r,o,u){var l=s(u,"frameWidth",null),f=s(u,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=r.source[0];r.add("__BASE",0,0,0,v.width,v.height),s(u,"startFrame",0),s(u,"endFrame",-1);for(var d=s(u,"margin",0),c=s(u,"spacing",0),p=o.cutX,g=o.cutY,x=o.cutWidth,m=o.cutHeight,y=o.realWidth,T=o.realHeight,C=Math.floor((y-d+c)/(l+c)),S=Math.floor((T-d+c)/(f+c)),E=o.x,P=l-E,M=l-(y-x-E),O=o.y,A=f-O,R=f-(T-m-O),F,I=d,D=d,N=0,z=o.sourceIndex,U=0;U<S;U++){for(var W=U===0,w=U===S-1,L=0;L<C;L++){var B=L===0,b=L===C-1;if(F=r.add(N,z,p+I,g+D,l,f),B||W||b||w){var G=B?E:0,Y=W?O:0,V=0,X=0;B&&(V+=l-P),b&&(V+=l-M),W&&(X+=f-A),w&&(X+=f-R);var H=l-V,k=f-X;F.cutWidth=H,F.cutHeight=k,F.setTrim(l,f,G,Y,H,k)}I+=c,B?I+=P:b?I+=M:I+=l,N++}I=d,D+=c,W?D+=A:w?D+=R:D+=f}return r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=0,s=function(r,o,u,l){var f=i-l.y-l.height;r.add(u,o,l.x,f,l.width,l.height)},h=function(r,o,u){var l=r.source[o];r.add("__BASE",o,0,0,l.width,l.height),i=l.height;for(var f=u.split(`
`),v=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",c="",p={x:0,y:0,width:0,height:0},g=0;g<f.length;g++){var x=f[g].match(v);if(!!x){var m=x[1]==="- ",y=x[2],T=x[3];if(m&&(c!==d&&(s(r,o,c,p),d=c),p={x:0,y:0,width:0,height:0}),y==="name"){c=T;continue}switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10);break}}}return c!==d&&s(r,o,c,p),r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decoded"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="decodedall"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="destroy"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="detune"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="looped"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="mute"},function(e,a){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pan"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pauseall"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="play"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="rate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resumeall"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="seek"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stopall"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="unlocked"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="volume"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Events:i(75),DisplayList:i(1012),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(1040),Components:i(11),GetCalcMatrix:i(19),BuildGameObject:i(28),BuildGameObjectAnimation:i(439),GameObject:i(15),BitmapText:i(148),Blitter:i(213),Bob:i(440),Container:i(214),DOMElement:i(442),DynamicBitmapText:i(215),Extern:i(444),Graphics:i(216),Group:i(113),Image:i(125),Layer:i(219),Particles:i(1074),PathFollower:i(457),RenderTexture:i(221),RetroFont:i(1082),Rope:i(223),Sprite:i(73),Text:i(224),GetTextSize:i(458),MeasureText:i(460),TextStyle:i(459),TileSprite:i(225),Zone:i(129),Video:i(226),Shape:i(34),Arc:i(461),Curve:i(462),Ellipse:i(463),Grid:i(464),IsoBox:i(465),IsoTriangle:i(466),Line:i(467),Polygon:i(468),Rectangle:i(473),Star:i(474),Triangle:i(475),Factories:{Blitter:i(1130),Container:i(1131),DOMElement:i(1132),DynamicBitmapText:i(1133),Extern:i(1134),Graphics:i(1135),Group:i(1136),Image:i(1137),Layer:i(1138),Particles:i(1139),PathFollower:i(1140),RenderTexture:i(1141),Rope:i(1142),Sprite:i(1143),StaticBitmapText:i(1144),Text:i(1145),TileSprite:i(1146),Zone:i(1147),Video:i(1148),Arc:i(1149),Curve:i(1150),Ellipse:i(1151),Grid:i(1152),IsoBox:i(1153),IsoTriangle:i(1154),Line:i(1155),Polygon:i(1156),Rectangle:i(1157),Star:i(1158),Triangle:i(1159)},Creators:{Blitter:i(1160),Container:i(1161),DynamicBitmapText:i(1162),Graphics:i(1163),Group:i(1164),Image:i(1165),Layer:i(1166),Particles:i(1167),RenderTexture:i(1168),Rope:i(1169),Sprite:i(1170),StaticBitmapText:i(1171),Text:i(1172),TileSprite:i(1173),Zone:i(1174),Video:i(1175)}};s.Shader=i(229),s.Mesh=i(230),s.PointLight=i(150),s.Factories.Shader=i(1184),s.Factories.Mesh=i(1185),s.Factories.PointLight=i(1186),s.Creators.Shader=i(1187),s.Creators.Mesh=i(1188),s.Creators.PointLight=i(1189),s.Light=i(481),s.LightsManager=i(482),s.LightsPlugin=i(1190),e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(110),r=i(24),o=i(75),u=i(20),l=i(79),f=new s({Extends:h,initialize:function(d){h.call(this,d),this.sortChildrenFlag=!1,this.scene=d,this.systems=d.sys,this.events=d.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.events.once(u.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(o.ADDED_TO_SCENE,v,this.scene),this.events.emit(u.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(o.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(l(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,d){return v._depth-d._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list,d=v.length;d--;)v[d].destroy(!0);v.length=0,this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",f,"displayList"),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CheckMatrix:i(209),MatrixToString:i(1014),ReverseColumns:i(1015),ReverseRows:i(1016),Rotate180:i(1017),RotateLeft:i(1018),RotateMatrix:i(147),RotateRight:i(1019),Translate:i(1020),TransposeMatrix:i(435)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(186),h=i(209),r=function(o){var u="";if(!h(o))return u;for(var l=0;l<o.length;l++){for(var f=0;f<o[l].length;f++){var v=o[l][f].toString();v!=="undefined"?u+=s(v,2):u+="?",f<o[l].length-1&&(u+=" |")}if(l<o.length-1){u+=`
`;for(var d=0;d<o[l].length;d++)u+="---",d<o[l].length-1&&(u+="+");u+=`
`}}return u};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.reverse()};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){for(var h=0;h<s.length;h++)s[h].reverse();return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(147),h=function(r){return s(r,180)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(147),h=function(r){return s(r,90)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(147),h=function(r){return s(r,-90)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(178),h=i(179),r=function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),l!==0&&(l<0?s(o,Math.abs(l)):h(o,l)),u!==0)for(var f=0;f<o.length;f++){var v=o[f];u<0?s(v,Math.abs(u)):h(v,u)}return o};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){if(u===void 0&&(u=s),r>0){var l=r-s.length;if(l<=0)return null}if(!Array.isArray(h))return s.indexOf(h)===-1?(s.push(h),o&&o.call(u,h),h):null;for(var f=h.length-1;f>=0;)s.indexOf(h[f])!==-1&&h.splice(f,1),f--;if(f=h.length,f===0)return null;r>0&&f>l&&(h.splice(l),f=l);for(var v=0;v<f;v++){var d=h[v];s.push(d),o&&o.call(u,d)}return h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l){if(r===void 0&&(r=0),l===void 0&&(l=s),o>0){var f=o-s.length;if(f<=0)return null}if(!Array.isArray(h))return s.indexOf(h)===-1?(s.splice(r,0,h),u&&u.call(l,h),h):null;for(var v=h.length-1;v>=0;)s.indexOf(h[v])!==-1&&h.pop(),v--;if(v=h.length,v===0)return null;o>0&&v>f&&(h.splice(f),v=f);for(var d=v-1;d>=0;d--){var c=h[d];s.splice(r,0,c),u&&u.call(l,c)}return h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.indexOf(h);return r!==-1&&r<s.length&&(s.splice(r,1),s.push(h)),h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),h=function(r,o,u,l,f){l===void 0&&(l=0),f===void 0&&(f=r.length);var v=0;if(s(r,l,f))for(var d=l;d<f;d++){var c=r[d];c[o]===u&&v++}return v};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o,u=[null];for(o=3;o<arguments.length;o++)u.push(arguments[o]);for(o=0;o<s.length;o++)u[0]=s[o],h.apply(r,u);return s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),h=function(r,o,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=r.length),s(r,l,f)){var v,d=[null];for(v=5;v<arguments.length;v++)d.push(arguments[v]);for(v=l;v<f;v++)d[0]=r[v],o.apply(u,d)}return r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.indexOf(h);if(r>0){var o=s[r-1],u=s.indexOf(o);s[r]=o,s[u]=h}return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=s.indexOf(h);if(o===-1||r<0||r>=s.length)throw new Error("Supplied index out of bounds");return o!==r&&(s.splice(o,1),s.splice(r,0,h)),h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.indexOf(h);if(r!==-1&&r<s.length-1){var o=s[r+1],u=s.indexOf(o);s[r]=o,s[u]=h}return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h===r)return s;var o=s.indexOf(h),u=s.indexOf(r);if(o<0||u<0)throw new Error("Supplied items must be elements of the same array");return o>u||(s.splice(o,1),u===s.length-1?s.push(h):s.splice(u,0,h)),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h===r)return s;var o=s.indexOf(h),u=s.indexOf(r);if(o<0||u<0)throw new Error("Supplied items must be elements of the same array");return o<u||(s.splice(o,1),u===0?s.unshift(h):s.splice(u,0,h)),s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(363),h=function(r,o,u){r===void 0&&(r=0),o===void 0&&(o=null),u===void 0&&(u=1),o===null&&(o=r,r=0);for(var l=[],f=Math.max(s((o-r)/(u||1)),0),v=0;v<f;v++)l.push(r),r+=u;return l};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(74),h=function(r,o,u,l){if(l===void 0&&(l=r),o<0||o>r.length-1)throw new Error("Index out of bounds");var f=s(r,o);return u&&u.call(l,f),f};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),h=function(r,o,u,l,f){if(o===void 0&&(o=0),u===void 0&&(u=r.length),f===void 0&&(f=r),s(r,o,u)){var v=u-o,d=r.splice(o,v);if(l)for(var c=0;c<d.length;c++){var p=d[c];l.call(f,p)}return d}else return[]};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(74),h=function(r,o,u){o===void 0&&(o=0),u===void 0&&(u=r.length);var l=o+Math.floor(Math.random()*u);return s(r,l)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=s.indexOf(h),u=s.indexOf(r);return o!==-1&&u===-1?(s[o]=r,!0):!1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.indexOf(h);return r!==-1&&r>0&&(s.splice(r,1),s.unshift(h)),h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(78),h=function(r,o,u,l,f){if(l===void 0&&(l=0),f===void 0&&(f=r.length),s(r,l,f))for(var v=l;v<f;v++){var d=r[v];d.hasOwnProperty(o)&&(d[o]=u)}return r};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){if(h===r)return s;var o=s.indexOf(h),u=s.indexOf(r);if(o<0||u<0)throw new Error("Supplied items must be elements of the same array");return s[o]=r,s[u]=h,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(211),r=i(24),o=i(20),u=new s({Extends:h,initialize:function(f){h.call(this),this.checkQueue=!0,this.scene=f,this.systems=f.sys,f.sys.events.once(o.BOOT,this.boot,this),f.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(o.PRE_UPDATE,this.update,this),l.on(o.UPDATE,this.sceneUpdate,this),l.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,f){for(var v=this._active,d=v.length,c=0;c<d;c++){var p=v[c];p.active&&p.preUpdate.call(p,l,f)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var f=this.systems.events;f.off(o.PRE_UPDATE,this.update,this),f.off(o.UPDATE,this.sceneUpdate,this),f.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",u,"updateList"),e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="add"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="remove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){if(r===void 0&&(r=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var u=s.text,l=u.length,f=s.maxWidth,v=s.wordWrapCharCode,d=Number.MAX_VALUE,c=Number.MAX_VALUE,p=0,g=0,x=s.fontData.chars,m=s.fontData.lineHeight,y=s.letterSpacing,T=0,C=0,S=0,E=null,P=s._align,M=0,O=0,A=s.fontSize/s.fontData.size,R=A*s.scaleX,F=A*s.scaleY,I=null,D=0,N=[],z=Number.MAX_VALUE,U=0,W=0,w=0,L,B=[],b=[],G=null;if(f>0){for(L=0;L<l;L++){if(S=u.charCodeAt(L),S===10){G!==null&&(B.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F,cr:!0}),G=null),T=0,C+=m,I=null;continue}if(E=x[S],!!E){if(I!==null)var Y=E.kerning[D];S===v?G!==null&&(B.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F,cr:!1}),G=null):(G===null&&(G={word:"",i:L,x:T,y:C,w:0,h:m,cr:!1}),G.word=G.word.concat(u[L]),G.w+=E.xOffset+E.xAdvance+(Y!==void 0?Y:0)),T+=E.xAdvance+y,I=E,D=S}}G!==null&&B.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F,cr:!1}),T=0,C=0,I=null,D=0;var V,X=0,H=[];for(L=0;L<B.length;L++){var k=B[L],$=k.x,K=k.x+k.w;if(V){var Z=$-(V.x+V.w);X=$-(Z+V.w),V=null}var Q=$-X,J=K-X;Q>f||J>f?(H.push(k.i-1),k.cr?(H.push(k.i+k.word.length),X=0,V=null):V=k):k.cr&&(H.push(k.i+k.word.length),X=0,V=null)}var tt=function(It,Ot,he){return It.substr(0,Ot)+he+It.substr(Ot+1)};for(L=H.length-1;L>=0;L--)u=tt(u,H[L],`
`);o.wrappedText=u,l=u.length,B=[],G=null}var lt=0;for(L=0;L<l;L++){if(S=u.charCodeAt(L),S===10){G!==null&&(B.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F}),G=null),T=0,C+=m,I=null,N[W]=w,w>U&&(U=w),w<z&&(z=w),W++,w=0;continue}if(E=x[S],!!E){if(M=T,O=C,I!==null){var ot=E.kerning[D];M+=ot!==void 0?ot:0}d>M&&(d=M),c>O&&(c=O);var et=M+E.xAdvance,j=O+m;p<et&&(p=et),g<j&&(g=j);var ft=E.xOffset+E.xAdvance+(ot!==void 0?ot:0);S===v?G!==null&&(B.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F}),G=null):(G===null&&(G={word:"",i:lt,x:T,y:C,w:0,h:m}),G.word=G.word.concat(u[L]),G.w+=ft),b.push({i:lt,char:u[L],code:S,x:(E.xOffset+T)*A,y:(E.yOffset+C)*A,w:E.width*A,h:E.height*A,t:C*A,r:et*A,b:m*A,line:W,glyph:E}),T+=E.xAdvance+y,I=E,D=S,w=et*A,lt++}}if(G!==null&&B.push({word:G.word,i:G.i,x:G.x*R,y:G.y*F,w:G.w*R,h:G.h*F}),N[W]=w,w>U&&(U=w),w<z&&(z=w),P>0)for(var it=0;it<b.length;it++){var ht=b[it];if(P===1){var ae=(U-N[ht.line])/2;ht.x+=ae,ht.r+=ae}else if(P===2){var oe=U-N[ht.line];ht.x+=oe,ht.r+=oe}}var Et=o.local,vt=o.global,wt=o.lines;return Et.x=d*A,Et.y=c*A,Et.width=p*A,Et.height=g*A,vt.x=s.x-s._displayOriginX+d*R,vt.y=s.y-s._displayOriginY+c*F,vt.width=p*R,vt.height=g*F,wt.shortest=z,wt.longest=U,wt.lengths=N,h&&(Et.x=Math.ceil(Et.x),Et.y=Math.ceil(Et.y),Et.width=Math.ceil(Et.width),Et.height=Math.ceil(Et.height),vt.x=Math.ceil(vt.x),vt.y=Math.ceil(vt.y),vt.width=Math.ceil(vt.width),vt.height=Math.ceil(vt.height),wt.shortest=Math.ceil(z),wt.longest=Math.ceil(U)),r&&(s._displayOriginX=s.originX*Et.width,s._displayOriginY=s.originY*Et.height,vt.x=s.x-s._displayOriginX*s.scaleX,vt.y=s.y-s._displayOriginY*s.scaleY,h&&(vt.x=Math.ceil(vt.x),vt.y=Math.ceil(vt.y))),o.words=B,o.characters=b,o.lines.height=m,o.scale=A,o.scaleX=s.scaleX,o.scaleY=s.scaleY,o};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(212),h=function(r,o,u,l,f,v,d){var c=r.sys.textures.get(u),p=c.get(l),g=r.sys.cache.xml.get(f);if(p&&g){var x=s(g,p,v,d,c);return r.sys.cache.bitmapFont.add(o,{data:x,texture:u,frame:l,fromAtlas:!0}),!0}else return!1};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1046),h=i(1048),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1047),h=i(19),r=i(12),o=function(u,l,f,v){var d=l._text,c=d.length;if(c!==0){f.addToRenderList(l);var p=u.pipelines.set(l.pipeline,l),g=h(l,f,v).calc,x=f.roundPixels,m=f.alpha,y=l.charColors,T=l.tintFill,C=r.getTintAppendFloatAlpha,S=C(l.tintTopLeft,m*l._alphaTL),E=C(l.tintTopRight,m*l._alphaTR),P=C(l.tintBottomLeft,m*l._alphaBL),M=C(l.tintBottomRight,m*l._alphaBR),O=l.frame.glTexture,A=p.setGameObject(l),R=l.getTextBounds(!1),F,I,D,N=R.characters,z=l.dropShadowX,U=l.dropShadowY,W=z!==0||U!==0;if(u.pipelines.preBatch(l),W){var w=l.dropShadowColor,L=l.dropShadowAlpha,B=C(w,m*L*l._alphaTL),b=C(w,m*L*l._alphaTR),G=C(w,m*L*l._alphaBL),Y=C(w,m*L*l._alphaBR);for(F=0;F<N.length;F++)I=N[F],D=I.glyph,!(I.code===32||D.width===0||D.height===0)&&s(p,l,I,D,z,U,g,x,B,b,G,Y,1,O,A)}for(F=0;F<N.length;F++)if(I=N[F],D=I.glyph,!(I.code===32||D.width===0||D.height===0))if(y[I.i]){var V=y[I.i],X=V.tintEffect,H=C(V.tintTL,m*l._alphaTL),k=C(V.tintTR,m*l._alphaTR),$=C(V.tintBL,m*l._alphaBL),K=C(V.tintBR,m*l._alphaBR);s(p,l,I,D,0,0,g,x,H,k,$,K,X,O,A)}else s(p,l,I,D,0,0,g,x,S,E,P,M,T,O,A);u.pipelines.postBatch(l)}};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l,f,v,d,c,p,g,x,m,y){var T=r.x-h.displayOriginX+u,C=r.y-h.displayOriginY+l,S=T+r.w,E=C+r.h,P=f.getXRound(T,C,v),M=f.getYRound(T,C,v),O=f.getXRound(T,E,v),A=f.getYRound(T,E,v),R=f.getXRound(S,E,v),F=f.getYRound(S,E,v),I=f.getXRound(S,C,v),D=f.getYRound(S,C,v);s.batchQuad(h,P,M,O,A,R,F,I,D,o.u0,o.v0,o.u1,o.v1,d,c,p,g,x,m,y)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(30),h=function(r,o,u,l){var f=o._text,v=f.length,d=r.currentContext;if(!(v===0||!s(r,d,o,u,l))){u.addToRenderList(o);var c=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.fontData.chars,g=o.fontData.lineHeight,x=o._letterSpacing,m=0,y=0,T=0,C=null,S=0,E=0,P=0,M=0,O=0,A=0,R=null,F=0,I=c.source.image,D=c.cutX,N=c.cutY,z=o._fontSize/o.fontData.size,U=o._align,W=0,w=0,L=o.getTextBounds(!1);o.maxWidth>0&&(f=L.wrappedText,v=f.length);var B=o._bounds.lines;U===1?w=(B.longest-B.lengths[0])/2:U===2&&(w=B.longest-B.lengths[0]),d.translate(-o.displayOriginX,-o.displayOriginY);for(var b=u.roundPixels,G=0;G<v;G++){if(T=f.charCodeAt(G),T===10){W++,U===1?w=(B.longest-B.lengths[W])/2:U===2&&(w=B.longest-B.lengths[W]),m=0,y+=g,R=null;continue}if(C=p[T],!!C){if(S=D+C.x,E=N+C.y,P=C.width,M=C.height,O=C.xOffset+m,A=C.yOffset+y,R!==null){var Y=C.kerning[F];O+=Y!==void 0?Y:0}O*=z,A*=z,O+=w,m+=C.xAdvance+x,R=C,F=T,!(P===0||M===0||T===32)&&(b&&(O=Math.round(O),A=Math.round(A)),d.save(),d.translate(O,A),d.scale(z,z),d.drawImage(I,S,E,P,M,0,0,P,M),d.restore())}}d.restore()}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1050),h=i(1051),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),h=i(12),r=new s,o=function(u,l,f,v){var d=l.getRenderList();if(d.length!==0){var c=f.alpha*l.alpha;if(c!==0){f.addToRenderList(l);var p=u.pipelines.set(this.pipeline,l),g=f.scrollX*l.scrollFactorX,x=f.scrollY*l.scrollFactorY,m=r.copyFrom(f.matrix);v&&(m.multiplyWithOffset(v,-g,-x),g=0,x=0);var y=l.x-g,T=l.y-x,C=-1,S=!1,E=f.roundPixels;u.pipelines.preBatch(l);for(var P=0;P<d.length;P++){var M=d[P],O=M.frame,A=M.alpha*c;if(A!==0){var R=O.width,F=O.height,I=y+M.x+O.x,D=T+M.y+O.y;M.flipX&&(R*=-1,I+=O.width),M.flipY&&(F*=-1,D+=O.height);var N=I+R,z=D+F,U=m.getX(I,D),W=m.getY(I,D),w=m.getX(N,z),L=m.getY(N,z),B=h.getTintAppendFloatAlpha(M.tint,A);if(O.sourceIndex!==C){var b=p.setGameObject(l,O);C=O.sourceIndex}E&&(U=Math.round(U),W=Math.round(W),w=Math.round(w),L=Math.round(L)),p.batchQuad(l,U,W,U,L,w,L,w,W,O.u0,O.v0,O.u1,O.v1,B,B,B,B,S,O.glTexture,b)&&(C=-1)}}u.pipelines.postBatch(l)}}};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u=h.getRenderList();if(u.length!==0){var l=s.currentContext,f=r.alpha*h.alpha;if(f!==0){r.addToRenderList(h),l.globalCompositeOperation=s.blendModes[h.blendMode],l.imageSmoothingEnabled=!(!s.antialias||h.frame.source.scaleMode);var v=h.x-r.scrollX*h.scrollFactorX,d=h.y-r.scrollY*h.scrollFactorY;l.save(),o&&o.copyToContext(l);for(var c=r.roundPixels,p=0;p<u.length;p++){var g=u[p],x=g.flipX||g.flipY,m=g.frame,y=m.canvasData,T=m.x,C=m.y,S=1,E=1,P=g.alpha*f;P!==0&&(l.globalAlpha=P,x?(g.flipX&&(S=-1,T-=y.width),g.flipY&&(E=-1,C-=y.height),l.save(),l.translate(g.x+v,g.y+d),l.scale(S,E),l.drawImage(m.source.image,y.x,y.y,y.width,y.height,T,C,y.width,y.height),l.restore()):(c&&(T=Math.round(T),C=Math.round(C)),l.drawImage(m.source.image,y.x,y.y,y.width,y.height,T+g.x+v,C+g.y+d,y.width,y.height)))}l.restore()}}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1053),h=i(1054),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h);var u=h.list,l=u.length;if(l!==0){var f=h.localTransform;o?(f.loadIdentity(),f.multiply(o),f.translate(h.x,h.y),f.rotate(h.rotation),f.scale(h.scaleX,h.scaleY)):f.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),s.pipelines.preBatch(h);var v=h.blendMode!==-1;v||s.setBlendMode(0);for(var d=h.alpha,c=h.scrollFactorX,p=h.scrollFactorY,g=0;g<l;g++){var x=u[g];if(!!x.willRender(r)){var m,y,T,C;if(x.alphaTopLeft!==void 0)m=x.alphaTopLeft,y=x.alphaTopRight,T=x.alphaBottomLeft,C=x.alphaBottomRight;else{var S=x.alpha;m=S,y=S,T=S,C=S}var E=x.scrollFactorX,P=x.scrollFactorY;!v&&x.blendMode!==s.currentBlendMode&&s.setBlendMode(x.blendMode);var M=x.mask;M&&M.preRenderWebGL(s,x,r);var O=x.type;O!==s.currentType&&(s.newType=!0,s.currentType=O),s.nextTypeMatch=g<l-1?u[g+1].type===s.currentType:!1,x.setScrollFactor(E*c,P*p),x.setAlpha(m*d,y*d,T*d,C*d),x.renderWebGL(s,x,r,f),x.setAlpha(m,y,T,C),x.setScrollFactor(E,P),M&&M.postRenderWebGL(s,r),s.newType=!1}}s.pipelines.postBatch(h)}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h);var u=h.list;if(u.length!==0){var l=h.localTransform;o?(l.loadIdentity(),l.multiply(o),l.translate(h.x,h.y),l.rotate(h.rotation),l.scale(h.scaleX,h.scaleY)):l.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var f=h.blendMode!==-1;f||s.setBlendMode(0);var v=h._alpha,d=h.scrollFactorX,c=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(s,null,r);for(var p=0;p<u.length;p++){var g=u[p];if(!!g.willRender(r)){var x=g.alpha,m=g.scrollFactorX,y=g.scrollFactorY;!f&&g.blendMode!==s.currentBlendMode&&s.setBlendMode(g.blendMode),g.setScrollFactor(m*d,y*c),g.setAlpha(x*v),g.renderCanvas(s,g,r,l),g.setAlpha(x),g.setScrollFactor(m,y)}}h.mask&&h.mask.postRenderCanvas(s)}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(443),h=i(443),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1058),h=i(1059),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(25),r=i(12),o=new h,u=function(l,f,v,d){var c=f.text,p=c.length;if(p!==0){v.addToRenderList(f);var g=l.pipelines.set(f.pipeline,f),x=s(f,v,d),m=x.sprite,y=x.calc,T=o,C=f.cropWidth>0||f.cropHeight>0;C&&(g.flush(),l.pushScissor(y.tx,y.ty,f.cropWidth*y.scaleX,f.cropHeight*y.scaleY));var S=f.frame,E=S.glTexture,P=f.tintFill,M=r.getTintAppendFloatAlpha(f.tintTopLeft,v.alpha*f._alphaTL),O=r.getTintAppendFloatAlpha(f.tintTopRight,v.alpha*f._alphaTR),A=r.getTintAppendFloatAlpha(f.tintBottomLeft,v.alpha*f._alphaBL),R=r.getTintAppendFloatAlpha(f.tintBottomRight,v.alpha*f._alphaBR),F=g.setGameObject(f),I=0,D=0,N=0,z=0,U=f.letterSpacing,W,w=0,L=0,B,b=f.scrollX,G=f.scrollY,Y=f.fontData,V=Y.chars,X=Y.lineHeight,H=f.fontSize/Y.size,k=0,$=f._align,K=0,Z=0,Q=f.getTextBounds(!1);f.maxWidth>0&&(c=Q.wrappedText,p=c.length);var J=f._bounds.lines;$===1?Z=(J.longest-J.lengths[0])/2:$===2&&(Z=J.longest-J.lengths[0]);var tt=v.roundPixels,lt=f.displayCallback,ot=f.callbackData;l.pipelines.preBatch(f);for(var et=0;et<p;et++){if(N=c.charCodeAt(et),N===10){K++,$===1?Z=(J.longest-J.lengths[K])/2:$===2&&(Z=J.longest-J.lengths[K]),I=0,D+=X,B=null;continue}if(W=V[N],!!W){w=W.width,L=W.height;var j=W.xOffset+I-b,ft=W.yOffset+D-G;if(B!==null){var it=W.kerning[z];j+=it!==void 0?it:0}if(I+=W.xAdvance+U,B=W,z=N,!(w===0||L===0||N===32)){if(H=f.fontSize/f.fontData.size,k=0,lt){ot.color=0,ot.tint.topLeft=M,ot.tint.topRight=O,ot.tint.bottomLeft=A,ot.tint.bottomRight=R,ot.index=et,ot.charCode=N,ot.x=j,ot.y=ft,ot.scale=H,ot.rotation=k,ot.data=W.data;var ht=lt(ot);j=ht.x,ft=ht.y,H=ht.scale,k=ht.rotation,ht.color?(M=ht.color,O=ht.color,A=ht.color,R=ht.color):(M=ht.tint.topLeft,O=ht.tint.topRight,A=ht.tint.bottomLeft,R=ht.tint.bottomRight),M=r.getTintAppendFloatAlpha(M,v.alpha*f._alphaTL),O=r.getTintAppendFloatAlpha(O,v.alpha*f._alphaTR),A=r.getTintAppendFloatAlpha(A,v.alpha*f._alphaBL),R=r.getTintAppendFloatAlpha(R,v.alpha*f._alphaBR)}j*=H,ft*=H,j-=f.displayOriginX,ft-=f.displayOriginY,j+=Z,T.applyITRS(j,ft,k,H,H),y.multiply(T,m);var ae=W.u0,oe=W.v0,Et=W.u1,vt=W.v1,wt=w,It=L,Ot=m.e,he=m.f,li=It*m.c+m.e,ui=It*m.d+m.f,fi=wt*m.a+It*m.c+m.e,di=wt*m.b+It*m.d+m.f,ci=wt*m.a+m.e,vi=wt*m.b+m.f;tt&&(Ot=Math.round(Ot),he=Math.round(he),li=Math.round(li),ui=Math.round(ui),fi=Math.round(fi),di=Math.round(di),ci=Math.round(ci),vi=Math.round(vi)),g.batchQuad(f,Ot,he,li,ui,fi,di,ci,vi,ae,oe,Et,vt,M,O,A,R,P,E,F)}}}C&&(g.flush(),l.popScissor()),l.pipelines.postBatch(f)}};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(30),h=function(r,o,u,l){var f=o._text,v=f.length,d=r.currentContext;if(!(v===0||!s(r,d,o,u,l))){u.addToRenderList(o);var c=o.fromAtlas?o.frame:o.texture.frames.__BASE,p=o.displayCallback,g=o.callbackData,x=o.fontData.chars,m=o.fontData.lineHeight,y=o._letterSpacing,T=0,C=0,S=0,E=null,P=0,M=0,O=0,A=0,R=0,F=0,I=null,D=0,N=o.frame.source.image,z=c.cutX,U=c.cutY,W=0,w=0,L=o._fontSize/o.fontData.size,B=o._align,b=0,G=0;o.getTextBounds(!1);var Y=o._bounds.lines;B===1?G=(Y.longest-Y.lengths[0])/2:B===2&&(G=Y.longest-Y.lengths[0]),d.translate(-o.displayOriginX,-o.displayOriginY);var V=u.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(d.beginPath(),d.rect(0,0,o.cropWidth,o.cropHeight),d.clip());for(var X=0;X<v;X++){if(w=L,W=0,S=f.charCodeAt(X),S===10){b++,B===1?G=(Y.longest-Y.lengths[b])/2:B===2&&(G=Y.longest-Y.lengths[b]),T=0,C+=m,I=null;continue}if(E=x[S],!!E){if(P=z+E.x,M=U+E.y,O=E.width,A=E.height,R=E.xOffset+T-o.scrollX,F=E.yOffset+C-o.scrollY,I!==null){var H=E.kerning[D];R+=H!==void 0?H:0}if(p){g.index=X,g.charCode=S,g.x=R,g.y=F,g.scale=w,g.rotation=W,g.data=E.data;var k=p(g);R=k.x,F=k.y,w=k.scale,W=k.rotation}R*=w,F*=w,R+=G,T+=E.xAdvance+y,I=E,D=S,!(O===0||A===0||S===32)&&(V&&(R=Math.round(R),F=Math.round(F)),d.save(),d.translate(R,F),d.rotate(W),d.scale(w,w),d.drawImage(N,P,M,O,A,0,0,O,A),d.restore())}}d.restore()}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1061),h=i(1062),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=function(r,o,u,l){r.pipelines.clear();var f=s(o,u,l).calc;o.render.call(o,r,u,f),r.pipelines.rebind()};e.exports=h},function(e,a){},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1064),h=i(448),h=i(448),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(217),h=i(19),r=i(25),o=i(12),u=function(c,p,g){this.x=c,this.y=p,this.width=g},l=function(c,p,g){this.points=[],this.pointsLength=1,this.points[0]=new u(c,p,g)},f=[],v=new r,d=function(c,p,g,x){if(p.commandBuffer.length!==0){g.addToRenderList(p);var m=c.pipelines.set(p.pipeline,p);c.pipelines.preBatch(p);for(var y=h(p,g,x).calc,T=v.loadIdentity(),C=p.commandBuffer,S=g.alpha*p.alpha,E=1,P=m.fillTint,M=m.strokeTint,O=0,A=0,R=0,F=.01,I=Math.PI*2,D,N=[],z=0,U=!0,W=null,w=o.getTintAppendFloatAlpha,L=0;L<C.length;L++)switch(D=C[L],D){case s.BEGIN_PATH:{N.length=0,W=null,U=!0;break}case s.CLOSE_PATH:{U=!1,W&&W.points.length&&W.points.push(W.points[0]);break}case s.FILL_PATH:{for(z=0;z<N.length;z++)m.batchFillPath(N[z].points,T,y);break}case s.STROKE_PATH:{for(z=0;z<N.length;z++)m.batchStrokePath(N[z].points,E,U,T,y);break}case s.LINE_STYLE:{E=C[++L];var B=C[++L],b=C[++L]*S,G=w(B,b);M.TL=G,M.TR=G,M.BL=G,M.BR=G;break}case s.FILL_STYLE:{var Y=C[++L],V=C[++L]*S,X=w(Y,V);P.TL=X,P.TR=X,P.BL=X,P.BR=X;break}case s.GRADIENT_FILL_STYLE:{var H=C[++L]*S,k=C[++L]*S,$=C[++L]*S,K=C[++L]*S;P.TL=w(C[++L],H),P.TR=w(C[++L],k),P.BL=w(C[++L],$),P.BR=w(C[++L],K);break}case s.GRADIENT_LINE_STYLE:{E=C[++L];var Z=C[++L]*S;M.TL=w(C[++L],Z),M.TR=w(C[++L],Z),M.BL=w(C[++L],Z),M.BR=w(C[++L],Z);break}case s.ARC:{var Q=0,J=C[++L],tt=C[++L],lt=C[++L],ot=C[++L],et=C[++L],j=C[++L],ft=C[++L];for(et-=ot,j?et<-I?et=-I:et>0&&(et=-I+et%I):et>I?et=I:et<0&&(et=I+et%I),W===null&&(W=new l(J+Math.cos(ot)*lt,tt+Math.sin(ot)*lt,E),N.push(W),Q+=F);Q<1+ft;)R=et*Q+ot,O=J+Math.cos(R)*lt,A=tt+Math.sin(R)*lt,W.points.push(new u(O,A,E)),Q+=F;R=et+ot,O=J+Math.cos(R)*lt,A=tt+Math.sin(R)*lt,W.points.push(new u(O,A,E));break}case s.FILL_RECT:{m.batchFillRect(C[++L],C[++L],C[++L],C[++L],T,y);break}case s.FILL_TRIANGLE:{m.batchFillTriangle(C[++L],C[++L],C[++L],C[++L],C[++L],C[++L],T,y);break}case s.STROKE_TRIANGLE:{m.batchStrokeTriangle(C[++L],C[++L],C[++L],C[++L],C[++L],C[++L],E,T,y);break}case s.LINE_TO:{W!==null?W.points.push(new u(C[++L],C[++L],E)):(W=new l(C[++L],C[++L],E),N.push(W));break}case s.MOVE_TO:{W=new l(C[++L],C[++L],E),N.push(W);break}case s.SAVE:{f.push(T.copyToArray());break}case s.RESTORE:{T.copyFromArray(f.pop());break}case s.TRANSLATE:{J=C[++L],tt=C[++L],T.translate(J,tt);break}case s.SCALE:{J=C[++L],tt=C[++L],T.scale(J,tt);break}case s.ROTATE:{T.rotate(C[++L]);break}}c.pipelines.postBatch(p)}};e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1066),h=i(1067),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h),h.pipeline.batchSprite(h,r,o)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h),s.batchSprite(h,h.frame,r,o)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1069),h=i(1070),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h),this.pipeline.batchSprite(h,r,o)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h),s.batchSprite(h,h.frame,r,o)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1072),h=i(1073),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=h.list,u=o.length;if(u!==0){h.depthSort(),s.pipelines.preBatch(h);var l=h.blendMode!==-1;l||s.setBlendMode(0);for(var f=h.alpha,v=0;v<u;v++){var d=o[v];if(!!d.willRender(r)){var c,p,g,x;if(d.alphaTopLeft!==void 0)c=d.alphaTopLeft,p=d.alphaTopRight,g=d.alphaBottomLeft,x=d.alphaBottomRight;else{var m=d.alpha;c=m,p=m,g=m,x=m}!l&&d.blendMode!==s.currentBlendMode&&s.setBlendMode(d.blendMode);var y=d.mask;y&&y.preRenderWebGL(s,d,r);var T=d.type;T!==s.currentType&&(s.newType=!0,s.currentType=T),s.nextTypeMatch=v<u-1?o[v+1].type===s.currentType:!1,d.setAlpha(c*f,p*f,g*f,x*f),d.renderWebGL(s,d,r),d.setAlpha(c,p,g,x),y&&y.postRenderWebGL(s,r),s.newType=!1}}s.pipelines.postBatch(h)}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=h.list;if(o.length!==0){h.depthSort();var u=h.blendMode!==-1;u||s.setBlendMode(0);var l=h._alpha;h.mask&&h.mask.preRenderCanvas(s,null,r);for(var f=0;f<o.length;f++){var v=o[f];if(!!v.willRender(r)){var d=v.alpha;!u&&v.blendMode!==s.currentBlendMode&&s.setBlendMode(v.blendMode),v.setAlpha(d*l),v.renderCanvas(s,v,r),v.setAlpha(d)}}h.mask&&h.mask.postRenderCanvas(s)}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={EmitterOp:i(449),GravityWell:i(450),Particle:i(451),ParticleEmitter:i(452),ParticleEmitterManager:i(220),Zones:i(1078)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1076),h=i(1077),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),h=i(12),r=new s,o=new s,u=new s,l=new s,f=function(v,d,c,p){var g=d.emitters.list,x=g.length;if(x!==0){var m=v.pipelines.set(d.pipeline),y=r,T=o,C=u,S=l;p?(S.loadIdentity(),S.multiply(p),S.translate(d.x,d.y),S.rotate(d.rotation),S.scale(d.scaleX,d.scaleY)):S.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);var E=c.roundPixels,P=d.defaultFrame.glTexture,M=h.getTintAppendFloatAlpha,O=m.setGameObject(d,d.defaultFrame);v.pipelines.preBatch(d);for(var A=0;A<x;A++){var R=g[A],F=R.alive,I=F.length;if(!(!R.visible||I===0)){c.addToRenderList(R);var D=R.scrollFactorX,N=R.scrollFactorY;v.setBlendMode(R.blendMode),R.mask&&(R.mask.preRenderWebGL(v,R,c),v.pipelines.set(d.pipeline));for(var z=0,U=0;U<I;U++){var W=F[U],w=W.alpha*c.alpha;if(!(w<=0)){C.applyITRS(W.x,W.y,W.rotation,W.scaleX,W.scaleY),y.copyFrom(c.matrix),y.multiplyWithOffset(S,-c.scrollX*D,-c.scrollY*N),C.e=W.x,C.f=W.y,y.multiply(C,T);var L=W.frame,B=-L.halfWidth,b=-L.halfHeight,G=B+L.width,Y=b+L.height,V=T.getXRound(B,b,E),X=T.getYRound(B,b,E),H=T.getXRound(B,Y,E),k=T.getYRound(B,Y,E),$=T.getXRound(G,Y,E),K=T.getYRound(G,Y,E),Z=T.getXRound(G,b,E),Q=T.getYRound(G,b,E),J=M(W.tint,w);m.batchQuad(R,V,X,H,k,$,K,Z,Q,L.u0,L.v0,L.u1,L.v1,J,J,J,J,z,P,O)}}R.mask&&R.mask.postRenderWebGL(v,c)}}v.pipelines.postBatch(d)}};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),h=new s,r=new s,o=new s,u=new s,l=function(f,v,d,c){var p=v.emitters.list,g=p.length;if(g!==0){var x=h.copyFrom(d.matrix),m=r,y=o,T=u;c?(T.loadIdentity(),T.multiply(c),T.translate(v.x,v.y),T.rotate(v.rotation),T.scale(v.scaleX,v.scaleY)):T.applyITRS(v.x,v.y,v.rotation,v.scaleX,v.scaleY);for(var C=f.currentContext,S=d.roundPixels,E=0;E<g;E++){var P=p[E],M=P.alive,O=M.length;if(!(!P.visible||O===0)){d.addToRenderList(P);var A=P.scrollFactorX,R=P.scrollFactorY;C.save(),C.globalCompositeOperation=f.blendModes[P.blendMode];for(var F=0;F<O;F++){var I=M[F],D=I.alpha*d.alpha;if(!(D<=0)){y.applyITRS(I.x,I.y,I.rotation,I.scaleX,I.scaleY),x.copyFrom(d.matrix),x.multiplyWithOffset(T,-d.scrollX*A,-d.scrollY*R),y.e=I.x,y.f=I.y,x.multiply(y,m);var N=I.frame,z=N.canvasData,U=-N.halfWidth,W=-N.halfHeight;C.globalAlpha=D,C.save(),m.setToContext(C),S&&(U=Math.round(U),W=Math.round(W)),C.imageSmoothingEnabled=!(!f.antialias||N.source.scaleMode),C.drawImage(N.source.image,z.x,z.y,z.width,z.height,U,W,z.width,z.height),C.restore()}}C.restore()}}}};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DeathZone:i(453),EdgeZone:i(454),RandomZone:i(456)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1080),h=i(1081),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),h=function(r,o,u,l){u.addToRenderList(o);var f=u.alpha,v=o.renderTarget,d=v.width,c=v.height,p=s.getTintAppendFloatAlpha,g=r.pipelines.set(o.pipeline),x=g.setTexture2D(v.texture);r.pipelines.preBatch(o),g.batchTexture(o,v.texture,d,c,o.x,o.y,d,c,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,d,c,p(o.tintTopLeft,f*o._alphaTL),p(o.tintTopRight,f*o._alphaTR),p(o.tintBottomLeft,f*o._alphaBL),p(o.tintBottomRight,f*o._alphaBR),o.tintFill,0,0,u,l,!0,x),r.resetTextures(),r.pipelines.postBatch(o)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){r.addToRenderList(h),s.batchSprite(h,h.frame,r,o)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1083),h=i(17),r={Parse:i(1084)};r=h(!1,r,s),e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),h=function(r,o){var u=o.width,l=o.height,f=Math.floor(u/2),v=Math.floor(l/2),d=s(o,"chars","");if(d!==""){var c=s(o,"image",""),p=r.sys.textures.getFrame(c),g=p.cutX,x=p.cutY,m=p.source.width,y=p.source.height,T=s(o,"offset.x",0),C=s(o,"offset.y",0),S=s(o,"spacing.x",0),E=s(o,"spacing.y",0),P=s(o,"lineSpacing",0),M=s(o,"charsPerRow",null);M===null&&(M=m/u,M>d.length&&(M=d.length));for(var O=T,A=C,R={retroFont:!0,font:c,size:u,lineHeight:l+P,chars:{}},F=0,I=0;I<d.length;I++){var D=d.charCodeAt(I),N=(g+O)/m,z=(x+A)/y,U=(g+O+u)/m,W=(x+A+l)/y;R.chars[D]={x:O,y:A,width:u,height:l,centerX:f,centerY:v,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:N,v0:z,u1:U,v1:W},F++,F===M?(F=0,O=T,A+=l+E):O+=u+S}var w={data:R,frame:null,texture:c};return w}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1086),h=i(1087),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(12),r=function(o,u,l,f){l.addToRenderList(u);var v=o.pipelines.set(u.pipeline,u),d=s(u,l,f).calc,c=u.vertices,p=u.uv,g=u.colors,x=u.alphas,m=u.alpha,y=h.getTintAppendFloatAlpha,T=l.roundPixels,C=c.length,S=Math.floor(C*.5);v.flush(),o.pipelines.preBatch(u);var E=v.setGameObject(u),P=v.vertexViewF32,M=v.vertexViewU32,O=v.vertexCount*v.currentShader.vertexComponentCount-1,A=0,R=u.tintFill;u.dirty&&u.updateVertices();for(var F=u.debugCallback,I=[],D=0;D<C;D+=2){var N=c[D+0],z=c[D+1],U=N*d.a+z*d.c+d.e,W=N*d.b+z*d.d+d.f;T&&(U=Math.round(U),W=Math.round(W)),P[++O]=U,P[++O]=W,P[++O]=p[D+0],P[++O]=p[D+1],P[++O]=E,P[++O]=R,M[++O]=y(g[A],l.alpha*(x[A]*m)),A++,F&&(I[D+0]=U,I[D+1]=W)}F&&F.call(u,u,C,I),v.vertexCount+=S,o.pipelines.postBatch(u)};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1089),h=i(1090),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),h=function(r,o,u,l){if(!(o.width===0||o.height===0)){u.addToRenderList(o);var f=o.frame,v=f.width,d=f.height,c=s.getTintAppendFloatAlpha,p=r.pipelines.set(o.pipeline,o),g=p.setTexture2D(f.glTexture,o);r.pipelines.preBatch(o),p.batchTexture(o,f.glTexture,v,d,o.x,o.y,v/o.style.resolution,d/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,v,d,c(o.tintTopLeft,u.alpha*o._alphaTL),c(o.tintTopRight,u.alpha*o._alphaTR),c(o.tintBottomLeft,u.alpha*o._alphaBL),c(o.tintBottomRight,u.alpha*o._alphaBR),o.tintFill,0,0,u,l,!1,g),r.pipelines.postBatch(o)}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h.width===0||h.height===0||(r.addToRenderList(h),s.batchSprite(h,h.frame,r,o))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1092),h=i(1093),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),h=function(r,o,u,l){o.updateCanvas();var f=o.width,v=o.height;if(!(f===0||v===0)){u.addToRenderList(o),r.pipelines.preBatch(o);var d=s.getTintAppendFloatAlpha,c=r.pipelines.set(o.pipeline,o),p=c.setTexture2D(o.fillPattern,o);c.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,f,v,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*f,o.originY*v,0,0,f,v,d(o.tintTopLeft,u.alpha*o._alphaTL),d(o.tintTopRight,u.alpha*o._alphaTR),d(o.tintBottomLeft,u.alpha*o._alphaBL),d(o.tintBottomRight,u.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,u,l,!1,p),r.pipelines.postBatch(o)}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h.updateCanvas(),r.addToRenderList(h),s.batchSprite(h,h.frame,r,o)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1095),h=i(1096),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h.videoTexture&&(r.addToRenderList(h),h.pipeline.batchSprite(h,r,o))};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h.videoTexture&&(r.addToRenderList(h),s.batchSprite(h,h.frame,r,o))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1098),h=i(1099),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(114),r=i(81),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=s(l,f,v),p=d.calcMatrix.copyFrom(c.calc),g=l._displayOriginX,x=l._displayOriginY,m=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&h(d,p,l,m,g,x),l.isStroked&&r(d,l,m,g,x),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(36),h=i(48),r=i(60),o=i(30),u=function(l,f,v,d){v.addToRenderList(f);var c=l.currentContext;if(o(l,c,f,v,d)){var p=f.radius;c.beginPath(),c.arc(p-f.originX*(p*2),p-f.originY*(p*2),p,s(f._startAngle),s(f._endAngle),f.anticlockwise),f.closePath&&c.closePath(),f.isFilled&&(h(c,f),c.fill()),f.isStroked&&(r(c,f),c.stroke()),c.restore()}};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1101),h=i(1102),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),h=i(19),r=i(81),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=h(l,f,v),p=d.calcMatrix.copyFrom(c.calc),g=l._displayOriginX+l._curveBounds.x,x=l._displayOriginY+l._curveBounds.y,m=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,m,g,x),l.isStroked&&r(d,l,m,g,x),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=l._displayOriginX+l._curveBounds.x,p=l._displayOriginY+l._curveBounds.y,g=l.pathData,x=g.length-1,m=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(m,y),l.closePath||(x-=2);for(var T=2;T<x;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}l.closePath&&d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(h(d,l),d.stroke()),d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1104),h=i(1105),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),h=i(19),r=i(81),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=h(l,f,v),p=d.calcMatrix.copyFrom(c.calc),g=l._displayOriginX,x=l._displayOriginY,m=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,m,g,x),l.isStroked&&r(d,l,m,g,x),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=l._displayOriginX,p=l._displayOriginY,g=l.pathData,x=g.length-1,m=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(m,y),l.closePath||(x-=2);for(var T=2;T<x;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(h(d,l),d.stroke()),d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1107),h=i(1108),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(12),r=function(o,u,l,f){l.addToRenderList(u);var v=o.pipelines.set(u.pipeline),d=s(u,l,f),c=v.calcMatrix.copyFrom(d.calc);c.translate(-u._displayOriginX,-u._displayOriginY);var p=l.alpha*u.alpha,g=u.width,x=u.height,m=u.cellWidth,y=u.cellHeight,T=Math.ceil(g/m),C=Math.ceil(x/y),S=m,E=y,P=m-(T*m-g),M=y-(C*y-x),O,A,R=u.showCells,F=u.showAltCells,I=u.showOutline,D=0,N=0,z=0,U=0,W=0;if(I&&(S--,E--,P===m&&P--,M===y&&M--),o.pipelines.preBatch(u),R&&u.fillAlpha>0)for(O=v.fillTint,A=h.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*p),O.TL=A,O.TR=A,O.BL=A,O.BR=A,N=0;N<C;N++)for(F&&(z=N%2),D=0;D<T;D++){if(F&&z){z=0;continue}z++,U=D<T-1?S:P,W=N<C-1?E:M,v.batchFillRect(D*m,N*y,U,W)}if(F&&u.altFillAlpha>0)for(O=v.fillTint,A=h.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*p),O.TL=A,O.TR=A,O.BL=A,O.BR=A,N=0;N<C;N++)for(F&&(z=N%2),D=0;D<T;D++){if(F&&!z){z=1;continue}z=0,U=D<T-1?S:P,W=N<C-1?E:M,v.batchFillRect(D*m,N*y,U,W)}if(I&&u.outlineFillAlpha>0){var w=v.strokeTint,L=h.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*p);for(w.TL=L,w.TR=L,w.BL=L,w.BR=L,D=1;D<T;D++){var B=D*m;v.batchLine(B,0,B,x,1,1,1,0,!1)}for(N=1;N<C;N++){var b=N*y;v.batchLine(0,b,g,b,1,1,1,0,!1)}}o.pipelines.postBatch(u)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=-l._displayOriginX,p=-l._displayOriginY,g=f.alpha*l.alpha,x=l.width,m=l.height,y=l.cellWidth,T=l.cellHeight,C=Math.ceil(x/y),S=Math.ceil(m/T),E=y,P=T,M=y-(C*y-x),O=T-(S*T-m),A=l.showCells,R=l.showAltCells,F=l.showOutline,I=0,D=0,N=0,z=0,U=0;if(F&&(E--,P--,M===y&&M--,O===T&&O--),A&&l.fillAlpha>0)for(s(d,l),D=0;D<S;D++)for(R&&(N=D%2),I=0;I<C;I++){if(R&&N){N=0;continue}N++,z=I<C-1?E:M,U=D<S-1?P:O,d.fillRect(c+I*y,p+D*T,z,U)}if(R&&l.altFillAlpha>0)for(s(d,l,l.altFillColor,l.altFillAlpha*g),D=0;D<S;D++)for(R&&(N=D%2),I=0;I<C;I++){if(R&&!N){N=1;continue}N=0,z=I<C-1?E:M,U=D<S-1?P:O,d.fillRect(c+I*y,p+D*T,z,U)}if(F&&l.outlineFillAlpha>0){for(h(d,l,l.outlineFillColor,l.outlineFillAlpha*g),I=1;I<C;I++){var W=I*y;d.beginPath(),d.moveTo(W+c,p),d.lineTo(W+c,m+p),d.stroke()}for(D=1;D<S;D++){var w=D*T;d.beginPath(),d.moveTo(c,w+p),d.lineTo(c+x,w+p),d.stroke()}}d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1110),h=i(1111),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(12),r=function(o,u,l,f){l.addToRenderList(u);var v=o.pipelines.set(u.pipeline),d=s(u,l,f),c=v.calcMatrix.copyFrom(d.calc),p=u.width,g=u.height,x=p/2,m=p/u.projection,y=l.alpha*u.alpha;if(!!u.isFilled){var T,C,S,E,P,M,O,A,R;o.pipelines.preBatch(u),u.showTop&&(T=h.getTintAppendFloatAlpha(u.fillTop,y),C=c.getX(-x,-g),S=c.getY(-x,-g),E=c.getX(0,-m-g),P=c.getY(0,-m-g),M=c.getX(x,-g),O=c.getY(x,-g),A=c.getX(0,m-g),R=c.getY(0,m-g),v.batchQuad(u,C,S,E,P,M,O,A,R,0,0,1,1,T,T,T,T,2)),u.showLeft&&(T=h.getTintAppendFloatAlpha(u.fillLeft,y),C=c.getX(-x,0),S=c.getY(-x,0),E=c.getX(0,m),P=c.getY(0,m),M=c.getX(0,m-g),O=c.getY(0,m-g),A=c.getX(-x,-g),R=c.getY(-x,-g),v.batchQuad(u,C,S,E,P,M,O,A,R,0,0,1,1,T,T,T,T,2)),u.showRight&&(T=h.getTintAppendFloatAlpha(u.fillRight,y),C=c.getX(x,0),S=c.getY(x,0),E=c.getX(0,m),P=c.getY(0,m),M=c.getX(0,m-g),O=c.getY(0,m-g),A=c.getX(x,-g),R=c.getY(x,-g),v.batchQuad(u,C,S,E,P,M,O,A,R,0,0,1,1,T,T,T,T,2)),o.pipelines.postBatch(u)}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(30),r=function(o,u,l,f){l.addToRenderList(u);var v=o.currentContext;if(h(o,v,u,l,f)&&u.isFilled){var d=u.width,c=u.height,p=d/2,g=d/u.projection;u.showTop&&(s(v,u,u.fillTop),v.beginPath(),v.moveTo(-p,-c),v.lineTo(0,-g-c),v.lineTo(p,-c),v.lineTo(p,-1),v.lineTo(0,g-1),v.lineTo(-p,-1),v.lineTo(-p,-c),v.fill()),u.showLeft&&(s(v,u,u.fillLeft),v.beginPath(),v.moveTo(-p,0),v.lineTo(0,g),v.lineTo(0,g-c),v.lineTo(-p,-c),v.lineTo(-p,0),v.fill()),u.showRight&&(s(v,u,u.fillRight),v.beginPath(),v.moveTo(p,0),v.lineTo(0,g),v.lineTo(0,g-c),v.lineTo(p,-c),v.lineTo(p,0),v.fill()),v.restore()}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1113),h=i(1114),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(12),r=function(o,u,l,f){l.addToRenderList(u);var v=o.pipelines.set(u.pipeline),d=s(u,l,f),c=v.calcMatrix.copyFrom(d.calc),p=u.width,g=u.height,x=p/2,m=p/u.projection,y=u.isReversed,T=l.alpha*u.alpha;if(!!u.isFilled){o.pipelines.preBatch(u);var C,S,E,P,M,O,A;if(u.showTop&&y){C=h.getTintAppendFloatAlpha(u.fillTop,T),S=c.getX(-x,-g),E=c.getY(-x,-g),P=c.getX(0,-m-g),M=c.getY(0,-m-g),O=c.getX(x,-g),A=c.getY(x,-g);var R=c.getX(0,m-g),F=c.getY(0,m-g);v.batchQuad(u,S,E,P,M,O,A,R,F,0,0,1,1,C,C,C,C,2)}u.showLeft&&(C=h.getTintAppendFloatAlpha(u.fillLeft,T),y?(S=c.getX(-x,-g),E=c.getY(-x,-g),P=c.getX(0,m),M=c.getY(0,m),O=c.getX(0,m-g),A=c.getY(0,m-g)):(S=c.getX(-x,0),E=c.getY(-x,0),P=c.getX(0,m),M=c.getY(0,m),O=c.getX(0,m-g),A=c.getY(0,m-g)),v.batchTri(u,S,E,P,M,O,A,0,0,1,1,C,C,C,2)),u.showRight&&(C=h.getTintAppendFloatAlpha(u.fillRight,T),y?(S=c.getX(x,-g),E=c.getY(x,-g),P=c.getX(0,m),M=c.getY(0,m),O=c.getX(0,m-g),A=c.getY(0,m-g)):(S=c.getX(x,0),E=c.getY(x,0),P=c.getX(0,m),M=c.getY(0,m),O=c.getX(0,m-g),A=c.getY(0,m-g)),v.batchTri(u,S,E,P,M,O,A,0,0,1,1,C,C,C,2)),o.pipelines.postBatch(u)}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(30),r=function(o,u,l,f){l.addToRenderList(u);var v=o.currentContext;if(h(o,v,u,l,f)&&u.isFilled){var d=u.width,c=u.height,p=d/2,g=d/u.projection,x=u.isReversed;u.showTop&&x&&(s(v,u,u.fillTop),v.beginPath(),v.moveTo(-p,-c),v.lineTo(0,-g-c),v.lineTo(p,-c),v.lineTo(0,g-c),v.fill()),u.showLeft&&(s(v,u,u.fillLeft),v.beginPath(),x?(v.moveTo(-p,-c),v.lineTo(0,g),v.lineTo(0,g-c)):(v.moveTo(-p,0),v.lineTo(0,g),v.lineTo(0,g-c)),v.fill()),u.showRight&&(s(v,u,u.fillRight),v.beginPath(),x?(v.moveTo(p,-c),v.lineTo(0,g),v.lineTo(0,g-c)):(v.moveTo(p,0),v.lineTo(0,g),v.lineTo(0,g-c)),v.fill()),v.restore()}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1116),h=i(1117),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(12),r=function(o,u,l,f){l.addToRenderList(u);var v=o.pipelines.set(u.pipeline),d=s(u,l,f);v.calcMatrix.copyFrom(d.calc);var c=u._displayOriginX,p=u._displayOriginY,g=l.alpha*u.alpha;if(o.pipelines.preBatch(u),u.isStroked){var x=v.strokeTint,m=h.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*g);x.TL=m,x.TR=m,x.BL=m,x.BR=m;var y=u._startWidth,T=u._endWidth;v.batchLine(u.geom.x1-c,u.geom.y1-p,u.geom.x2-c,u.geom.y2-p,y,T,1,0,!1,d.sprite,d.camera)}o.pipelines.postBatch(u)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(60),h=i(30),r=function(o,u,l,f){l.addToRenderList(u);var v=o.currentContext;if(h(o,v,u,l,f)){var d=u._displayOriginX,c=u._displayOriginY;u.isStroked&&(s(v,u),v.beginPath(),v.moveTo(u.geom.x1-d,u.geom.y1-c),v.lineTo(u.geom.x2-d,u.geom.y2-c),v.stroke()),v.restore()}};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1119),h=i(1120),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),h=i(19),r=i(81),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=h(l,f,v),p=d.calcMatrix.copyFrom(c.calc),g=l._displayOriginX,x=l._displayOriginY,m=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,m,g,x),l.isStroked&&r(d,l,m,g,x),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=l._displayOriginX,p=l._displayOriginY,g=l.pathData,x=g.length-1,m=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(m,y),l.closePath||(x-=2);for(var T=2;T<x;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(h(d,l),d.stroke()),d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1122),h=i(1123),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(81),r=i(12),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=s(l,f,v);d.calcMatrix.copyFrom(c.calc);var p=l._displayOriginX,g=l._displayOriginY,x=f.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var m=d.fillTint,y=r.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*x);m.TL=y,m.TR=y,m.BL=y,m.BR=y,d.batchFillRect(-p,-g,l.width,l.height)}l.isStroked&&h(d,l,x,p,g),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=l._displayOriginX,p=l._displayOriginY;l.isFilled&&(s(d,l),d.fillRect(-c,-p,l.width,l.height)),l.isStroked&&(h(d,l),d.beginPath(),d.rect(-c,-p,l.width,l.height),d.stroke()),d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1125),h=i(1126),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(114),h=i(19),r=i(81),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=h(l,f,v),p=d.calcMatrix.copyFrom(c.calc),g=l._displayOriginX,x=l._displayOriginY,m=f.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&s(d,p,l,m,g,x),l.isStroked&&r(d,l,m,g,x),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=l._displayOriginX,p=l._displayOriginY,g=l.pathData,x=g.length-1,m=g[0]-c,y=g[1]-p;d.beginPath(),d.moveTo(m,y),l.closePath||(x-=2);for(var T=2;T<x;T+=2){var C=g[T]-c,S=g[T+1]-p;d.lineTo(C,S)}d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(h(d,l),d.stroke()),d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1128),h=i(1129),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=i(81),r=i(12),o=function(u,l,f,v){f.addToRenderList(l);var d=u.pipelines.set(l.pipeline),c=s(l,f,v);d.calcMatrix.copyFrom(c.calc);var p=l._displayOriginX,g=l._displayOriginY,x=f.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var m=d.fillTint,y=r.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*x);m.TL=y,m.TR=y,m.BL=y,m.BR=y;var T=l.geom.x1-p,C=l.geom.y1-g,S=l.geom.x2-p,E=l.geom.y2-g,P=l.geom.x3-p,M=l.geom.y3-g;d.batchFillTriangle(T,C,S,E,P,M,c.sprite,c.camera)}l.isStroked&&h(d,l,x,p,g),u.pipelines.postBatch(l)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(48),h=i(60),r=i(30),o=function(u,l,f,v){f.addToRenderList(l);var d=u.currentContext;if(r(u,d,l,f,v)){var c=l._displayOriginX,p=l._displayOriginY,g=l.geom.x1-c,x=l.geom.y1-p,m=l.geom.x2-c,y=l.geom.y2-p,T=l.geom.x3-c,C=l.geom.y3-p;d.beginPath(),d.moveTo(g,x),d.lineTo(m,y),d.lineTo(T,C),d.closePath(),l.isFilled&&(s(d,l),d.fill()),l.isStroked&&(h(d,l),d.stroke()),d.restore()}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(213),h=i(5);h.register("blitter",function(r,o,u,l){return this.displayList.add(new s(this.scene,r,o,u,l))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(214),h=i(5);h.register("container",function(r,o,u){return this.displayList.add(new s(this.scene,r,o,u))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(442),h=i(5);h.register("dom",function(r,o,u,l,f){var v=new s(this.scene,r,o,u,l,f);return this.displayList.add(v),v})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(215),h=i(5);h.register("dynamicBitmapText",function(r,o,u,l,f){return this.displayList.add(new s(this.scene,r,o,u,l,f))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(444),h=i(5);h.register("extern",function(){var r=new s(this.scene);return this.displayList.add(r),r})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(216),h=i(5);h.register("graphics",function(r){return this.displayList.add(new s(this.scene,r))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(113),h=i(5);h.register("group",function(r,o){return this.updateList.add(new s(this.scene,r,o))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(125),h=i(5);h.register("image",function(r,o,u,l){return this.displayList.add(new s(this.scene,r,o,u,l))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(219),h=i(5);h.register("layer",function(r){return this.displayList.add(new s(this.scene,r))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(220);s.register("particles",function(r,o,u){return this.displayList.add(new h(this.scene,r,o,u))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(457);s.register("follower",function(r,o,u,l,f){var v=new h(this.scene,r,o,u,l,f);return this.displayList.add(v),this.updateList.add(v),v})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(221);s.register("renderTexture",function(r,o,u,l,f,v){return this.displayList.add(new h(this.scene,r,o,u,l,f,v))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(223),h=i(5);h.register("rope",function(r,o,u,l,f,v,d,c){return this.displayList.add(new s(this.scene,r,o,u,l,f,v,d,c))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(73);s.register("sprite",function(r,o,u,l){var f=new h(this.scene,r,o,u,l);return this.displayList.add(f),f})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(148),h=i(5);h.register("bitmapText",function(r,o,u,l,f,v){return this.displayList.add(new s(this.scene,r,o,u,l,f,v))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(224),h=i(5);h.register("text",function(r,o,u,l){return this.displayList.add(new s(this.scene,r,o,u,l))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(225),h=i(5);h.register("tileSprite",function(r,o,u,l,f,v){return this.displayList.add(new s(this.scene,r,o,u,l,f,v))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(129),h=i(5);h.register("zone",function(r,o,u,l){return this.displayList.add(new s(this.scene,r,o,u,l))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(226),h=i(5);h.register("video",function(r,o,u){return this.displayList.add(new s(this.scene,r,o,u))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(461),h=i(5);h.register("arc",function(r,o,u,l,f,v,d,c){return this.displayList.add(new s(this.scene,r,o,u,l,f,v,d,c))}),h.register("circle",function(r,o,u,l,f){return this.displayList.add(new s(this.scene,r,o,u,0,360,!1,l,f))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(462);s.register("curve",function(r,o,u,l,f){return this.displayList.add(new h(this.scene,r,o,u,l,f))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(463),h=i(5);h.register("ellipse",function(r,o,u,l,f,v){return this.displayList.add(new s(this.scene,r,o,u,l,f,v))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(464);s.register("grid",function(r,o,u,l,f,v,d,c,p,g){return this.displayList.add(new h(this.scene,r,o,u,l,f,v,d,c,p,g))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(465);s.register("isobox",function(r,o,u,l,f,v,d){return this.displayList.add(new h(this.scene,r,o,u,l,f,v,d))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(466);s.register("isotriangle",function(r,o,u,l,f,v,d,c){return this.displayList.add(new h(this.scene,r,o,u,l,f,v,d,c))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(467);s.register("line",function(r,o,u,l,f,v,d,c){return this.displayList.add(new h(this.scene,r,o,u,l,f,v,d,c))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(468);s.register("polygon",function(r,o,u,l,f){return this.displayList.add(new h(this.scene,r,o,u,l,f))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(473);s.register("rectangle",function(r,o,u,l,f,v){return this.displayList.add(new h(this.scene,r,o,u,l,f,v))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(474),h=i(5);h.register("star",function(r,o,u,l,f,v,d){return this.displayList.add(new s(this.scene,r,o,u,l,f,v,d))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(475);s.register("triangle",function(r,o,u,l,f,v,d,c,p,g){return this.displayList.add(new h(this.scene,r,o,u,l,f,v,d,c,p,g))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(213),h=i(28),r=i(16),o=i(13);r.register("blitter",function(u,l){u===void 0&&(u={});var f=o(u,"key",null),v=o(u,"frame",null),d=new s(this.scene,0,0,f,v);return l!==void 0&&(u.add=l),h(this.scene,d,u),d})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(214),r=i(16),o=i(13);r.register("container",function(u,l){u===void 0&&(u={});var f=o(u,"x",0),v=o(u,"y",0),d=o(u,"children",null),c=new h(this.scene,f,v,d);return l!==void 0&&(u.add=l),s(this.scene,c,u),c})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(215),h=i(28),r=i(16),o=i(13);r.register("dynamicBitmapText",function(u,l){u===void 0&&(u={});var f=o(u,"font",""),v=o(u,"text",""),d=o(u,"size",!1),c=new s(this.scene,0,0,f,v,d);return l!==void 0&&(u.add=l),h(this.scene,c,u),c})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),h=i(216);s.register("graphics",function(r,o){r===void 0&&(r={}),o!==void 0&&(r.add=o);var u=new h(this.scene,r);return r.add&&this.scene.sys.displayList.add(u),u})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),h=i(113);s.register("group",function(r){return new h(this.scene,null,r)})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(125);h.register("image",function(u,l){u===void 0&&(u={});var f=r(u,"key",null),v=r(u,"frame",null),d=new o(this.scene,0,0,f,v);return l!==void 0&&(u.add=l),s(this.scene,d,u),d})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(219),r=i(16),o=i(13);r.register("layer",function(u,l){u===void 0&&(u={});var f=o(u,"children",null),v=new h(this.scene,f);return l!==void 0&&(u.add=l),s(this.scene,v,u),v})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),h=i(13),r=i(2),o=i(220);s.register("particles",function(u,l){u===void 0&&(u={});var f=h(u,"key",null),v=h(u,"frame",null),d=r(u,"emitters",null),c=new o(this.scene,f,v,d);l!==void 0&&(u.add=l);var p=r(u,"add",!1);return p?this.displayList.add(c):this.updateList.add(c),c})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(221);h.register("renderTexture",function(u,l){u===void 0&&(u={});var f=r(u,"x",0),v=r(u,"y",0),d=r(u,"width",32),c=r(u,"height",32),p=r(u,"key",void 0),g=r(u,"frame",void 0),x=new o(this.scene,f,v,d,c,p,g);return l!==void 0&&(u.add=l),s(this.scene,x,u),x})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(6),u=i(223);h.register("rope",function(l,f){l===void 0&&(l={});var v=r(l,"key",null),d=r(l,"frame",null),c=r(l,"horizontal",!0),p=o(l,"points",void 0),g=o(l,"colors",void 0),x=o(l,"alphas",void 0),m=new u(this.scene,0,0,v,d,p,c,g,x);return f!==void 0&&(l.add=f),s(this.scene,m,l),l.add||this.updateList.add(m),m})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(439),r=i(16),o=i(13),u=i(73);r.register("sprite",function(l,f){l===void 0&&(l={});var v=o(l,"key",null),d=o(l,"frame",null),c=new u(this.scene,0,0,v,d);return f!==void 0&&(l.add=f),s(this.scene,c,l),h(c,l),c})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(148),h=i(28),r=i(16),o=i(13),u=i(6);r.register("bitmapText",function(l,f){l===void 0&&(l={});var v=u(l,"font",""),d=o(l,"text",""),c=o(l,"size",!1),p=u(l,"align",0),g=new s(this.scene,0,0,v,d,c,p);return f!==void 0&&(l.add=f),h(this.scene,g,l),g})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(224);h.register("text",function(u,l){u===void 0&&(u={});var f=r(u,"text",""),v=r(u,"style",null),d=r(u,"padding",null);d!==null&&(v.padding=d);var c=new o(this.scene,0,0,f,v);return l!==void 0&&(u.add=l),s(this.scene,c,u),c.autoRound=r(u,"autoRound",!0),c.resolution=r(u,"resolution",1),c})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(225);h.register("tileSprite",function(u,l){u===void 0&&(u={});var f=r(u,"x",0),v=r(u,"y",0),d=r(u,"width",512),c=r(u,"height",512),p=r(u,"key",""),g=r(u,"frame",""),x=new o(this.scene,f,v,d,c,p,g);return l!==void 0&&(u.add=l),s(this.scene,x,u),x})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),h=i(13),r=i(129);s.register("zone",function(o){var u=h(o,"x",0),l=h(o,"y",0),f=h(o,"width",1),v=h(o,"height",f);return new r(this.scene,u,l,f,v)})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(226);h.register("video",function(u,l){u===void 0&&(u={});var f=r(u,"key",null),v=new o(this.scene,0,0,f);return l!==void 0&&(u.add=l),s(this.scene,v,u),u.add||this.updateList.add(v),v})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1177),h=i(1178),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=function(r,o,u,l){if(!!o.shader){if(u.addToRenderList(o),r.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var f=s(o,u,l).calc;(r.width!==o._rendererWidth||r.height!==o._rendererHeight)&&o.projOrtho(0,r.width,r.height,0),o.load(f.matrix),o.flush()}r.pipelines.rebind()}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1180),h=i(1181),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=function(r,o,u,l){var f=o.faces,v=f.length;if(v!==0){u.addToRenderList(o);var d=r.pipelines.set(o.pipeline,o),c=s(o,u,l).calc,p=d.setGameObject(o),g=d.vertexViewF32,x=d.vertexViewU32,m=d.vertexCount*d.currentShader.vertexComponentCount-1,y=o.tintFill,T=[],C=o.debugCallback,S=c.a,E=c.b,P=c.c,M=c.d,O=c.e,A=c.f,R=o.viewPosition.z,F=o.hideCCW,I=u.roundPixels,D=u.alpha*o.alpha,N=0;r.pipelines.preBatch(o);for(var z=0;z<v;z++){var U=f[z];!U.isInView(u,F,R,D,S,E,P,M,O,A,I)||(d.shouldFlush(3)&&(d.flush(),m=0),m=U.load(g,x,m,p,y),N++,d.vertexCount+=3,C&&T.push(U))}o.totalFrame+=N,C&&C.call(o,o,T),r.pipelines.postBatch(o)}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(){};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1183),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(19),h=function(r,o,u,l){u.addToRenderList(o);var f=r.pipelines.set(o.pipeline),v=s(o,u,l).calc,d=o.width,c=o.height,p=-o._radius,g=-o._radius,x=p+d,m=g+c,y=v.getX(0,0),T=v.getY(0,0),C=v.getX(p,g),S=v.getY(p,g),E=v.getX(p,m),P=v.getY(p,m),M=v.getX(x,m),O=v.getY(x,m),A=v.getX(x,g),R=v.getY(x,g);r.pipelines.preBatch(o),f.batchPointLight(o,u,C,S,E,P,M,O,A,R,y,T),r.pipelines.postBatch(o)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(229),h=i(5);h.register("shader",function(r,o,u,l,f,v,d){return this.displayList.add(new s(this.scene,r,o,u,l,f,v,d))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(230),h=i(5);h.register("mesh",function(r,o,u,l,f,v,d,c,p,g,x){return this.displayList.add(new s(this.scene,r,o,u,l,f,v,d,c,p,g,x))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(150);s.register("pointlight",function(r,o,u,l,f,v){return this.displayList.add(new h(this.scene,r,o,u,l,f,v))})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(229);h.register("shader",function(u,l){u===void 0&&(u={});var f=r(u,"key",null),v=r(u,"x",0),d=r(u,"y",0),c=r(u,"width",128),p=r(u,"height",128),g=new o(this.scene,f,v,d,c,p);return l!==void 0&&(u.add=l),s(this.scene,g,u),g})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(6),u=i(230);h.register("mesh",function(l,f){l===void 0&&(l={});var v=r(l,"key",null),d=r(l,"frame",null),c=o(l,"vertices",[]),p=o(l,"uvs",[]),g=o(l,"indicies",[]),x=o(l,"containsZ",!1),m=o(l,"normals",[]),y=o(l,"colors",16777215),T=o(l,"alphas",1),C=new u(this.scene,0,0,v,d,c,p,g,x,m,y,T);return f!==void 0&&(l.add=f),s(this.scene,C,l),C})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(28),h=i(16),r=i(13),o=i(150);h.register("pointlight",function(u,l){u===void 0&&(u={});var f=r(u,"color",16777215),v=r(u,"radius",128),d=r(u,"intensity",1),c=r(u,"attenuation",.1),p=new o(this.scene,0,0,f,v,d,c);return l!==void 0&&(u.add=l),s(this.scene,p,u),p})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(482),r=i(24),o=i(20),u=new s({Extends:h,initialize:function(f){this.scene=f,this.systems=f.sys,f.sys.settings.isBooted||f.sys.events.once(o.BOOT,this.boot,this),h.call(this)},boot:function(){var l=this.systems.events;l.on(o.SHUTDOWN,this.shutdown,this),l.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",u,"lights"),e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65);s.Area=i(1192),s.Circumference=i(302),s.CircumferencePoint=i(169),s.Clone=i(1193),s.Contains=i(66),s.ContainsPoint=i(1194),s.ContainsRect=i(1195),s.CopyFrom=i(1196),s.Equals=i(1197),s.GetBounds=i(1198),s.GetPoint=i(300),s.GetPoints=i(301),s.Offset=i(1199),s.OffsetPoint=i(1200),s.Random=i(170),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.radius>0?Math.PI*s.radius*s.radius:0};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),h=function(r){return new s(r.x,r.y,r.radius)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),h=function(r,o){return s(r,o.x,o.y)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(66),h=function(r,o){return s(r,o.x,o.y)&&s(r,o.right,o.y)&&s(r,o.x,o.bottom)&&s(r,o.right,o.bottom)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.setTo(s.x,s.y,s.radius)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x===h.x&&s.y===h.y&&s.radius===h.radius};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r,o){return o===void 0&&(o=new s),o.x=r.left,o.y=r.top,o.width=r.diameter,o.height=r.diameter,o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.x+=h,s.y+=r,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x+=h.x,s.y+=h.y,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(111);s.Area=i(1202),s.Circumference=i(447),s.CircumferencePoint=i(218),s.Clone=i(1203),s.Contains=i(112),s.ContainsPoint=i(1204),s.ContainsRect=i(1205),s.CopyFrom=i(1206),s.Equals=i(1207),s.GetBounds=i(1208),s.GetPoint=i(445),s.GetPoints=i(446),s.Offset=i(1209),s.OffsetPoint=i(1210),s.Random=i(180),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.isEmpty()?0:s.getMajorRadius()*s.getMinorRadius()*Math.PI};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(111),h=function(r){return new s(r.x,r.y,r.width,r.height)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(112),h=function(r,o){return s(r,o.x,o.y)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(112),h=function(r,o){return s(r,o.x,o.y)&&s(r,o.right,o.y)&&s(r,o.x,o.bottom)&&s(r,o.right,o.bottom)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.setTo(s.x,s.y,s.width,s.height)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x===h.x&&s.y===h.y&&s.width===h.width&&s.height===h.height};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r,o){return o===void 0&&(o=new s),o.x=r.left,o.y=r.top,o.width=r.width,o.height=r.height,o};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.x+=h,s.y+=r,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x+=h.x,s.y+=h.y,s};e.exports=i},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(231),r=function(o,u,l){if(l===void 0&&(l=[]),h(o,u)){var f=o.x,v=o.y,d=o.radius,c=u.x,p=u.y,g=u.radius,x,m,y,T,C;if(v===p)C=(g*g-d*d-c*c+f*f)/(2*(f-c)),x=1,m=-2*p,y=c*c+C*C-2*c*C+p*p-g*g,T=m*m-4*x*y,T===0?l.push(new s(C,-m/(2*x))):T>0&&(l.push(new s(C,(-m+Math.sqrt(T))/(2*x))),l.push(new s(C,(-m-Math.sqrt(T))/(2*x))));else{var S=(f-c)/(v-p),E=(g*g-d*d-c*c+f*f-p*p+v*v)/(2*(v-p));x=S*S+1,m=2*v*S-2*E*S-2*f,y=f*f+v*v+E*E-d*d-2*v*E,T=m*m-4*x*y,T===0?(C=-m/(2*x),l.push(new s(C,E-C*S))):T>0&&(C=(-m+Math.sqrt(T))/(2*x),l.push(new s(C,E-C*S)),C=(-m-Math.sqrt(T))/(2*x),l.push(new s(C,E-C*S)))}}return l};e.exports=r},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(232),h=i(151),r=function(o,u,l){if(l===void 0&&(l=[]),h(o,u)){var f=u.getLineA(),v=u.getLineB(),d=u.getLineC(),c=u.getLineD();s(f,o,l),s(v,o,l),s(d,o,l),s(c,o,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(140),h=i(487),r=i(47),o=new r;function u(v,d,c,p,g){var x=Math.cos(v),m=Math.sin(v);o.setTo(d,c,d+x,c+m);var y=h(o,p);y&&g.push(new s(y.x,y.y,v,y.w))}function l(v,d){return v.z-d.z}var f=function(v,d,c){Array.isArray(c)||(c=[c]);for(var p=[],g=[],x=0;x<c.length;x++)for(var m=c[x].points,y=0;y<m.length;y++){var T=Math.atan2(m[y].y-d,m[y].x-v);g.indexOf(T)===-1&&(u(T,v,d,c,p),u(T-1e-5,v,d,c,p),u(T+1e-5,v,d,c,p),g.push(T))}return p.sort(l)};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=i(152),r=function(o,u,l){return l===void 0&&(l=new s),h(o,u)&&(l.x=Math.max(o.x,u.x),l.y=Math.max(o.y,u.y),l.width=Math.min(o.right,u.right)-l.x,l.height=Math.min(o.bottom,u.bottom)-l.y),l};e.exports=r},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(234),h=i(152),r=function(o,u,l){if(l===void 0&&(l=[]),h(o,u)){var f=o.getLineA(),v=o.getLineB(),d=o.getLineC(),c=o.getLineD();s(f,u,l),s(v,u,l),s(d,u,l),s(c,u,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(489),h=i(234),r=function(o,u,l){if(l===void 0&&(l=[]),s(o,u)){var f=u.getLineA(),v=u.getLineB(),d=u.getLineC();h(f,o,l),h(v,o,l),h(d,o,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(232),h=i(491),r=function(o,u,l){if(l===void 0&&(l=[]),h(o,u)){var f=o.getLineA(),v=o.getLineB(),d=o.getLineC();s(f,u,l),s(v,u,l),s(d,u,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(494),h=i(492),r=function(o,u,l){if(l===void 0&&(l=[]),s(o,u)){var f=u.getLineA(),v=u.getLineB(),d=u.getLineC();h(o,f,l),h(o,v,l),h(o,d,l)}return l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(496),h=function(r,o){if(!s(r,o))return!1;var u=Math.min(o.x1,o.x2),l=Math.max(o.x1,o.x2),f=Math.min(o.y1,o.y2),v=Math.max(o.y1,o.y2);return r.x>=u&&r.x<=l&&r.y>=f&&r.y<=v};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u,l){return l===void 0&&(l=0),!(h>s.right+l||r<s.left-l||o>s.bottom+l||u<s.top-l)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(47);s.Angle=i(97),s.BresenhamPoints=i(317),s.CenterOn=i(1222),s.Clone=i(1223),s.CopyFrom=i(1224),s.Equals=i(1225),s.Extend=i(1226),s.GetEasedPoints=i(1227),s.GetMidPoint=i(1228),s.GetNearestPoint=i(1229),s.GetNormal=i(1230),s.GetPoint=i(307),s.GetPoints=i(172),s.GetShortestDistance=i(1231),s.Height=i(1232),s.Length=i(67),s.NormalAngle=i(497),s.NormalX=i(1233),s.NormalY=i(1234),s.Offset=i(1235),s.PerpSlope=i(1236),s.Random=i(173),s.ReflectAngle=i(1237),s.Rotate=i(1238),s.RotateAroundPoint=i(1239),s.RotateAroundXY=i(236),s.SetToAngle=i(1240),s.Slope=i(1241),s.Width=i(1242),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=h-(s.x1+s.x2)/2,u=r-(s.y1+s.y2)/2;return s.x1+=o,s.y1+=u,s.x2+=o,s.y2+=u,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(47),h=function(r){return new s(r.x1,r.y1,r.x2,r.y2)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.setTo(s.x1,s.y1,s.x2,s.y2)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x1===h.x1&&s.y1===h.y1&&s.x2===h.x2&&s.y2===h.y2};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),h=function(r,o,u){u===void 0&&(u=o);var l=s(r),f=r.x2-r.x1,v=r.y2-r.y1;return o&&(r.x1=r.x1-f/l*o,r.y1=r.y1-v/l*o),u&&(r.x2=r.x2+f/l*u,r.y2=r.y2+v/l*u),r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(352),h=i(80),r=i(4),o=function(u,l,f,v,d){v===void 0&&(v=0),d===void 0&&(d=[]);var c=[],p=u.x1,g=u.y1,x=u.x2-p,m=u.y2-g,y=h(l,d),T,C,S=f-1;for(T=0;T<S;T++)C=y(T/S),c.push(new r(p+x*C,g+m*C));if(C=y(1),c.push(new r(p+x*C,g+m*C)),v>0){var E=c[0],P=[E];for(T=1;T<c.length-1;T++){var M=c[T];s(E,M)>=v&&(P.push(M),E=M)}var O=c[c.length-1];return s(E,O)<v&&P.pop(),P.push(O),P}else return c};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){return o===void 0&&(o=new s),o.x=(r.x1+r.x2)/2,o.y=(r.y1+r.y2)/2,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u){u===void 0&&(u=new s);var l=r.x1,f=r.y1,v=r.x2,d=r.y2,c=(v-l)*(v-l)+(d-f)*(d-f);if(c===0)return u;var p=((o.x-l)*(v-l)+(o.y-f)*(d-f))/c;return u.x=l+p*(v-l),u.y=f+p*(d-f),u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=i(97),r=i(4),o=function(u,l){l===void 0&&(l=new r);var f=h(u)-s.TAU;return l.x=Math.cos(f),l.y=Math.sin(f),l};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=s.x1,o=s.y1,u=s.x2,l=s.y2,f=(u-r)*(u-r)+(l-o)*(l-o);if(f===0)return!1;var v=((o-h.y)*(u-r)-(r-h.x)*(l-o))/f;return Math.abs(v)*Math.sqrt(f)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.abs(s.y1-s.y2)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=i(97),r=function(o){return Math.cos(h(o)-s.TAU)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(14),h=i(97),r=function(o){return Math.sin(h(o)-s.TAU)};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.x1+=h,s.y1+=r,s.x2+=h,s.y2+=r,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return-((s.x2-s.x1)/(s.y2-s.y1))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(97),h=i(497),r=function(o,u){return 2*h(u)-Math.PI-s(o)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(236),h=function(r,o){var u=(r.x1+r.x2)/2,l=(r.y1+r.y2)/2;return s(r,u,l,o)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(236),h=function(r,o,u){return s(r,o.x,o.y,u)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o,u){return s.x1=h,s.y1=r,s.x2=h+Math.cos(o)*u,s.y2=r+Math.sin(o)*u,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return(s.y2-s.y1)/(s.x2-s.x1)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return Math.abs(s.x1-s.x2)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={Face:i(116),GenerateGridVerts:i(1244),GenerateObjVerts:i(480),GenerateVerts:i(479),ParseObj:i(498),ParseObjMaterial:i(499),RotateFace:i(1245),Vertex:i(117)};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(116),h=i(2),r=i(69),o=i(39),u=i(117),l=new o,f=new o,v=new r,d=function(c){var p=h(c,"mesh"),g=h(c,"texture",null),x=h(c,"frame"),m=h(c,"width",1),y=h(c,"height",m),T=h(c,"widthSegments",1),C=h(c,"heightSegments",T),S=h(c,"x",0),E=h(c,"y",0),P=h(c,"z",0),M=h(c,"rotateX",0),O=h(c,"rotateY",0),A=h(c,"rotateZ",0),R=h(c,"zIsUp",!0),F=h(c,"isOrtho",p?p.dirtyCache[11]:!1),I=h(c,"colors",[16777215]),D=h(c,"alphas",[1]),N=h(c,"tile",!1),z=h(c,"flipY",!1),U=h(c,"width",null),W={faces:[],verts:[]};if(l.set(S,E,P),f.set(M,O,A),v.fromRotationXYTranslation(f,l,R),!g&&p)g=p.texture;else if(p&&typeof g=="string")g=p.scene.sys.textures.get(g);else return W;var w=g.get(x);!U&&F&&g&&p&&(m=w.width/p.height,y=w.height/p.height);var L=m/2,B=y/2,b=Math.floor(T),G=Math.floor(C),Y=b+1,V=G+1,X=m/b,H=y/G,k=[],$=[],K,Z,Q=0,J=1,tt=0,lt=1;w&&(Q=w.u0,J=w.u1,z?(tt=w.v1,lt=w.v0):(tt=w.v0,lt=w.v1));var ot=J-Q,et=lt-tt;for(Z=0;Z<V;Z++){var j=Z*H-B;for(K=0;K<Y;K++){var ft=K*X-L;$.push(ft,-j);var it=Q+ot*(K/b),ht=tt+et*(Z/G);k.push(it,ht)}}Array.isArray(I)||(I=[I]),Array.isArray(D)||(D=[D]);var ae=0,oe=0;for(Z=0;Z<G;Z++)for(K=0;K<b;K++){var Et=(K+Y*Z)*2,vt=(K+Y*(Z+1))*2,wt=(K+1+Y*(Z+1))*2,It=(K+1+Y*Z)*2,Ot=I[oe],he=D[ae],li=new u($[Et],$[Et+1],0,k[Et],k[Et+1],Ot,he).transformMat4(v),ui=new u($[vt],$[vt+1],0,k[vt],k[vt+1],Ot,he).transformMat4(v),fi=new u($[It],$[It+1],0,k[It],k[It+1],Ot,he).transformMat4(v),di=new u($[vt],$[vt+1],0,k[vt],k[vt+1],Ot,he).transformMat4(v),ci=new u($[wt],$[wt+1],0,k[wt],k[wt+1],Ot,he).transformMat4(v),vi=new u($[It],$[It+1],0,k[It],k[It+1],Ot,he).transformMat4(v);N&&(li.setUVs(Q,lt),ui.setUVs(Q,tt),fi.setUVs(J,lt),di.setUVs(Q,tt),ci.setUVs(J,tt),vi.setUVs(J,lt)),oe++,oe===I.length&&(oe=0),ae++,ae===D.length&&(ae=0),W.verts.push(li,ui,fi,di,ci,vi),W.faces.push(new s(li,ui,fi),new s(di,ci,vi))}return p&&(p.faces=p.faces.concat(W.faces),p.vertices=p.vertices.concat(W.verts)),W};e.exports=d},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){var u,l;if(r===void 0&&o===void 0){var f=s.getInCenter();u=f.x,l=f.y}var v=Math.cos(h),d=Math.sin(h),c=s.vertex1,p=s.vertex2,g=s.vertex3,x=c.x-u,m=c.y-l;c.set(x*v-m*d+u,x*d+m*v+l),x=p.x-u,m=p.y-l,p.set(x*v-m*d+u,x*d+m*v+l),x=g.x-u,m=g.y-l,g.set(x*v-m*d+u,x*d+m*v+l)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4);s.Ceil=i(1247),s.Clone=i(1248),s.CopyFrom=i(1249),s.Equals=i(1250),s.Floor=i(1251),s.GetCentroid=i(1252),s.GetMagnitude=i(500),s.GetMagnitudeSq=i(501),s.GetRectangleFromPoints=i(1253),s.Interpolate=i(1254),s.Invert=i(1255),s.Negative=i(1256),s.Project=i(1257),s.ProjectUnit=i(1258),s.SetMagnitude=i(1259),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.setTo(Math.ceil(s.x),Math.ceil(s.y))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r){return new s(r.x,r.y)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.setTo(s.x,s.y)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x===h.x&&s.y===h.y};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.setTo(Math.floor(s.x),Math.floor(s.y))};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){if(o===void 0&&(o=new s),!Array.isArray(r))throw new Error("GetCentroid points argument must be an array");var u=r.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(u===1)o.x=r[0].x,o.y=r[0].y;else{for(var l=0;l<u;l++)o.x+=r[l].x,o.y+=r[l].y;o.x/=u,o.y/=u}return o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r,o){o===void 0&&(o=new s);for(var u=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,d=0;d<r.length;d++){var c=r[d];c.x>u&&(u=c.x),c.x<l&&(l=c.x),c.y>f&&(f=c.y),c.y<v&&(v=c.y)}return o.x=l,o.y=v,o.width=u-l,o.height=f-v,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u,l){return u===void 0&&(u=0),l===void 0&&(l=new s),l.x=r.x+(o.x-r.x)*u,l.y=r.y+(o.y-r.y)*u,l};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.setTo(s.y,s.x)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){return o===void 0&&(o=new s),o.setTo(-r.x,-r.y)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(501),r=function(o,u,l){l===void 0&&(l=new s);var f=o.x*u.x+o.y*u.y,v=f/h(u);return v!==0&&(l.x=v*u.x,l.y=v*u.y),l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o,u){u===void 0&&(u=new s);var l=r.x*o.x+r.y*o.y;return l!==0&&(u.x=l*o.x,u.y=l*o.y),u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(500),h=function(r,o){if(r.x!==0||r.y!==0){var u=s(r);r.x/=u,r.y/=u}return r.x*=o,r.y*=o,r};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(227);s.Clone=i(1261),s.Contains=i(228),s.ContainsPoint=i(1262),s.Earcut=i(59),s.GetAABB=i(469),s.GetNumberArray=i(1263),s.GetPoints=i(470),s.Perimeter=i(471),s.Reverse=i(1264),s.Simplify=i(1265),s.Smooth=i(472),s.Translate=i(1266),e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(227),h=function(r){return new s(r.points)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(228),h=function(r,o){return s(r,o.x,o.y)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=[]);for(var r=0;r<s.points.length;r++)h.push(s.points[r].x),h.push(s.points[r].y);return h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.points.reverse(),s};e.exports=i},function(e,a){function i(l,f){var v=l.x-f.x,d=l.y-f.y;return v*v+d*d}function s(l,f,v){var d=f.x,c=f.y,p=v.x-d,g=v.y-c;if(p!==0||g!==0){var x=((l.x-d)*p+(l.y-c)*g)/(p*p+g*g);x>1?(d=v.x,c=v.y):x>0&&(d+=p*x,c+=g*x)}return p=l.x-d,g=l.y-c,p*p+g*g}function h(l,f){for(var v=l[0],d=[v],c,p=1,g=l.length;p<g;p++)c=l[p],i(c,v)>f&&(d.push(c),v=c);return v!==c&&d.push(c),d}function r(l,f,v,d,c){for(var p=d,g,x=f+1;x<v;x++){var m=s(l[x],l[f],l[v]);m>p&&(g=x,p=m)}p>d&&(g-f>1&&r(l,f,g,d,c),c.push(l[g]),v-g>1&&r(l,g,v,d,c))}function o(l,f){var v=l.length-1,d=[l[0]];return r(l,0,v,f,d),d.push(l[v]),d}var u=function(l,f,v){f===void 0&&(f=1),v===void 0&&(v=!1);var d=l.points;if(d.length>2){var c=f*f;v||(d=h(d,c)),l.setTo(o(d,c))}return l};e.exports=u},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){for(var o=s.points,u=0;u<o.length;u++)o[u].x+=h,o[u].y+=r;return s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.width*s.height};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.ceil(s.x),s.y=Math.ceil(s.y),s.width=Math.ceil(s.width),s.height=Math.ceil(s.height),s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r){return new s(r.x,r.y,r.width,r.height)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(57),h=function(r,o){return s(r,o.x,o.y)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.setTo(s.x,s.y,s.width,s.height)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x===h.x&&s.y===h.y&&s.width===h.width&&s.height===h.height};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(237),h=function(r,o){var u=s(r);return u<s(o)?r.setSize(o.height*u,o.height):r.setSize(o.width,o.width/u),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(237),h=function(r,o){var u=s(r);return u>s(o)?r.setSize(o.height*u,o.height):r.setSize(o.width,o.width/u),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.x=Math.floor(s.x),s.y=Math.floor(s.y),s.width=Math.floor(s.width),s.height=Math.floor(s.height),s};e.exports=i},function(e,a,i){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=function(r,o,u,l,f){return f===void 0&&(f=new s),f.setTo(Math.min(r,u),Math.min(o,l),Math.abs(r-u),Math.abs(o-l))};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){return o===void 0&&(o=new s),o.x=r.centerX,o.y=r.centerY,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=function(r,o){return o===void 0&&(o=new s),o.x=r.width,o.y=r.height,o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(190),h=function(r,o,u){var l=r.centerX,f=r.centerY;return r.setSize(r.width+o*2,r.height+u*2),s(r,l,f)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(10),h=i(152),r=function(o,u,l){return l===void 0&&(l=new s),h(o,u)?(l.x=Math.max(o.x,u.x),l.y=Math.max(o.y,u.y),l.width=Math.min(o.right,u.right)-l.x,l.height=Math.min(o.bottom,u.bottom)-l.y):l.setEmpty(),l};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){for(var r=s.x,o=s.right,u=s.y,l=s.bottom,f=0;f<h.length;f++)r=Math.min(r,h[f].x),o=Math.max(o,h[f].x),u=Math.min(u,h[f].y),l=Math.max(l,h[f].y);return s.x=r,s.y=u,s.width=o-r,s.height=l-u,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){var r=Math.min(s.x,h.x),o=Math.max(s.right,h.right);s.x=r,s.width=o-r;var u=Math.min(s.y,h.y),l=Math.max(s.bottom,h.bottom);return s.y=u,s.height=l-u,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){var o=Math.min(s.x,h),u=Math.max(s.right,h);s.x=o,s.width=u-o;var l=Math.min(s.y,r),f=Math.max(s.bottom,r);return s.y=l,s.height=f-l,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return s.x+=h,s.y+=r,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x+=h.x,s.y+=h.y,s};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x<h.right&&s.right>h.x&&s.y<h.bottom&&s.bottom>h.y};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(4),h=i(36),r=function(o,u,l){l===void 0&&(l=new s),u=h(u);var f=Math.sin(u),v=Math.cos(u),d=v>0?o.width/2:o.width/-2,c=f>0?o.height/2:o.height/-2;return Math.abs(d*f)<Math.abs(c*v)?c=d*f/v:d=c*v/f,l.x=d+o.centerX,l.y=c+o.centerY,l};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(195),h=i(503),r=i(4),o=function(u,l,f){if(f===void 0&&(f=new r),h(u,l))switch(s(0,3)){case 0:f.x=u.x+Math.random()*(l.right-u.x),f.y=u.y+Math.random()*(l.top-u.y);break;case 1:f.x=l.x+Math.random()*(u.right-l.x),f.y=l.bottom+Math.random()*(u.bottom-l.bottom);break;case 2:f.x=u.x+Math.random()*(l.x-u.x),f.y=l.y+Math.random()*(u.bottom-l.y);break;case 3:f.x=l.right+Math.random()*(u.right-l.right),f.y=u.y+Math.random()*(l.bottom-u.y);break}return f};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.width===h.width&&s.height===h.height};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r){return r===void 0&&(r=h),s.width*=h,s.height*=r,s};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82);s.Area=i(1294),s.BuildEquilateral=i(1295),s.BuildFromPolygon=i(1296),s.BuildRight=i(1297),s.CenterOn=i(1298),s.Centroid=i(504),s.CircumCenter=i(1299),s.CircumCircle=i(1300),s.Clone=i(1301),s.Contains=i(115),s.ContainsArray=i(235),s.ContainsPoint=i(1302),s.CopyFrom=i(1303),s.Decompose=i(495),s.Equals=i(1304),s.GetPoint=i(476),s.GetPoints=i(477),s.InCenter=i(506),s.Perimeter=i(1305),s.Offset=i(505),s.Random=i(181),s.Rotate=i(1306),s.RotateAroundPoint=i(1307),s.RotateAroundXY=i(238),e.exports=s},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){var h=s.x1,r=s.y1,o=s.x2,u=s.y2,l=s.x3,f=s.y3;return Math.abs(((l-h)*(u-r)-(o-h)*(f-r))/2)};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82),h=function(r,o,u){var l=u*(Math.sqrt(3)/2),f=r,v=o,d=r+u/2,c=o+l,p=r-u/2,g=o+l;return new s(f,v,d,c,p,g)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(59),h=i(82),r=function(o,u,l,f,v){u===void 0&&(u=null),l===void 0&&(l=1),f===void 0&&(f=1),v===void 0&&(v=[]);for(var d=s(o,u),c,p,g,x,m,y,T,C,S,E=0;E<d.length;E+=3)c=d[E],p=d[E+1],g=d[E+2],x=o[c*2]*l,m=o[c*2+1]*f,y=o[p*2]*l,T=o[p*2+1]*f,C=o[g*2]*l,S=o[g*2+1]*f,v.push(new h(x,m,y,T,C,S));return v};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82),h=function(r,o,u,l){l===void 0&&(l=u);var f=r,v=o,d=r,c=o-l,p=r+u,g=o;return new s(f,v,d,c,p,g)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(504),h=i(505),r=function(o,u,l,f){f===void 0&&(f=s);var v=f(o),d=u-v.x,c=l-v.y;return h(o,d,c)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(3);function h(o,u,l,f){return o*f-u*l}var r=function(o,u){u===void 0&&(u=new s);var l=o.x3,f=o.y3,v=o.x1-l,d=o.y1-f,c=o.x2-l,p=o.y2-f,g=2*h(v,d,c,p),x=h(d,v*v+d*d,p,c*c+p*p),m=h(v,v*v+d*d,c,c*c+p*p);return u.x=l-x/g,u.y=f+m/g,u};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),h=function(r,o){o===void 0&&(o=new s);var u=r.x1,l=r.y1,f=r.x2,v=r.y2,d=r.x3,c=r.y3,p=f-u,g=v-l,x=d-u,m=c-l,y=p*(u+f)+g*(l+v),T=x*(u+d)+m*(l+c),C=2*(p*(c-v)-g*(d-f)),S,E;if(Math.abs(C)<1e-6){var P=Math.min(u,f,d),M=Math.min(l,v,c);S=(Math.max(u,f,d)-P)*.5,E=(Math.max(l,v,c)-M)*.5,o.x=P+S,o.y=M+E,o.radius=Math.sqrt(S*S+E*E)}else o.x=(m*y-g*T)/C,o.y=(p*T-x*y)/C,S=o.x-u,E=o.y-l,o.radius=Math.sqrt(S*S+E*E);return o};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(82),h=function(r){return new s(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(115),h=function(r,o){return s(r,o.x,o.y)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h.setTo(s.x1,s.y1,s.x2,s.y2,s.x3,s.y3)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.x1===h.x1&&s.y1===h.y1&&s.x2===h.x2&&s.y2===h.y2&&s.x3===h.x3&&s.y3===h.y3};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(67),h=function(r){var o=r.getLineA(),u=r.getLineB(),l=r.getLineC();return s(o)+s(u)+s(l)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(238),h=i(506),r=function(o,u){var l=h(o);return s(o,l.x,l.y,u)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(238),h=function(r,o,u){return s(r,o.x,o.y,u)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(203),h=i(17),r={CreatePixelPerfectHandler:i(507),CreateInteractiveObject:i(508),Events:i(51),Gamepad:i(1309),InputManager:i(409),InputPlugin:i(1321),InputPluginCache:i(153),Keyboard:i(1322),Mouse:i(1336),Pointer:i(412),Touch:i(1337)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Axis:i(509),Button:i(510),Events:i(239),Gamepad:i(511),GamepadPlugin:i(1316),Configs:i(1317)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="connected"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="disconnected"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(239),o=i(511),u=i(6),l=i(153),f=i(51),v=new s({Extends:h,initialize:function(c){h.call(this),this.scene=c.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=c,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,c.pluginEvents.once(f.BOOT,this.boot,this),c.pluginEvents.on(f.START,this.start,this)},boot:function(){var d=this.scene.sys.game,c=this.settings.input,p=d.config;this.enabled=u(c,"gamepad",p.inputGamepad)&&d.device.input.gamepads,this.target=u(c,"gamepad.target",p.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(f.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(f.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var d=this,c=this.target,p=function(g){g.defaultPrevented||!d.isActive()||(d.refreshPads(),d.queue.push(g))};this.onGamepadHandler=p,c.addEventListener("gamepadconnected",p,!1),c.addEventListener("gamepaddisconnected",p,!1),this.sceneInputPlugin.pluginEvents.on(f.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(f.UPDATE,this.update);for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].removeAllListeners()},disconnectAll:function(){for(var d=0;d<this.gamepads.length;d++)this.gamepads[d].pad.connected=!1},refreshPads:function(){var d=navigator.getGamepads();if(!d)this.disconnectAll();else for(var c=this.gamepads,p=0;p<d.length;p++){var g=d[p];if(!!g){var x=g.id,m=g.index,y=c[m];if(y)y.id!==x?(y.destroy(),c[m]=new o(this,g)):y.update(g);else{var T=new o(this,g);c[m]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var d=[],c=this.gamepads,p=0;p<c.length;p++)c[p]&&d.push(c[p]);return d},getPad:function(d){for(var c=this.gamepads,p=0;p<c.length;p++)if(c[p]&&c[p].index===d)return c[p]},update:function(){if(!!this.enabled){this.refreshPads();var d=this.queue.length;if(d!==0)for(var c=this.queue.splice(0,d),p=0;p<d;p++){var g=c[p],x=this.getPad(g.gamepad.index);g.type==="gamepadconnected"?this.emit(r.CONNECTED,x,g):g.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,x,g)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var d=0;d<this.gamepads.length;d++)this.gamepads[d]&&this.gamepads[d].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={DUALSHOCK_4:i(1318),SNES_USB:i(1319),XBOX_360:i(1320)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(65),h=i(66),r=i(0),o=i(203),u=i(508),l=i(507),f=i(50),v=i(111),d=i(112),c=i(51),p=i(9),g=i(2),x=i(56),m=i(153),y=i(7),T=i(24),C=i(10),S=i(57),E=i(20),P=i(82),M=i(115),O=new r({Extends:p,initialize:function(R){p.call(this),this.scene=R,this.systems=R.sys,this.settings=R.sys.settings,this.manager=R.sys.game.input,this.pluginEvents=new p,this.enabled=!0,this.displayList,this.cameras,m.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var F={cancelled:!1};this._eventContainer={stopPropagation:function(){F.cancelled=!0}},this._eventData=F,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,R.sys.events.once(E.BOOT,this.boot,this),R.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(c.BOOT)},start:function(){var A=this.systems.events;A.on(E.TRANSITION_START,this.transitionIn,this),A.on(E.TRANSITION_OUT,this.transitionOut,this),A.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(E.PRE_UPDATE,this.preUpdate,this),A.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(c.GAME_OUT,this.onGameOut,this),this.manager.events.on(c.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(c.START)},onGameOver:function(A){this.isActive()&&this.emit(c.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(c.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(c.PRE_UPDATE);var A=this._pendingRemoval,R=this._pendingInsertion,F=A.length,I=R.length;if(!(F===0&&I===0)){for(var D=this._list,N=0;N<F;N++){var z=A[N],U=D.indexOf(z);U>-1&&(D.splice(U,1),this.clear(z,!0))}A.length=0,this._pendingRemoval.length=0,this._list=D.concat(R.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,R){if(!this.isActive())return!1;if(this.pluginEvents.emit(c.UPDATE,A,R),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var F,I=this.manager,D=I.pointers,N=I.pointersTotal;for(F=0;F<N;F++)D[F].updateMotion();if(this._list.length===0)return!1;var z=this.pollRate;if(z===-1)return!1;if(z>0)if(this._pollTimer-=R,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var U=!1;for(F=0;F<N;F++){var W=0,w=D[F];this._tempZones=[],this._temp=this.hitTestPointer(w),this.sortGameObjects(this._temp,w),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),W+=this.processOverOutEvents(w),this.getDragState(w)===2&&this.processDragThresholdEvent(w,A),W>0&&(U=!0)}return U},update:function(A,R){if(!this.isActive())return!1;for(var F=R.length,I=!1,D=0;D<F;D++){var N=0,z=R[D];switch(this._tempZones=[],this._temp=this.hitTestPointer(z),this.sortGameObjects(this._temp,z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case o.MOUSE_DOWN:N+=this.processDragDownEvent(z),N+=this.processDownEvents(z),N+=this.processOverOutEvents(z);break;case o.MOUSE_UP:N+=this.processDragUpEvent(z),N+=this.processUpEvents(z),N+=this.processOverOutEvents(z);break;case o.TOUCH_START:N+=this.processDragDownEvent(z),N+=this.processDownEvents(z),N+=this.processOverEvents(z);break;case o.TOUCH_END:case o.TOUCH_CANCEL:N+=this.processDragUpEvent(z),N+=this.processUpEvents(z),N+=this.processOutEvents(z);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:N+=this.processDragMoveEvent(z),N+=this.processMoveEvents(z),N+=this.processOverOutEvents(z);break;case o.MOUSE_WHEEL:N+=this.processWheelEvent(z);break}N>0&&(I=!0)}return this._updatedThisFrame=!0,I},clear:function(A,R){R===void 0&&(R=!1);var F=A.input;if(!!F){R||this.queueForRemoval(A),F.gameObject=void 0,F.target=void 0,F.hitArea=void 0,F.hitAreaCallback=void 0,F.callbackContext=void 0,A.input=null;var I=this._draggable.indexOf(A);return I>-1&&this._draggable.splice(I,1),I=this._drag[0].indexOf(A),I>-1&&this._drag[0].splice(I,1),I=this._over[0].indexOf(A),I>-1&&(this._over[0].splice(I,1),this.manager.resetCursor(F)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,R,F,I){return I===void 0&&(I=!1),A.input?A.input.enabled=!0:this.setHitArea(A,R,F),A.input&&I&&!A.input.dropZone&&(A.input.dropZone=I),this},hitTestPointer:function(A){for(var R=this.cameras.getCamerasBelowPointer(A),F=0;F<R.length;F++){for(var I=R[F],D=this.manager.hitTest(A,this._list,I),N=0;N<D.length;N++){var z=D[N];z.input.dropZone&&this._tempZones.push(z)}if(D.length>0)return A.camera=I,D}return A.camera=R[0],[]},processDownEvents:function(A){var R=0,F=this._temp,I=this._eventData,D=this._eventContainer;I.cancelled=!1;for(var N=!1,z=0;z<F.length;z++){var U=F[z];if(!!U.input){if(R++,U.emit(c.GAMEOBJECT_POINTER_DOWN,A,U.input.localX,U.input.localY,D),I.cancelled||!U.input){N=!0;break}if(this.emit(c.GAMEOBJECT_DOWN,A,U,D),I.cancelled||!U.input){N=!0;break}}}return!N&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(c.POINTER_DOWN,A,F):this.emit(c.POINTER_DOWN_OUTSIDE,A)),R},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,R){this._dragState[A.id]=R},processDragThresholdEvent:function(A,R){var F=!1,I=this.dragTimeThreshold,D=this.dragDistanceThreshold;if((D>0&&f(A.x,A.y,A.downX,A.downY)>=D||I>0&&R>=A.downTime+I)&&(F=!0),F)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(this.getDragState(A)!==3)return 0;for(var R=this._drag[A.id],F=0;F<R.length;F++){var I=R[F],D=I.input;D.dragState=2,D.dragStartX=I.x,D.dragStartY=I.y,D.dragStartXGlobal=A.worldX,D.dragStartYGlobal=A.worldY,D.dragX=D.dragStartXGlobal-D.dragStartX,D.dragY=D.dragStartYGlobal-D.dragStartY,I.emit(c.GAMEOBJECT_DRAG_START,A,D.dragX,D.dragY),this.emit(c.DRAG_START,A,I)}return this.setDragState(A,4),R.length},processDragDownEvent:function(A){var R=this._temp;if(this._draggable.length===0||R.length===0||!A.primaryDown||this.getDragState(A)!==0)return 0;this.setDragState(A,1);for(var F=[],I=0;I<R.length;I++){var D=R[I];D.input.draggable&&D.input.dragState===0&&F.push(D)}return F.length===0?(this.setDragState(A,0),0):(F.length>1&&(this.sortGameObjects(F,A),this.topOnly&&F.splice(1)),this._drag[A.id]=F,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(this.getDragState(A)===2&&this.processDragThresholdEvent(A,this.manager.game.loop.now),this.getDragState(A)!==4)return 0;for(var R=this._tempZones,F=this._drag[A.id],I=0;I<F.length;I++){var D=F[I],N=D.input,z=N.target;if(z){var U=R.indexOf(z);U===0?(D.emit(c.GAMEOBJECT_DRAG_OVER,A,z),this.emit(c.DRAG_OVER,A,D,z)):U>0?(D.emit(c.GAMEOBJECT_DRAG_LEAVE,A,z),this.emit(c.DRAG_LEAVE,A,D,z),N.target=R[0],z=N.target,D.emit(c.GAMEOBJECT_DRAG_ENTER,A,z),this.emit(c.DRAG_ENTER,A,D,z)):(D.emit(c.GAMEOBJECT_DRAG_LEAVE,A,z),this.emit(c.DRAG_LEAVE,A,D,z),R[0]?(N.target=R[0],z=N.target,D.emit(c.GAMEOBJECT_DRAG_ENTER,A,z),this.emit(c.DRAG_ENTER,A,D,z)):N.target=null)}else!z&&R[0]&&(N.target=R[0],z=N.target,D.emit(c.GAMEOBJECT_DRAG_ENTER,A,z),this.emit(c.DRAG_ENTER,A,D,z));var W,w;if(!D.parentContainer)W=A.worldX-N.dragX,w=A.worldY-N.dragY;else{var L=A.worldX-N.dragStartXGlobal,B=A.worldY-N.dragStartYGlobal,b=D.getParentRotation(),G=L*Math.cos(b)+B*Math.sin(b),Y=B*Math.cos(b)-L*Math.sin(b);G*=1/D.parentContainer.scaleX,Y*=1/D.parentContainer.scaleY,W=G+N.dragStartX,w=Y+N.dragStartY}D.emit(c.GAMEOBJECT_DRAG,A,W,w),this.emit(c.DRAG,A,D,W,w)}return F.length},processDragUpEvent:function(A){for(var R=this._drag[A.id],F=0;F<R.length;F++){var I=R[F],D=I.input;if(D&&D.dragState===2){D.dragState=0,D.dragX=D.localX-I.displayOriginX,D.dragY=D.localY-I.displayOriginY;var N=!1,z=D.target;z&&(I.emit(c.GAMEOBJECT_DROP,A,z),this.emit(c.DROP,A,I,z),D.target=null,N=!0),I.input&&(I.emit(c.GAMEOBJECT_DRAG_END,A,D.dragX,D.dragY,N),this.emit(c.DRAG_END,A,I,N))}}return this.setDragState(A,0),R.splice(0),0},processMoveEvents:function(A){var R=0,F=this._temp,I=this._eventData,D=this._eventContainer;I.cancelled=!1;for(var N=!1,z=0;z<F.length;z++){var U=F[z];if(!!U.input){if(R++,U.emit(c.GAMEOBJECT_POINTER_MOVE,A,U.input.localX,U.input.localY,D),I.cancelled||!U.input){N=!0;break}if(this.emit(c.GAMEOBJECT_MOVE,A,U,D),I.cancelled||!U.input){N=!0;break}if(this.topOnly)break}}return N||this.emit(c.POINTER_MOVE,A,F),R},processWheelEvent:function(A){var R=0,F=this._temp,I=this._eventData,D=this._eventContainer;I.cancelled=!1;for(var N=!1,z=A.deltaX,U=A.deltaY,W=A.deltaZ,w=0;w<F.length;w++){var L=F[w];if(!!L.input){if(R++,L.emit(c.GAMEOBJECT_POINTER_WHEEL,A,z,U,W,D),I.cancelled||!L.input){N=!0;break}if(this.emit(c.GAMEOBJECT_WHEEL,A,L,z,U,W,D),I.cancelled||!L.input){N=!0;break}}}return N||this.emit(c.POINTER_WHEEL,A,F,z,U,W),R},processOverEvents:function(A){var R=this._temp,F=0,I=R.length,D=[];if(I>0){var N=this.manager,z=this._eventData,U=this._eventContainer;z.cancelled=!1;for(var W=!1,w=0;w<I;w++){var L=R[w];if(!!L.input){if(D.push(L),N.setCursor(L.input),L.emit(c.GAMEOBJECT_POINTER_OVER,A,L.input.localX,L.input.localY,U),F++,z.cancelled||!L.input){W=!0;break}if(this.emit(c.GAMEOBJECT_OVER,A,L,U),z.cancelled||!L.input){W=!0;break}}}W||this.emit(c.POINTER_OVER,A,D)}return this._over[A.id]=D,F},processOutEvents:function(A){var R=this._over[A.id],F=0,I=R.length;if(I>0){var D=this.manager,N=this._eventData,z=this._eventContainer;N.cancelled=!1;var U=!1;this.sortGameObjects(R,A);for(var W=0;W<I;W++){var w=R[W];if(w=R[W],!!w.input){if(D.resetCursor(w.input),w.emit(c.GAMEOBJECT_POINTER_OUT,A,z),F++,N.cancelled||!w.input){U=!0;break}if(this.emit(c.GAMEOBJECT_OUT,A,w,z),N.cancelled||!w.input){U=!0;break}U||this.emit(c.POINTER_OUT,A,R)}}this._over[A.id]=[]}return F},processOverOutEvents:function(A){var R=this._temp,F,I,D=[],N=[],z=[],U=this._over[A.id],W=this._drag[A.id],w=this.manager;for(F=0;F<U.length;F++)I=U[F],R.indexOf(I)===-1&&W.indexOf(I)===-1?D.push(I):z.push(I);for(F=0;F<R.length;F++)I=R[F],U.indexOf(I)===-1&&N.push(I);var L=D.length,B=0,b=this._eventData,G=this._eventContainer;b.cancelled=!1;var Y=!1;if(L>0){for(this.sortGameObjects(D,A),F=0;F<L;F++)if(I=D[F],!!I.input){if(w.resetCursor(I.input),I.emit(c.GAMEOBJECT_POINTER_OUT,A,G),B++,b.cancelled||!I.input){Y=!0;break}if(this.emit(c.GAMEOBJECT_OUT,A,I,G),b.cancelled||!I.input){Y=!0;break}}Y||this.emit(c.POINTER_OUT,A,D)}if(L=N.length,b.cancelled=!1,Y=!1,L>0){for(this.sortGameObjects(N,A),F=0;F<L;F++)if(I=N[F],!!I.input){if(w.setCursor(I.input),I.emit(c.GAMEOBJECT_POINTER_OVER,A,I.input.localX,I.input.localY,G),B++,b.cancelled||!I.input){Y=!0;break}if(this.emit(c.GAMEOBJECT_OVER,A,I,G),b.cancelled||!I.input){Y=!0;break}}Y||this.emit(c.POINTER_OVER,A,N)}return U=z.concat(N),this._over[A.id]=this.sortGameObjects(U,A),B},processUpEvents:function(A){var R=this._temp,F=this._eventData,I=this._eventContainer;F.cancelled=!1;for(var D=!1,N=0;N<R.length;N++){var z=R[N];if(!!z.input){if(z.emit(c.GAMEOBJECT_POINTER_UP,A,z.input.localX,z.input.localY,I),F.cancelled||!z.input){D=!0;break}if(this.emit(c.GAMEOBJECT_UP,A,z,I),F.cancelled||!z.input){D=!0;break}}}return!D&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(c.POINTER_UP,A,R):this.emit(c.POINTER_UP_OUTSIDE,A)),R.length},queueForInsertion:function(A){return this._pendingInsertion.indexOf(A)===-1&&this._list.indexOf(A)===-1&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,R){R===void 0&&(R=!0),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var I=A[F];I.input.draggable=R;var D=this._draggable.indexOf(I);R&&D===-1?this._draggable.push(I):!R&&D>-1&&this._draggable.splice(D,1)}return this},makePixelPerfect:function(A){A===void 0&&(A=1);var R=this.systems.textures;return l(R,A)},setHitArea:function(A,R,F){if(R===void 0)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var I=!1,D=!1,N=!1,z=!1,U=!1,W=!0;if(y(R)){var w=R;R=g(w,"hitArea",null),F=g(w,"hitAreaCallback",null),I=g(w,"draggable",!1),D=g(w,"dropZone",!1),N=g(w,"cursor",!1),z=g(w,"useHandCursor",!1),U=g(w,"pixelPerfect",!1);var L=g(w,"alphaTolerance",1);U&&(R={},F=this.makePixelPerfect(L)),(!R||!F)&&(this.setHitAreaFromTexture(A),W=!1)}else typeof R=="function"&&!F&&(F=R,R={});for(var B=0;B<A.length;B++){var b=A[B];if(U&&b.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var G=b.input?b.input:u(b,R,F);G.customHitArea=W,G.dropZone=D,G.cursor=z?"pointer":N,b.input=G,I&&this.setDraggable(b),this.queueForInsertion(b)}return this},setHitAreaCircle:function(A,R,F,I,D){D===void 0&&(D=h);var N=new s(R,F,I);return this.setHitArea(A,N,D)},setHitAreaEllipse:function(A,R,F,I,D,N){N===void 0&&(N=d);var z=new v(R,F,I,D);return this.setHitArea(A,z,N)},setHitAreaFromTexture:function(A,R){R===void 0&&(R=S),Array.isArray(A)||(A=[A]);for(var F=0;F<A.length;F++){var I=A[F],D=I.frame,N=0,z=0;if(I.width?(N=I.width,z=I.height):D&&(N=D.realWidth,z=D.realHeight),I.type==="Container"&&(N===0||z===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}N!==0&&z!==0&&(I.input=u(I,new C(0,0,N,z),R),this.queueForInsertion(I))}return this},setHitAreaRectangle:function(A,R,F,I,D,N){N===void 0&&(N=S);var z=new C(R,F,I,D);return this.setHitArea(A,z,N)},setHitAreaTriangle:function(A,R,F,I,D,N,z,U){U===void 0&&(U=M);var W=new P(R,F,I,D,N,z);return this.setHitArea(A,W,U)},enableDebug:function(A,R){R===void 0&&(R=65280);var F=A.input;if(!F||!F.hitArea)return this;var I=F.hitArea,D=I.type,N=F.hitAreaDebug,z=this.systems.add,U=this.systems.updateList;N&&(U.remove(N),N.destroy(),N=null);var W=0,w=0;switch(D){case x.CIRCLE:N=z.arc(0,0,I.radius),W=I.x-I.radius,w=I.y-I.radius;break;case x.ELLIPSE:N=z.ellipse(0,0,I.width,I.height),W=I.x-I.width/2,w=I.y-I.height/2;break;case x.LINE:N=z.line(0,0,I.x1,I.y1,I.x2,I.y2);break;case x.POLYGON:N=z.polygon(0,0,I.points);break;case x.RECTANGLE:N=z.rectangle(0,0,I.width,I.height),W=I.x,w=I.y;break;case x.TRIANGLE:N=z.triangle(0,0,I.x1,I.y1,I.x2,I.y2,I.x3,I.y3);break}return N&&(N.isFilled=!1,N.preUpdate=function(){N.setStrokeStyle(1/A.scale,R),N.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var L=A.x,B=A.y,b=A.rotation,G=A.scaleX,Y=A.scaleY;if(A.parentContainer){var V=A.getWorldTransformMatrix();L=V.tx,B=V.ty,b=V.rotation,G=V.scaleX,Y=V.scaleY}N.setRotation(b),N.setScale(G,Y),N.setPosition(L+W,B+w),N.setScrollFactor(A.scrollFactorX,A.scrollFactorY),N.setDepth(A.depth)},U.add(N),F.hitAreaDebug=N),this},removeDebug:function(A){var R=A.input;if(R&&R.hitAreaDebug){var F=R.hitAreaDebug;this.systems.updateList.remove(F),F.destroy(),R.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,R){if(A.length<2)return A;var F=R.camera.renderList;return A.sort(function(I,D){return F.indexOf(D)-F.indexOf(I)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,R){if(!A.parentContainer&&!R.parentContainer)return this.displayList.getIndex(R)-this.displayList.getIndex(A);if(A.parentContainer===R.parentContainer)return R.parentContainer.getIndex(R)-A.parentContainer.getIndex(A);if(A.parentContainer===R)return-1;if(R.parentContainer===A)return 1;for(var F=A.getIndexList(),I=R.getIndexList(),D=Math.min(F.length,I.length),N=0;N<D;N++){var z=F[N],U=I[N];if(z!==U)return U-z}return I.length-F.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(c.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var A=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var R=this.manager;R.canvas.style.cursor=R.defaultCursor;var F=this.systems.events;F.off(E.TRANSITION_START,this.transitionIn,this),F.off(E.TRANSITION_OUT,this.transitionOut,this),F.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),F.off(E.PRE_UPDATE,this.preUpdate,this),R.events.off(c.GAME_OUT,this.onGameOut,this),R.events.off(c.GAME_OVER,this.onGameOver,this),F.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(c.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",O,"input"),e.exports=O},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(154),KeyboardManager:i(410),KeyboardPlugin:i(1330),Key:i(512),KeyCodes:i(143),KeyCombo:i(513),AdvanceKeyCombo:i(515),ProcessKeyCombo:i(514),ResetKeyCombo:i(516),JustDown:i(1332),JustUp:i(1333),DownDuration:i(1334),UpDuration:i(1335)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keycombomatch"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="down"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keydown-"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="keyup-"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="up"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(9),r=i(154),o=i(22),u=i(6),l=i(51),f=i(153),v=i(512),d=i(143),c=i(513),p=i(1331),g=i(20),x=i(76),m=new s({Extends:h,initialize:function(T){h.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(l.BOOT,this.boot,this),T.pluginEvents.on(l.START,this.start,this)},boot:function(){var y=this.settings.input;this.enabled=u(y,"keyboard",!0);var T=u(y,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(g.PAUSE,this.resetKeys,this),this.scene.sys.events.on(g.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(y){return this.manager.addCapture(y),this},removeCapture:function(y){return this.manager.removeCapture(y),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT,space:d.SPACE,shift:d.SHIFT})},addKeys:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S={};if(typeof y=="string"){y=y.split(",");for(var E=0;E<y.length;E++){var P=y[E].trim();P&&(S[P]=this.addKey(P,T,C))}}else for(var M in y)S[M]=this.addKey(y[M],T,C);return S},addKey:function(y,T,C){T===void 0&&(T=!0),C===void 0&&(C=!1);var S=this.keys;if(y instanceof v){var E=S.indexOf(y);return E>-1?S[E]=y:S[y.keyCode]=y,T&&this.addCapture(y.keyCode),y.setEmitOnRepeat(C),y}return typeof y=="string"&&(y=d[y.toUpperCase()]),S[y]||(S[y]=new v(this,y),T&&this.addCapture(y),S[y].setEmitOnRepeat(C)),S[y]},removeKey:function(y,T){T===void 0&&(T=!1);var C=this.keys,S;if(y instanceof v){var E=C.indexOf(y);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof y=="string"&&(y=d[y.toUpperCase()]);return C[y]&&(S=C[y],C[y]=void 0),S&&(S.plugin=null,T&&S.destroy()),this},removeAllKeys:function(y){for(var T=this.keys,C=0;C<T.length;C++){var S=T[C];S&&(T[C]=void 0,y&&S.destroy())}return this},createCombo:function(y,T){return new c(this,y,T)},checkDown:function(y,T){if(T===void 0&&(T=0),this.enabled&&y.isDown){var C=x(this.time-y.timeDown,T);if(C>y._tick)return y._tick=C,!0}return!1},update:function(){var y=this.manager.queue,T=y.length;if(!(!this.isActive()||T===0))for(var C=this.keys,S=0;S<T;S++){var E=y[S],P=E.keyCode,M=C[P],O=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(P===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=P,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(M&&(O=M.isDown,M.onDown(E)),!E.cancelled&&(!M||!O)&&(p[P]&&this.emit(r.KEY_DOWN+p[P],E),E.cancelled||this.emit(r.ANY_KEY_DOWN,E))):(M&&M.onUp(E),E.cancelled||(p[P]&&this.emit(r.KEY_UP+p[P],E),E.cancelled||this.emit(r.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(g.PAUSE,this.resetKeys,this),this.scene.sys.events.off(g.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var y=this.keys,T=0;T<y.length;T++)y[T]&&y[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});f.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard"),e.exports=m},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(143),h={};for(var r in s)h[s[r]]=r;e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s._justDown?(s._justDown=!1,!0):!1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s._justUp?(s._justUp=!1,!0):!1};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=50);var r=s.plugin.game.loop.time-s.timeDown;return s.isDown&&r<h};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){h===void 0&&(h=50);var r=s.plugin.game.loop.time-s.timeUp;return s.isUp&&r<h};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={MouseManager:i(411)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={TouchManager:i(413)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(21),h=i(17),r={Events:i(95),FileTypes:i(1339),File:i(23),FileTypesManager:i(8),GetURL:i(155),LoaderPlugin:i(1365),MergeXHRSettings:i(240),MultiFile:i(49),XHRLoader:i(517),XHRSettings:i(156)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AnimationJSONFile:i(1340),AsepriteFile:i(1341),AtlasJSONFile:i(1342),AtlasXMLFile:i(1343),AudioFile:i(518),AudioSpriteFile:i(1344),BinaryFile:i(1345),BitmapFontFile:i(1346),CSSFile:i(1347),GLSLFile:i(1348),HTML5AudioFile:i(519),HTMLFile:i(1349),HTMLTextureFile:i(1350),ImageFile:i(71),JSONFile:i(61),MultiAtlasFile:i(1351),MultiScriptFile:i(1352),OBJFile:i(1353),PackFile:i(1354),PluginFile:i(1355),SceneFile:i(1356),ScenePluginFile:i(1357),ScriptFile:i(520),SpriteSheetFile:i(1358),SVGFile:i(1359),TextFile:i(242),TilemapCSVFile:i(1360),TilemapImpactFile:i(1361),TilemapJSONFile:i(1362),UnityAtlasFile:i(1363),VideoFile:i(1364),XMLFile:i(241)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(61),o=i(95),u=new s({Extends:r,initialize:function(f,v,d,c,p){r.call(this,f,v,d,c,p),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});h.register("animation",function(l,f,v,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new u(this,l[c]));else this.addFile(new u(this,l,f,d,v));return this}),e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(71),u=i(7),l=i(61),f=i(49),v=new s({Extends:f,initialize:function(c,p,g,x,m,y){var T,C;if(u(p)){var S=p;p=r(S,"key"),T=new o(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new l(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(c,p,g,m),C=new l(c,p,x,y);T.linkFile?f.call(this,c,"atlasjson",p,[T,C,T.linkFile]):f.call(this,c,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,c.data,p),c.addToCache(),this.complete=!0}}});h.register("aseprite",function(d,c,p,g,x){var m;if(Array.isArray(d))for(var y=0;y<d.length;y++)m=new v(this,d[y]),this.addFile(m.files);else m=new v(this,d,c,p,g,x),this.addFile(m.files);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(71),u=i(7),l=i(61),f=i(49),v=new s({Extends:f,initialize:function(c,p,g,x,m,y){var T,C;if(u(p)){var S=p;p=r(S,"key"),T=new o(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new l(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","json"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(c,p,g,m),C=new l(c,p,x,y);T.linkFile?f.call(this,c,"atlasjson",p,[T,C,T.linkFile]):f.call(this,c,"atlasjson",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});h.register("atlas",function(d,c,p,g,x){var m;if(Array.isArray(d))for(var y=0;y<d.length;y++)m=new v(this,d[y]),this.addFile(m.files);else m=new v(this,d,c,p,g,x),this.addFile(m.files);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(71),u=i(7),l=i(49),f=i(241),v=new s({Extends:l,initialize:function(c,p,g,x,m,y){var T,C;if(u(p)){var S=p;p=r(S,"key"),T=new o(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new f(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","xml"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(c,p,g,m),C=new f(c,p,x,y);T.linkFile?l.call(this,c,"atlasxml",p,[T,C,T.linkFile]):l.call(this,c,"atlasxml",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});h.register("atlasXML",function(d,c,p,g,x){var m;if(Array.isArray(d))for(var y=0;y<d.length;y++)m=new v(this,d[y]),this.addFile(m.files);else m=new v(this,d,c,p,g,x),this.addFile(m.files);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(518),h=i(0),r=i(8),o=i(2),u=i(7),l=i(61),f=i(49),v=new h({Extends:f,initialize:function(c,p,g,x,m,y,T){if(u(p)){var C=p;p=o(C,"key"),g=o(C,"jsonURL"),x=o(C,"audioURL"),m=o(C,"audioConfig"),y=o(C,"audioXhrSettings"),T=o(C,"jsonXhrSettings")}var S;if(!x)S=new l(c,p,g,T),f.call(this,c,"audiosprite",p,[S]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=y;else{var E=s.create(c,p,x,m,y);E&&(S=new l(c,p,g,T),f.call(this,c,"audiosprite",p,[E,S]),this.config.resourceLoad=!1)}},onFileComplete:function(d){var c=this.files.indexOf(d);if(c!==-1&&(this.pending--,this.config.resourceLoad&&d.type==="json"&&d.data.hasOwnProperty("resources"))){var p=d.data.resources,g=o(this.config,"audioConfig"),x=o(this.config,"audioXhrSettings"),m=s.create(this.loader,d.key,p,g,x);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1];d.addToCache(),c.addToCache(),this.complete=!0}}});r.register("audioSprite",function(d,c,p,g,x,m){var y=this.systems.game,T=y.config.audio,C=y.device.audio;if(T&&T.noAudio||!C.webAudio&&!C.audioData)return this;var S;if(Array.isArray(d))for(var E=0;E<d.length;E++)S=new v(this,d[E]),S.files&&this.addFile(S.files);else S=new v(this,d,c,p,g,x,m),S.files&&this.addFile(S.files);return this})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g,x){var m="bin";if(l(c)){var y=c;c=u(y,"key"),p=u(y,"url"),g=u(y,"xhrSettings"),m=u(y,"extension",m),x=u(y,"dataType",x)}var T={type:"binary",cache:d.cacheManager.binary,extension:m,responseType:"arraybuffer",key:c,url:p,xhrSettings:g,config:{dataType:x}};r.call(this,d,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(v,d,c,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new f(this,v[g]));else this.addFile(new f(this,v,d,p,c));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(71),u=i(7),l=i(49),f=i(212),v=i(241),d=new s({Extends:l,initialize:function(p,g,x,m,y,T){var C,S;if(u(g)){var E=g;g=r(E,"key"),C=new o(p,{key:g,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),S=new v(p,{key:g,url:r(E,"fontDataURL"),extension:r(E,"fontDataExtension","xml"),xhrSettings:r(E,"fontDataXhrSettings")})}else C=new o(p,g,x,y),S=new v(p,g,m,T);C.linkFile?l.call(this,p,"bitmapfont",g,[C,S,C.linkFile]):l.call(this,p,"bitmapfont",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1];c.addToCache(),p.pendingDestroy();var g=c.cache.get(c.key),x=f(p.data,c.cache.getFrame(c.key),0,0,g);this.loader.cacheManager.bitmapFont.add(c.key,{data:x,texture:c.key,frame:null}),this.complete=!0}}});h.register("bitmapFont",function(c,p,g,x,m){var y;if(Array.isArray(c))for(var T=0;T<c.length;T++)y=new d(this,c[T]),this.addFile(y.files);else y=new d(this,c,p,g,x,m),this.addFile(y.files);return this}),e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g){var x="css";if(l(c)){var m=c;c=u(m,"key"),p=u(m,"url"),g=u(m,"xhrSettings"),x=u(m,"extension",x)}var y={type:"script",cache:!1,extension:x,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new f(this,v[p]));else this.addFile(new f(this,v,d,c));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=i(396),v=new s({Extends:r,initialize:function(c,p,g,x,m){var y="glsl";if(l(p)){var T=p;p=u(T,"key"),g=u(T,"url"),x=u(T,"shaderType","fragment"),m=u(T,"xhrSettings"),y=u(T,"extension",y)}else x===void 0&&(x="fragment");var C={type:"glsl",cache:c.cacheManager.shader,extension:y,responseType:"text",key:p,url:g,config:{shaderType:x},xhrSettings:m};r.call(this,c,C)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d=this.data.split(`
`),c=this.extractBlock(d,0);if(c)for(;c;){var p=this.getShaderName(c.header),g=this.getShaderType(c.header),x=this.getShaderUniforms(c.header),m=c.shader;if(this.cache.has(p)){var y=this.cache.get(p);g==="fragment"?y.fragmentSrc=m:y.vertexSrc=m,y.uniforms||(y.uniforms=x)}else g==="fragment"?this.cache.add(p,new f(p,m,"",x)):this.cache.add(p,new f(p,"",m,x));c=this.extractBlock(d,c.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new f(this.key,this.data)):this.cache.add(this.key,new f(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(d){for(var c=0;c<d.length;c++){var p=d[c].trim();if(p.substring(0,5)==="name:")return p.substring(5).trim()}return this.key},getShaderType:function(d){for(var c=0;c<d.length;c++){var p=d[c].trim();if(p.substring(0,5)==="type:")return p.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(d){for(var c={},p=0;p<d.length;p++){var g=d[p].trim();if(g.substring(0,8)==="uniform."){var x=g.indexOf(":");if(x){var m=g.substring(8,x);try{c[m]=JSON.parse(g.substring(x+1))}catch{console.warn("Invalid uniform JSON: "+m)}}}}return c},extractBlock:function(d,c){for(var p=-1,g=-1,x=-1,m=!1,y=!1,T=[],C=[],S=c;S<d.length;S++){var E=d[S].trim();if(E==="---")if(p===-1)p=S,m=!0;else if(m)g=S,m=!1,y=!0;else{y=!1;break}else m?T.push(E):y&&(C.push(E),x=S)}return!m&&g!==-1?{header:T,shader:C.join(`
`),offset:x}:null}});o.register("glsl",function(d,c,p,g){if(Array.isArray(d))for(var x=0;x<d.length;x++)this.addFile(new v(this,d[x]));else this.addFile(new v(this,d,c,p,g));return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g){var x="html";if(l(c)){var m=c;c=u(m,"key"),p=u(m,"url"),g=u(m,"xhrSettings"),x=u(m,"extension",x)}var y={type:"text",cache:d.cacheManager.html,extension:x,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new f(this,v[p]));else this.addFile(new f(this,v,d,c));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g,x,m){g===void 0&&(g=512),x===void 0&&(x=512);var y="html";if(l(c)){var T=c;c=u(T,"key"),p=u(T,"url"),m=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"width",g),x=u(T,"height",x)}var C={type:"html",cache:d.textureManager,extension:y,responseType:"text",key:c,url:p,xhrSettings:m,config:{width:g,height:x}};r.call(this,d,C)},onProcess:function(){this.state=h.FILE_PROCESSING;var v=this.config.width,d=this.config.height,c=[];c.push('<svg width="'+v+'px" height="'+d+'px" viewBox="0 0 '+v+" "+d+'" xmlns="http://www.w3.org/2000/svg">'),c.push('<foreignObject width="100%" height="100%">'),c.push('<body xmlns="http://www.w3.org/1999/xhtml">'),c.push(this.xhrLoader.responseText),c.push("</body>"),c.push("</foreignObject>"),c.push("</svg>");var p=[c.join(`
`)],g=this;try{var x=new window.Blob(p,{type:"image/svg+xml;charset=utf-8"})}catch{g.state=h.FILE_ERRORED,g.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(g.data),g.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(g.data),g.onProcessError()},r.createObjectURL(this.data,x,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});o.register("htmlTexture",function(v,d,c,p,g){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new f(this,v[x]));else this.addFile(new f(this,v,d,c,p,g));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(71),u=i(7),l=i(61),f=i(49),v=new s({Extends:f,initialize:function(c,p,g,x,m,y,T){if(u(p)){var C=p;p=r(C,"key"),r(C,"url",!1)?g=r(C,"url"):g=r(C,"atlasURL"),y=r(C,"xhrSettings"),x=r(C,"path"),m=r(C,"baseURL"),T=r(C,"textureXhrSettings")}var S=new l(c,p,g,y);f.call(this,c,"multiatlas",p,[S]),this.config.path=x,this.config.baseURL=m,this.config.textureXhrSettings=T},onFileComplete:function(d){var c=this.files.indexOf(d);if(c!==-1&&(this.pending--,d.type==="json"&&d.data.hasOwnProperty("textures"))){var p=d.data.textures,g=this.config,x=this.loader,m=x.baseURL,y=x.path,T=x.prefix,C=r(g,"baseURL",this.baseURL),S=r(g,"path",this.path),E=r(g,"prefix",this.prefix),P=r(g,"textureXhrSettings");x.setBaseURL(C),x.setPath(S),x.setPrefix(E);for(var M=0;M<p.length;M++){var O=p[M].image,A="MA"+this.multiKeyIndex+"_"+O,R=new o(x,A,O,P);if(this.addToMultiFile(R),x.addFile(R),p[M].normalMap){var F=new o(x,A,p[M].normalMap,P);F.type="normalMap",R.setLink(F),this.addToMultiFile(F),x.addFile(F)}}x.setBaseURL(m),x.setPath(y),x.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var d=this.files[0],c=[],p=[],g=[],x=1;x<this.files.length;x++){var m=this.files[x];if(m.type!=="normalMap")for(var y=m.key.indexOf("_"),T=m.key.substr(y+1),C=m.data,S=0;S<d.data.textures.length;S++){var E=d.data.textures[S];if(E.image===T){p.push(C),c.push(E),m.linkFile&&g.push(m.linkFile.data);break}}}for(g.length===0&&(g=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,p,c,g),this.complete=!0,x=0;x<this.files.length;x++)this.files[x].pendingDestroy()}}});h.register("multiatlas",function(d,c,p,g,x){var m;if(Array.isArray(d))for(var y=0;y<d.length;y++)m=new v(this,d[y]),this.addFile(m.files);else m=new v(this,d,c,p,g,x),this.addFile(m.files);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(7),u=i(49),l=i(520),f=new s({Extends:u,initialize:function(d,c,p,g){var x="js",m=[];if(o(c)){var y=c;c=r(y,"key"),p=r(y,"url"),g=r(y,"xhrSettings"),x=r(y,"extension",x)}Array.isArray(p)||(p=[p]);for(var T=0;T<p.length;T++){var C=new l(d,{key:c+"_"+T.toString(),url:p[T],extension:x,xhrSettings:g});C.onProcess=function(){this.onProcessComplete()},m.push(C)}u.call(this,d,"scripts",c,m)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var d=this.files[v];d.data=document.createElement("script"),d.data.language="javascript",d.data.type="text/javascript",d.data.defer=!1,d.data.text=d.xhrLoader.responseText,document.head.appendChild(d.data)}this.complete=!0}}});h.register("scripts",function(v,d,c){var p;if(Array.isArray(v))for(var g=0;g<v.length;g++)p=new f(this,v[g]),this.addFile(p.files);else p=new f(this,v,d,c),this.addFile(p.files);return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(7),u=i(49),l=i(498),f=i(499),v=i(242),d=new s({Extends:u,initialize:function(p,g,x,m,y,T){var C,S,E=p.cacheManager.obj;if(o(g)){var P=g;g=r(P,"key"),C=new v(p,{key:g,type:"obj",cache:E,url:r(P,"url"),extension:r(P,"extension","obj"),xhrSettings:r(P,"xhrSettings"),config:{flipUV:r(P,"flipUV",y)}}),m=r(P,"matURL"),m&&(S=new v(p,{key:g,type:"mat",cache:E,url:m,extension:r(P,"matExtension","mat"),xhrSettings:r(P,"xhrSettings")}))}else C=new v(p,{key:g,url:x,type:"obj",cache:E,extension:"obj",xhrSettings:T,config:{flipUV:y}}),m&&(S=new v(p,{key:g,url:m,type:"mat",cache:E,extension:"mat",xhrSettings:T}));u.call(this,p,"obj",g,[C,S])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],p=this.files[1],g=l(c.data,c.config.flipUV);p&&(g.materials=f(p.data)),c.cache.add(c.key,g),this.complete=!0}}});h.register("obj",function(c,p,g,x,m){var y;if(Array.isArray(c))for(var T=0;T<c.length;T++)y=new d(this,c[T]),this.addFile(y.files);else y=new d(this,c,p,g,x,m),this.addFile(y.files);return this}),e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(8),o=i(61),u=new s({Extends:o,initialize:function(f,v,d,c,p){o.call(this,f,v,d,c,p),this.type="packfile"},onProcess:function(){this.state!==h.FILE_POPULATED&&(this.state=h.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",function(l,f,v,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new u(this,l[c]));else this.addFile(new u(this,l,f,d,v));return this}),e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g,x,m){var y="js";if(l(c)){var T=c;c=u(T,"key"),p=u(T,"url"),m=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"start"),x=u(T,"mapping")}var C={type:"plugin",cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:m,config:{start:g,mapping:x}};r.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=h.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,c=u(d,"start",!1),p=u(d,"mapping",null);if(this.state===h.FILE_POPULATED)v.install(this.key,this.data,c,p);else{this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var g=v.install(this.key,window[this.key],c,p);(c||p)&&(this.loader.systems[p]=g,this.loader.scene[p]=g)}this.onProcessComplete()}});o.register("plugin",function(v,d,c,p,g){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new f(this,v[x]));else this.addFile(new f(this,v,d,c,p,g));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g){var x="js";if(l(c)){var m=c;c=u(m,"key"),p=u(m,"url"),g=u(m,"xhrSettings"),x=u(m,"extension",x)}var y={type:"text",extension:x,responseType:"text",key:c,url:p,xhrSettings:g};r.call(this,d,y)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),d=eval;this.loader.sceneManager.add(this.key,d(v)),this.complete=!0}});o.register("sceneFile",function(v,d,c){if(Array.isArray(v))for(var p=0;p<v.length;p++)this.addFile(new f(this,v[p]));else this.addFile(new f(this,v,d,c));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g,x,m){var y="js";if(l(c)){var T=c;c=u(T,"key"),p=u(T,"url"),m=u(T,"xhrSettings"),y=u(T,"extension",y),g=u(T,"systemKey"),x=u(T,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:y,responseType:"text",key:c,url:p,xhrSettings:m,config:{systemKey:g,sceneKey:x}};r.call(this,d,C),typeof p=="function"&&(this.data=p,this.state=h.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,d=this.config,c=this.key,p=u(d,"systemKey",c),g=u(d,"sceneKey",c);this.state===h.FILE_POPULATED?v.installScenePlugin(p,this.data,g,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(p,window[this.key],g,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(v,d,c,p,g){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new f(this,v[x]));else this.addFile(new f(this,v,d,c,p,g));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(71),o=new s({Extends:r,initialize:function(l,f,v,d,c){r.call(this,l,f,v,c,d),this.type="spritesheet"},addToCache:function(){var u=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(u)}});h.register("spritesheet",function(u,l,f,v){if(Array.isArray(u))for(var d=0;d<u.length;d++)this.addFile(new o(this,u[d]));else this.addFile(new o(this,u,l,f,v));return this}),e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=new s({Extends:r,initialize:function(d,c,p,g,x){var m="svg";if(l(c)){var y=c;c=u(y,"key"),p=u(y,"url"),g=u(y,"svgConfig",{}),x=u(y,"xhrSettings"),m=u(y,"extension",m)}var T={type:"svg",cache:d.textureManager,extension:m,responseType:"text",key:c,url:p,xhrSettings:x,config:{width:u(g,"width"),height:u(g,"height"),scale:u(g,"scale")}};r.call(this,d,T)},onProcess:function(){this.state=h.FILE_PROCESSING;var v=this.xhrLoader.responseText,d=[v],c=this.config.width,p=this.config.height,g=this.config.scale;t:if(c&&p||g){var x=null,m=new DOMParser;x=m.parseFromString(v,"text/xml");var y=x.getElementsByTagName("svg")[0],T=y.hasAttribute("viewBox"),C=parseFloat(y.getAttribute("width")),S=parseFloat(y.getAttribute("height"));if(!T&&C&&S)y.setAttribute("viewBox","0  0 "+C+" "+S);else if(T&&!C&&!S){var E=y.getAttribute("viewBox").split(/\s+|,/);C=E[2],S=E[3]}if(g)if(C&&S)c=C*g,p=S*g;else break t;y.setAttribute("width",c.toString()+"px"),y.setAttribute("height",p.toString()+"px"),d=[new XMLSerializer().serializeToString(y)]}try{var P=new window.Blob(d,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var M=this,O=!1;this.data.onload=function(){O||r.revokeObjectURL(M.data),M.onProcessComplete()},this.data.onerror=function(){O?M.onProcessError():(O=!0,r.revokeObjectURL(M.data),M.data.src="data:image/svg+xml,"+encodeURIComponent(d.join("")))},r.createObjectURL(this.data,P,"image/svg+xml")},addToCache:function(){var v=this.cache.addImage(this.key,this.data);this.pendingDestroy(v)}});o.register("svg",function(v,d,c,p){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new f(this,v[g]));else this.addFile(new f(this,v,d,c,p));return this}),e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(2),l=i(7),f=i(40),v=new s({Extends:r,initialize:function(c,p,g,x){var m="csv";if(l(p)){var y=p;p=u(y,"key"),g=u(y,"url"),x=u(y,"xhrSettings"),m=u(y,"extension",m)}var T={type:"tilemapCSV",cache:c.cacheManager.tilemap,extension:m,responseType:"text",key:p,url:g,xhrSettings:x};r.call(this,c,T),this.tilemapFormat=f.CSV},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var d={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,d),this.pendingDestroy(d)}});o.register("tilemapCSV",function(d,c,p){if(Array.isArray(d))for(var g=0;g<d.length;g++)this.addFile(new v(this,d[g]));else this.addFile(new v(this,d,c,p));return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(61),o=i(40),u=new s({Extends:r,initialize:function(f,v,d,c){r.call(this,f,v,d,c),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});h.register("tilemapImpact",function(l,f,v){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new u(this,l[d]));else this.addFile(new u(this,l,f,v));return this}),e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(61),o=i(40),u=new s({Extends:r,initialize:function(f,v,d,c){r.call(this,f,v,d,c),this.type="tilemapJSON",this.cache=f.cacheManager.tilemap},addToCache:function(){var l={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,l),this.pendingDestroy(l)}});h.register("tilemapTiledJSON",function(l,f,v){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new u(this,l[d]));else this.addFile(new u(this,l,f,v));return this}),e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(8),r=i(2),o=i(71),u=i(7),l=i(49),f=i(242),v=new s({Extends:l,initialize:function(c,p,g,x,m,y){var T,C;if(u(p)){var S=p;p=r(S,"key"),T=new o(c,{key:p,url:r(S,"textureURL"),extension:r(S,"textureExtension","png"),normalMap:r(S,"normalMap"),xhrSettings:r(S,"textureXhrSettings")}),C=new f(c,{key:p,url:r(S,"atlasURL"),extension:r(S,"atlasExtension","txt"),xhrSettings:r(S,"atlasXhrSettings")})}else T=new o(c,p,g,m),C=new f(c,p,x,y);T.linkFile?l.call(this,c,"unityatlas",p,[T,C,T.linkFile]):l.call(this,c,"unityatlas",p,[T,C])},addToCache:function(){if(this.isReadyToProcess()){var d=this.files[0],c=this.files[1],p=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(d.key,d.data,c.data,p),c.pendingDestroy(),this.complete=!0}}});h.register("unityAtlas",function(d,c,p,g,x){var m;if(Array.isArray(d))for(var y=0;y<d.length;y++)m=new v(this,d[y]),this.addFile(m.files);else m=new v(this,d,c,p,g,x),this.addFile(m.files);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(23),o=i(8),u=i(155),l=i(2),f=i(7),v=new s({Extends:r,initialize:function(c,p,g,x,m,y,T){x===void 0&&(x="loadeddata"),m===void 0&&(m=!1),y===void 0&&(y=!1),x!=="loadeddata"&&x!=="canplay"&&x!=="canplaythrough"&&(x="loadeddata");var C={type:"video",cache:c.cacheManager.video,extension:g.type,responseType:"blob",key:p,url:g.url,xhrSettings:T,config:{loadEvent:x,asBlob:m,noAudio:y}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,c,C)},onProcess:function(){if(this.state=h.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var d=this.createVideoElement();this.data=d;var c=this;this.data.onloadeddata=function(){c.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(c.data),c.onProcessError()},r.createObjectURL(d,this.xhrLoader.response,""),d.load()},createVideoElement:function(){var d=document.createElement("video");return d.controls=!1,d.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(d.muted=!0,d.defaultMuted=!0,d.setAttribute("autoplay","autoplay")),d.setAttribute("playsinline","playsinline"),d.setAttribute("preload","auto"),d},onVideoLoadHandler:function(d){var c=d.target;c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0),this.data=c,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(d){var c=d.target;c&&(c.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),c.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var d=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var c=this.createVideoElement();c.addEventListener(d,this.onLoadCallback,!0),c.addEventListener("error",this.onErrorCallback,!0),c.src=u(this,this.loader.baseURL),c.load()}}});v.create=function(d,c,p,g,x,m,y){var T=d.systems.game;f(c)&&(p=l(c,"url",[]),g=l(c,"loadEvent","loadeddata"),x=l(c,"asBlob",!1),m=l(c,"noAudio",!1),y=l(c,"xhrSettings"),c=l(c,"key"));var C=v.getVideoURL(T,p);if(C)return new v(d,c,C,g,x,m,y)},v.getVideoURL=function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var g=l(c[p],"url",c[p]);if(g.indexOf("blob:")===0)return{url:g,type:""};var x;if(g.indexOf("data:")===0?x=g.split(",")[0].match(/\/(.*?);/):x=g.match(/\.([a-zA-Z0-9]+)($|\?)/),x=l(c[p],"type",x?x[1]:"").toLowerCase(),d.device.video[x])return{url:g,type:x}}return null},o.register("video",function(d,c,p,g,x,m){var y;if(Array.isArray(d))for(var T=0;T<d.length;T++)y=v.create(this,d[T]),y&&this.addFile(y);else y=v.create(this,d,c,p,g,x,m),y&&this.addFile(y);return this}),e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(21),r=i(149),o=i(9),u=i(95),l=i(8),f=i(2),v=i(24),d=i(20),c=i(156),p=new s({Extends:o,initialize:function(x){o.call(this);var m=x.sys.game.config,y=x.sys.settings.loader;this.scene=x,this.systems=x.sys,this.cacheManager=x.sys.cache,this.textureManager=x.sys.textures,this.sceneManager=x.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(f(y,"baseURL",m.loaderBaseURL)),this.setPath(f(y,"path",m.loaderPath)),this.setPrefix(f(y,"prefix",m.loaderPrefix)),this.maxParallelDownloads=f(y,"maxParallelDownloads",m.loaderMaxParallelDownloads),this.xhr=c(f(y,"responseType",m.loaderResponseType),f(y,"async",m.loaderAsync),f(y,"user",m.loaderUser),f(y,"password",m.loaderPassword),f(y,"timeout",m.loaderTimeout),f(y,"withCredentials",m.loaderWithCredentials)),this.crossOrigin=f(y,"crossOrigin",m.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=h.LOADER_IDLE,this.multiKeyIndex=0,x.sys.events.once(d.BOOT,this.boot,this),x.sys.events.on(d.START,this.pluginStart,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++){var m=g[x];this.keyExists(m)||(this.list.set(m),this.emit(u.ADD,m.key,m.type,this,m),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var x=g.hasCacheConflict();return x||this.list.iterate(function(m){if(m.type===g.type&&m.key===g.key)return x=!0,!1}),!x&&this.isLoading()&&(this.inflight.iterate(function(m){if(m.type===g.type&&m.key===g.key)return x=!0,!1}),this.queue.iterate(function(m){if(m.type===g.type&&m.key===g.key)return x=!0,!1})),x},addPack:function(g,x){x&&g.hasOwnProperty(x)&&(g={packKey:g[x]});var m=0,y=this.baseURL,T=this.path,C=this.prefix;for(var S in g)if(!!Object.prototype.hasOwnProperty.call(g,S)){var E=g[S],P=f(E,"baseURL",y),M=f(E,"path",T),O=f(E,"prefix",C),A=f(E,"files",null),R=f(E,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(P),this.setPath(M),this.setPrefix(O);for(var F=0;F<A.length;F++){var I=A[F],D=I.hasOwnProperty("type")?I.type:R;this[D]&&(this[D](I),m++)}}}return this.setBaseURL(y),this.setPath(T),this.setPrefix(C),m>0},isLoading:function(){return this.state===h.LOADER_LOADING||this.state===h.LOADER_PROCESSING},isReady:function(){return this.state===h.LOADER_IDLE||this.state===h.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(u.START,this),this.list.size===0?this.loadComplete():(this.state=h.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(d.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(u.PROGRESS,this.progress)},update:function(){this.state===h.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===h.FILE_POPULATED||g.state===h.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,x){!this.inflight||(this.inflight.delete(g),this.updateProgress(),x?(this.totalComplete++,this.queue.set(g),this.emit(u.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(u.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===h.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===h.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&g.multiFile.addToCache():g.addToCache()),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(u.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=h.LOADER_COMPLETE,this.systems.events.off(d.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(u.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,x){return this.save(JSON.stringify(g),x)},save:function(g,x,m){x===void 0&&(x="file.json"),m===void 0&&(m="application/json");var y=new Blob([g],{type:m}),T=URL.createObjectURL(y),C=document.createElement("a");return C.download=x,C.textContent="Download "+x,C.href=T,C.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,x=this.systems.settings.loader;this.setBaseURL(f(x,"baseURL",g.loaderBaseURL)),this.setPath(f(x,"path",g.loaderPath)),this.setPrefix(f(x,"prefix",g.loaderPrefix)),this.state=h.LOADER_IDLE},shutdown:function(){this.reset(),this.state=h.LOADER_SHUTDOWN,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=h.LOADER_DESTROYED,this.systems.events.off(d.UPDATE,this.update,this),this.systems.events.off(d.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});v.register("Loader",p,"load"),e.exports=p},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(62),h=i(17),r={ArcadePhysics:i(1367),Body:i(527),Collider:i(528),Components:i(243),Events:i(245),Factory:i(521),GetOverlapX:i(246),GetOverlapY:i(247),SeparateX:i(537),SeparateY:i(538),Group:i(524),Image:i(522),Sprite:i(157),StaticBody:i(539),StaticGroup:i(525),Tilemap:i(1391),World:i(526)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(36),r=i(50),o=i(353),u=i(521),l=i(2),f=i(127),v=i(523),d=i(244),c=i(24),p=i(20),g=i(3),x=i(526),m=new s({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,T.sys.events.once(p.BOOT,this.boot,this),T.sys.events.on(p.START,this.start,this)},boot:function(){this.world=new x(this.scene,this.config),this.add=new u(this.world),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new x(this.scene,this.config),this.add=new u(this.world));var y=this.systems.events;l(this.config,"customUpdate",!1)||y.on(p.UPDATE,this.world.update,this.world),y.on(p.POST_UPDATE,this.world.postUpdate,this.world),y.once(p.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(p.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(p.UPDATE,this.world.update,this.world)},getConfig:function(){var y=this.systems.game.config.physics,T=this.systems.settings.physics,C=f(l(T,"arcade",{}),l(y,"arcade",{}));return C},overlap:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!0)},collide:function(y,T,C,S,E){return C===void 0&&(C=null),S===void 0&&(S=null),E===void 0&&(E=C),this.world.collideObjects(y,T,C,S,E,!1)},collideTiles:function(y,T,C,S,E){return this.world.collideTiles(y,T,C,S,E)},overlapTiles:function(y,T,C,S,E){return this.world.overlapTiles(y,T,C,S,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(y,T,C,S,E,P){S===void 0&&(S=60);var M=Math.atan2(C-y.y,T-y.x);return y.body.acceleration.setToPolar(M,S),E!==void 0&&P!==void 0&&y.body.maxVelocity.set(E,P),M},accelerateToObject:function(y,T,C,S,E){return this.accelerateTo(y,T.x,T.y,C,S,E)},closest:function(y,T){T||(T=this.world.bodies.entries);for(var C=Number.MAX_VALUE,S=null,E=y.x,P=y.y,M=T.length,O=0;O<M;O++){var A=T[O],R=A.body||A;if(!(y===A||y===R||y===R.gameObject||y===R.center)){var F=o(E,P,R.center.x,R.center.y);F<C&&(S=A,C=F)}}return S},furthest:function(y,T){T||(T=this.world.bodies.entries);for(var C=-1,S=null,E=y.x,P=y.y,M=T.length,O=0;O<M;O++){var A=T[O],R=A.body||A;if(!(y===A||y===R||y===R.gameObject||y===R.center)){var F=o(E,P,R.center.x,R.center.y);F>C&&(S=A,C=F)}}return S},moveTo:function(y,T,C,S,E){S===void 0&&(S=60),E===void 0&&(E=0);var P=Math.atan2(C-y.y,T-y.x);return E>0&&(S=r(y.x,y.y,T,C)/(E/1e3)),y.body.velocity.setToPolar(P,S),P},moveToObject:function(y,T,C,S){return this.moveTo(y,T.x,T.y,C,S)},velocityFromAngle:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(h(y),T)},velocityFromRotation:function(y,T,C){return T===void 0&&(T=60),C===void 0&&(C=new g),C.setToPolar(y,T)},overlapRect:function(y,T,C,S,E,P){return d(this.world,y,T,C,S,E,P)},overlapCirc:function(y,T,C,S,E){return v(this.world,y,T,C,S,E)},shutdown:function(){if(!!this.world){var y=this.systems.events;y.off(p.UPDATE,this.world.update,this.world),y.off(p.POST_UPDATE,this.world.postUpdate,this.world),y.off(p.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});c.register("ArcadePhysics",m,"arcadePhysics"),e.exports=m},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAcceleration:function(s,h){return this.body.acceleration.set(s,h),this},setAccelerationX:function(s){return this.body.acceleration.x=s,this},setAccelerationY:function(s){return this.body.acceleration.y=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setAngularVelocity:function(s){return this.body.angularVelocity=s,this},setAngularAcceleration:function(s){return this.body.angularAcceleration=s,this},setAngularDrag:function(s){return this.body.angularDrag=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(s,h){return this.body.bounce.set(s,h),this},setBounceX:function(s){return this.body.bounce.x=s,this},setBounceY:function(s){return this.body.bounce.y=s,this},setCollideWorldBounds:function(s,h,r){return this.body.setCollideWorldBounds(s,h,r),this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDebug:function(s,h,r){return this.debugShowBody=s,this.debugShowVelocity=h,this.debugBodyColor=r,this},setDebugBodyColor:function(s){return this.body.debugBodyColor=s,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(s){this.body.debugShowBody=s}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(s){this.body.debugShowVelocity=s}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(s){this.body.debugBodyColor=s}}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setDrag:function(s,h){return this.body.drag.set(s,h),this},setDragX:function(s){return this.body.drag.x=s,this},setDragY:function(s){return this.body.drag.y=s,this},setDamping:function(s){return this.body.useDamping=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={enableBody:function(s,h,r,o,u){return s&&this.body.reset(h,r),o&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(s,h){return s===void 0&&(s=!1),h===void 0&&(h=!1),this.body.stop(),this.body.enable=!1,s&&(this.body.gameObject.active=!1),h&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(s,h){return this.body.friction.set(s,h),this},setFrictionX:function(s){return this.body.friction.x=s,this},setFrictionY:function(s){return this.body.friction.y=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setGravity:function(s,h){return this.body.gravity.set(s,h),this},setGravityX:function(s){return this.body.gravity.x=s,this},setGravityY:function(s){return this.body.gravity.y=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setImmovable:function(s){return s===void 0&&(s=!0),this.body.immovable=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setMass:function(s){return this.body.mass=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setPushable:function(s){return s===void 0&&(s=!0),this.body.pushable=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setOffset:function(s,h){return this.body.setOffset(s,h),this},setSize:function(s,h,r){return this.body.setSize(s,h,r),this},setBodySize:function(s,h,r){return this.body.setSize(s,h,r),this},setCircle:function(s,h,r){return this.body.setCircle(s,h,r),this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setVelocity:function(s,h){return this.body.setVelocity(s,h),this},setVelocityX:function(s){return this.body.setVelocityX(s),this},setVelocityY:function(s){return this.body.setVelocityY(s),this},setMaxVelocity:function(s,h){return this.body.maxVelocity.set(s,h),this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collide"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="overlap"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tilecollide"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="tileoverlap"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldbounds"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="worldstep"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,s,h,r,o,u,l,f,v,d,c,p,g,x,m,y,T,C=function(A,R,F){i=A,s=R;var I=i.velocity.x,D=s.velocity.x;return h=i.pushable,v=i._dx<0,d=i._dx>0,c=i._dx===0,m=Math.abs(i.right-s.x)<=Math.abs(s.right-i.x),l=D-I*i.bounce.x,r=s.pushable,p=s._dx<0,g=s._dx>0,x=s._dx===0,y=!m,f=I-D*s.bounce.x,T=Math.abs(F),S()},S=function(){return d&&m&&s.blocked.right?(i.processX(-T,l,!1,!0),1):v&&y&&s.blocked.left?(i.processX(T,l,!0),1):g&&y&&i.blocked.right?(s.processX(-T,f,!1,!0),2):p&&m&&i.blocked.left?(s.processX(T,f,!0),2):0},E=function(){var A=i.velocity.x,R=s.velocity.x,F=Math.sqrt(R*R*s.mass/i.mass)*(R>0?1:-1),I=Math.sqrt(A*A*i.mass/s.mass)*(A>0?1:-1),D=(F+I)*.5;return F-=D,I-=D,o=D+F*i.bounce.x,u=D+I*s.bounce.x,v&&y?P(0):p&&m?P(1):d&&m?P(2):g&&y?P(3):!1},P=function(A){if(h&&r)T*=.5,A===0||A===3?(i.processX(T,o),s.processX(-T,u)):(i.processX(-T,o),s.processX(T,u));else if(h&&!r)A===0||A===3?i.processX(T,l,!0):i.processX(-T,l,!1,!0);else if(!h&&r)A===0||A===3?s.processX(-T,f,!1,!0):s.processX(T,f,!0);else{var R=T*.5;A===0?x?(i.processX(T,0,!0),s.processX(0,null,!1,!0)):g?(i.processX(R,0,!0),s.processX(-R,0,!1,!0)):(i.processX(R,s.velocity.x,!0),s.processX(-R,null,!1,!0)):A===1?c?(i.processX(0,null,!1,!0),s.processX(T,0,!0)):d?(i.processX(-R,0,!1,!0),s.processX(R,0,!0)):(i.processX(-R,null,!1,!0),s.processX(R,i.velocity.x,!0)):A===2?x?(i.processX(-T,0,!1,!0),s.processX(0,null,!0)):p?(i.processX(-R,0,!1,!0),s.processX(R,0,!0)):(i.processX(-R,s.velocity.x,!1,!0),s.processX(R,null,!0)):A===3&&(c?(i.processX(0,null,!0),s.processX(-T,0,!1,!0)):v?(i.processX(R,0,!0),s.processX(-R,0,!1,!0)):(i.processX(R,s.velocity.y,!0),s.processX(-R,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.x=0:m?s.processX(T,f,!0):s.processX(-T,f,!1,!0),i.moves&&(s.y+=(i.y-i.prev.y)*i.friction.y,s._dy=s.y-s.prev.y)},O=function(A){A===2?i.velocity.x=0:y?i.processX(T,l,!0):i.processX(-T,l,!1,!0),s.moves&&(i.y+=(s.y-s.prev.y)*s.friction.y,i._dy=i.y-i.prev.y)};e.exports={BlockCheck:S,Check:E,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:O}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i,s,h,r,o,u,l,f,v,d,c,p,g,x,m,y,T,C=function(A,R,F){i=A,s=R;var I=i.velocity.y,D=s.velocity.y;return h=i.pushable,v=i._dy<0,d=i._dy>0,c=i._dy===0,m=Math.abs(i.bottom-s.y)<=Math.abs(s.bottom-i.y),l=D-I*i.bounce.y,r=s.pushable,p=s._dy<0,g=s._dy>0,x=s._dy===0,y=!m,f=I-D*s.bounce.y,T=Math.abs(F),S()},S=function(){return d&&m&&s.blocked.down?(i.processY(-T,l,!1,!0),1):v&&y&&s.blocked.up?(i.processY(T,l,!0),1):g&&y&&i.blocked.down?(s.processY(-T,f,!1,!0),2):p&&m&&i.blocked.up?(s.processY(T,f,!0),2):0},E=function(){var A=i.velocity.y,R=s.velocity.y,F=Math.sqrt(R*R*s.mass/i.mass)*(R>0?1:-1),I=Math.sqrt(A*A*i.mass/s.mass)*(A>0?1:-1),D=(F+I)*.5;return F-=D,I-=D,o=D+F*i.bounce.y,u=D+I*s.bounce.y,v&&y?P(0):p&&m?P(1):d&&m?P(2):g&&y?P(3):!1},P=function(A){if(h&&r)T*=.5,A===0||A===3?(i.processY(T,o),s.processY(-T,u)):(i.processY(-T,o),s.processY(T,u));else if(h&&!r)A===0||A===3?i.processY(T,l,!0):i.processY(-T,l,!1,!0);else if(!h&&r)A===0||A===3?s.processY(-T,f,!1,!0):s.processY(T,f,!0);else{var R=T*.5;A===0?x?(i.processY(T,0,!0),s.processY(0,null,!1,!0)):g?(i.processY(R,0,!0),s.processY(-R,0,!1,!0)):(i.processY(R,s.velocity.y,!0),s.processY(-R,null,!1,!0)):A===1?c?(i.processY(0,null,!1,!0),s.processY(T,0,!0)):d?(i.processY(-R,0,!1,!0),s.processY(R,0,!0)):(i.processY(-R,null,!1,!0),s.processY(R,i.velocity.y,!0)):A===2?x?(i.processY(-T,0,!1,!0),s.processY(0,null,!0)):p?(i.processY(-R,0,!1,!0),s.processY(R,0,!0)):(i.processY(-R,s.velocity.y,!1,!0),s.processY(R,null,!0)):A===3&&(c?(i.processY(0,null,!0),s.processY(-T,0,!1,!0)):v?(i.processY(R,0,!0),s.processY(-R,0,!1,!0)):(i.processY(R,s.velocity.y,!0),s.processY(-R,null,!1,!0)))}return!0},M=function(A){A===1?s.velocity.y=0:m?s.processY(T,f,!0):s.processY(-T,f,!1,!0),i.moves&&(s.x+=(i.x-i.prev.x)*i.friction.x,s._dx=s.x-s.prev.x)},O=function(A){A===2?i.velocity.y=0:y?i.processY(T,l,!0):i.processY(-T,l,!1,!0),s.moves&&(i.x+=(s.x-s.prev.x)*s.friction.x,i._dx=i.x-i.prev.x)};e.exports={BlockCheck:S,Check:E,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:O}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ProcessTileCallbacks:i(530),ProcessTileSeparationX:i(534),ProcessTileSeparationY:i(536),SeparateTile:i(532),TileCheckX:i(533),TileCheckY:i(535),TileIntersectsBody:i(248)};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(3),r=new s({initialize:function(){this.boundsCenter=new h,this.centerDiff=new h},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var u=this.boundsCenter,l=this.centerDiff,f=o.bounds.max.x-o.bounds.min.x,v=o.bounds.max.y-o.bounds.min.y,d=f*o.centerOfMass.x,c=v*o.centerOfMass.y;return u.set(f/2,v/2),l.set(d-u.x,c-u.y),!0},getTopLeft:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u+f.x+v.x,l+f.y+v.y)}return!1},getTopCenter:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u+v.x,l+f.y+v.y)}return!1},getTopRight:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u-(f.x-v.x),l+f.y+v.y)}return!1},getLeftCenter:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u+f.x+v.x,l+v.y)}return!1},getCenter:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.centerDiff;return new h(u+f.x,l+f.y)}return!1},getRightCenter:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u-(f.x-v.x),l+v.y)}return!1},getBottomLeft:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u+f.x+v.x,l-(f.y-v.y))}return!1},getBottomCenter:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u+v.x,l-(f.y-v.y))}return!1},getBottomRight:function(o,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),this.parseBody(o)){var f=this.boundsCenter,v=this.centerDiff;return new h(u-(f.x-v.x),l-(f.y-v.y))}return!1}});e.exports=r},function(e,a){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={decomp:A,quickDecomp:D,isSimple:F,removeCollinearPoints:N,removeDuplicatePoints:z,makeCCW:m};function i(w,L,B){B=B||0;var b=[0,0],G,Y,V,X,H,k,$;return G=w[1][1]-w[0][1],Y=w[0][0]-w[1][0],V=G*w[0][0]+Y*w[0][1],X=L[1][1]-L[0][1],H=L[0][0]-L[1][0],k=X*L[0][0]+H*L[0][1],$=G*H-X*Y,U($,0,B)||(b[0]=(H*V-Y*k)/$,b[1]=(G*k-X*V)/$),b}function s(w,L,B,b){var G=L[0]-w[0],Y=L[1]-w[1],V=b[0]-B[0],X=b[1]-B[1];if(V*Y-X*G===0)return!1;var H=(G*(B[1]-w[1])+Y*(w[0]-B[0]))/(V*Y-X*G),k=(V*(w[1]-B[1])+X*(B[0]-w[0]))/(X*G-V*Y);return H>=0&&H<=1&&k>=0&&k<=1}function h(w,L,B){return(L[0]-w[0])*(B[1]-w[1])-(B[0]-w[0])*(L[1]-w[1])}function r(w,L,B){return h(w,L,B)>0}function o(w,L,B){return h(w,L,B)>=0}function u(w,L,B){return h(w,L,B)<0}function l(w,L,B){return h(w,L,B)<=0}var f=[],v=[];function d(w,L,B,b){if(b){var G=f,Y=v;G[0]=L[0]-w[0],G[1]=L[1]-w[1],Y[0]=B[0]-L[0],Y[1]=B[1]-L[1];var V=G[0]*Y[0]+G[1]*Y[1],X=Math.sqrt(G[0]*G[0]+G[1]*G[1]),H=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),k=Math.acos(V/(X*H));return k<b}else return h(w,L,B)===0}function c(w,L){var B=L[0]-w[0],b=L[1]-w[1];return B*B+b*b}function p(w,L){var B=w.length;return w[L<0?L%B+B:L%B]}function g(w){w.length=0}function x(w,L,B,b){for(var G=B;G<b;G++)w.push(L[G])}function m(w){for(var L=0,B=w,b=1;b<w.length;++b)(B[b][1]<B[L][1]||B[b][1]===B[L][1]&&B[b][0]>B[L][0])&&(L=b);return r(p(w,L-1),p(w,L),p(w,L+1))?!1:(y(w),!0)}function y(w){for(var L=[],B=w.length,b=0;b!==B;b++)L.push(w.pop());for(var b=0;b!==B;b++)w[b]=L[b]}function T(w,L){return u(p(w,L-1),p(w,L),p(w,L+1))}var C=[],S=[];function E(w,L,B){var b,G,Y=C,V=S;if(o(p(w,L+1),p(w,L),p(w,B))&&l(p(w,L-1),p(w,L),p(w,B)))return!1;G=c(p(w,L),p(w,B));for(var X=0;X!==w.length;++X)if(!((X+1)%w.length===L||X===L)&&o(p(w,L),p(w,B),p(w,X+1))&&l(p(w,L),p(w,B),p(w,X))&&(Y[0]=p(w,L),Y[1]=p(w,B),V[0]=p(w,X),V[1]=p(w,X+1),b=i(Y,V),c(p(w,L),b)<G))return!1;return!0}function P(w,L,B){for(var b=0;b!==w.length;++b)if(!(b===L||b===B||(b+1)%w.length===L||(b+1)%w.length===B)&&s(p(w,L),p(w,B),p(w,b),p(w,b+1)))return!1;return!0}function M(w,L,B,b){var G=b||[];if(g(G),L<B)for(var Y=L;Y<=B;Y++)G.push(w[Y]);else{for(var Y=0;Y<=B;Y++)G.push(w[Y]);for(var Y=L;Y<w.length;Y++)G.push(w[Y])}return G}function O(w){for(var L=[],B=[],b=[],G=[],Y=Number.MAX_VALUE,V=0;V<w.length;++V)if(T(w,V)){for(var X=0;X<w.length;++X)if(E(w,V,X)){B=O(M(w,V,X,G)),b=O(M(w,X,V,G));for(var H=0;H<b.length;H++)B.push(b[H]);B.length<Y&&(L=B,Y=B.length,L.push([p(w,V),p(w,X)]))}}return L}function A(w){var L=O(w);return L.length>0?R(w,L):[w]}function R(w,L){if(L.length===0)return[w];if(L instanceof Array&&L.length&&L[0]instanceof Array&&L[0].length===2&&L[0][0]instanceof Array){for(var B=[w],b=0;b<L.length;b++)for(var G=L[b],Y=0;Y<B.length;Y++){var V=B[Y],X=R(V,G);if(X){B.splice(Y,1),B.push(X[0],X[1]);break}}return B}else{var G=L,b=w.indexOf(G[0]),Y=w.indexOf(G[1]);return b!==-1&&Y!==-1?[M(w,b,Y),M(w,Y,b)]:!1}}function F(w){var L=w,B;for(B=0;B<L.length-1;B++)for(var b=0;b<B-1;b++)if(s(L[B],L[B+1],L[b],L[b+1]))return!1;for(B=1;B<L.length-2;B++)if(s(L[0],L[L.length-1],L[B],L[B+1]))return!1;return!0}function I(w,L,B,b,G){G=G||0;var Y=L[1]-w[1],V=w[0]-L[0],X=Y*w[0]+V*w[1],H=b[1]-B[1],k=B[0]-b[0],$=H*B[0]+k*B[1],K=Y*k-H*V;return U(K,0,G)?[0,0]:[(k*X-V*$)/K,(Y*$-H*X)/K]}function D(w,L,B,b,G,Y,V){Y=Y||100,V=V||0,G=G||25,L=typeof L<"u"?L:[],B=B||[],b=b||[];var X=[0,0],H=[0,0],k=[0,0],$=0,K=0,Z=0,Q=0,J=0,tt=0,lt=0,ot=[],et=[],j=w,ft=w;if(ft.length<3)return L;if(V++,V>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),L;for(var it=0;it<w.length;++it)if(T(j,it)){B.push(j[it]),$=K=Number.MAX_VALUE;for(var ht=0;ht<w.length;++ht)r(p(j,it-1),p(j,it),p(j,ht))&&l(p(j,it-1),p(j,it),p(j,ht-1))&&(k=I(p(j,it-1),p(j,it),p(j,ht),p(j,ht-1)),u(p(j,it+1),p(j,it),k)&&(Z=c(j[it],k),Z<K&&(K=Z,H=k,tt=ht))),r(p(j,it+1),p(j,it),p(j,ht+1))&&l(p(j,it+1),p(j,it),p(j,ht))&&(k=I(p(j,it+1),p(j,it),p(j,ht),p(j,ht+1)),r(p(j,it-1),p(j,it),k)&&(Z=c(j[it],k),Z<$&&($=Z,X=k,J=ht)));if(tt===(J+1)%w.length)k[0]=(H[0]+X[0])/2,k[1]=(H[1]+X[1])/2,b.push(k),it<J?(x(ot,j,it,J+1),ot.push(k),et.push(k),tt!==0&&x(et,j,tt,j.length),x(et,j,0,it+1)):(it!==0&&x(ot,j,it,j.length),x(ot,j,0,J+1),ot.push(k),et.push(k),x(et,j,tt,it+1));else{if(tt>J&&(J+=w.length),Q=Number.MAX_VALUE,J<tt)return L;for(var ht=tt;ht<=J;++ht)o(p(j,it-1),p(j,it),p(j,ht))&&l(p(j,it+1),p(j,it),p(j,ht))&&(Z=c(p(j,it),p(j,ht)),Z<Q&&P(j,it,ht)&&(Q=Z,lt=ht%w.length));it<lt?(x(ot,j,it,lt+1),lt!==0&&x(et,j,lt,ft.length),x(et,j,0,it+1)):(it!==0&&x(ot,j,it,ft.length),x(ot,j,0,lt+1),x(et,j,lt,it+1))}return ot.length<et.length?(D(ot,L,B,b,G,Y,V),D(et,L,B,b,G,Y,V)):(D(et,L,B,b,G,Y,V),D(ot,L,B,b,G,Y,V)),L}return L.push(w),L}function N(w,L){for(var B=0,b=w.length-1;w.length>3&&b>=0;--b)d(p(w,b-1),p(w,b),p(w,b+1),L)&&(w.splice(b%w.length,1),B++);return B}function z(w,L){for(var B=w.length-1;B>=1;--B)for(var b=w[B],G=B-1;G>=0;--G)if(W(b,w[G],L)){w.splice(B,1);continue}}function U(w,L,B){return B=B||0,Math.abs(w-L)<=B}function W(w,L,B){return U(w[0],L[0],B)&&U(w[1],L[1],B)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),h=i(0),r=i(591),o=i(128),u=i(592),l=i(1395),f=i(1396),v=i(1397),d=i(593),c=i(589),p=i(590),g=i(1398),x=i(64),m=new h({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(y,T,C,S,E){var P=s.rectangle(y,T,C,S,E);return this.world.add(P),P},trapezoid:function(y,T,C,S,E,P){var M=s.trapezoid(y,T,C,S,E,P);return this.world.add(M),M},circle:function(y,T,C,S,E){var P=s.circle(y,T,C,S,E);return this.world.add(P),P},polygon:function(y,T,C,S,E){var P=s.polygon(y,T,C,S,E);return this.world.add(P),P},fromVertices:function(y,T,C,S,E,P,M){typeof C=="string"&&(C=x.fromPath(C));var O=s.fromVertices(y,T,C,S,E,P,M);return this.world.add(O),O},fromPhysicsEditor:function(y,T,C,S,E){E===void 0&&(E=!0);var P=c.parseBody(y,T,C,S);return E&&!this.world.has(P)&&this.world.add(P),P},fromSVG:function(y,T,C,S,E,P){S===void 0&&(S=1),E===void 0&&(E={}),P===void 0&&(P=!0);for(var M=C.getElementsByTagName("path"),O=[],A=0;A<M.length;A++){var R=u.pathToVertices(M[A],30);S!==1&&x.scale(R,S,S),O.push(R)}var F=s.fromVertices(y,T,O,E);return P&&this.world.add(F),F},fromJSON:function(y,T,C,S,E){S===void 0&&(S={}),E===void 0&&(E=!0);var P=p.parseBody(y,T,C,S);return P&&E&&this.world.add(P),P},imageStack:function(y,T,C,S,E,P,M,O,A){M===void 0&&(M=0),O===void 0&&(O=0),A===void 0&&(A={});var R=this.world,F=this.sys.displayList;A.addToWorld=!1;var I=r.stack(C,S,E,P,M,O,function(D,N){var z=new f(R,D,N,y,T,A);return F.add(z),z.body});return R.add(I),I},stack:function(y,T,C,S,E,P,M){var O=r.stack(y,T,C,S,E,P,M);return this.world.add(O),O},pyramid:function(y,T,C,S,E,P,M){var O=r.pyramid(y,T,C,S,E,P,M);return this.world.add(O),O},chain:function(y,T,C,S,E,P){return r.chain(y,T,C,S,E,P)},mesh:function(y,T,C,S,E){return r.mesh(y,T,C,S,E)},newtonsCradle:function(y,T,C,S,E){var P=r.newtonsCradle(y,T,C,S,E);return this.world.add(P),P},car:function(y,T,C,S,E){var P=r.car(y,T,C,S,E);return this.world.add(P),P},softBody:function(y,T,C,S,E,P,M,O,A,R){var F=r.softBody(y,T,C,S,E,P,M,O,A,R);return this.world.add(F),F},joint:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},spring:function(y,T,C,S,E){return this.constraint(y,T,C,S,E)},constraint:function(y,T,C,S,E){S===void 0&&(S=1),E===void 0&&(E={}),E.bodyA=y.type==="body"?y:y.body,E.bodyB=T.type==="body"?T:T.body,isNaN(C)||(E.length=C),E.stiffness=S;var P=o.create(E);return this.world.add(P),P},worldConstraint:function(y,T,C,S){C===void 0&&(C=1),S===void 0&&(S={}),S.bodyB=y.type==="body"?y:y.body,isNaN(T)||(S.length=T),S.stiffness=C;var E=o.create(S);return this.world.add(E),E},mouseSpring:function(y){return this.pointerConstraint(y)},pointerConstraint:function(y){y===void 0&&(y={}),y.hasOwnProperty("render")||(y.render={visible:!1});var T=new g(this.scene,this.world,y);return this.world.add(T.constraint),T},image:function(y,T,C,S,E){var P=new f(this.world,y,T,C,S,E);return this.sys.displayList.add(P),P},tileBody:function(y,T){return new d(this.world,y,T)},sprite:function(y,T,C,S,E){var P=new v(this.world,y,T,C,S,E);return this.sys.displayList.add(P),this.sys.updateList.add(P),P},gameObject:function(y,T,C){return l(this.world,y,T,C)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});e.exports=m},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(249),h=i(2),r=i(3);function o(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}var u=function(l,f,v,d){v===void 0&&(v={}),d===void 0&&(d=!0);var c=f.x,p=f.y;f.body={temp:!0,position:{x:c,y:p}};var g=[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity];if(g.forEach(function(m){for(var y in m)o(m[y])?Object.defineProperty(f,y,{get:m[y].get,set:m[y].set}):Object.defineProperty(f,y,{value:m[y]})}),f.world=l,f._tempVec2=new r(c,p),v.hasOwnProperty("type")&&v.type==="body")f.setExistingBody(v,d);else{var x=h(v,"shape",null);x||(x="rectangle"),v.addToWorld=d,f.setBody(x,v)}return f};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(249),r=i(15),o=i(2),u=i(125),l=i(167),f=i(3),v=new s({Extends:u,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,l],initialize:function(c,p,g,x,m,y){r.call(this,c.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(x,m),this.setSizeToFrame(),this.setOrigin(),this.world=c,this._tempVec2=new f(p,g);var T=o(y,"shape",null);T?this.setBody(T,y):this.setRectangle(this.width,this.height,y),this.setPosition(p,g),this.initPipeline()}});e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(164),h=i(0),r=i(249),o=i(15),u=i(2),l=i(167),f=i(73),v=i(3),d=new h({Extends:f,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,l],initialize:function(p,g,x,m,y,T){o.call(this,p.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new s(this),this.setTexture(m,y),this.setSizeToFrame(),this.setOrigin(),this.world=p,this._tempVec2=new v(g,x);var C=u(T,"shape",null);C?this.setBody(C,T):this.setRectangle(this.width,this.height,T),this.setPosition(g,x),this.initPipeline()}});e.exports=d},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(84),h=i(0),r=i(118),o=i(128),u=i(273),l=i(272),f=i(51),v=i(127),d=i(165),c=i(3),p=i(64),g=new h({initialize:function(m,y,T){T===void 0&&(T={});var C={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=m,this.world=y,this.camera=null,this.pointer=null,this.active=!0,this.position=new c,this.body=null,this.part=null,this.constraint=o.create(v(T,C)),this.world.on(l.BEFORE_UPDATE,this.update,this),m.sys.input.on(f.POINTER_DOWN,this.onDown,this),m.sys.input.on(f.POINTER_UP,this.onUp,this)},onDown:function(x){this.pointer||(this.pointer=x,this.camera=x.camera)},onUp:function(x){x===this.pointer&&(this.pointer=null)},getBody:function(x){var m=this.position,y=this.constraint;this.camera.getWorldPoint(x.x,x.y,m);for(var T=r.allBodies(this.world.localWorld),C=0;C<T.length;C++){var S=T[C];if(!S.ignorePointer&&s.contains(S.bounds,m)&&u.canCollide(S.collisionFilter,y.collisionFilter)&&this.hitTestBody(S,m))return this.world.emit(l.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(x,m){for(var y=this.constraint,T=x.parts.length,C=T>1?1:0,S=C;S<T;S++){var E=x.parts[S];if(p.contains(E.vertices,m))return y.pointA=m,y.pointB={x:m.x-x.position.x,y:m.y-x.position.y},y.bodyB=x,y.angleB=x.angle,d.set(x,!1),this.part=E,this.body=x,!0}return!1},update:function(){var x=this.pointer,m=this.body;if(!this.active||!x){m&&this.stopDrag();return}if(!x.isDown&&m){this.stopDrag();return}else if(x.isDown){if(!m&&!this.getBody(x))return;m=this.body;var y=this.position,T=this.constraint;this.camera.getWorldPoint(x.x,x.y,y),T.pointA.x=y.x,T.pointA.y=y.y,d.set(m,!1),this.world.emit(l.DRAG,m,this)}},stopDrag:function(){var x=this.body,m=this.constraint;m.bodyB=null,m.pointB=null,this.pointer=null,this.body=null,this.part=null,x&&this.world.emit(l.DRAG_END,x,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(f.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(f.POINTER_UP,this.onUp,this)}});e.exports=g},function(e,a,i){var s={};e.exports=s;var h=i(595),r=i(32);(function(){s.name="matter-js",s.version="0.14.2",s.uses=[],s.used=[],s.use=function(){h.use(s,Array.prototype.slice.call(arguments))},s.before=function(o,u){return o=o.replace(/^Matter./,""),r.chainPathBefore(s,o,u)},s.after=function(o,u){return o=o.replace(/^Matter./,""),r.chainPathAfter(s,o,u)}})()},function(e,a,i){var s={};e.exports=s;var h=i(83),r=i(274),o=i(84),u=i(86),l=i(64);(function(){s.collides=function(f,v){for(var d=[],c=0;c<v.length;c++){var p=v[c];if(f!==p&&o.overlaps(p.bounds,f.bounds))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var x=p.parts[g];if(o.overlaps(x.bounds,f.bounds)){var m=r.collides(x,f);if(m.collided){d.push(m);break}}}}return d},s.ray=function(f,v,d,c){c=c||1e-100;for(var p=h.angle(v,d),g=h.magnitude(h.sub(v,d)),x=(d.x+v.x)*.5,m=(d.y+v.y)*.5,y=u.rectangle(x,m,g,c,{angle:p}),T=s.collides(y,f),C=0;C<T.length;C+=1){var S=T[C];S.body=S.bodyB=S.bodyA}return T},s.region=function(f,v,d){for(var c=[],p=0;p<f.length;p++){var g=f[p],x=o.overlaps(g.bounds,v);(x&&!d||!x&&d)&&c.push(g)}return c},s.point=function(f,v){for(var d=[],c=0;c<f.length;c++){var p=f[c];if(o.contains(p.bounds,v))for(var g=p.parts.length===1?0:1;g<p.parts.length;g++){var x=p.parts[g];if(o.contains(x.bounds,v)&&l.contains(x.vertices,v)){d.push(p);break}}}return d}})()},function(e,a,i){var s={};e.exports=s;var h=i(596),r=i(165),o=i(599),u=i(598),l=i(1523),f=i(597),v=i(166),d=i(118),c=i(128),p=i(32),g=i(41);(function(){s.create=function(x,m){m=p.isElement(x)?m:x,x=p.isElement(x)?x:null,m=m||{},(x||m.render)&&p.warn("Engine.create: engine.render is deprecated (see docs)");var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:f}},T=p.extend(y,m);return T.world=m.world||h.create(T.world),T.pairs=u.create(),T.broadphase=T.broadphase.controller.create(T.broadphase),T.metrics=T.metrics||{extended:!1},T.metrics=l.create(T.metrics),T},s.update=function(x,m,y){m=m||1e3/60,y=y||1;var T=x.world,C=x.timing,S=x.broadphase,E=[],P;C.timestamp+=m*C.timeScale;var M={timestamp:C.timestamp};v.trigger(x,"beforeUpdate",M);var O=d.allBodies(T),A=d.allConstraints(T);for(l.reset(x.metrics),x.enableSleeping&&r.update(O,C.timeScale),s._bodiesApplyGravity(O,T.gravity),s._bodiesUpdate(O,m,C.timeScale,y,T.bounds),c.preSolveAll(O),P=0;P<x.constraintIterations;P++)c.solveAll(A,C.timeScale);c.postSolveAll(O),S.controller?(T.isModified&&S.controller.clear(S),S.controller.update(S,O,x,T.isModified),E=S.pairsList):E=O,T.isModified&&d.setModified(T,!1,!1,!0);var R=S.detector(E,x),F=x.pairs,I=C.timestamp;for(u.update(F,R,I),u.removeOld(F,I),x.enableSleeping&&r.afterCollisions(F.list,C.timeScale),F.collisionStart.length>0&&v.trigger(x,"collisionStart",{pairs:F.collisionStart}),o.preSolvePosition(F.list),P=0;P<x.positionIterations;P++)o.solvePosition(F.list,O,C.timeScale);for(o.postSolvePosition(O),c.preSolveAll(O),P=0;P<x.constraintIterations;P++)c.solveAll(A,C.timeScale);for(c.postSolveAll(O),o.preSolveVelocity(F.list),P=0;P<x.velocityIterations;P++)o.solveVelocity(F.list,C.timeScale);return F.collisionActive.length>0&&v.trigger(x,"collisionActive",{pairs:F.collisionActive}),F.collisionEnd.length>0&&v.trigger(x,"collisionEnd",{pairs:F.collisionEnd}),l.update(x.metrics,x),s._bodiesClearForces(O),v.trigger(x,"afterUpdate",M),x},s.merge=function(x,m){if(p.extend(x,m),m.world){x.world=m.world,s.clear(x);for(var y=d.allBodies(x.world),T=0;T<y.length;T++){var C=y[T];r.set(C,!1),C.id=p.nextId()}}},s.clear=function(x){var m=x.world;u.clear(x.pairs);var y=x.broadphase;if(y.controller){var T=d.allBodies(m);y.controller.clear(y),y.controller.update(y,T,x,!0)}},s._bodiesClearForces=function(x){for(var m=0;m<x.length;m++){var y=x[m];y.force.x=0,y.force.y=0,y.torque=0}},s._bodiesApplyGravity=function(x,m){var y=typeof m.scale<"u"?m.scale:.001;if(!(m.x===0&&m.y===0||y===0))for(var T=0;T<x.length;T++){var C=x[T];C.ignoreGravity||C.isStatic||C.isSleeping||(C.force.x+=C.mass*m.x*y*C.gravityScale.x,C.force.y+=C.mass*m.y*y*C.gravityScale.y)}},s._bodiesUpdate=function(x,m,y,T,C){for(var S=0;S<x.length;S++){var E=x[S];E.isStatic||E.isSleeping||g.update(E,m,y,T)}}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),h=i(41),r=i(0),o=i(32),u=i(118),l=i(1401),f=i(9),v=i(272),d=i(2),c=i(6),p=i(41),g=i(166),x=i(593),m=i(596),y=i(83),T=new r({Extends:f,initialize:function(S,E){f.call(this),this.scene=S,this.engine=l.create(E),this.localWorld=this.engine.world;var P=c(E,"gravity",null);P?this.setGravity(P.x,P.y,P.scale):P===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=c(E,"enabled",!0),this.correction=c(E,"correction",1),this.getDelta=c(E,"getDelta",this.update60Hz);var M=d(E,"runner",{}),O=d(M,"fps",!1),A=d(M,"fps",60),R=d(M,"delta",1e3/A),F=d(M,"deltaMin",1e3/A),I=d(M,"deltaMax",1e3/(A*.5));O||(A=1e3/R),this.runner={fps:A,correction:d(M,"correction",1),deltaSampleSize:d(M,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:d(M,"isFixed",!1),delta:R,deltaMin:F,deltaMax:I},this.autoUpdate=c(E,"autoUpdate",!0);var D=c(E,"debug",!1);if(this.drawDebug=typeof D=="object"?!0:D,this.debugGraphic,this.debugConfig={showAxes:d(D,"showAxes",!1),showAngleIndicator:d(D,"showAngleIndicator",!1),angleColor:d(D,"angleColor",15208787),showBroadphase:d(D,"showBroadphase",!1),broadphaseColor:d(D,"broadphaseColor",16757760),showBounds:d(D,"showBounds",!1),boundsColor:d(D,"boundsColor",16777215),showVelocity:d(D,"showVelocity",!1),velocityColor:d(D,"velocityColor",44783),showCollisions:d(D,"showCollisions",!1),collisionColor:d(D,"collisionColor",16094476),showSeparations:d(D,"showSeparations",!1),separationColor:d(D,"separationColor",16753920),showBody:d(D,"showBody",!0),showStaticBody:d(D,"showStaticBody",!0),showInternalEdges:d(D,"showInternalEdges",!1),renderFill:d(D,"renderFill",!1),renderLine:d(D,"renderLine",!0),fillColor:d(D,"fillColor",1075465),fillOpacity:d(D,"fillOpacity",1),lineColor:d(D,"lineColor",2678297),lineOpacity:d(D,"lineOpacity",1),lineThickness:d(D,"lineThickness",1),staticFillColor:d(D,"staticFillColor",857979),staticLineColor:d(D,"staticLineColor",1255396),showSleeping:d(D,"showSleeping",!1),staticBodySleepOpacity:d(D,"staticBodySleepOpacity",.7),sleepFillColor:d(D,"sleepFillColor",4605510),sleepLineColor:d(D,"sleepLineColor",10066585),showSensors:d(D,"showSensors",!0),sensorFillColor:d(D,"sensorFillColor",857979),sensorLineColor:d(D,"sensorLineColor",1255396),showPositions:d(D,"showPositions",!0),positionSize:d(D,"positionSize",4),positionColor:d(D,"positionColor",14697178),showJoint:d(D,"showJoint",!0),jointColor:d(D,"jointColor",14737474),jointLineOpacity:d(D,"jointLineOpacity",1),jointLineThickness:d(D,"jointLineThickness",2),pinSize:d(D,"pinSize",4),pinColor:d(D,"pinColor",4382944),springColor:d(D,"springColor",14697184),anchorColor:d(D,"anchorColor",15724527),anchorSize:d(D,"anchorSize",4),showConvexHulls:d(D,"showConvexHulls",!1),hullColor:d(D,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),d(E,"setBounds",!1)){var N=E.setBounds;if(typeof N=="boolean")this.setBounds();else{var z=d(N,"x",0),U=d(N,"y",0),W=d(N,"width",S.sys.scale.width),w=d(N,"height",S.sys.scale.height),L=d(N,"thickness",64),B=d(N,"left",!0),b=d(N,"right",!0),G=d(N,"top",!0),Y=d(N,"bottom",!0);this.setBounds(z,U,W,w,L,B,b,G,Y)}}},setCompositeRenderStyle:function(C){var S=C.bodies,E=C.constraints,P=C.composites,M,O,A;for(M=0;M<S.length;M++)O=S[M],A=O.render,this.setBodyRenderStyle(O,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity);for(M=0;M<E.length;M++)O=E[M],A=O.render,this.setConstraintRenderStyle(O,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize);for(M=0;M<P.length;M++)O=P[M],this.setCompositeRenderStyle(O);return this},setBodyRenderStyle:function(C,S,E,P,M,O){var A=C.render,R=this.debugConfig;return A?(S==null&&(S=C.isStatic?R.staticLineColor:R.lineColor),E==null&&(E=R.lineOpacity),P==null&&(P=R.lineThickness),M==null&&(M=C.isStatic?R.staticFillColor:R.fillColor),O==null&&(O=R.fillOpacity),S!==!1&&(A.lineColor=S),E!==!1&&(A.lineOpacity=E),P!==!1&&(A.lineThickness=P),M!==!1&&(A.fillColor=M),O!==!1&&(A.fillOpacity=O),this):this},setConstraintRenderStyle:function(C,S,E,P,M,O,A){var R=C.render,F=this.debugConfig;if(!R)return this;if(S==null){var I=R.type;I==="line"?S=F.jointColor:I==="pin"?S=F.pinColor:I==="spring"&&(S=F.springColor)}return E==null&&(E=F.jointLineOpacity),P==null&&(P=F.jointLineThickness),M==null&&(M=F.pinSize),O==null&&(O=F.anchorColor),A==null&&(A=F.anchorSize),S!==!1&&(R.lineColor=S),E!==!1&&(R.lineOpacity=E),P!==!1&&(R.lineThickness=P),M!==!1&&(R.pinSize=M),O!==!1&&(R.anchorColor=O),A!==!1&&(R.anchorSize=A),this},setEventsProxy:function(){var C=this,S=this.engine,E=this.localWorld;this.drawDebug&&(g.on(E,"compositeModified",function(P){C.setCompositeRenderStyle(P)}),g.on(E,"beforeAdd",function(P){for(var M=[].concat(P.object),O=0;O<M.length;O++){var A=M[O],R=A.render;A.type==="body"?C.setBodyRenderStyle(A,R.lineColor,R.lineOpacity,R.lineThickness,R.fillColor,R.fillOpacity):A.type==="composite"?C.setCompositeRenderStyle(A):A.type==="constraint"&&C.setConstraintRenderStyle(A,R.lineColor,R.lineOpacity,R.lineThickness,R.pinSize,R.anchorColor,R.anchorSize)}})),g.on(E,"beforeAdd",function(P){C.emit(v.BEFORE_ADD,P)}),g.on(E,"afterAdd",function(P){C.emit(v.AFTER_ADD,P)}),g.on(E,"beforeRemove",function(P){C.emit(v.BEFORE_REMOVE,P)}),g.on(E,"afterRemove",function(P){C.emit(v.AFTER_REMOVE,P)}),g.on(S,"beforeUpdate",function(P){C.emit(v.BEFORE_UPDATE,P)}),g.on(S,"afterUpdate",function(P){C.emit(v.AFTER_UPDATE,P)}),g.on(S,"collisionStart",function(P){var M=P.pairs,O,A;M.length>0&&(O=M[0].bodyA,A=M[0].bodyB),C.emit(v.COLLISION_START,P,O,A)}),g.on(S,"collisionActive",function(P){var M=P.pairs,O,A;M.length>0&&(O=M[0].bodyA,A=M[0].bodyB),C.emit(v.COLLISION_ACTIVE,P,O,A)}),g.on(S,"collisionEnd",function(P){var M=P.pairs,O,A;M.length>0&&(O=M[0].bodyA,A=M[0].bodyB),C.emit(v.COLLISION_END,P,O,A)})},setBounds:function(C,S,E,P,M,O,A,R,F){return C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.scene.sys.scale.width),P===void 0&&(P=this.scene.sys.scale.height),M===void 0&&(M=64),O===void 0&&(O=!0),A===void 0&&(A=!0),R===void 0&&(R=!0),F===void 0&&(F=!0),this.updateWall(O,"left",C-M,S-M,M,P+M*2),this.updateWall(A,"right",C+E,S-M,M,P+M*2),this.updateWall(R,"top",C,S-M,E,M),this.updateWall(F,"bottom",C,S+P,E,M),this},updateWall:function(C,S,E,P,M,O){var A=this.walls[S];C?(A&&m.remove(this.localWorld,A),E+=M/2,P+=O/2,this.walls[S]=this.create(E,P,M,O,{isStatic:!0,friction:0,frictionStatic:0})):(A&&m.remove(this.localWorld,A),this.walls[S]=null)},createDebugGraphic:function(){var C=this.scene.sys.add.graphics({x:0,y:0});return C.setDepth(Number.MAX_VALUE),this.debugGraphic=C,this.drawDebug=!0,C},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(C,S,E){return C===void 0&&(C=0),S===void 0&&(S=1),this.localWorld.gravity.x=C,this.localWorld.gravity.y=S,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(C,S,E,P,M){var O=s.rectangle(C,S,E,P,M);return m.add(this.localWorld,O),O},add:function(C){return m.add(this.localWorld,C),this},remove:function(C,S){Array.isArray(C)||(C=[C]);for(var E=0;E<C.length;E++){var P=C[E],M=P.body?P.body:P;u.remove(this.localWorld,M,S)}return this},removeConstraint:function(C,S){return u.remove(this.localWorld,C,S),this},convertTilemapLayer:function(C,S){var E=C.layer,P=C.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(P,S),this},convertTiles:function(C,S){if(C.length===0)return this;for(var E=0;E<C.length;E++)new x(this,C[E],S);return this},nextGroup:function(C){return p.nextGroup(C)},nextCategory:function(){return p.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(v.RESUME),this},update:function(C,S){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,P=this.runner,M=E.timing,O=this.correction;P.isFixed?S=this.getDelta(C,S):(S=C-P.timePrev||P.delta,P.timePrev=C,P.deltaHistory.push(S),P.deltaHistory=P.deltaHistory.slice(-P.deltaSampleSize),S=Math.min.apply(null,P.deltaHistory),S=S<P.deltaMin?P.deltaMin:S,S=S>P.deltaMax?P.deltaMax:S,O=S/P.delta,P.delta=S),P.timeScalePrev!==0&&(O*=M.timeScale/P.timeScalePrev),M.timeScale===0&&(O=0),P.timeScalePrev=M.timeScale,P.correction=O,P.frameCounter+=1,C-P.counterTimestamp>=1e3&&(P.fps=P.frameCounter*((C-P.counterTimestamp)/1e3),P.counterTimestamp=C,P.frameCounter=0),l.update(E,S,O)}},step:function(C,S){l.update(this.engine,C,S)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(C){var S=C.hasOwnProperty("body")?C.body:C;return u.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return u.allBodies(this.localWorld)},getAllConstraints:function(){return u.allConstraints(this.localWorld)},getAllComposites:function(){return u.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var C=this.debugConfig,S=this.engine,E=this.debugGraphic,P=u.allBodies(this.localWorld);this.debugGraphic.clear(),C.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,E,C.broadphaseColor,.5),C.showBounds&&this.renderBodyBounds(P,E,C.boundsColor,.5),(C.showBody||C.showStaticBody)&&this.renderBodies(P),C.showJoint&&this.renderJoints(),(C.showAxes||C.showAngleIndicator)&&this.renderBodyAxes(P,E,C.showAxes,C.angleColor,.5),C.showVelocity&&this.renderBodyVelocity(P,E,C.velocityColor,1,2),C.showSeparations&&this.renderSeparations(S.pairs.list,E,C.separationColor),C.showCollisions&&this.renderCollisions(S.pairs.list,E,C.collisionColor)}},renderGrid:function(C,S,E,P){S.lineStyle(1,E,P);for(var M=o.keys(C.buckets),O=0;O<M.length;O++){var A=M[O];if(!(C.buckets[A].length<2)){var R=A.split(/C|R/);S.strokeRect(parseInt(R[1],10)*C.bucketWidth,parseInt(R[2],10)*C.bucketHeight,C.bucketWidth,C.bucketHeight)}}return this},renderSeparations:function(C,S,E){S.lineStyle(1,E,1);for(var P=0;P<C.length;P++){var M=C[P];if(!!M.isActive){var O=M.collision,A=O.bodyA,R=O.bodyB,F=A.position,I=R.position,D=O.penetration,N=!A.isStatic&&!R.isStatic?4:1;R.isStatic&&(N=0),S.lineBetween(I.x,I.y,I.x-D.x*N,I.y-D.y*N),N=!A.isStatic&&!R.isStatic?4:1,A.isStatic&&(N=0),S.lineBetween(F.x,F.y,F.x-D.x*N,F.y-D.y*N)}}return this},renderCollisions:function(C,S,E){S.lineStyle(1,E,.5),S.fillStyle(E,1);var P,M;for(P=0;P<C.length;P++)if(M=C[P],!!M.isActive)for(var O=0;O<M.activeContacts.length;O++){var A=M.activeContacts[O],R=A.vertex;S.fillRect(R.x-2,R.y-2,5,5)}for(P=0;P<C.length;P++)if(M=C[P],!!M.isActive){var F=M.collision,I=M.activeContacts;if(I.length>0){var D=I[0].vertex.x,N=I[0].vertex.y;I.length===2&&(D=(I[0].vertex.x+I[1].vertex.x)/2,N=(I[0].vertex.y+I[1].vertex.y)/2),F.bodyB===F.supports[0].body||F.bodyA.isStatic?S.lineBetween(D-F.normal.x*8,N-F.normal.y*8,D,N):S.lineBetween(D+F.normal.x*8,N+F.normal.y*8,D,N)}}return this},renderBodyBounds:function(C,S,E,P){S.lineStyle(1,E,P);for(var M=0;M<C.length;M++){var O=C[M];if(!!O.render.visible){var A=O.bounds;if(A)S.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var R=O.parts,F=R.length>1?1:0;F<R.length;F++){var I=R[F];S.strokeRect(I.bounds.min.x,I.bounds.min.y,I.bounds.max.x-I.bounds.min.x,I.bounds.max.y-I.bounds.min.y)}}}return this},renderBodyAxes:function(C,S,E,P,M){S.lineStyle(1,P,M);for(var O=0;O<C.length;O++){var A=C[O],R=A.parts;if(!!A.render.visible){var F,I,D;if(E)for(I=R.length>1?1:0;I<R.length;I++)for(F=R[I],D=0;D<F.axes.length;D++){var N=F.axes[D];S.lineBetween(F.position.x,F.position.y,F.position.x+N.x*20,F.position.y+N.y*20)}else for(I=R.length>1?1:0;I<R.length;I++)for(F=R[I],D=0;D<F.axes.length;D++)S.lineBetween(F.position.x,F.position.y,(F.vertices[0].x+F.vertices[F.vertices.length-1].x)/2,(F.vertices[0].y+F.vertices[F.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(C,S,E,P,M){S.lineStyle(M,E,P);for(var O=0;O<C.length;O++){var A=C[O];!A.render.visible||S.lineBetween(A.position.x,A.position.y,A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2)}return this},renderBodies:function(C){for(var S=this.debugGraphic,E=this.debugConfig,P=E.showBody,M=E.showStaticBody,O=E.showSleeping,A=E.showInternalEdges,R=E.showConvexHulls,F=E.renderFill,I=E.renderLine,D=E.staticBodySleepOpacity,N=E.sleepFillColor,z=E.sleepLineColor,U=E.hullColor,W=0;W<C.length;W++){var w=C[W];if(!!w.render.visible&&!(!M&&w.isStatic||!P&&!w.isStatic)){var L=w.render.lineColor,B=w.render.lineOpacity,b=w.render.lineThickness,G=w.render.fillColor,Y=w.render.fillOpacity;O&&w.isSleeping&&(w.isStatic?(B*=D,Y*=D):(L=z,G=N)),F||(G=null),I||(L=null),this.renderBody(w,S,A,L,B,b,G,Y);var V=w.parts.length;R&&V>1&&this.renderConvexHull(w,S,U,b)}}},renderBody:function(C,S,E,P,M,O,A,R){P===void 0&&(P=null),M===void 0&&(M=null),O===void 0&&(O=1),A===void 0&&(A=null),R===void 0&&(R=null);for(var F=this.debugConfig,I=F.sensorFillColor,D=F.sensorLineColor,N=C.parts,z=N.length,U=z>1?1:0;U<z;U++){var W=N[U],w=W.render,L=w.opacity;if(!(!w.visible||L===0||W.isSensor&&!F.showSensors)){var B=W.circleRadius;if(S.beginPath(),W.isSensor?(A!==null&&S.fillStyle(I,R*L),P!==null&&S.lineStyle(O,D,M*L)):(A!==null&&S.fillStyle(A,R*L),P!==null&&S.lineStyle(O,P,M*L)),B)S.arc(W.position.x,W.position.y,B,0,2*Math.PI);else{var b=W.vertices,G=b.length;S.moveTo(b[0].x,b[0].y);for(var Y=1;Y<G;Y++){var V=b[Y];if(!b[Y-1].isInternal||E?S.lineTo(V.x,V.y):S.moveTo(V.x,V.y),Y<G&&V.isInternal&&!E){var X=(Y+1)%G;S.moveTo(b[X].x,b[X].y)}}S.closePath()}A!==null&&S.fillPath(),P!==null&&S.strokePath()}}if(F.showPositions&&!C.isStatic){var H=C.position.x,k=C.position.y,$=Math.ceil(F.positionSize/2);S.fillStyle(F.positionColor,1),S.fillRect(H-$,k-$,F.positionSize,F.positionSize)}return this},renderConvexHull:function(C,S,E,P){P===void 0&&(P=1);var M=C.parts,O=M.length;if(O>1){var A=C.vertices;S.lineStyle(P,E),S.beginPath(),S.moveTo(A[0].x,A[0].y);for(var R=1;R<A.length;R++)S.lineTo(A[R].x,A[R].y);S.lineTo(A[0].x,A[0].y),S.strokePath()}return this},renderJoints:function(){for(var C=this.debugGraphic,S=u.allConstraints(this.localWorld),E=0;E<S.length;E++){var P=S[E].render,M=P.lineColor,O=P.lineOpacity,A=P.lineThickness,R=P.pinSize,F=P.anchorColor,I=P.anchorSize;this.renderConstraint(S[E],C,M,O,A,R,F,I)}},renderConstraint:function(C,S,E,P,M,O,A,R){var F=C.render;if(!F.visible||!C.pointA||!C.pointB)return this;S.lineStyle(M,E,P);var I=C.bodyA,D=C.bodyB,N,z;if(I?N=y.add(I.position,C.pointA):N=C.pointA,F.type==="pin")S.strokeCircle(N.x,N.y,O);else{if(D?z=y.add(D.position,C.pointB):z=C.pointB,S.beginPath(),S.moveTo(N.x,N.y),F.type==="spring")for(var U=y.sub(z,N),W=y.perp(y.normalise(U)),w=Math.ceil(o.clamp(C.length/5,12,20)),L,B=1;B<w;B+=1)L=B%2===0?1:-1,S.lineTo(N.x+U.x*(B/w)+W.x*L*4,N.y+U.y*(B/w)+W.y*L*4);S.lineTo(z.x,z.y)}return S.strokePath(),F.anchors&&R>0&&(S.fillStyle(A),S.fillCircle(N.x,N.y,R),S.fillCircle(z.x,z.y,R)),this},resetCollisionIDs:function(){return h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,this},shutdown:function(){g.off(this.engine),this.removeAllListeners(),m.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});e.exports=T},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BasePlugin:i(540),DefaultPlugins:i(197),PluginCache:i(24),PluginManager:i(414),ScenePlugin:i(1404)}},function(e,a,i){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var s=i(540),h=i(0),r=i(20),o=new h({Extends:s,initialize:function(l,f,v){s.call(this,f),this.scene=l,this.systems=l.sys,this.pluginKey=v,l.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(1406),Events:i(91),Snapshot:i(1407),WebGL:i(1408)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={CanvasRenderer:i(368),GetBlendModes:i(370),SetTransform:i(30)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Canvas:i(369),WebGL:i(383)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(107),h=i(17),r={PipelineManager:i(372),Pipelines:i(1409),RenderTarget:i(141),Utils:i(12),WebGLPipeline:i(58),WebGLRenderer:i(371),WebGLShader:i(375)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(92),h=i(17),r={BitmapMaskPipeline:i(373),Events:i(374),GraphicsPipeline:i(376),LightPipeline:i(377),MultiPipeline:i(108),PointLightPipeline:i(378),PostFXPipeline:i(1410),RopePipeline:i(379),SinglePipeline:i(380),UtilityPipeline:i(381)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(198),r=i(2),o=i(1411),u=i(382),l=i(58),f=new s({Extends:l,initialize:function(d){d.renderTarget=r(d,"renderTarget",1),d.fragShader=r(d,"fragShader",o),d.vertShader=r(d,"vertShader",u),d.attributes=r(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.batchSize=1,d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],l.call(this,d),this.isPostFX=!0,this.gameObject,this.colorMatrix=new h,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){l.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(v){this.bindAndDraw(v)},copyFrame:function(v,d,c,p,g){this.manager.copyFrame(v,d,c,p,g)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,d,c){this.manager.drawFrame(v,d,c,this.colorMatrix)},blendFrames:function(v,d,c,p,g){this.manager.blendFrames(v,d,c,p,g)},blendFramesAdditive:function(v,d,c,p,g){this.manager.blendFramesAdditive(v,d,c,p,g)},clearFrame:function(v,d){this.manager.clearFrame(v,d)},blitFrame:function(v,d,c,p,g,x){this.manager.blitFrame(v,d,c,p,g,x)},copyFrameRect:function(v,d,c,p,g,x,m,y){this.manager.copyFrameRect(v,d,c,p,g,x,m,y)},bindAndDraw:function(v,d,c,p,g){c===void 0&&(c=!0),p===void 0&&(p=!0);var x=this.gl,m=this.renderer;this.bind(g),this.set1i("uMainSampler",0),d?(x.viewport(0,0,d.width,d.height),x.bindFramebuffer(x.FRAMEBUFFER,d.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,d.texture,0),c&&(p?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT))):(m.popFramebuffer(!1,!1,!1),m.currentFramebuffer||x.viewport(0,0,m.width,m.height)),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,v.texture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),d?(x.bindTexture(x.TEXTURE_2D,null),x.bindFramebuffer(x.FRAMEBUFFER,null)):m.resetTextures()}});e.exports=f},function(e,a){e.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),h=i(201),r={Center:i(403),Events:i(104),Orientation:i(404),ScaleManager:i(415),ScaleModes:i(405),Zoom:i(406)};r=s(!1,r,h.CENTER),r=s(!1,r,h.ORIENTATION),r=s(!1,r,h.SCALE_MODE),r=s(!1,r,h.ZOOM),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(144),h=i(17),r={Events:i(20),GetPhysicsPlugins:i(419),GetScenePlugins:i(420),SceneManager:i(417),ScenePlugin:i(1414),Settings:i(421),Systems:i(204)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(18),h=i(0),r=i(20),o=i(2),u=i(24),l=new h({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(r.BOOT,this.boot,this),v.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(f,v){return f===void 0&&(f=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",f,v),this},restart:function(f){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,f),this},transition:function(f){f===void 0&&(f={});var v=o(f,"target",!1),d=this.manager.getScene(v);if(!v||!this.checkValidTransition(d))return!1;var c=o(f,"duration",1e3);this._elapsed=0,this._target=d,this._duration=c,this._willSleep=o(f,"sleep",!1),this._willRemove=o(f,"remove",!1);var p=o(f,"onUpdate",null);p&&(this._onUpdate=p,this._onUpdateScope=o(f,"onUpdateScope",this.scene));var g=o(f,"allowInput",!1);this.settings.transitionAllowInput=g;var x=d.sys.settings;return x.isTransition=!0,x.transitionFrom=this.scene,x.transitionDuration=c,x.transitionAllowInput=g,o(f,"moveAbove",!1)?this.manager.moveAbove(this.key,v):o(f,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),d.sys.isSleeping()?d.sys.wake(o(f,"data")):this.manager.start(v,o(f,"data")),this.systems.events.emit(r.TRANSITION_OUT,d,c),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(f){return!(!f||f.sys.isActive()||f.sys.isTransitioning()||f===this.scene||this.systems.isTransitioning())},step:function(f,v){this._elapsed+=v,this.transitionProgress=s(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var f=this._target.sys,v=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),f.events.emit(r.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(f,v,d,c){return this.manager.add(f,v,d,c)},launch:function(f,v){return f&&f!==this.key&&this.manager.queueOp("start",f,v),this},run:function(f,v){return f&&f!==this.key&&this.manager.queueOp("run",f,v),this},pause:function(f,v){return f===void 0&&(f=this.key),this.manager.queueOp("pause",f,v),this},resume:function(f,v){return f===void 0&&(f=this.key),this.manager.queueOp("resume",f,v),this},sleep:function(f,v){return f===void 0&&(f=this.key),this.manager.queueOp("sleep",f,v),this},wake:function(f,v){return f===void 0&&(f=this.key),this.manager.queueOp("wake",f,v),this},switch:function(f){return f!==this.key&&this.manager.queueOp("switch",this.key,f),this},stop:function(f,v){return f===void 0&&(f=this.key),this.manager.queueOp("stop",f,v),this},setActive:function(f,v,d){v===void 0&&(v=this.key);var c=this.manager.getScene(v);return c&&c.sys.setActive(f,d),this},setVisible:function(f,v){v===void 0&&(v=this.key);var d=this.manager.getScene(v);return d&&d.sys.setVisible(f),this},isSleeping:function(f){return f===void 0&&(f=this.key),this.manager.isSleeping(f)},isActive:function(f){return f===void 0&&(f=this.key),this.manager.isActive(f)},isPaused:function(f){return f===void 0&&(f=this.key),this.manager.isPaused(f)},isVisible:function(f){return f===void 0&&(f=this.key),this.manager.isVisible(f)},swapPosition:function(f,v){return v===void 0&&(v=this.key),f!==v&&this.manager.swapPosition(f,v),this},moveAbove:function(f,v){return v===void 0&&(v=this.key),f!==v&&this.manager.moveAbove(f,v),this},moveBelow:function(f,v){return v===void 0&&(v=this.key),f!==v&&this.manager.moveBelow(f,v),this},remove:function(f){return f===void 0&&(f=this.key),this.manager.remove(f),this},moveUp:function(f){return f===void 0&&(f=this.key),this.manager.moveUp(f),this},moveDown:function(f){return f===void 0&&(f=this.key),this.manager.moveDown(f),this},bringToTop:function(f){return f===void 0&&(f=this.key),this.manager.bringToTop(f),this},sendToBack:function(f){return f===void 0&&(f=this.key),this.manager.sendToBack(f),this},get:function(f){return this.manager.getScene(f)},getIndex:function(f){return f===void 0&&(f=this.key),this.manager.getIndex(f)},shutdown:function(){var f=this.systems.events;f.off(r.SHUTDOWN,this.shutdown,this),f.off(r.POST_UPDATE,this.step,this),f.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});u.register("ScenePlugin",l,"scenePlugin"),e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Events:i(438),List:i(110),Map:i(102),ProcessQueue:i(211),RTree:i(531),Set:i(149),Size:i(416)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),h=i(1417),r={CanvasTexture:i(423),Events:i(106),FilterMode:h,Frame:i(109),Parsers:i(425),Texture:i(206),TextureManager:i(422),TextureSource:i(424)};r=s(!1,r,h),e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={LINEAR:0,NEAREST:1};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(17),h=i(1419),r={Components:i(251),Parsers:i(1452),Formats:i(40),ImageCollection:i(576),ParseToTilemap:i(262),Tile:i(85),Tilemap:i(580),TilemapCreator:i(1459),TilemapFactory:i(1460),Tileset:i(122),TilemapLayer:i(581),Orientation:i(29),LayerData:i(120),MapData:i(121),ObjectLayer:i(572)};r=s(!1,r,h.ORIENTATION),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s={ORIENTATION:i(29)};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(63),r=function(o,u,l,f,v,d,c,p){c===void 0&&(c=!0),o<0&&(o=0),u<0&&(u=0);for(var g=s(o,u,l,f,null,p),x=v-o,m=d-u,y=0;y<g.length;y++){var T=g[y].x+x,C=g[y].y+m;T>=0&&T<p.width&&C>=0&&C<p.height&&p.data[C][T]&&p.data[C][T].copy(g[y])}c&&h(v-1,d-1,l+2,f+2,p)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(542),r=function(o,u,l,f,v,d){l||(l={}),Array.isArray(o)||(o=[o]);var c=d.tilemapLayer;f||(f=c.scene),v||(v=f.cameras.main);var p=s(0,0,d.width,d.height,null,d),g=[],x;for(x=0;x<p.length;x++){var m=p[x];if(o.indexOf(m.index)!==-1){var y=c.tileToWorldXY(m.x,m.y,void 0,v,d);l.x=y.x,l.y=y.y,g.push(f.make.sprite(l))}}if(typeof u=="number")for(x=0;x<o.length;x++)h(o[x],u,0,0,d.width,d.height,d);else if(Array.isArray(u))for(x=0;x<o.length;x++)h(o[x],u[x],0,0,d.width,d.height,d);return g};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(63),r=i(72),o=function(u,l,f,v,d,c,p){for(var g=p.collideIndexes.indexOf(u)!==-1,x=s(l,f,v,d,null,p),m=0;m<x.length;m++)x[m].index=u,r(x[m],g);c&&h(l-1,f-1,v+2,d+2,p)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v,d,c){var p=s(u,l,f,v,d,c);return p.filter(r,o)};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){h===void 0&&(h=0),r===void 0&&(r=!1);var u=0,l,f,v;if(r){for(f=o.height-1;f>=0;f--)for(l=o.width-1;l>=0;l--)if(v=o.data[f][l],v&&v.index===s){if(u===h)return v;u+=1}}else for(f=0;f<o.height;f++)for(l=0;l<o.width;l++)if(v=o.data[f][l],v&&v.index===s){if(u===h)return v;u+=1}return null};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v,d,c){var p=s(u,l,f,v,d,c);return p.find(r,o)||null};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v,d,c){var p=s(u,l,f,v,d,c);p.forEach(r,o)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(544),r=i(545),o=i(547),u=i(1),l=i(548),f=function(v){return v===s.ORTHOGONAL?h:v===s.HEXAGONAL?r:v===s.STAGGERED?l:v===s.ISOMETRIC?o:u};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(158),h=i(3),r=new h,o=function(u,l,f,v,d){return d.tilemapLayer.worldToTileXY(u,l,!0,r,v),s(r.x,r.y,f,d)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(483),h=i(26),r=i(484),o=i(1),u=i(3),l=function(p,g){return r.RectangleToTriangle(g,p)},f=new u,v=new u,d=new u,c=function(p,g,x,m){if(p===void 0)return[];var y=o;p instanceof s.Circle?y=r.CircleToRectangle:p instanceof s.Rectangle?y=r.RectangleToRectangle:p instanceof s.Triangle?y=l:p instanceof s.Line&&(y=r.LineToRectangle),m.tilemapLayer.worldToTileXY(p.left,p.top,!0,v,x);var T=v.x,C=v.y;m.tilemapLayer.worldToTileXY(p.right,p.bottom,!0,d,x);var S=Math.ceil(d.x),E=Math.ceil(d.y),P=Math.max(S-T,1),M=Math.max(E-C,1),O=h(T,C,P,M,g,m),A=m.tileWidth,R=m.tileHeight;m.tilemapLayer&&(A*=m.tilemapLayer.scaleX,R*=m.tilemapLayer.scaleY);for(var F=[],I=new s.Rectangle(0,0,A,R),D=0;D<O.length;D++){var N=O[D];m.tilemapLayer.tileToWorldXY(N.x,N.y,f,x),I.x=f.x,I.y=f.y,y(p,I)&&F.push(N)}return F};e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(1),r=i(253),o=function(u){return u===s.ORTHOGONAL?r:h};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(550),r=i(551),o=i(1),u=i(552),l=i(553),f=function(v){return v===s.ORTHOGONAL?l:v===s.ISOMETRIC?r:v===s.HEXAGONAL?h:v===s.STAGGERED?u:o};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(554),r=i(1),o=i(555),u=i(254),l=function(f){return f===s.ORTHOGONAL?u:f===s.HEXAGONAL?h:f===s.STAGGERED?o:r};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(1),r=i(255),o=function(u){return u===s.ORTHOGONAL?r:h};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(556),r=i(557),o=i(1),u=i(558),l=i(559),f=function(v){return v===s.ORTHOGONAL?l:v===s.ISOMETRIC?r:v===s.HEXAGONAL?h:v===s.STAGGERED?u:o};e.exports=f},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(29),h=i(560),r=i(1),o=i(561),u=i(256),l=function(f){return f===s.ORTHOGONAL?u:f===s.HEXAGONAL?h:f===s.STAGGERED?o:r};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(562),h=i(3),r=new h,o=function(u,l,f,v){v.tilemapLayer.worldToTileXY(u,l,!0,r,f);var d=r.x,c=r.y;return s(d,c,v)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(257),h=i(3),r=new h,o=function(u,l,f,v,d,c){return c.tilemapLayer.worldToTileXY(l,f,!0,r,d,c),s(u,r.x,r.y,v,c)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(63),h=i(257),r=function(o,u,l,f,v){if(f===void 0&&(f=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var d=o.length,c=o[0].length,p=0;p<d;p++)for(var g=0;g<c;g++){var x=o[p][g];h(x,u+g,l+p,!1,v)}f&&s(u-1,l-1,c+2,d+2,v)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(210),r=function(o,u,l,f,v,d){var c,p=s(o,u,l,f,{},d);if(!v)for(v=[],c=0;c<p.length;c++)v.indexOf(p[c].index)===-1&&v.push(p[c].index);for(c=0;c<p.length;c++)p[c].index=h(v)};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(563),h=i(3),r=new h,o=function(u,l,f,v,d,c){return c.tilemapLayer.worldToTileXY(u,l,!0,r,d,c),s(r.x,r.y,f,v,c)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(397),r=new h(105,210,231,150),o=new h(243,134,48,200),u=new h(40,39,37,150),l=function(f,v,d){v===void 0&&(v={});var c=v.tileColor!==void 0?v.tileColor:r,p=v.collidingTileColor!==void 0?v.collidingTileColor:o,g=v.faceColor!==void 0?v.faceColor:u,x=s(0,0,d.width,d.height,null,d);f.translateCanvas(d.tilemapLayer.x,d.tilemapLayer.y),f.scaleCanvas(d.tilemapLayer.scaleX,d.tilemapLayer.scaleY);for(var m=0;m<x.length;m++){var y=x[m],T=y.width,C=y.height,S=y.pixelX,E=y.pixelY,P=y.collides?p:c;P!==null&&(f.fillStyle(P.color,P.alpha/255),f.fillRect(S,E,T,C)),S+=1,E+=1,T-=2,C-=2,g!==null&&(f.lineStyle(1,g.color,g.alpha/255),y.faceTop&&f.lineBetween(S,E,S+T,E),y.faceRight&&f.lineBetween(S+T,E,S+T,E+C),y.faceBottom&&f.lineBetween(S,E+C,S+T,E+C),y.faceLeft&&f.lineBetween(S,E,S,E+C))}};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),h=i(63),r=i(160),o=function(u,l,f,v,d){l===void 0&&(l=!0),f===void 0&&(f=!0),d===void 0&&(d=!0),Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++)r(u[c],l,v);if(d)for(var p=0;p<v.height;p++)for(var g=0;g<v.width;g++){var x=v.data[p][g];x&&u.indexOf(x.index)!==-1&&s(x,l)}f&&h(0,0,v.width,v.height,v)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),h=i(63),r=i(160),o=function(u,l,f,v,d,c){if(f===void 0&&(f=!0),v===void 0&&(v=!0),c===void 0&&(c=!0),!(u>l)){for(var p=u;p<=l;p++)r(p,f,d);if(c)for(var g=0;g<d.height;g++)for(var x=0;x<d.width;x++){var m=d.data[g][x];m&&m.index>=u&&m.index<=l&&s(m,f)}v&&h(0,0,d.width,d.height,d)}};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),h=i(63),r=i(160),o=function(u,l,f,v){l===void 0&&(l=!0),f===void 0&&(f=!0),Array.isArray(u)||(u=[u]);for(var d=0;d<v.height;d++)for(var c=0;c<v.width;c++){var p=v.data[d][c];p&&u.indexOf(p.index)===-1&&(s(p,l),r(p.index,l,v))}f&&h(0,0,v.width,v.height,v)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),h=i(63),r=i(126),o=function(u,l,f,v){l===void 0&&(l=!0),f===void 0&&(f=!0);for(var d=0;d<v.height;d++)for(var c=0;c<v.width;c++){var p=v.data[d][c];if(!!p){for(var g in u)if(!!r(p.properties,g)){var x=u[g];Array.isArray(x)||(x=[x]);for(var m=0;m<x.length;m++)p.properties[g]===x[m]&&s(p,l)}}}f&&h(0,0,v.width,v.height,v)};e.exports=o},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(72),h=i(63),r=function(o,u,l){o===void 0&&(o=!0),u===void 0&&(u=!0);for(var f=0;f<l.height;f++)for(var v=0;v<l.width;v++){var d=l.data[f][v];if(!!d){var c=d.getCollisionGroup();c&&c.objects&&c.objects.length>0&&s(d,o)}}u&&h(0,0,l.width,l.height,l)};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h,r,o){if(typeof s=="number")o.callbacks[s]=h!==null?{callback:h,callbackContext:r}:void 0;else for(var u=0,l=s.length;u<l;u++)o.callbacks[s[u]]=h!==null?{callback:h,callbackContext:r}:void 0};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v,d){for(var c=s(r,o,u,l,null,d),p=0;p<c.length;p++)c[p].setCollisionCallback(f,v)};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=i(131),r=function(o,u,l,f,v){var d=s(o,u,l,f,null,v),c=d.map(function(g){return g.index});h(c);for(var p=0;p<d.length;p++)d[p].index=c[p]};e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v,d){for(var c=s(u,l,f,v,null,d),p=0;p<c.length;p++)c[p]&&(c[p].index===r?c[p].index=o:c[p].index===o&&(c[p].index=r))};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(26),h=function(r,o,u,l,f,v){if(!!f){var d,c=s(r,o,u,l,null,v),p=0;for(d=0;d<f.length;d++)p+=f[d].weight;if(!(p<=0))for(d=0;d<c.length;d++){for(var g=Math.random()*p,x=0,m=-1,y=0;y<f.length;y++)if(x+=f[y].weight,g<=x){var T=f[y].index;m=Array.isArray(T)?T[Math.floor(Math.random()*T.length)]:T;break}c[d].index=m}}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={FromOrientationString:i(258),Parse:i(564),Parse2DArray:i(259),ParseCSV:i(565),Impact:i(1454),Tiled:i(1455)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){for(var r=0;r<s.length;r++){var o=s[r],u=r;if(o.name&&o.name!==""&&(u=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var l={},f={},v,d,c;if(Array.isArray(o.edgecolors))for(v=0;v<o.edgecolors.length;v++)c=1+v,d=o.edgecolors[v],d.name!==""&&(l[c]=d.name);if(Array.isArray(o.cornercolors))for(v=0;v<o.cornercolors.length;v++)c=1+v,d=o.cornercolors[v],d.name!==""&&(f[c]=d.name);if(Array.isArray(o.colors))for(v=0;v<o.colors.length;v++)d=o.colors[v],c=1+v,d.name!==""&&(l[c]=f[c]=d.name);for(var p=[l,f,l,f,l,f,l,f],g=0;g<o.wangtiles.length;g++){var x=o.wangtiles[g],m=h[x.tileid]||(h[x.tileid]={});m=m.wangid||(m.wangid={});for(var y=[],T=0;T<Math.min(p.length,x.wangid.length);T++){if(d=x.wangid[T],d===0){y.push(void 0);continue}var C=p[T][d];if(C!==void 0){y.push(C);continue}y.push(d)}m[u]=y}}}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ParseTileLayers:i(578),ParseTilesets:i(579),ParseWeltmeister:i(577)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={AssignTileProperties:i(567),Base64Decode:i(574),BuildTilesetIndex:i(568),CreateGroupLayer:i(161),ParseGID:i(261),ParseImageLayers:i(569),ParseJSONTiled:i(566),ParseObject:i(260),ParseObjectLayers:i(570),ParseTileLayers:i(573),ParseTilesets:i(575)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(1),h=i(1);s=i(1457),h=i(1458),e.exports={renderWebGL:s,renderCanvas:h}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(12),h=function(r,o,u){var l=o.cull(u),f=l.length,v=u.alpha*o.alpha;if(!(f===0||v<=0)){var d=o.gidMap,c=r.pipelines.set(o.pipeline,o),p=s.getTintAppendFloatAlpha,g=o.scrollFactorX,x=o.scrollFactorY,m=o.x,y=o.y,T=o.scaleX,C=o.scaleY;r.pipelines.preBatch(o);for(var S=0;S<f;S++){var E=l[S],P=d[E.index];if(!!P){var M=P.getTileTextureCoordinates(E.index);if(M!==null){var O=P.glTexture,A=c.setTexture2D(O,o),R=P.tileWidth,F=P.tileHeight,I=M.x,D=M.y,N=P.tileWidth*.5,z=P.tileHeight*.5,U=p(E.tint,v*E.alpha);c.batchTexture(o,O,O.width,O.height,m+(N+E.pixelX)*T,y+(z+E.pixelY)*C,E.width,E.height,T,C,E.rotation,E.flipX,E.flipY,g,x,N,z,I,D,R,F,U,U,U,U,!1,0,0,u,null,!0,A)}}}r.pipelines.postBatch(o)}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(25),h=new s,r=new s,o=new s,u=function(l,f,v,d){var c=f.cull(v),p=c.length,g=v.alpha*f.alpha;if(!(p===0||g<=0)){var x=h,m=r,y=o;m.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),x.copyFrom(v.matrix);var T=l.currentContext,C=f.gidMap;T.save(),d?(x.multiplyWithOffset(d,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),m.e=f.x,m.f=f.y,x.multiply(m,y),y.copyToContext(T)):(m.e-=v.scrollX*f.scrollFactorX,m.f-=v.scrollY*f.scrollFactorY,m.copyToContext(T)),(!l.antialias||f.scaleX>1||f.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<p;S++){var E=c[S],P=C[E.index];if(!!P){var M=P.image.getSourceImage(),O=P.getTileTextureCoordinates(E.index);if(O!==null){var A=P.tileWidth,R=P.tileHeight,F=A*.5,I=R*.5;T.save(),T.translate(E.pixelX+F,E.pixelY+I),E.rotation!==0&&T.rotate(E.rotation),(E.flipX||E.flipY)&&T.scale(E.flipX?-1:1,E.flipY?-1:1),T.globalAlpha=g*E.alpha,T.drawImage(M,O.x,O.y,A,R,-F,-I,A,R),T.restore()}}}T.restore()}};e.exports=u},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(16),h=i(262);s.register("tilemap",function(r){var o=r!==void 0?r:{};return h(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(5),h=i(262);s.register("tilemap",function(r,o,u,l,f,v,d){return r===null&&(r=void 0),o===null&&(o=void 0),u===null&&(u=void 0),l===null&&(l=void 0),f===null&&(f=void 0),h(this.scene,r,o,u,l,f,v,d)})},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clock:i(1462),TimerEvent:i(582)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(0),h=i(24),r=i(20),o=i(582),u=i(93),l=new s({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(r.BOOT,this.boot,this),v.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var f=this.systems.events;f.on(r.PRE_UPDATE,this.preUpdate,this),f.on(r.UPDATE,this.update,this),f.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(f){var v;return f instanceof o?(v=f,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat):v=new o(f),this._pendingInsertion.push(v),v},delayedCall:function(f,v,d,c){return this.addEvent({delay:f,callback:v,args:d,callbackScope:c})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(f){Array.isArray(f)||(f=[f]);for(var v=0;v<f.length;v++){var d=f[v];u(this._pendingRemoval,d),u(this._pendingInsertion,d),u(this._active,d)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var f=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(f===0&&v===0)){var d,c;for(d=0;d<f;d++){c=this._pendingRemoval[d];var p=this._active.indexOf(c);p>-1&&this._active.splice(p,1),c.destroy()}for(d=0;d<v;d++)c=this._pendingInsertion[d],this._active.push(c);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(f,v){if(this.now=f,!this.paused){v*=this.timeScale;for(var d=0;d<this._active.length;d++){var c=this._active[d];if(!c.paused&&(c.elapsed+=v*c.timeScale,c.elapsed>=c.delay)){var p=c.elapsed-c.delay;c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),c.repeatCount>0?(c.repeatCount--,c.elapsed=p,c.hasDispatched=!1):this._pendingRemoval.push(c)}}}},shutdown:function(){var f;for(f=0;f<this._pendingInsertion.length;f++)this._pendingInsertion[f].destroy();for(f=0;f<this._active.length;f++)this._active[f].destroy();for(f=0;f<this._pendingRemoval.length;f++)this._pendingRemoval[f].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(r.PRE_UPDATE,this.preUpdate,this),v.off(r.UPDATE,this.update,this),v.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});h.register("Clock",l,"time"),e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(100),h=i(17),r={Builders:i(1464),Events:i(267),TweenManager:i(1480),Tween:i(266),TweenData:i(268),Timeline:i(588)};r=h(!1,r,s),e.exports=r},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={GetBoolean:i(99),GetEaseFunction:i(80),GetNewValue:i(162),GetProps:i(583),GetTargets:i(263),GetTweens:i(584),GetValueOp:i(264),NumberTweenBuilder:i(585),StaggerBuilder:i(586),TimelineBuilder:i(587),TweenBuilder:i(163)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="active"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="complete"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="loop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="repeat"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="start"},function(e,a){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="stop"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="update"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="yoyo"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(93),h=i(0),r=i(585),o=i(24),u=i(20),l=i(586),f=i(587),v=i(100),d=i(163),c=new h({initialize:function(g){this.scene=g,this.systems=g.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,g.sys.events.once(u.BOOT,this.boot,this),g.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var p=this.systems.events;p.on(u.PRE_UPDATE,this.preUpdate,this),p.on(u.UPDATE,this.update,this),p.once(u.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(p){return f(this,p)},timeline:function(p){var g=f(this,p);return g.paused||(this._add.push(g),this._toProcess++),g},create:function(p){return d(this,p)},add:function(p){var g=d(this,p);return this._add.push(g),this._toProcess++,g},existing:function(p){return this._add.push(p),this._toProcess++,this},addCounter:function(p){var g=r(this,p);return this._add.push(g),this._toProcess++,g},stagger:function(p,g){return l(p,g)},preUpdate:function(){if(this._toProcess!==0){var p=this._destroy,g=this._active,x=this._pending,m,y;for(m=0;m<p.length;m++){y=p[m];var T=g.indexOf(y);T===-1?(T=x.indexOf(y),T>-1&&(y.state=v.REMOVED,x.splice(T,1))):(y.state=v.REMOVED,g.splice(T,1))}for(p.length=0,p=this._add,m=0;m<p.length;m++)y=p[m],y.state===v.PENDING_ADD&&(y.init()?(y.play(),this._active.push(y)):this._pending.push(y));p.length=0,this._toProcess=0}},update:function(p,g){var x=this._active,m;g*=this.timeScale;for(var y=0;y<x.length;y++)m=x[y],m.update(p,g)&&(this._destroy.push(m),this._toProcess++)},remove:function(p){return s(this._add,p),s(this._pending,p),s(this._active,p),s(this._destroy,p),p.state=v.REMOVED,this},makeActive:function(p){if(this._add.indexOf(p)!==-1||this._active.indexOf(p)!==-1)return this;var g=this._pending.indexOf(p);return g!==-1&&this._pending.splice(g,1),this._add.push(p),p.state=v.PENDING_ADD,this._toProcess++,this},each:function(p,g){for(var x=[null],m=1;m<arguments.length;m++)x.push(arguments[m]);for(var y in this.list)x[0]=this.list[y],p.apply(g,x)},getAllTweens:function(){for(var p=this._active,g=[],x=0;x<p.length;x++)g.push(p[x]);return g},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(p,g){g===void 0&&(g=!1);var x=this._active,m,y=[],T,C;for(Array.isArray(p)||(p=[p]),T=0;T<x.length;T++)for(m=x[T],C=0;C<p.length;C++)m.hasTarget(p[C])&&y.push(m);if(g)for(x=this._pending,T=0;T<x.length;T++)for(m=x[T],C=0;C<p.length;C++)m.hasTarget(p[C])&&y.push(m);return y},isTweening:function(p){for(var g=this._active,x,m=0;m<g.length;m++)if(x=g[m],x.hasTarget(p)&&x.isPlaying())return!0;return!1},killAll:function(){for(var p=this.getAllTweens(),g=0;g<p.length;g++)p[g].stop();return this},killTweensOf:function(p){for(var g=this.getTweensOf(p),x=0;x<g.length;x++)g[x].stop();return this},pauseAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].pause();return this},resumeAll:function(){for(var p=this._active,g=0;g<p.length;g++)p[g].resume();return this},setGlobalTimeScale:function(p){return this.timeScale=p,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var p=this.systems.events;p.off(u.PRE_UPDATE,this.preUpdate,this),p.off(u.UPDATE,this.update,this),p.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",c,"tweens"),e.exports=c},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Array:i(208),Base64:i(1482),Objects:i(1484),String:i(1488),NOOP:i(1)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={ArrayBufferToBase64:i(1483),Base64ToArrayBuffer:i(433)}},function(e,a){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(h,r){for(var o=new Uint8Array(h),u=o.length,l=r?"data:"+r+";base64,":"",f=0;f<u;f+=3)l+=i[o[f]>>2],l+=i[(o[f]&3)<<4|o[f+1]>>4],l+=i[(o[f+1]&15)<<2|o[f+2]>>6],l+=i[o[f+2]&63];return u%3===2?l=l.substring(0,l.length-1)+"=":u%3===1&&(l=l.substring(0,l.length-2)+"=="),l};e.exports=s},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Clone:i(77),DeepCopy:i(175),Extend:i(17),GetAdvancedValue:i(13),GetFastValue:i(2),GetMinMaxValue:i(1485),GetValue:i(6),HasAll:i(1486),HasAny:i(455),HasValue:i(126),IsPlainObject:i(7),Merge:i(127),MergeRight:i(1487),Pick:i(571),SetValue:i(478)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(6),h=i(18),r=function(o,u,l,f,v){v===void 0&&(v=l);var d=s(o,u,v);return h(d,l,f)};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){for(var r=0;r<h.length;r++)if(!s.hasOwnProperty(h[r]))return!1;return!0};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(77),h=function(r,o){var u=s(r);for(var l in o)u.hasOwnProperty(l)&&(u[l]=o[l]);return u};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Format:i(1489),Pad:i(186),RemoveAt:i(1490),Reverse:i(1491),UppercaseFirst:i(205),UUID:i(222)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return s.replace(/%([0-9]+)/g,function(r,o){return h[Number(o)-1]})};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s,h){return h===0?s.slice(1):s.slice(0,h-1)+s.slice(h)};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i=function(s){return s.split("").reverse().join("")};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={SoundManagerCreator:i(426),Events:i(70),BaseSound:i(146),BaseSoundManager:i(145),WebAudioSound:i(434),WebAudioSoundManager:i(432),HTML5AudioSound:i(429),HTML5AudioSoundManager:i(427),NoAudioSound:i(431),NoAudioSoundManager:i(430)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={Arcade:i(1366),Matter:i(1494)}},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports={BodyBounds:i(1392),Components:i(249),Events:i(272),Factory:i(1394),MatterGameObject:i(1395),Image:i(1396),Matter:i(594),MatterPhysics:i(1524),PolyDecomp:i(1393),Sprite:i(1397),TileBody:i(593),PhysicsEditorParser:i(589),PhysicsJSONParser:i(590),PointerConstraint:i(1398),World:i(1402)}},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setBounce:function(s){return this.body.restitution=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setCollisionCategory:function(s){return this.body.collisionFilter.category=s,this},setCollisionGroup:function(s){return this.body.collisionFilter.group=s,this},setCollidesWith:function(s){var h=0;if(!Array.isArray(s))h=s;else for(var r=0;r<s.length;r++)h|=s[r];return this.body.collisionFilter.mask=h,this},setOnCollide:function(s){return this.body.onCollideCallback=s,this},setOnCollideEnd:function(s){return this.body.onCollideEndCallback=s,this},setOnCollideActive:function(s){return this.body.onCollideActiveCallback=s,this},setOnCollideWith:function(s,h){Array.isArray(s)||(s=[s]);for(var r=0;r<s.length;r++){var o=s[r].hasOwnProperty("body")?s[r].body:s[r];this.body.setOnCollideWith(o,h)}return this}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),h={applyForce:function(r){return this._tempVec2.set(this.body.position.x,this.body.position.y),s.applyForce(this.body,this._tempVec2,r),this},applyForceFrom:function(r,o){return s.applyForce(this.body,r,o),this},thrust:function(r){var o=this.body.angle;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(r){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(r){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(r){var o=this.body.angle-Math.PI;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),s.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};e.exports=h},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setFriction:function(s,h,r){return this.body.friction=s,h!==void 0&&(this.body.frictionAir=h),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(s){return this.body.frictionAir=s,this},setFrictionStatic:function(s){return this.body.frictionStatic=s,this}};e.exports=i},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setIgnoreGravity:function(s){return this.body.ignoreGravity=s,this}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),h=i(3),r={setMass:function(o){return s.setMass(this.body,o),this},setDensity:function(o){return s.setDensity(this.body,o),this},centerOfMass:{get:function(){return new h(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};e.exports=r},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={setSensor:function(s){return this.body.isSensor=s,this},isSensor:function(){return this.body.isSensor}};e.exports=i},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(86),h=i(41),r=i(124),o=i(2),u=i(589),l=i(590),f=i(64),v={setRectangle:function(d,c,p){return this.setBody({type:"rectangle",width:d,height:c},p)},setCircle:function(d,c){return this.setBody({type:"circle",radius:d},c)},setPolygon:function(d,c,p){return this.setBody({type:"polygon",sides:c,radius:d},p)},setTrapezoid:function(d,c,p,g){return this.setBody({type:"trapezoid",width:d,height:c,slope:p},g)},setExistingBody:function(d,c){c===void 0&&(c=!0),this.body&&this.world.remove(this.body,!0),this.body=d;for(var p=0;p<d.parts.length;p++)d.parts[p].gameObject=this;var g=this;if(d.destroy=function(){g.world.remove(g.body,!0),g.body.gameObject=null},c&&(this.world.has(d)&&this.world.remove(d,!0),this.world.add(d)),this._originComponent){var x=d.render.sprite.xOffset,m=d.render.sprite.yOffset,y=d.centerOfMass.x,T=d.centerOfMass.y;if(r(y,.5)&&r(T,.5))this.setOrigin(x+.5,m+.5);else{var C=d.centerOffset.x,S=d.centerOffset.y;this.setOrigin(x+C/this.displayWidth,m+S/this.displayHeight)}}return this},setBody:function(d,c){if(!d)return this;var p;typeof d=="string"&&(d={type:d});var g=o(d,"type","rectangle"),x=o(d,"x",this._tempVec2.x),m=o(d,"y",this._tempVec2.y),y=o(d,"width",this.width),T=o(d,"height",this.height);switch(g){case"rectangle":p=s.rectangle(x,m,y,T,c);break;case"circle":var C=o(d,"radius",Math.max(y,T)/2),S=o(d,"maxSides",25);p=s.circle(x,m,C,c,S);break;case"trapezoid":var E=o(d,"slope",.5);p=s.trapezoid(x,m,y,T,E,c);break;case"polygon":var P=o(d,"sides",5),M=o(d,"radius",Math.max(y,T)/2);p=s.polygon(x,m,P,M,c);break;case"fromVertices":case"fromVerts":var O=o(d,"verts",null);if(O)if(typeof O=="string"&&(O=f.fromPath(O)),this.body&&!this.body.hasOwnProperty("temp"))h.setVertices(this.body,O),p=this.body;else{var A=o(d,"flagInternal",!1),R=o(d,"removeCollinear",.01),F=o(d,"minimumArea",10);p=s.fromVertices(x,m,O,c,A,R,F)}break;case"fromPhysicsEditor":p=u.parseBody(x,m,d,c);break;case"fromPhysicsTracer":p=l.parseBody(x,m,d,c);break}return p&&this.setExistingBody(p,d.addToWorld),this}};e.exports=v},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(272),h=i(165),r=i(166),o={setToSleep:function(){return h.set(this.body,!0),this},setAwake:function(){return h.set(this.body,!1),this},setSleepThreshold:function(u){return u===void 0&&(u=60),this.body.sleepThreshold=u,this},setSleepEvents:function(u,l){return this.setSleepStartEvent(u),this.setSleepEndEvent(l),this},setSleepStartEvent:function(u){if(u){var l=this.world;r.on(this.body,"sleepStart",function(f){l.emit(s.SLEEP_START,f,this)})}else r.off(this.body,"sleepStart");return this},setSleepEndEvent:function(u){if(u){var l=this.world;r.on(this.body,"sleepEnd",function(f){l.emit(s.SLEEP_END,f,this)})}else r.off(this.body,"sleepEnd");return this}};e.exports=o},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afteradd"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterremove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="afterupdate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeadd"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeremove"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="beforeupdate"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionactive"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionend"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="collisionstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragend"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="drag"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="dragstart"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="pause"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="resume"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepend"},function(e,a){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */e.exports="sleepstart"},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),h={setStatic:function(r){return s.setStatic(this.body,r),this},isStatic:function(){return this.body.isStatic}};e.exports=h},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),h=i(14),r=i(269),o=i(270),u=4,l={x:{get:function(){return this.body.position.x},set:function(f){this._tempVec2.set(f,this.y),s.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(f){this._tempVec2.set(this.x,f),s.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(f){var v=1/this._scaleX,d=1/this._scaleY;this._scaleX=f,this._scaleX===0?this.renderFlags&=~u:this.renderFlags|=u,s.scale(this.body,v,d),s.scale(this.body,f,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(f){var v=1/this._scaleX,d=1/this._scaleY;this._scaleY=f,this._scaleY===0?this.renderFlags&=~u:this.renderFlags|=u,s.scale(this.body,v,d),s.scale(this.body,this._scaleX,f)}},angle:{get:function(){return o(this.body.angle*h.RAD_TO_DEG)},set:function(f){this.rotation=o(f)*h.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(f){this._rotation=r(f),s.setAngle(this.body,this._rotation)}},setPosition:function(f,v){return f===void 0&&(f=0),v===void 0&&(v=f),this._tempVec2.set(f,v),s.setPosition(this.body,this._tempVec2),this},setRotation:function(f){return f===void 0&&(f=0),this._rotation=r(f),s.setAngle(this.body,f),this},setFixedRotation:function(){return s.setInertia(this.body,1/0),this},setAngle:function(f){return f===void 0&&(f=0),this.angle=f,s.setAngle(this.body,this.rotation),this},setScale:function(f,v,d){f===void 0&&(f=1),v===void 0&&(v=f);var c=1/this._scaleX,p=1/this._scaleY;return this._scaleX=f,this._scaleY=v,s.scale(this.body,c,p,d),s.scale(this.body,f,v,d),this}};e.exports=l},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(41),h={setAngularVelocity:function(r){return s.setAngularVelocity(this.body,r),this},setVelocityX:function(r){return this._tempVec2.set(r,this.body.velocity.y),s.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(r){return this._tempVec2.set(this.body.velocity.x,r),s.setVelocity(this.body,this._tempVec2),this},setVelocity:function(r,o){return this._tempVec2.set(r,o),s.setVelocity(this.body,this._tempVec2),this}};e.exports=h},function(e,a,i){var s={};e.exports=s;var h=i(118),r=i(32);(function(){s.create=function(o){var u={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return r.extend(u,!1,o)},s.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},s.update=function(o,u){if(o.extended){var l=u.world,f=h.allBodies(l);o.collisions=o.narrowDetections,o.pairs=u.pairs.list.length,o.bodies=f.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(f.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(e,a,i){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var s=i(123),h=i(271),r=i(86),o=i(41),u=i(1392),l=i(84),f=i(0),v=i(118),d=i(591),c=i(128),p=i(273),g=i(50),x=i(1394),m=i(2),y=i(6),T=i(597),C=i(1525),S=i(1526),E=i(1399),P=i(1527),M=i(127),O=i(250),A=i(598),R=i(595),F=i(24),I=i(1400),D=i(599),N=i(274),z=i(20),U=i(592),W=i(83),w=i(64),L=i(1402),B=new f({initialize:function(G){this.scene=G,this.systems=G.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=v,this.detector=p,this.grid=T,this.pair=O,this.pairs=A,this.query=I,this.resolver=D,this.sat=N,this.constraint=c,this.bodies=r,this.composites=d,this.axes=h,this.bounds=l,this.svg=U,this.vector=W,this.vertices=w,this.verts=w,this._tempVec2=W.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),D._restingThresh=y(this.config,"restingThresh",4),D._restingThreshTangent=y(this.config,"restingThreshTangent",6),D._positionDampen=y(this.config,"positionDampen",.9),D._positionWarming=y(this.config,"positionWarming",.8),D._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),G.sys.events.once(z.BOOT,this.boot,this),G.sys.events.on(z.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new x(this.world),this.bodyBounds=new u,this.systems.events.once(z.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new x(this.world));var b=this.systems.events;b.on(z.UPDATE,this.world.update,this.world),b.on(z.POST_UPDATE,this.world.postUpdate,this.world),b.once(z.SHUTDOWN,this.shutdown,this)},getConfig:function(){var b=this.systems.game.config.physics,G=this.systems.settings.physics,Y=M(m(G,"matter",{}),m(b,"matter",{}));return Y},enableAttractorPlugin:function(){return R.register(C),R.use(E,C),this},enableWrapPlugin:function(){return R.register(P),R.use(E,P),this},enableCollisionEventsPlugin:function(){return R.register(S),R.use(E,S),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(b,G){this.world.step(b,G)},containsPoint:function(b,G,Y){b=this.getMatterBodies(b);var V=W.create(G,Y),X=I.point(b,V);return X.length>0},intersectPoint:function(b,G,Y){Y=this.getMatterBodies(Y);var V=W.create(b,G),X=[],H=I.point(Y,V);return H.forEach(function(k){X.indexOf(k)===-1&&X.push(k)}),X},intersectRect:function(b,G,Y,V,X,H){X===void 0&&(X=!1),H=this.getMatterBodies(H);var k={min:{x:b,y:G},max:{x:b+Y,y:G+V}},$=[],K=I.region(H,k,X);return K.forEach(function(Z){$.indexOf(Z)===-1&&$.push(Z)}),$},intersectRay:function(b,G,Y,V,X,H){X===void 0&&(X=1),H=this.getMatterBodies(H);for(var k=[],$=I.ray(H,W.create(b,G),W.create(Y,V),X),K=0;K<$.length;K++)k.push($[K].body);return k},intersectBody:function(b,G){G=this.getMatterBodies(G);for(var Y=[],V=I.collides(b,G),X=0;X<V.length;X++){var H=V[X];H.bodyA===b?Y.push(H.bodyB):Y.push(H.bodyA)}return Y},overlap:function(b,G,Y,V,X){Y===void 0&&(Y=null),V===void 0&&(V=null),X===void 0&&(X=Y),Array.isArray(b)||(b=[b]),b=this.getMatterBodies(b),G=this.getMatterBodies(G);for(var H=!1,k=0;k<b.length;k++)for(var $=b[k],K=I.collides($,G),Z=0;Z<K.length;Z++){var Q=K[Z],J=Q.bodyA.id===$.id?Q.bodyB:Q.bodyA;if(!V||V.call(X,$,J,Q)){if(H=!0,Y)Y.call(X,$,J,Q);else if(!V)return!0}}return H},setCollisionCategory:function(b,G){return b=this.getMatterBodies(b),b.forEach(function(Y){Y.collisionFilter.category=G}),this},setCollisionGroup:function(b,G){return b=this.getMatterBodies(b),b.forEach(function(Y){Y.collisionFilter.group=G}),this},setCollidesWith:function(b,G){b=this.getMatterBodies(b);var Y=0;if(!Array.isArray(G))Y=G;else for(var V=0;V<G.length;V++)Y|=G[V];return b.forEach(function(X){X.collisionFilter.mask=Y}),this},getMatterBodies:function(b){if(!b)return this.world.getAllBodies();Array.isArray(b)||(b=[b]);for(var G=[],Y=0;Y<b.length;Y++){var V=b[Y].hasOwnProperty("body")?b[Y].body:b[Y];G.push(V)}return G},setVelocity:function(b,G,Y){b=this.getMatterBodies(b);var V=this._tempVec2;return V.x=G,V.y=Y,b.forEach(function(X){o.setVelocity(X,V)}),this},setVelocityX:function(b,G){b=this.getMatterBodies(b);var Y=this._tempVec2;return Y.x=G,b.forEach(function(V){Y.y=V.velocity.y,o.setVelocity(V,Y)}),this},setVelocityY:function(b,G){b=this.getMatterBodies(b);var Y=this._tempVec2;return Y.y=G,b.forEach(function(V){Y.x=V.velocity.x,o.setVelocity(V,Y)}),this},setAngularVelocity:function(b,G){return b=this.getMatterBodies(b),b.forEach(function(Y){o.setAngularVelocity(Y,G)}),this},applyForce:function(b,G){b=this.getMatterBodies(b);var Y=this._tempVec2;return b.forEach(function(V){Y.x=V.position.x,Y.y=V.position.y,o.applyForce(V,Y,G)}),this},applyForceFromPosition:function(b,G,Y,V){b=this.getMatterBodies(b);var X=this._tempVec2;return b.forEach(function(H){V===void 0&&(V=H.angle),X.x=Y*Math.cos(V),X.y=Y*Math.sin(V),o.applyForce(H,G,X)}),this},applyForceFromAngle:function(b,G,Y){b=this.getMatterBodies(b);var V=this._tempVec2;return b.forEach(function(X){Y===void 0&&(Y=X.angle),V.x=G*Math.cos(Y),V.y=G*Math.sin(Y),o.applyForce(X,{x:X.position.x,y:X.position.y},V)}),this},getConstraintLength:function(b){var G=b.pointA.x,Y=b.pointA.y,V=b.pointB.x,X=b.pointB.y;return b.bodyA&&(G+=b.bodyA.position.x,Y+=b.bodyA.position.y),b.bodyB&&(V+=b.bodyB.position.x,X+=b.bodyB.position.y),g(G,Y,V,X)},alignBody:function(b,G,Y,V){b=b.hasOwnProperty("body")?b.body:b;var X;switch(V){case s.TOP_LEFT:case s.LEFT_TOP:X=this.bodyBounds.getTopLeft(b,G,Y);break;case s.TOP_CENTER:X=this.bodyBounds.getTopCenter(b,G,Y);break;case s.TOP_RIGHT:case s.RIGHT_TOP:X=this.bodyBounds.getTopRight(b,G,Y);break;case s.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(b,G,Y);break;case s.CENTER:X=this.bodyBounds.getCenter(b,G,Y);break;case s.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(b,G,Y);break;case s.LEFT_BOTTOM:case s.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(b,G,Y);break;case s.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(b,G,Y);break;case s.BOTTOM_RIGHT:case s.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(b,G,Y);break}return X&&o.setPosition(b,X),this},shutdown:function(){var b=this.systems.events;this.world&&(b.off(z.UPDATE,this.world.update,this.world),b.off(z.POST_UPDATE,this.world.postUpdate,this.world)),b.off(z.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(z.START,this.start,this),this.scene=null,this.systems=null}});F.register("MatterPhysics",B,"matterPhysics"),e.exports=B},function(e,a,i){var s=i(594),h={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Body.create",function(){h.Body.init(this)}),r.before("Engine.update",function(o){h.Engine.update(o)})},Body:{init:function(r){r.plugin.attractors=r.plugin.attractors||[]}},Engine:{update:function(r){for(var o=s.Composite.allBodies(r.world),u=0;u<o.length;u++){var l=o[u],f=l.plugin.attractors;if(f&&f.length>0)for(var v=0;v<o.length;v++){var d=o[v];if(u!==v)for(var c=0;c<f.length;c++){var p=f[c],g=p;s.Common.isFunction(p)&&(g=p(l,d)),g&&s.Body.applyForce(d,d.position,g)}}}}},Attractors:{gravityConstant:.001,gravity:function(r,o){var u=s.Vector.sub(o.position,r.position),l=s.Vector.magnitudeSquared(u)||1e-4,f=s.Vector.normalise(u),v=-h.Attractors.gravityConstant*(r.mass*o.mass/l),d=s.Vector.mult(f,v);s.Body.applyForce(r,r.position,s.Vector.neg(d)),s.Body.applyForce(o,o.position,d)}}};e.exports=h},function(e,a){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var i={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.create",function(){s.Events.on(this,"collisionStart",function(h){h.pairs.map(function(r){var o=r.bodyA,u=r.bodyB;o.gameObject&&o.gameObject.emit("collide",o,u,r),u.gameObject&&u.gameObject.emit("collide",u,o,r),s.Events.trigger(o,"onCollide",{pair:r}),s.Events.trigger(u,"onCollide",{pair:r}),o.onCollideCallback&&o.onCollideCallback(r),u.onCollideCallback&&u.onCollideCallback(r),o.onCollideWith[u.id]&&o.onCollideWith[u.id](u,r),u.onCollideWith[o.id]&&u.onCollideWith[o.id](o,r)})}),s.Events.on(this,"collisionActive",function(h){h.pairs.map(function(r){var o=r.bodyA,u=r.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,u,r),u.gameObject&&u.gameObject.emit("collideActive",u,o,r),s.Events.trigger(o,"onCollideActive",{pair:r}),s.Events.trigger(u,"onCollideActive",{pair:r}),o.onCollideActiveCallback&&o.onCollideActiveCallback(r),u.onCollideActiveCallback&&u.onCollideActiveCallback(r)})}),s.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(r){var o=r.bodyA,u=r.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,u,r),u.gameObject&&u.gameObject.emit("collideEnd",u,o,r),s.Events.trigger(o,"onCollideEnd",{pair:r}),s.Events.trigger(u,"onCollideEnd",{pair:r}),o.onCollideEndCallback&&o.onCollideEndCallback(r),u.onCollideEndCallback&&u.onCollideEndCallback(r)})})})}};e.exports=i},function(e,a,i){var s=i(594),h={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Engine.update",function(){h.Engine.update(this)})},Engine:{update:function(r){for(var o=r.world,u=s.Composite.allBodies(o),l=s.Composite.allComposites(o),f=0;f<u.length;f+=1){var v=u[f];v.plugin.wrap&&h.Body.wrap(v,v.plugin.wrap)}for(f=0;f<l.length;f+=1){var d=l[f];d.plugin.wrap&&h.Composite.wrap(d,d.plugin.wrap)}}},Bounds:{wrap:function(r,o){var u=null,l=null;if(typeof o.min.x<"u"&&typeof o.max.x<"u"&&(r.min.x>o.max.x?u=o.min.x-r.max.x:r.max.x<o.min.x&&(u=o.max.x-r.min.x)),typeof o.min.y<"u"&&typeof o.max.y<"u"&&(r.min.y>o.max.y?l=o.min.y-r.max.y:r.max.y<o.min.y&&(l=o.max.y-r.min.y)),u!==null||l!==null)return{x:u||0,y:l||0}}},Body:{wrap:function(r,o){var u=h.Bounds.wrap(r.bounds,o);return u&&s.Body.translate(r,u),u}},Composite:{bounds:function(r){for(var o=s.Composite.allBodies(r),u=[],l=0;l<o.length;l+=1){var f=o[l];u.push(f.bounds.min,f.bounds.max)}return s.Bounds.create(u)},wrap:function(r,o){var u=h.Bounds.wrap(h.Composite.bounds(r),o);return u&&s.Composite.translate(r,u),u}}};e.exports=h},function(e,a,i){(function(s){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var h=i(33),r=i(17),o={Actions:i(275),Animations:i(723),BlendModes:i(35),Cache:i(735),Cameras:i(738),Core:i(806),Class:i(0),Create:i(888),Curves:i(894),Data:i(896),Display:i(898),DOM:i(917),Events:i(918),Game:i(920),GameObjects:i(1011),Geom:i(483),Input:i(1308),Loader:i(1338),Math:i(193),Physics:i(1493),Plugins:i(1403),Renderer:i(1405),Scale:i(1412),ScaleModes:i(168),Scene:i(418),Scenes:i(1413),Structs:i(1415),Textures:i(1416),Tilemaps:i(1418),Time:i(1461),Tweens:i(1463),Utils:i(1481)};o.Sound=i(1492),o=r(!1,o,h),e.exports=o,s.Phaser=o}).call(this,i(600))}])})})(Yv);const ge=Fm(Yv.exports),fa=new ge.Events.EventEmitter;class Im extends ge.Scene{constructor(){super({key:"collectionScene"});nt(this,"backButton");nt(this,"collectionBG");nt(this,"nenesCollected");nt(this,"colors");nt(this,"hats");nt(this,"neneImages");nt(this,"neneText");this.nenesCollected={"":"vanilla nene"},this.colors=["red","green","blue","purple"],this.hats=["sunhat","beanie","bucket-hat","visor"],this.neneImages=new ge.GameObjects.Group(this),this.neneText=new ge.GameObjects.Group(this)}preload(){this.load.image("collectionBG","assets/collectionBG.jpg"),this.load.image("backButton","assets/backButton.png")}create(){fa.on("update-nenes",this.updateNenes,this),this.collectionBG=this.add.image(450,300,"collectionBG"),this.collectionBG.ignoreDestroy=!0,this.backButton=this.add.image(70,530,"backButton").setInteractive(),this.backButton.ignoreDestroy=!0,this.backButton.on("pointerover",()=>{this.backButton.setAlpha(1)}),this.backButton.on("pointerout",()=>{this.backButton.setAlpha(.7)}),this.backButton.on("pointerdown",()=>this.goToGameScene()),this.add.text(375,20,"Collection",{font:"36px Courier",color:"#000000",align:"center"}),this.loadInNenes()}updateNenes(e){console.log(e),this.nenesCollected=e,this.loadInNenes()}goToGameScene(){this.scene.wake("GameScene")}loadInNenes(){this.neneImages.clear(!0),this.neneText.clear(!0);let e=-10,a=150;console.log(this.nenesCollected),Object.keys(this.nenesCollected).sort().forEach(i=>{console.log(i),[e,a]=this.increment(e,a);let s=!1;this.colors.forEach(h=>{i.includes(h)&&(s=!0,this.neneImages.add(this.add.image(e,a,"nene-"+h).setScale(.75)))}),s||this.neneImages.add(this.add.image(e,a,"nene").setScale(.75)),this.hats.forEach(h=>{i.includes(h)&&(s=!0,this.neneImages.add(this.add.image(e,a,"nene-"+h).setScale(.75)))}),this.neneText.add(this.add.text(e-50,a+100,this.nenesCollected[i],{font:"16px Courier",color:"#000000"}))})}increment(e,a){return e=e+170,e>700&&(e=160,a=a+250),[e,a]}}class wm extends ge.GameObjects.Container{constructor(e){super(e);nt(this,"color");nt(this,"hats");nt(this,"scoreText");this.add(this.scene.add.text(40,240,"Additional Colors",{fontSize:"18px",color:"#FFFFFF"})),this.add(this.scene.add.text(45,415,"Additional Hats",{fontSize:"18px",color:"#FFFFFF"})),this.add(this.scene.add.text(80,260,"4 Coins",{fontSize:"18px",color:"#FFFFFF"})),this.add(this.scene.add.text(80,440,"6 Coins",{fontSize:"18px",color:"#FFFFFF"})),this.scoreText=this.scene.add.text(20,550,`Coins: ${this.scene.coins}`,{fontSize:"32px",color:"#FFFFFF"}),this.color=this.scene.add.image(125,175,"color"),this.color.setScale(.25),this.hats=this.scene.add.image(125,350,"hats"),this.hats.setScale(.25),this.color.setInteractive(),this.hats.setInteractive(),this.color.on("pointerup",()=>{var a,i,s;this.scene.coins>=4&&(this.scene.coins=this.scene.coins-4,this.scoreText.setText(`Coins: ${this.scene.coins}`),this.color.removeInteractive(),(a=this.scene.dragAndDrop)==null||a.dragColors.red.setVisible(!0),(i=this.scene.dragAndDrop)==null||i.dragColors.purple.setVisible(!0),(s=this.scene.dragAndDrop)==null||s.SetcolorsGot(),this.add(this.scene.add.text(65,175,"SOLD OUT!",{fontSize:"24px",color:"#FFFFFF"})))}),this.hats.on("pointerup",()=>{var a,i,s;this.scene.coins>=6&&(this.scene.coins=this.scene.coins-6,this.scoreText.setText(`Coins: ${this.scene.coins}`),this.hats.removeInteractive(),(a=this.scene.dragAndDrop)==null||a.dragHats.sunhat.setVisible(!0),(i=this.scene.dragAndDrop)==null||i.dragHats.visor.setVisible(!0),(s=this.scene.dragAndDrop)==null||s.SethatsGot(),this.add(this.scene.add.text(65,340,"SOLD OUT!",{fontSize:"24px",color:"#ff0303"})))}),this.scene.add.existing(this)}earnCoin(){console.log(this.scene.coins)}}class Bm extends ge.GameObjects.Container{constructor(t){super(t),this.scene.add.existing(this)}earnCoin(){return 0}}const Ze=[{question:"An object is an instance of a class.",choices:["True","False"],expected:"True"},{question:"A class is an instance of an object.",choices:["True","False"],expected:"False"},{question:"How are objects created?",choices:["By calling constructors with or without parameters.","By listing or grouping similar types of data values.","By repeating the same process over and over until a condition is met.","By manipulating different operands"],expected:"By calling constructors with or without parameters."},{question:"How are classes different from objects?",choices:["Classes are the blueprint for declaring and creating objects, while objects are an instance of a class.","Objects are the blueprint for declaring and creating objects, while classes are an instance of a class.","Objects are strings, while classes are booleans.","Objects are booleans, while classes are strings."],expected:"Classes are the blueprint for declaring and creating objects, while objects are an instance of a class."},{question:"A class is the blueprint for declaring and creating objects.",choices:["True","False"],expected:"True"},{question:"An object is the blueprint for declaring and creating classes.",choices:["True","False"],expected:"False"},{question:"What is the blueprint for declaring and creating objects?",choices:["A class","An object","A type","A variable"],expected:"A class"},{question:"Which of the following is not part of a class?",choices:["Motherboard","variable declarations","Constructors","Methods"],expected:"Motherboard"},{question:"Subclasses inherit all the fields and public methods of its super class.",choices:["True","False"],expected:"True"},{question:"Based on the game, what is Nene?",choices:["A class","A string","A variable","An attribute"],expected:"A class"},{question:`Which line shows the constructor for the class Nene?
public class Nene{
private class Nene{
private String name;
publicNene() {this.name = "Jerry";}
private void jump(){};
}`,choices:["Line 1","Line 2","Line 3","Line 4"],expected:"Line 3"},{question:"Which constructor takes in 2 parameters?",choices:["Nene();",'Nene("blue");','Nene("beanie", "pink");','Nene("sandals", "sunhat", "purple");'],expected:'Nene("beanie", "pink");'},{question:`What is the name of this class?
public class Nene {
	private String color;
	public Nene(){
		this.color = \u201Cpink\u201D;
	}
	private void jump(){};
}`,choices:["Nene","Color","Pink","Jump"],expected:"Nene"},{question:"What is an attribute?",choices:["A changeable property or characteristic of some component of a program that can be set to different values.","A list or group of similar types of data values that are grouped.","An unexpected condition encountered during the execution of a program.","A sequence of instructions that repeat the same process over and over until a condition is met."],expected:"A changeable property or characteristic of some component of a program that can be set to different values."},{question:"Based on the game, which of the following is an example of an attribute value of the class Nene?",choices:['"blue"',"bucket","sand","ocean"],expected:'"blue"'},{question:"A keyword used to initialize an object",choices:["old","clone","method","new"],expected:"new"},{question:"An abstract class cannot have a constructor.",choices:["True","False"],expected:"False"},{question:"What are classes made up of?",choices:["Methods","Mainframes","Modules","Magic"],expected:"Methods"},{question:"What is overloading?",choices:["Creating multiple methods or constructors with the same name but different number or types of parameters.","Lists or groups of similar types of data values that are grouped.","A statement that describes a variable, function or any other identifier.","A sequence of instructions that repeat the same process over and over until a condition is met."],expected:"Creating multiple methods or constructors with the same name but different number or types of parameters."},{question:"Another name for actions?",choices:["Methods","Work","Steps","Moves"],expected:"Methods"}];class Vv extends ge.GameObjects.Container{constructor(e){super(e);nt(this,"popupBG");nt(this,"container");nt(this,"quiztext");nt(this,"choices1");nt(this,"choices2");nt(this,"choices3");nt(this,"choices4");nt(this,"index");this.scene.add.existing(this)}generatePopUp(){var e,a,i,s,h,r;if(this.index=Math.floor(Math.random()*20),this.popupBG=this.scene.physics.add.image(100,50,"popup").setOrigin(0),this.quiztext=this.scene.add.text(150,100,Ze[this.index].question,{align:"center",wordWrap:{width:500,useAdvancedWrap:!0}}).setColor("#000000"),this.choices1=this.scene.add.text(150,200,Ze[this.index].choices[0],{align:"left",wordWrap:{width:200,useAdvancedWrap:!0}}).setColor("#000000").setInteractive().on("pointerover",()=>{var o;return(o=this.choices1)==null?void 0:o.setColor("#fff000")}).on("pointerout",()=>{var o;return(o=this.choices1)==null?void 0:o.setColor("#000000")}).on("pointerup",()=>{var o;return(o=this.container)==null?void 0:o.destroy()}),this.choices2=this.scene.add.text(500,200,Ze[this.index].choices[1],{align:"right",wordWrap:{width:200,useAdvancedWrap:!0}}).setColor("#000000").setInteractive().on("pointerover",()=>{var o;return(o=this.choices2)==null?void 0:o.setColor("#fff000")}).on("pointerout",()=>{var o;return(o=this.choices2)==null?void 0:o.setColor("#000000")}).on("pointerup",()=>{var o;return(o=this.container)==null?void 0:o.destroy()}),Ze[this.index].choices[0]=="True"){this.container=this.scene.add.container(32,70,[this.popupBG,this.quiztext,this.choices1,this.choices2]);for(let o=0;o<2;o++)Ze[this.index].choices[o]==Ze[this.index].expected&&o%2==0?this.choices1.on("pointerup",()=>this.addCoins(),(e=this.container)==null?void 0:e.destroy):this.choices2.on("pointerup",()=>this.addCoins(),(a=this.container)==null?void 0:a.destroy)}else{this.choices3=this.scene.add.text(150,350,Ze[this.index].choices[2],{align:"left",wordWrap:{width:200,useAdvancedWrap:!0}}).setColor("#000000").setInteractive().on("pointerover",()=>{var o;return(o=this.choices3)==null?void 0:o.setColor("#fff000")}).on("pointerout",()=>{var o;return(o=this.choices3)==null?void 0:o.setColor("#000000")}).on("pointerup",()=>{var o;return(o=this.container)==null?void 0:o.destroy()}),this.choices4=this.scene.add.text(500,350,Ze[this.index].choices[3],{align:"right",wordWrap:{width:200,useAdvancedWrap:!0}}).setColor("#000000").setInteractive().on("pointerover",()=>{var o;return(o=this.choices4)==null?void 0:o.setColor("#fff000")}).on("pointerout",()=>{var o;return(o=this.choices4)==null?void 0:o.setColor("#000000")}).on("pointerup",()=>{var o;return(o=this.container)==null?void 0:o.destroy()}),this.container=this.scene.add.container(32,70,[this.popupBG,this.quiztext,this.choices1,this.choices2,this.choices3,this.choices4]);for(let o=0;o<4;o++)Ze[this.index].choices[o]==Ze[this.index].expected&&(o==0?this.choices1.on("pointerup",()=>this.addCoins(),(i=this.container)==null?void 0:i.destroy):o==1?this.choices2.on("pointerup",()=>this.addCoins(),(s=this.container)==null?void 0:s.destroy):o==2?this.choices3.on("pointerup",()=>this.addCoins(),(h=this.container)==null?void 0:h.destroy):o==3&&this.choices4.on("pointerup",()=>this.addCoins(),(r=this.container)==null?void 0:r.destroy))}}addCoins(){var e;this.scene.coins+=2,(e=this.scene.shop)==null||e.scoreText.setText(`Coins: ${this.scene.coins}`)}}class Dm extends ge.GameObjects.Container{constructor(t){super(t),this.x=750,this.y=300,this.scene.add.existing(this)}earnCoin(){return 0}}class bm extends ge.GameObjects.Container{constructor(e,a){super(e);nt(this,"dragColors");nt(this,"dragHats");nt(this,"nene");nt(this,"text");nt(this,"currentAttributes");nt(this,"hat");nt(this,"resetButton");nt(this,"gothats");nt(this,"gotcolors");nt(this,"totalnenetext");nt(this,"questions");nt(this,"difficulty");this.text=this.scene.add.text(650,450,"nene = new Nene();",{align:"left",color:"0x000000",fixedWidth:250}),this.nene=this.scene.physics.add.image(750,300,"nene").setInteractive(),this.resetButton=this.scene.physics.add.image(750,100,"reset").setInteractive(),this.totalnenetext=this.scene.add.text(670,160,`Total Nenes Found: ${this.scene.totalnene}`,{color:"0x000000"}),this.currentAttributes={},this.dragColors={},this.dragHats={},this.gothats=!1,this.questions=new Vv(e),this.difficulty=a,this.gotcolors=!1,this.displayValueOptions(this.scene.colors,this.dragColors),this.displayValueOptions2(this.scene.hats,this.dragHats),console.log(this.dragColors),console.log("BRUH"),this.setUpButton(),this.setUpDrag(),this.setUpCollisions()}displayValueOptions(e,a){let i=100;e.forEach(s=>(a[s]=this.scene.physics.add.image(350,i,s).setInteractive(),this.scene.input.setDraggable(a[s]),i+=125)),this.gotcolors==!1&&(a.red.setVisible(!1),a.purple.setVisible(!1))}displayValueOptions2(e,a){let i=100;e.forEach(s=>(a[s]=this.scene.physics.add.image(500,i,s).setInteractive(),this.scene.input.setDraggable(a[s]),i+=125)),this.gothats==!1&&(a.sunhat.setVisible(!1),a.visor.setVisible(!1))}setUpDrag(){this.scene.input.on("dragstart",function(e,a){a.setTint(14737632)}),this.scene.input.on("drag",function(e,a,i,s){a.x=i,a.y=s}),this.scene.input.on("dragend",function(e,a){a.clearTint()})}setUpCollisions(){this.scene.physics.add.overlap(this.nene,Object.values(this.dragColors),void 0),this.scene.physics.add.overlap(this.nene,Object.values(this.dragHats),void 0),Object.values(this.dragColors).forEach(e=>this.scene.physics.add.collider(this.nene,e,this.handleColorCollision,void 0,this)),Object.values(this.dragHats).forEach(e=>this.scene.physics.add.collider(this.nene,e,this.handleHatCollision,void 0,this))}handleColorCollision(e,a){if(e.disableBody(!0,!0),Object.keys(this.currentAttributes).includes("color")){const r=this.currentAttributes.color,o=this.generateCoords();this.dragColors[r]=this.scene.physics.add.image(o[0],o[1],r).setInteractive(),this.scene.input.setDraggable(this.dragColors[r])}a.disableBody(!0,!0);const h=a.texture.key;this.nene=this.scene.physics.add.image(750,300,"nene-"+h).setInteractive(),this.currentAttributes.color=a.texture.key,this.text=this.text.setText(`nene = new Nene(
	`+this.generateDisplayString()+`
);`),this.updateText(),this.setUpCollisions()}handleHatCollision(e,a){if(console.log(e),Object.keys(this.currentAttributes).includes("hat")){const h=this.currentAttributes.hat,r=this.generateCoords();this.hat.disableBody(!0,!0),this.dragHats[h]=this.scene.physics.add.image(r[0],r[1],h).setInteractive(),this.scene.input.setDraggable(this.dragHats[h])}a.disableBody(!0,!0);const s=a.texture.key;this.hat=this.scene.physics.add.image(750,300,"nene-"+s).setInteractive(),this.currentAttributes.hat=a.texture.key,this.updateText(),this.setUpCollisions()}updateText(e){var i;const a=this.generateDisplayString();e||(e="nene"),a===""?this.text=this.text.setText(e+" = new Nene();"):this.text=this.text.setText(e+` = new Nene(
	`+a+`
);`),Object.keys(this.scene.coinTracker).includes(a)||(this.scene.coinTracker[a]=a,this.scene.coins++,(i=this.scene.shop)==null||i.scoreText.setText(`Coins: ${this.scene.coins}`),fa.emit("update-nenes",this.scene.coinTracker),this.scene.totalnene=this.scene.totalnene+1,this.totalnenetext=this.totalnenetext.setText(`Total Nenes Found: ${this.scene.totalnene}`),this.scene.totalnene%5==0&&this.difficulty[0]==="true"&&this.questions.generatePopUp(),this.scene.totalnene==25&&this.scene.scene.stop().launch("End"))}generateCoords(){return[Math.random()*300+250,Math.random()*400+100]}generateDisplayString(){const e=[];if(Object.keys(this.currentAttributes).sort().forEach(a=>e.push('"'+this.currentAttributes[a]+'",')),e){const a=e.join(`
	`);return a.substring(0,a.length-1)}return""}setUpButton(){this.resetButton.setInteractive().on("pointerdown",()=>{var e;this.text.destroy(),this.text=this.scene.add.text(650,450,"nene = new Nene();",{align:"left",color:"0x000000",fixedWidth:250}),this.nene.destroy(),(e=this.hat)==null||e.destroy(),this.nene=this.scene.physics.add.image(750,300,"nene").setInteractive(),this.currentAttributes={},Object.values(this.dragColors).forEach(a=>a.destroy()),Object.values(this.dragHats).forEach(a=>a.destroy()),this.displayValueOptions(this.scene.colors,this.dragColors),this.displayValueOptions2(this.scene.hats,this.dragHats),this.setUpDrag(),this.setUpCollisions()})}SetcolorsGot(){this.gotcolors=!0}SethatsGot(){this.gothats=!0}}class Gm extends ge.Scene{constructor(){super("GameScene");nt(this,"background");nt(this,"collectionButton");nt(this,"saveButton");nt(this,"coins");nt(this,"totalnene");nt(this,"coinTracker");nt(this,"shop");nt(this,"dragAndDrop");nt(this,"colors");nt(this,"hats");nt(this,"rexUI");nt(this,"textObj");nt(this,"userText");this.colors=["blue","green","purple","red"],this.coins=0,this.coinTracker={"":"vanilla nene"},this.totalnene=1,this.hats=["beanie","bucket-hat","sunhat","visor"]}preload(){this.load.image("bg","assets/background.png"),this.load.image("color","assets/Colorwheel.png"),this.load.image("hats","assets/hats.png"),this.load.image("popup","assets/popup.png"),this.loadAttribute("colors",this.colors),this.loadAttribute("hats",this.hats),this.load.image("reset","assets/reset.png"),this.load.image("nene","assets/nene.png"),this.load.image("collectionButton","assets/collectionButton.gif"),this.load.image("saveButton","assets/saveButton.png"),this.scene.run("collectionScene"),this.scene.setVisible(!1,"collectionScene"),this.load.image("custom-name","assets/customname.png"),this.load.image("custom-save","assets/customname-save.png")}create(e){this.background=this.add.image(450,300,"bg"),this.background.displayHeight=600,this.background.displayWidth=900,new Dm(this),this.dragAndDrop=new bm(this,e),new Vv(this),new Bm(this),this.shop=new wm(this),this.collectionButton=this.add.image(850,70,"collectionButton").setInteractive(),this.collectionButton.on("pointerover",()=>{this.collectionButton.setAlpha(1)}),this.collectionButton.on("pointerout",()=>{this.collectionButton.setAlpha(.7)}),this.collectionButton.on("pointerdown",()=>this.goToCollectionScene()),this.add.image(750,550,"custom-name").setScale(1.25),this.saveButton=this.add.image(775,550,"custom-save").setScale(1).setInteractive(),this.userText=this.add.text(640,540,"Set custom name",{font:"18px Courier",color:"#FFFFFF"}),this.userText.setInteractive().on("pointerdown",()=>{this.rexUI.edit(this.userText)});const a=this.rexUI.edit(this.userText);this.saveButton.on("pointerover",()=>{this.saveButton.setAlpha(1)}),this.saveButton.on("pointerout",()=>{this.saveButton.setAlpha(.9)}),this.saveButton.on("pointerdown",()=>this.saveMyObject(a.text))}saveMyObject(e){var a,i;this.coinTracker[((a=this.dragAndDrop)==null?void 0:a.generateDisplayString())||""]=e,fa.emit("update-nenes",this.coinTracker),(i=this.dragAndDrop)==null||i.updateText(e)}loadAttribute(e,a){a.forEach(i=>(this.load.image("nene-"+i,"assets/nene-"+e+"/"+i+".png"),this.load.image(i,"assets/"+e+"/"+i+".png")))}goToCollectionScene(){this.scene.sleep()}goToEndScene(){this.scene.stop("GameScene").stop("collectionScene").launch("End")}update(){this.totalnene==25&&(this.totalnene=1,this.coins=0,this.coinTracker={"":"vanilla nene"},fa.emit("update-nenes",this.coinTracker),this.goToEndScene())}}class Nm extends ge.Scene{constructor(){super({key:"titleScene"});nt(this,"startButton");nt(this,"easyButton");nt(this,"hardButton");nt(this,"mute");nt(this,"unmute");nt(this,"cursorKeys");nt(this,"spacebar");nt(this,"music");nt(this,"cursors");nt(this,"titleText");nt(this,"difficulty");nt(this,"nene");this.difficulty=[]}preload(){this.load.image("titleScreen","assets/titleScene.jpg"),this.load.image("title","assets/title.png"),this.load.image("titleStart","assets/startButton.png"),this.load.image("easyButton","assets/easy.png"),this.load.image("hardButton","assets/hard.png"),this.load.image("mute","assets/unmute.png"),this.load.image("unmute","assets/mute.png"),this.load.image("bigNene","assets/neneTitle.png"),this.load.audio("summerFun","assets/summerFun.mp3")}create(){this.music=this.sound.add("summerFun",{loop:!0}),this.music.play(),this.add.image(400,300,"titleScreen"),this.cursorKeys=this.input.keyboard.createCursorKeys(),this.add.image(430,100,"title"),this.add.image(430,400,"bigNene"),this.easyButton=this.add.image(195,470,"easyButton"),this.easyButton.setVisible(!1),this.easyButton.setAlpha(.7),this.easyButton.setInteractive(),this.easyButton.on("pointerover",()=>{this.easyButton.setAlpha(1)}),this.easyButton.on("pointerout",()=>{this.easyButton.setAlpha(.7)}),this.easyButton.on("pointerup",()=>{var e,a;(e=this.titleText)==null||e.setVisible(!1),(a=this.easyButton)==null||a.setVisible(!1),this.scene.stop("titleScene").launch("GameScene")}),this.hardButton=this.add.image(748,470,"hardButton"),this.hardButton.setVisible(!1),this.hardButton.setAlpha(.7),this.hardButton.setInteractive(),this.hardButton.on("pointerover",()=>{this.hardButton.setAlpha(1)}),this.hardButton.on("pointerout",()=>{this.hardButton.setAlpha(.7)}),this.hardButton.on("pointerup",()=>{var e,a;(e=this.titleText)==null||e.setVisible(!1),(a=this.hardButton)==null||a.setVisible(!1),this.difficulty.push("true"),console.log(this.difficulty[0]),this.scene.stop("titleScene").launch("GameScene",this.difficulty)}),this.unmute=this.add.image(860,560,"unmute"),this.unmute.setVisible(!1),this.unmute.setAlpha(.7),this.unmute.setInteractive(),this.unmute.on("pointerover",()=>{this.unmute.setAlpha(1)}),this.unmute.on("pointerout",()=>{this.unmute.setAlpha(.7)}),this.unmute.on("pointerup",()=>{var e,a;(e=this.unmute)==null||e.setVisible(!1),(a=this.mute)==null||a.setVisible(!0),this.music.resume()}),this.startButton=this.add.image(430,470,"titleStart"),this.startButton.setTint(16777215),this.startButton.setAlpha(.7),this.startButton.setInteractive(),this.startButton.on("pointerover",()=>{this.startButton.setAlpha(1)}),this.startButton.on("pointerout",()=>{this.startButton.setAlpha(.7)}),this.startButton.on("pointerup",()=>{var e,a,i;(e=this.startButton)==null||e.setVisible(!1),(a=this.easyButton)==null||a.setVisible(!0),(i=this.hardButton)==null||i.setVisible(!0)}),this.mute=this.add.image(860,560,"mute"),this.mute.setAlpha(.7),this.mute.setInteractive(),this.mute.on("pointerover",()=>{this.mute.setAlpha(1)}),this.mute.on("pointerout",()=>{this.mute.setAlpha(.7)}),this.mute.on("pointerup",()=>{var e,a;(e=this.mute)==null||e.setVisible(!1),(a=this.unmute)==null||a.setVisible(!0),this.music.pause()})}}class _{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,e){_.prototype[t]=e}}var Ym=function(n){return n===void 0&&(n=Vm),this.getFrameNameCallback=n,this},Vm=function(n,t,e){return e==="__BASE"?`${n},${t}`:`${e}_${n},${t}`},re=function(n){var t,e,a;if(n==null||typeof n!="object")return n;t=Array.isArray(n)?[]:{};for(a in n)e=n[a],t[a]=re(e);return t},zm=function(n,t,e,a){Array.isArray(t)&&(a=e,e=t,t=void 0),t===void 0&&(t="__BASE"),e=re(e),a=re(a),this.textureKey=n,this.baseFrameName=t,this.columns.data=e,this.columns.count=e?e.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=a,this.rows.count=a?a.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var i=this.scene.sys.textures.get(n);if(!i)return this.clear(),this;if(!e||!a)return this.clear(),this;for(var s=i.get(t),h=s.width,r=0,o=0,u=e.length;o<u;o++)e[o]===void 0?r++:typeof e[o]=="number"?h-=e[o]:h-=e[o].width;for(var l=h/r,f=s.height,v=0,o=0,u=a.length;o<u;o++)a[o]===void 0?v++:typeof a[o]=="number"?f-=a[o]:f-=a[o].width;for(var d=f/v,c,p,g,x,m,y=0,T=0,C=0,S=a.length;C<S;C++){a[C]===void 0&&(a[C]=d),typeof a[C]=="number"&&(a[C]={height:a[C],stretch:C%2}),c=a[C],g=c.height,this.rows.stretch+=c.stretch|0,this.rows.minHeight+=c.stretch>0?0:g,y=0;for(var o=0,E=e.length;o<E;o++){if(e[o]===void 0&&(e[o]=l),typeof e[o]=="number"&&(e[o]={width:e[o],stretch:o%2}),p=e[o],x=p.width,C===0&&(this.columns.stretch+=p.stretch|0,this.columns.minWidth+=p.stretch>0?0:x),x>=1&&g>=1){m=this.getFrameNameCallback(o,C,t);var P=typeof m;(P==="string"||P==="number")&&i.add(m,0,y+s.cutX,T+s.cutY,x,g)}y+=x}T+=g}return this.updateTexture(),this},Um=function(){if(this.clear(),this.textureKey===void 0)return this;var n=this.scene.sys.textures.get(this.textureKey);if(!n)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,e=this.rows.minHeight*this.maxFixedPartScaleY,a=this.width-t,i=this.height-e,s=a>=0?this.maxFixedPartScaleX:this.width/t,h=i>=0?this.maxFixedPartScaleY:this.height/e;if(this.preserveRatio){var r=Math.min(s,h);if(s>r){var o=(s-r)*t;a>=0?a+=o:a=o,s=r}if(h>r){var u=(h-r)*e;i>=0?i+=u:i=u,h=r}}this.columns.scale=s,this.rows.scale=h;var l;a>0?l=this.columns.stretch>0?a/this.columns.stretch:0:l=0;var f;i>0?f=this.rows.stretch>0?i/this.rows.stretch:0:f=0;for(var v,d,c,p,g,x=0,m=0,y,T=0,C=this.rows.count;T<C;T++){c=this.rows.data[T],g=c.stretch===0?c.height*h:f*c.stretch,x=0;for(var S=0,E=this.columns.count;S<E;S++)d=this.columns.data[S],p=d.stretch===0?d.width*s:l*d.stretch,v=this.getFrameNameCallback(S,T,this.baseFrameName),n.has(v)&&p>0&&g>0&&(c.stretch===0&&d.stretch===0||this.getStretchMode(S,T)===0?y=0:y=1,y===0?this._drawImage(this.textureKey,v,x,m,p,g):this._drawTileSprite(this.textureKey,v,x,m,p,g)),x+=p;m+=g}};const Xm=Phaser.Utils.Objects.IsPlainObject,ef=Phaser.Utils.Objects.GetValue;var Wm=function(n){return Xm(n)?(this.stretchMode.edge=fo(ef(n,"edge",0)),this.stretchMode.internal=fo(ef(n,"internal",0))):(n=fo(n),this.stretchMode.edge=n,this.stretchMode.internal=n),this},fo=function(n){return typeof n=="string"&&(n=Hm[n]),n};const Hm={scale:0,repeat:1};var km=function(n,t){return n===0||n===this.columns.count-1||t===0||t===this.rows.count-1},$m=function(n,t){return km.call(this,n,t)?this.stretchMode.edge:this.stretchMode.internal},Km=function(n){return n==null&&(n=!0),this.preserveRatio=n,this},Zm=function(n,t){return t===void 0&&(t=n),this.maxFixedPartScaleX=n,this.maxFixedPartScaleY=t,this},ve=function(){};const Jm={_drawImage:ve,_drawTileSprite:ve,setGetFrameNameCallback:Ym,setTexture:zm,updateTexture:Um,setStretchMode:Wm,getStretchMode:$m,setPreserveRatio:Km,setMaxFixedPartScale:Zm},xn=Phaser.Utils.Objects.IsPlainObject,mt=Phaser.Utils.Objects.GetValue;var zv=function(n,t){class e extends n{constructor(i,s,h,r,o,u,l,f,v,d){xn(s)?(d=s,s=mt(d,"x",0),h=mt(d,"y",0),r=mt(d,"width",1),o=mt(d,"height",1),u=mt(d,"key",void 0),l=mt(d,"baseFrame",void 0),f=mt(d,"columns",void 0),v=mt(d,"rows",void 0)):xn(r)?(d=r,r=mt(d,"width",1),o=mt(d,"height",1),u=mt(d,"key",void 0),l=mt(d,"baseFrame",void 0),f=mt(d,"columns",void 0),v=mt(d,"rows",void 0)):xn(u)?(d=u,u=mt(d,"key",void 0),l=mt(d,"baseFrame",void 0),f=mt(d,"columns",void 0),v=mt(d,"rows",void 0)):xn(l)?(d=l,l=mt(d,"baseFrame",void 0),f=mt(d,"columns",void 0),v=mt(d,"rows",void 0)):Array.isArray(l)?(d=v,v=f,f=l,l=mt(d,"baseFrame",void 0)):xn(f)&&(d=f,f=mt(d,"columns",void 0),v=mt(d,"rows",void 0)),super(i),this.type=t,this.setPosition(s,h).setSize(r,o).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(mt(d,"getFrameNameCallback",void 0)),this.setStretchMode(mt(d,"stretchMode",0)),this.setPreserveRatio(mt(d,"preserveRatio",!0));var c=mt(d,"maxFixedPartScale",1),p=mt(d,"maxFixedPartScaleX",c),g=mt(d,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(p,g),this.setTexture(u,l,f,v)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(i,s){return this.width===i&&this.height===s?this:(super.resize(i,s),this.updateTexture(),this)}}return Object.assign(e.prototype,Jm),e},Uv=function(n,t,e){return e===void 0&&(e="image"),n[t]||(n[t]=n.scene.make[e]({add:!1,origin:{x:0,y:0}}),n.once("destroy",function(){n[t]&&(n[t].destroy(),n[t]=void 0)})),n[t]},jm=function(n,t,e,a,i,s){var h=Uv(this,"_image","image").setTexture(n,t).setDisplaySize(i,s);this.draw(h,e,a)},Qm=function(n,t,e,a,i,s){var h=Uv(this,"_tileSprite","tileSprite").setTexture(n,t).setSize(i,s);this.draw(h,e,a)};const qm={_drawImage:jm,_drawTileSprite:Qm},_m=Phaser.GameObjects.RenderTexture;class Ma extends zv(_m,"rexNinePatch"){}Object.assign(Ma.prototype,qm);var Xv=function(n){return n==null||n===""||n.length===0},ty=function(n,t,e){var a=n;if(!Xv(t)){typeof t=="string"&&(t=t.split("."));for(var i,s=0,h=t.length;s<h;s++){if(i=t[s],a[i]==null||typeof a[i]!="object"){var r;s===h-1?e===void 0?r={}:r=e:r={},a[i]=r}a=a[i]}}return a},q=function(n,t,e,a){if(a===void 0&&(a="."),typeof n=="object"){if(Xv(t)){if(e==null)return;typeof e=="object"&&(n=e)}else{typeof t=="string"&&(t=t.split(a));var i=t.pop(),s=ty(n,t);s[i]=e}return n}};_.register("ninePatch",function(n,t,e,a,i,s,h,r){var o=new Ma(this.scene,n,t,e,a,i,s,h,r);return this.scene.add.existing(o),o});q(window,"RexPlugins.UI.NinePatch",Ma);const ey=Phaser.GameObjects.GetCalcMatrix;var iy=function(n,t,e,a){var i=t.getRenderList();if(i.length!==0){e.addToRenderList(t);var s=n.pipelines.set(t.pipeline),h=t.frame.glTexture,r=s.setGameObject(t),o=e.roundPixels,u=ey(t,e,a),l=s.calcMatrix.copyFrom(u.calc),f=t._displayOriginX,v=t._displayOriginY,d=e.alpha*t.alpha;n.pipelines.preBatch(t);for(var c=0,p=i.length;c<p;c++)i[c].webglRender(s,l,d,f,v,h,r,o);n.pipelines.postBatch(t)}};const sy=Phaser.Renderer.Canvas.SetTransform;var ny=function(n,t,e,a){var i=n.currentContext,s=t.getRenderList();if(!(s.length===0||!sy(n,i,t,e,a))){e.addToRenderList(t);var h=e.roundPixels,r=-t._displayOriginX,o=-t._displayOriginY;i.translate(r,o);for(var u=0,l=s.length;u<l;u++)s[u].canvasRender(i,r,o,h);i.restore()}};const ry={renderWebGL:iy,renderCanvas:ny};var Wv=function(n,t){return this.texture=this.scene.sys.textures.get(n),this.frame=this.texture.get(t),this},sf=function(n,t){if(this.width===n&&this.height===t)return this;this.width=n,this.height=t,this.updateDisplayOrigin();var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=n,e.hitArea.height=t),this},ay=function(n){return this.lastAppendedChildren.length=0,Array.isArray(n)?(this.children.add(n),this.lastAppendedChildren.push(...n)):(this.children.add(n),this.lastAppendedChildren.push(n)),this};const oy=Phaser.Utils.Array.Remove;var hy=function(n){return this.poolManager&&this.poolManager.free(n),oy(this.children.list,n),this.lastAppendedChildren.length=0,this.dirty=!0,this},nf=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},ly=function(){return this.lastAppendedChildren},uy=function(){return this.children.list};const fy={setTint(n){return this.tint=n,this.tintFill=!1,this},setTintFill(n){return this.tint=n,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var Hv={setTexture:Wv,resize:sf,setSize:sf,addChild:ay,removeChild:hy,removeChildren:nf,clear:nf,getLastAppendedChildren:ly,getChildren:uy};Object.assign(Hv,fy);class si{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const dy=Phaser.Utils.Objects.GetValue;var cy={};class vy{constructor(t){this.pools=dy(t,"pools",cy)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new si),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,a=t.length;e<a;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const py=Phaser.GameObjects.GameObject,gy=Phaser.Utils.Objects.IsPlainObject,mn=Phaser.Utils.Objects.GetValue,xy=Phaser.Structs.List,my=Phaser.Utils.Array.StableSort;class kv extends py{constructor(t,e,a,i,s,h){gy(e)&&(h=e,e=mn(h,"x",0),a=mn(h,"y",0),i=mn(h,"texture"),s=mn(h,"frame")),e===void 0&&(e=0),a===void 0&&(a=0),super(t,"rexBlitter"),this.children=new xy,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var r=mn(h,"reuseBob",!0);this.poolManager=r?new vy(h):void 0,this.setTexture(i,s).setPosition(e,a).setOrigin(0,0).clearTint().initPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,e=this.children.list,a=0,i=e.length;a<i;a++){var s=e[a];yy(s)&&(this.renderList.push(s),t||(t=s.depth!==0))}t&&my(this.renderList,Ty),this.displayListDirty=!1}return this.renderList}}var yy=function(n){return n.active&&n.visible&&n.alpha>0},Ty=function(n,t){return n._depth-t._depth};const be=Phaser.GameObjects.Components;Phaser.Class.mixin(kv,[be.Alpha,be.BlendMode,be.ComputedSize,be.Depth,be.GetBounds,be.Mask,be.Origin,be.Pipeline,be.ScrollFactor,be.Transform,be.Visible,ry,Hv]);const $v="image";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Bt=function(n,t,e){if(!n||typeof n=="number")return e;if(n.hasOwnProperty(t))return n[t];if(t.indexOf(".")!==-1){for(var a=t.split("."),i=n,s=e,h=0;h<a.length;h++)if(i.hasOwnProperty(a[h]))s=i[a[h]],i=i[a[h]];else{s=e;break}return s}else return e},Ki=function(n){if(typeof n!="object"||n===null)return n;if(Array.isArray(n))n.length=0;else for(var t in n)delete n[t];return n};const Aa={enableData(){return this.data===void 0&&(this.data={}),this},setData(n,t){if(this.enableData(),arguments.length===1){var e=n;for(n in e)this.data[n]=e[n]}else this.data[n]=t;return this},getData(n,t){return this.enableData(),n===void 0?this.data:Bt(this.data,n,t)},incData(n,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(n,this.getData(n,e)+t),this},mulData(n,t,e){return e===void 0&&(e=0),this.enableData(),this.setData(n,this.getData(n,e)*t),this},clearData(){return this.data&&Ki(this.data),this}};class Kv{constructor(t,e){this.type=e,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}}Object.assign(Kv.prototype,Aa);const Cy=Phaser.Math.DegToRad,Sy=Phaser.Math.RadToDeg,Fs=Phaser.Utils.Objects.GetValue;class Ey extends Kv{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setRotation(t){return this.rotation=t,this}get angle(){return Sy(this.rotation)}set angle(t){this.rotation=Cy(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,e){return e===void 0&&(e=!1),this.displayWidth=t,e&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,e){return e===void 0&&(e=!1),this.displayHeight=t,e&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,e){return e===void 0&&(e=t),this.setOriginX(t).setOriginY(e),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Fs(t,"width",void 0),a=Fs(t,"height",void 0),i=Fs(t,"scale",void 0),s=Fs(t,"scaleX",i),h=Fs(t,"scaleY",i);e!==void 0?a===void 0&&h===void 0?this.setWidth(e,!0):this.setWidth(e):s!==void 0?this.setScaleX(s):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),a!==void 0?e===void 0&&s===void 0?this.setHeight(a,!0):this.setHeight(a):h!==void 0?this.setScaleY(h):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var r=Fs(t,"origin",void 0);return r!==void 0?this.setOrigin(r):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,e,a,i,s,h,r,o){}canvasRender(t,e,a,i){}}const Py=Phaser.GameObjects.Components.TransformMatrix,My=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var Ge=new Py,Ay=function(n,t,e,a,i,s,h,r){var o=this._width,u=this._height,l=o*this.originX,f=u*this.originY,v=this.x-a,d=this.y-i,c=1,p=1;this.flipX&&(v+=o-l*2,c=-1),this.flipY&&(d+=u-f*2,p=-1),Ge.applyITRS(v,d,this.rotation,this.scaleX*c,this.scaleY*p),t.multiply(Ge,Ge);var g=-l,x=-f,m=g+o,y=x+u,T=Ge.getXRound(g,x,r),C=Ge.getXRound(g,y,r),S=Ge.getXRound(m,y,r),E=Ge.getXRound(m,x,r),P=Ge.getYRound(g,x,r),M=Ge.getYRound(g,y,r),O=Ge.getYRound(m,y,r),A=Ge.getYRound(m,x,r),R=this.frame.u0,F=this.frame.v0,I=this.frame.u1,D=this.frame.v1,N=My(this.tint,this.alpha*e);n.batchQuad(this.parent,T,P,C,M,S,O,E,A,R,F,I,D,N,N,N,N,this.tintFill,s,h)},Oy=function(n,t,e,a){n.save();var i=this._width,s=this._height,h=i*this.originX,r=s*this.originY,o=this.x-h,u=this.y-r,l=1,f=1;this.flipX&&(o+=i,l=-1),this.flipY&&(u+=s,f=-1),a&&(o=Math.round(o),u=Math.round(u)),n.translate(o,u),n.rotate(this.rotation),n.scale(this.scaleX*l,this.scaleY*f);var v=this.frame;n.drawImage(v.source.image,v.cutX,v.cutY,i,s,0,0,i,s),n.restore()};const Ry=Phaser.Utils.Objects.IsPlainObject;class Zv extends Ey{constructor(t,e){super(t,$v),this.setFrame(e)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!Ry(t)&&(t=this.parent.texture.get(t)),this.frame=t,this._width=t?t.width:0,this._height=t?t.height:0,this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}reset(){return super.reset(),this.resetFlip().resetTint().setFrame(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}}var Ly={webglRender:Ay,canvasRender:Oy};Object.assign(Zv.prototype,Ly);var Jv=function(n,t){typeof t=="string"&&(t={frame:t});var e=n.poolManager?n.poolManager.allocate($v):null;return e===null?e=new Zv(n):e.setParent(n).setActive(),e.modifyPorperties(t),n.addChild(e),e},Fy=function(n,t,e,a,i,s){Jv(this,{frame:t,x:e,y:a,width:i,height:s})},Iy=function(n,t,e,a,i,s){var h=this.texture.get(t),r=h.width,o=h.height,u=Math.floor(i/r),l=Math.floor(s/o);e+=(i-u*r)/2,a+=(s-l*o)/2;for(var f=0;f<u;f++)for(var v=0;v<l;v++)Jv(this,{frame:t,x:e+f*r,y:a+v*o})};const wy={_drawImage:Fy,_drawTileSprite:Iy};class Oa extends zv(kv,"rexNinePatch2"){setTexture(t,e,a,i){return Wv.call(this,t,"__BASE"),this.columns?(super.setTexture(t,e,a,i),this):this}}Object.assign(Oa.prototype,wy);_.register("ninePatch2",function(n,t,e,a,i,s,h,r){var o=new Oa(this.scene,n,t,e,a,i,s,h,r);return this.scene.add.existing(o),o});q(window,"RexPlugins.UI.NinePatch2",Oa);const zi=Phaser.Utils.Objects.GetValue;class jv{constructor(t,e,a,i,s){t===void 0&&(t=0),e===void 0&&(e=t),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,e,a,i,s)}setTo(t,e,a,i,s){return this.setPosition(t,e),this.setRadius(s),this.setSize(a,i),this}setPosition(t,e){return this.x=t,this.y=e,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,e){return this.width=t,this.height=e,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var e,a;typeof t=="number"?(e=t,a=t):(e=zi(t,"x",0),a=zi(t,"y",0));var i=this.cornerRadius;i.tl=yr(zi(t,"tl",void 0),e,a),i.tr=yr(zi(t,"tr",void 0),e,a),i.bl=yr(zi(t,"bl",void 0),e,a),i.br=yr(zi(t,"br",void 0),e,a)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Tr(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Tr(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Tr(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Tr(this.cornerRadius.br,t)}}var yr=function(n,t,e){return n===void 0?n={x:t,y:e}:typeof n=="number"&&(n={x:n,y:n}),Qv(n),n},Tr=function(n,t){typeof t=="number"?(n.x=t,n.y=t):(n.x=zi(t,"x",0),n.y=zi(t,"y",0)),Qv(n)},Qv=function(n){n.convex=n.x>=0||n.y>=0,n.x=Math.abs(n.x),n.y=Math.abs(n.y)},ni=function(n,t,e){var a=e.length;if(a>=2){var i=e[a-2],s=e[a-1];if(n===i&&t===s)return e}return e.push(n,t),e};const rf=Phaser.Math.DegToRad;var Wt=function(n,t,e,a,i,s,h,r,o){h&&s>i?s-=360:!h&&s<i&&(s+=360);var u=s-i,l=rf(u)/r;i=rf(i);for(var f=0;f<=r;f++){var v=i+l*f,d=n+e*Math.cos(v),c=t+a*Math.sin(v);ni(d,c,o)}return o},By=Phaser.Renderer.WebGL.Utils,qv=function(n,t,e,a,i,s){for(var h=By.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*a),r=e.pathData,o=e.pathIndexes,u=0;u<o.length;u+=3){var l=o[u]*2,f=o[u+1]*2,v=o[u+2]*2,d=r[l+0]-i,c=r[l+1]-s,p=r[f+0]-i,g=r[f+1]-s,x=r[v+0]-i,m=r[v+1]-s,y=t.getX(d,c),T=t.getY(d,c),C=t.getX(p,g),S=t.getY(p,g),E=t.getX(x,m),P=t.getY(x,m);n.batchTri(e,y,T,C,S,E,P,0,0,1,1,h,h,h,2)}},Dy=Phaser.Renderer.WebGL.Utils,Ra=function(n,t,e,a,i){var s=n.strokeTint,h=Dy.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*e);s.TL=h,s.TR=h,s.BL=h,s.BR=h;var r=t.pathData,o=r.length-1,u=t.lineWidth,l=u/2,f=r[0]-a,v=r[1]-i;t.closePath||(o-=2);for(var d=2;d<o;d+=2){var c=r[d]-a,p=r[d+1]-i;n.batchLine(f,v,c,p,l,l,u,d-2,t.closePath?d===o-1:!1),f=c,v=p}};const by=Phaser.GameObjects.GetCalcMatrix;var Gy=function(n,t,e,a){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=n.pipelines.set(t.pipeline),s=by(t,e,a),h=i.calcMatrix.copyFrom(s.calc),r=t._displayOriginX,o=t._displayOriginY,u=e.alpha*t.alpha;n.pipelines.preBatch(t),t.isFilled&&qv(i,h,t,u,r,o),t.isStroked&&Ra(i,t,u,r,o),n.pipelines.postBatch(t)},er=function(n,t,e,a){var i=e||t.fillColor,s=a||t.fillAlpha,h=(i&16711680)>>>16,r=(i&65280)>>>8,o=i&255;n.fillStyle="rgba("+h+","+r+","+o+","+s+")"},ir=function(n,t,e,a){var i=e||t.strokeColor,s=a||t.strokeAlpha,h=(i&16711680)>>>16,r=(i&65280)>>>8,o=i&255;n.strokeStyle="rgba("+h+","+r+","+o+","+s+")",n.lineWidth=t.lineWidth};const Ny=Phaser.Renderer.Canvas.SetTransform;var Yy=function(n,t,e,a){t.dirty&&(t.updateData(),t.dirty=!1),e.addToRenderList(t);var i=n.currentContext;if(Ny(n,i,t,e,a)){var s=t._displayOriginX,h=t._displayOriginY,r=t.pathData,o=r.length-1,u=r[0]-s,l=r[1]-h;i.beginPath(),i.moveTo(u,l),t.closePath||(o-=2);for(var f=2;f<o;f+=2){var v=r[f]-s,d=r[f+1]-h;i.lineTo(v,d)}i.closePath(),t.isFilled&&(er(i,t),i.fill()),t.isStroked&&(ir(i,t),i.stroke()),i.restore()}};const Vy={renderWebGL:Gy,renderCanvas:Yy},zy=Phaser.GameObjects.Shape,Uy=Phaser.Utils.Objects.IsPlainObject,af=Phaser.Utils.Objects.GetValue,Xy=Phaser.Geom.Polygon.Earcut;class Ei extends zy{constructor(t,e,a,i,s,h,r,o){var u,l,f,v;if(Uy(e)){var d=e;e=d.x,a=d.y,i=d.width,s=d.height,h=d.radius,r=d.color,o=d.alpha,u=d.strokeColor,l=d.strokeAlpha,f=d.strokeWidth,v=d.shape}e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=1),s===void 0&&(s=i),h===void 0&&(h=0),v===void 0&&(v=0);var c=new jv;if(super(t,"rexRoundRectangleShape",c),this.setShapeType(v),this.shapeType===0){var p=af(h,"radius",h);c.setTo(0,0,i,s,p)}else{var p={x:i/2,y:s/2};c.setTo(0,0,i,s,p)}var g=af(h,"iteration",void 0);this.setIteration(g),this.setPosition(e,a),this.setFillStyle(r,o),u!==void 0&&f===void 0&&(f=2),this.setStrokeStyle(f,u,l),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,e=this.pathData;e.length=0;var a=t.width,i=t.height,s=t.cornerRadius,h,r=this.iteration+1;if(h=s.tl,Cr(h))if(h.convex){var o=h.x,u=h.y;Wt(o,u,h.x,h.y,180,270,!1,r,e)}else{var o=0,u=0;Wt(o,u,h.x,h.y,90,0,!0,r,e)}else ni(0,0,e);if(h=s.tr,Cr(h))if(h.convex){var o=a-h.x,u=h.y;Wt(o,u,h.x,h.y,270,360,!1,r,e)}else{var o=a,u=0;Wt(o,u,h.x,h.y,180,90,!0,r,e)}else ni(a,0,e);if(h=s.br,Cr(h))if(h.convex){var o=a-h.x,u=i-h.y;Wt(o,u,h.x,h.y,0,90,!1,r,e)}else{var o=a,u=i;Wt(o,u,h.x,h.y,270,180,!0,r,e)}else ni(a,i,e);if(h=s.bl,Cr(h))if(h.convex){var o=h.x,u=i-h.y;Wt(o,u,h.x,h.y,90,180,!1,r,e)}else{var o=0,u=i;Wt(o,u,h.x,h.y,360,270,!0,r,e)}else ni(0,i,e);return e.push(e[0],e[1]),this.pathIndexes=Xy(e),this}setShapeType(t){return typeof t=="string"&&(t=Wy[t]),this.shapeType=t,this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,e){if(e===void 0&&(e=t),this.geom.width===t&&this.geom.height===e)return this;this.geom.setSize(t,e),this.shapeType===1&&this.setRadius({x:t/2,y:e/2}),this.updateDisplayOrigin(),this.dirty=!0;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var Cr=function(n){return n.x!==0&&n.y!==0};const Wy={rectangle:0,circle:1};Object.assign(Ei.prototype,Vy);_.register("roundRectangle",function(n,t,e,a,i,s,h){var r=new Ei(this.scene,n,t,e,a,i,s,h);return this.scene.add.existing(r),r});q(window,"RexPlugins.UI.RoundRectangle",Ei);const Hy=Phaser.Renderer.WebGL.Utils;var ky=function(n,t,e,a){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,s=i.width,h=i.height,r=Hy.getTintAppendFloatAlpha,o=n.pipelines.set(t.pipeline,t),u=o.setTexture2D(i.glTexture,t);n.pipelines.preBatch(t),o.batchTexture(t,i.glTexture,s,h,t.x,t.y,s/t.resolution,h/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,s,h,r(t.tintTopLeft,e.alpha*t._alphaTL),r(t.tintTopRight,e.alpha*t._alphaTR),r(t.tintBottomLeft,e.alpha*t._alphaBL),r(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,a,!1,u),n.pipelines.postBatch(t)}},$y=function(n,t,e,a){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(e.addToRenderList(t),n.batchSprite(t,t.frame,e,a))};const Ky={renderWebGL:ky,renderCanvas:$y},Zy=Phaser.Display.Color,Jy={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(n){return this.context.fillStyle=n,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},loadFromURL(n,t){var e=this,a=new Image;return a.onload=function(){e.width!==a.width||e.height!==a.height?e.resize(a.width,a.height):e.clear(),e.context.drawImage(a,0,0),e.updateTexture(),t&&t(),a.onload=null,a.src="",a.remove()},a.src=n,this},loadFromURLPromise(n){var t=this;return new Promise(function(e,a){t.loadFromURL(n,e)})},drawFrame(n,t,e,a,i,s){var h=this.scene.sys.textures.getFrame(n,t);return h?(e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=h.cutWidth),s===void 0&&(s=h.cutHeight),this.context.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,e,a,i,s),this.dirty=!0,this):this},getDataURL(n,t){return this.canvas.toDataURL(n,t)},getPixel(n,t,e){e===void 0&&(e=new Zy);var a=this.context.getImageData(n,t,1,1);return e.setTo(a.data[0],a.data[1],a.data[2],a.data[3]),e},setPixel(n,t,e,a,i,s){if(typeof e!="number"){var h=e;e=h.red,a=h.green,i=h.blue,s=h.alpha}s===void 0&&(s=e!==0||a!==0||i!==0?255:0);var r=this.context.createImageData(1,1);return r.data[0]=e,r.data[1]=a,r.data[2]=i,r.data[3]=s,this.context.putImageData(r,n,t),this.dirty=!0,this}};var _v=function(n,t,e,a,i,s,h){var r=n.sys.textures,o=n.renderer;a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=t.width),h===void 0&&(h=t.height);var u;r.exists(e)?u=r.get(e):u=r.createCanvas(e,s,h);var l=u.getSourceImage();l.width!==s&&(l.width=s),l.height!==h&&(l.height=h);var f=l.getContext("2d");f.clearRect(0,0,s,h),f.drawImage(t,a,i,s,h),o.gl&&u&&o.canvasToTexture(l,u.source[0].glTexture,!0,0)};const jy={updateTexture(n,t){n&&(t?n.call(t,this.canvas,this.context):n(this.canvas,this.context)),(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var e=this.input;return e&&!e.customHitArea&&(e.hitArea.width=this.width,e.hitArea.height=this.height),this},generateTexture(n,t,e,a,i){var s=this.canvas;return a===void 0?a=s.width:a*=this.resolution,i===void 0?i=s.height:i*=this.resolution,_v(this.scene,s,n,t,e,a,i),this},loadTexture(n,t){var e=this.scene.sys.textures.getFrame(n,t);return e?(this.width!==e.cutWidth||this.height!==e.cutHeight?this.setSize(e.cutWidth,e.cutHeight):this.clear(),this.drawFrame(n,t),this.dirty=!0,this):this}},of=Phaser.Display.Canvas.CanvasPool,Qy=Phaser.GameObjects.GameObject;class Me extends Qy{constructor(t,e,a,i,s){e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=1),s===void 0&&(s=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this.resolution=1,this._width=i,this._height=s,i=Math.max(Math.ceil(i*this.resolution),1),s=Math.max(Math.ceil(s*this.resolution),1),this.canvas=of.create(this,i,s),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(e,a),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){of.remove(this.canvas),this.texture.destroy(),this.canvas=null,this.context=null}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,e){return this._width===t&&this._height===e?this:(this._width=t,this._height=e,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),e=Math.max(Math.ceil(e*this.resolution),1),this.canvas.width=t,this.canvas.height=e,this.frame.setSize(t,e),this.dirty=!0,this)}setSize(t,e){return this.setCanvasSize(t,e),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,e){return this.displayWidth=t,this.displayHeight=e,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,e){return this.setSize(t,e),this}}const me=Phaser.GameObjects.Components;Phaser.Class.mixin(Me,[me.Alpha,me.BlendMode,me.Crop,me.Depth,me.Flip,me.GetBounds,me.Mask,me.Origin,me.Pipeline,me.ScrollFactor,me.Tint,me.Transform,me.Visible,Ky,Jy,jy]);const qy=Phaser.Utils.String.Pad;var ut=function(n,t,e){if(n==null)return n;switch(typeof n){case"string":return n;case"number":return`#${qy(Math.floor(n).toString(16),6,"0",1)}`;case"function":return n(t,e);case"object":return n.hasOwnProperty("r")?n.hasOwnProperty("a")?`rgba(${n.r},${n.g},${n.b},${n.a})`:`rgb(${n.r},${n.g},${n.b})`:n.hasOwnProperty("h")?n.hasOwnProperty("a")?`hsla(${n.h},${n.s},${n.l},${n.a})`:`hsl(${n.h},${n.s},${n.l})`:n;default:return n}};const hf=Phaser.Math.DegToRad;var tp=function(n,t,e,a,i,s,h){var r=new jv(t,e,a,i,s),o=r.minWidth,u=r.minHeight,l=a>=o?1:a/o,f=i>=u?1:i/u,v=r.cornerRadius,d,c,p,g,x;n.save(),n.beginPath(),n.translate(t,e),d=v.tl,Er(d)?(c=d.x*l,p=d.y*f,Sr(d)?(g=c,x=p,Li(n,g,x,c,p,180,270,!1,h)):(g=0,x=0,Li(n,g,x,c,p,90,0,!0,h))):n.lineTo(0,0),d=v.tr,Er(d)?(c=d.x*l,p=d.y*f,Sr(d)?(g=a-c,x=p,Li(n,g,x,c,p,270,360,!1,h)):(g=a,x=0,Li(n,g,x,c,p,180,90,!0,h))):n.lineTo(a,0),d=v.br,Er(d)?(c=d.x*l,p=d.y*f,Sr(d)?(g=a-c,x=i-p,Li(n,g,x,c,p,0,90,!1,h)):(g=a,x=i,Li(n,g,x,c,p,270,180,!0,h))):n.lineTo(a,i),d=v.bl,Er(d)?(c=d.x*l,p=d.y*f,Sr(d)?(g=c,x=i-p,Li(n,g,x,c,p,90,180,!1,h)):(g=0,x=i,Li(n,g,x,c,p,360,270,!0,h))):n.lineTo(0,i),n.closePath(),n.restore()},Sr=function(n){return!n.hasOwnProperty("convex")||n.convex},Er=function(n){return n.x>0&&n.y>0},Li=function(n,t,e,a,i,s,h,r,o){if(r&&h>s?h-=360:!r&&h<s&&(h+=360),s=hf(s),h=hf(h),o==null)n.ellipse(t,e,a,i,0,s,h,r);else{o+=1;for(var u,l,f,v=(h-s)/o,d=0;d<=o;d++)f=s+v*d,u=t+a*Math.cos(f),l=e+i*Math.sin(f),n.lineTo(u,l)}},_y=function(n,t,e,a,i,s,h,r,o,u,l,f,v){if(tp(t,e,a,i,s,h,v),r!=null){if(l!=null){var d;f?d=t.createLinearGradient(0,0,i,0):d=t.createLinearGradient(0,0,0,s),d.addColorStop(0,r),d.addColorStop(1,l),r=d}t.fillStyle=r,t.fill()}o!=null&&u>0&&(t.strokeStyle=o,t.lineWidth=u,t.stroke())},cl=function(n,t,e,a,i,s,h,r){if(!(t==null&&e==null)){var o=n.canvas.width,u=n.canvas.height;e==null&&(a=0);var l=a/2;o-=a,u-=a,_y(n.canvas,n.context,l,l,o,u,i,t,e,a,s,h,r)}},tT=function(){cl(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)};const lf=Phaser.Utils.Objects.GetValue;class ep extends Me{constructor(t,e,a,i,s,h,r,o,u,l,f){e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=1),s===void 0&&(s=i),h===void 0&&(h=0),super(t,e,a,i,s),this.type="rexRoundRectangleCanvas";var v=lf(h,"radius",h),d=lf(h,"iteration",void 0);this.setRadius(v),this.setIteration(d),this.setFillStyle(r,l,f),this.setStrokeStyle(o,u)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=ut(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=ut(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,e,a){return a===void 0&&(a=!0),this.fillStyle=t,this.fillColor2=e,this.isHorizontalGradient=a,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=ut(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,e){return this.strokeStyle=t,this.lineWidth=e,this}updateTexture(){return this.clear(),tT.call(this),super.updateTexture(),this}}_.register("roundRectangleCanvas",function(n,t,e,a,i,s,h,r,o,u){var l=new ep(this.scene,n,t,e,a,i,s,h,r,o,u);return this.scene.add.existing(l),l});q(window,"RexPlugins.UI.RoundRectangleCanvas",ep);/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var eT=Phaser.Renderer.WebGL.Utils,iT=function(n,t,e,a){if(!(t.width===0||t.height===0)){e.addToRenderList(t);var i=t.frame,s=i.width,h=i.height,r=eT.getTintAppendFloatAlpha,o=n.pipelines.set(t.pipeline,t),u=o.setTexture2D(i.glTexture,t);n.pipelines.preBatch(t),o.batchTexture(t,i.glTexture,s,h,t.x,t.y,s/t.style.resolution,h/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,s,h,r(t.tintTopLeft,e.alpha*t._alphaTL),r(t.tintTopRight,e.alpha*t._alphaTR),r(t.tintBottomLeft,e.alpha*t._alphaBL),r(t.tintBottomRight,e.alpha*t._alphaBR),t.tintFill,0,0,e,a,!1,u),n.pipelines.postBatch(t)}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var sT=function(n,t,e,a){t.width===0||t.height===0||(e.addToRenderList(t),n.batchSprite(t,t.frame,e,a))};const nT={renderWebGL:iT,renderCanvas:sT},co=Phaser.Display.Canvas.CanvasPool;var rT=function(n,t,e){e===void 0&&(e={});var a=co.create(this),i=a.getContext("2d");n.syncFont(a,i);var s=i.measureText(t),h=Math.ceil(s.width*n.baselineX),r=h,o=2*r;if(r=r*n.baselineY|0,a.width=h,a.height=o,i.fillStyle="#f00",i.fillRect(0,0,h,o),i.font=n._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n.testString,0,r),e.left=0,h===0||o===0||!i.getImageData(0,0,h,o))return co.remove(a),e;for(var u=i.getImageData(0,0,h,o).data,l=!1,f=0;f<h;f++){for(var v=0;v<o;v++){var d=(v*h+f)*4;if(u[d]!==255){e.left=f,l=!0;break}}if(l)break}return co.remove(a),e};const aT=Phaser.GameObjects.GameObject;class ip extends aT{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,e){return this.style.setFixedSize(t,e)}setBackgroundColor(t,e,a){return this.style.setBackgroundColor(t,e,a)}setBackgroundStrokeColor(t,e){return this.style.setBackgroundStrokeColor(t,e)}setBackgroundCornerRadius(t,e){return this.style.setBackgroundCornerRadius(t,e)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,e){return this.style.setStroke(t,e)}setShadow(t,e,a,i,s,h){return this.style.setShadow(t,e,a,i,s,h)}setShadowOffset(t,e){return this.style.setShadowOffset(t,e)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}setLineSpacing(t){return this.style.setLineSpacing(t)}set lineSpacing(t){this.setLineSpacing(t)}get lineSpacing(){return this.style.lineSpacing}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,e){return this.style.setTextMetrics(t,e)}measureTextMargins(t,e){return rT(this.style,t,e)}}const le=Phaser.GameObjects.Components;Phaser.Class.mixin(ip,[le.Alpha,le.BlendMode,le.ComputedSize,le.Crop,le.Depth,le.Flip,le.GetBounds,le.Mask,le.Origin,le.Pipeline,le.ScrollFactor,le.Tint,le.Transform,le.Visible,nT]);var oT={backgroundColor:["backgroundColor",null,ut],backgroundColor2:["backgroundColor2",null,ut],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,ut],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",ut],stroke:["stroke","#fff",ut],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",ut],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",ut],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */const Pr=Phaser.Display.Canvas.CanvasPool;var uf=function(n){var t=Pr.create(this),e=t.getContext("2d");n.syncFont(t,e);var a=e.measureText(n.testString);if("actualBoundingBoxAscent"in a){var i=a.actualBoundingBoxAscent,s=a.actualBoundingBoxDescent,u={ascent:i,descent:s,fontSize:i+s};return Pr.remove(t),u}var h=Math.ceil(a.width*n.baselineX),r=h,o=2*r;r=r*n.baselineY|0,t.width=h,t.height=o,e.fillStyle="#f00",e.fillRect(0,0,h,o),e.font=n._font,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText(n.testString,0,r);var u={ascent:0,descent:0,fontSize:0};if(!e.getImageData(0,0,h,o))return u.ascent=r,u.descent=r+6,u.fontSize=u.ascent+u.descent,Pr.remove(t),u;var l=e.getImageData(0,0,h,o).data,f=l.length,v=h*4,d,c,p=0,g=!1;for(d=0;d<r;d++){for(c=0;c<v;c+=4)if(l[p+c]!==255){g=!0;break}if(!g)p+=v;else break}for(u.ascent=r-d,p=f-v,g=!1,d=o;d>r;d--){for(c=0;c<v;c+=4)if(l[p+c]!==255){g=!0;break}if(!g)p-=v;else break}return u.descent=d-r,u.fontSize=u.ascent+u.descent,Pr.remove(t),u},Ut={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,SPLITREGEXP:/(?:\r\n|\r|\n)/};const hT=Phaser.Utils.Objects.GetAdvancedValue,ye=Phaser.Utils.Objects.GetValue;class vl{constructor(t,e,a){this.parent=t,a===void 0&&(a=oT),this.propertyMap=a,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.lineSpacing,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(e,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==Ut.NO_WRAP&&this.wrapWidth===0}setStyle(t,e,a){if(e===void 0&&(e=!0),a===void 0&&(a=!1),t&&t.hasOwnProperty("wrap")){var i=t.wrap;if(i.hasOwnProperty("mode")){var s=i.mode;typeof s=="string"&&(i.mode=ff[s])}else i.hasOwnProperty("width")&&(i.mode=1)}t&&t.rtl&&a&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var h=this.propertyMap;for(var r in h){var o=h[r],u=o[0],l=a?o[1]:this[r],f=o[2];if(r==="wrapCallback"||r==="wrapCallbackScope")this[r]=ye(t,u,l);else{var v=hT(t,u,l);f&&(v=f(v)),this[r]=v}}var d=ye(t,"font",null);d===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=d;var c=ye(t,"fill",null);c!==null&&(this.color=ut(c));var p=ye(t,"metrics",!1);return p?this.metrics={ascent:ye(p,"ascent",0),descent:ye(p,"descent",0),fontSize:ye(p,"fontSize",0)}:(e||!this.metrics)&&(this.metrics=uf(this)),e?this.parent.updateText():this.parent}syncFont(t,e){e.font=this._font}syncStyle(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"}syncShadow(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=uf(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=ye(t,"fontFamily","Courier"),this.fontSize=ye(t,"fontSize","16px"),this.fontStyle=ye(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setLineSpacing(t){return this.lineSpacing=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,e,a){return a===void 0&&(a=!0),this.backgroundColor=ut(t,this.parent.canvas,this.parent.context),this.backgroundColor2=ut(e,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=a,this.update(!1)}setBackgroundStrokeColor(t,e){return this.backgroundStrokeColor=ut(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=e,this.update(!1)}setBackgroundCornerRadius(t,e){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=e,this.update(!1)}setFill(t){return this.color=ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,e){return t===void 0?this.strokeThickness=0:(e===void 0&&(e=this.strokeThickness),this.stroke=ut(t,this.parent.canvas,this.parent.context),this.strokeThickness=e),this.update(!0)}setShadow(t,e,a,i,s,h){return t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a="#000"),i===void 0&&(i=0),s===void 0&&(s=!1),h===void 0&&(h=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=ut(a,this.parent.canvas,this.parent.context),this.shadowBlur=i,this.shadowStroke=s,this.shadowFill=h,this.update(!1)}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,e,a){return t===void 0&&(t="#000"),e===void 0&&(e=0),a===void 0&&(a=0),this.underlineColor=ut(t,this.parent.canvas,this.parent.context),this.underlineThickness=e,this.underlineOffset=a,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=ut(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=ff[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,e){return t===void 0&&(t="left"),e===void 0&&(e="top"),this.halign=t,this.valign=e,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,e){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,e&&(typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=ye(e,"fontFamily",this.fontFamily),this.fontSize=ye(e,"fontSize",this.fontSize),this.fontStyle=ye(e,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.strokeThickness+this.lineSpacing}toJSON(){var t={},e=this.propertyMap;for(var a in e)t[a]=this[a];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}}const ff={none:Ut.NO_WRAP,word:Ut.WORD_WRAP,char:Ut.CHAR_WRAP,character:Ut.CHAR_WRAP},lT={draw(n,t,e,a){var i=this.penManager;this.hitAreaManager.clear();var s=this.context;s.save();var h=this.defaultStyle;this.clear(),cl(this,h.backgroundColor,h.backgroundStrokeColor,h.backgroundStrokeLineWidth,h.backgroundCornerRadius,h.backgroundColor2,h.backgroundHorizontalGradient,h.backgroundCornerIteration),n+=this.startXOffset,t+=this.startYOffset;var r=h.halign,o=h.valign,u,l=h.lineHeight,f=i.lines,v=f.length,d=h.maxLines,c,p,g;d>0&&v>d?(c=d,o==="center"?p=Math.floor((v-c)/2):o==="bottom"?p=v-c:p=0):(c=v,p=0),g=p+c;var x,m,y=this.rtl,T=y?this.parent.width:void 0;o==="center"?m=Math.max((a-c*l)/2,0):o==="bottom"?m=Math.max(a-c*l-2,0):m=0,m+=t;for(var C=p;C<g;C++)if(u=i.getLineWidth(C),u!==0){for(var S=f[C],E=S.length,P=r,M=0;M<E;M++){var O=S[M].prop.align;if(O!==void 0){P=O;break}}P==="center"?x=(e-u)/2:P==="right"?x=y?0:e-u:x=y?e-u:0,x+=n;for(var M=0;M<E;M++)this.drawPen(S[M],x,m,T)}s.restore()},drawPen(n,t,e,a){t+=n.x,e+=n.y+(n.prop.y||0),a!==void 0&&(t=a-t);var i=this.canvas,s=this.context;s.save();var h=this.parser.propToContextStyle(this.defaultStyle,n.prop);h.buildFont(),h.syncFont(i,s),h.syncStyle(i,s),h.underlineThickness>0&&n.width>0&&this.drawUnderline(t,e,n.width,h),n.isTextPen&&this.drawText(t,e,n.text,h),n.isImagePen&&this.drawImage(t,e,n.prop.img,h),s.restore(),n.hasAreaMarker&&n.width>0&&this.hitAreaManager.add(n.prop.area,t,e-this.startYOffset,n.width,this.defaultStyle.lineHeight)},clear(){var n=this.canvas;this.context.clearRect(0,0,n.width,n.height)},drawUnderline(n,t,e,a){t+=a.underlineOffset-a.underlineThickness/2,this.autoRound&&(n=Math.round(n),t=Math.round(t));var i=this.context,s=i.lineCap;i.lineCap="butt",i.strokeStyle=a.underlineColor,i.lineWidth=a.underlineThickness,i.beginPath(),i.moveTo(n,t),i.lineTo(n+e,t),i.stroke(),i.lineCap=s},drawText(n,t,e,a){this.autoRound&&(n=Math.round(n),t=Math.round(t));var i=this.context;a.stroke&&a.stroke!=="none"&&a.strokeThickness>0&&(a.syncShadow(i,a.shadowStroke),i.strokeText(e,n,t)),a.color&&a.color!=="none"&&(a.syncShadow(i,a.shadowFill),i.fillText(e,n,t))},drawImage(n,t,e,a){t-=this.startYOffset,this.parent.imageManager.draw(e,this.context,n,t,this.autoRound)}},as=Phaser.Utils.Objects.GetValue,uT=Ut.NO_NEWLINE,df=Ut.RAW_NEWLINE;class fT{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=as(t,"text",""),this.x=as(t,"x",0),this.y=as(t,"y",0),this.width=as(t,"width",0);var e=as(t,"prop",null);e===null&&(e={}),this.prop=e,this.newLineMode=as(t,"newLineMode",0),this.startIndex=as(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===df&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==uT&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===df&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area}}var Cs=function(n,t){var e=Array.isArray(n);if(t===void 0?t=e?[]:{}:Ki(t),e){t.length=n.length;for(var a=0,i=n.length;a<i;a++)t[a]=n[a]}else for(var s in n)t[s]=n[s];return t};const cf=Phaser.Utils.Objects.GetFastValue,vf=Ut.NO_NEWLINE,dT=Ut.WRAPPED_NEWLINE;class pl{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=cf(t,"tagToText",ve),this.tagToTextScope=cf(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,e=this.lines.length;t<e;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,e,a,i,s,h){var r=this.pensPool.pop();return r==null&&(r=new fT),os.text=t,os.x=e,os.y=a,os.width=i,os.prop=s,os.newLineMode=h,r.resetFromJSON(os),this.addPen(r),this}addImagePen(t,e,a,i){return this.addTextPen("",t,e,a,i,vf),this}addNewLinePen(){var t=this.lastPen,e=t?t.lastX:0,a=t?t.y:0,i=t?Cs(t.prop):null;return this.addTextPen("",e,a,0,i,dT),this}addPen(t){var e=this.lastPen;e==null?t.startIndex=0:t.startIndex=e.endIndex,this.pens.push(t);var a=this.lastLine;a==null&&(a=this.linesPool.pop()||[],this.lines.push(a)),a.push(t),t.newLineMode!==vf&&(a=this.linesPool.pop()||[],this.lines.push(a)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new pl),t.clear();for(var e=0,a=this.lines.length;e<a;e++)for(var i=this.lines[e],s=0,h=i.length;s<h;s++){var r=i[s];t.addPen(r.text,r.x,r.y,r.width,Cs(r.prop),r.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var e=this.lines[t];return e&&e[0]?e[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var e,a=!1,i;for(e=t;e>=0&&(i=this.lines[e],a=i!=null&&i.length>0,!a);e--);if(!a)return 0;var s=i[i.length-1];return s.endIndex}getLineWidth(t){var e=this.lines[t];if(!e)return 0;var a=e[e.length-1];if(a==null)return 0;var i=a.lastX;return i}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,e=0,a=0,i=this.lines.length;a<i;a++)t=this.getLineWidth(a),t>e&&(e=t);return this.maxLinesWidth=e,e}getLineWidths(){for(var t=[],e=0,a=this.lines.length;e<a;e++)t.push(this.getLineWidth(e));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",e=this.pens,a=0,i=e.length;a<i;a++)t+=e[a].plainText;return t}get rawTextLength(){for(var t=0,e=this.pens,a=0,i=this.pens.length;a<i;a++)t+=e[a].rawTextLength;return t}getSliceTagText(t,e,a){if(t===void 0&&(t=0),e===void 0){var i=this.lastPen;if(i==null)return"";e=i.endIndex}a===void 0&&(a=!1);for(var s="",h,r,o,u,l,f,v,d=0,c=this.pens.length;d<c&&(h=this.pens[d],u=h.endIndex,!(!(u<=t)&&(h=this.pens[d],r=a?h.wrapText:h.plainText,f=h.prop,o=h.startIndex,l=o>=t&&u<=e,l||(r=r.substring(t-o,e-o)),this.tagToTextScope?s+=this.tagToText.call(this.tagToTextScope,r,f,v):s+=this.tagToText(r,f,v),v=f,u>=e)));d++);return s}get length(){return this.lines.length}set length(t){this.clear()}}var os={};const cT=Phaser.Geom.Rectangle;var pf=new si;class vT{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){return pf.pushMultiple(this.hitAreas),this}add(t,e,a,i,s){var h=pf.pop();return h===null?h=new cT(e,a,i,s):h.setTo(e,a,i,s),h.key=t,this.hitAreas.push(h),this}getFirst(t,e){for(var a=0,i=this.hitAreas.length;a<i;a++){var s=this.hitAreas[a];if(s.contains(t,e))return s}return null}drawBounds(t,e,a){e===void 0&&(e=16777215),a&&t.save().scaleCanvas(a.scaleX,a.scaleY).rotateCanvas(a.rotation).translateCanvas(a.x,a.y);for(var i=0,s=this.hitAreas.length;i<s;i++){var h=this.hitAreas[i];t.lineStyle(1,e).strokeRect(h.x,h.y,h.width,h.height)}return a&&t.restore(),this}}var pT=function(){this.parent.on("pointerdown",gT,this).on("pointerup",xT,this).on("pointermove",vo,this).on("pointerover",vo,this).on("pointerout",function(n,t){vo.call(this,n,null,null,t)},this)},gT=function(n,t,e,a){var i=this.hitAreaManager.getFirst(t,e);i!==null&&zn.call(this,"areadown",i.key,n,t,e,a)},xT=function(n,t,e,a){var i=this.hitAreaManager.getFirst(t,e);i!==null&&zn.call(this,"areaup",i.key,n,t,e,a)},vo=function(n,t,e,a){if(t===null){this.lastHitAreaKey!==null&&(zn.call(this,"areaout",this.lastHitAreaKey,n,t,e,a),this.lastHitAreaKey=null);return}var i=this.hitAreaManager.getFirst(t,e),s=i?i.key:null;this.lastHitAreaKey!==s&&(this.lastHitAreaKey!==null&&zn.call(this,"areaout",this.lastHitAreaKey,n,t,e,a),s!==null&&zn.call(this,"areaover",s,n,t,e,a),this.lastHitAreaKey=s)},zn=function(n,t,e,a,i,s){this.parent.emit(`${n}-${t}`,e,a,i,s),this.parent.emit(n,t,e,a,i,s)};const mT=Ut.NO_NEWLINE,yT=Ut.RAW_NEWLINE,po=Ut.WRAPPED_NEWLINE,gf=Ut.NO_WRAP,TT=Ut.WORD_WRAP,CT=Ut.CHAR_WRAP,ST=Ut.SPLITREGEXP;var sp=function(n,t,e,a,i,s){a<=0&&(e=gf);var h=[];if(!n||!n.length)return h;for(var r=e===gf,o=e===TT,u=n.split(ST),l,f,v,d=0,c=u.length;d<c;d++){if(l=u[d],v=d===c-1?mT:yT,r){var p=t(l);h.push(s.getLine(l,p,v));continue}if(f=d===0?a-i:a,l.length<=100){var p=t(l);if(p<=f){h.push(s.getLine(l,p,v));continue}}var g,x;o?(g=l.split(" "),x=g[g.length-1]==="",x&&(g.length-=1)):g=l;for(var m,y,T,C="",S=0,E,P=o?t(" "):void 0,M=0,O=g.length;M<O;M++){if(m=g[M],y=t(m),T=M===O-1,o&&(!T||x)&&(m+=" ",y+=P),o&&y>a){C!==""?h.push(s.getLine(C,S,po)):M===0&&i>0&&h.push(s.getLine("",0,po)),h.push(...sp(m,t,CT,a,0,s));var A=h.pop();C=A.text,S=A.width,s.freeLine(A),C===" "&&(C="",S=0);continue}E=S+y,E>f?(h.push(s.getLine(C,S,po)),C=m,S=y,f=a):(C+=m,S=E),T&&h.push(s.getLine(C,S,v))}}return h};const go=Phaser.Utils.Objects.GetValue,ET=Ut.NO_WRAP,PT=Ut.NO_NEWLINE;class np{constructor(t){this.parent=t.parent,this.context=go(t,"context",null),this.canvas=this.context.canvas,this.parser=go(t,"parser",null),this.defaultStyle=go(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new vT,this.lastHitAreaKey=null;var e=this.context;this.getTextWidth=function(a){return e.measureText(a).width}}destroy(){this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,e,a,i,s){if(s===void 0&&(s=this.penManager),s.clear(),t==="")return s;var h=this.parent.style;if(h.isWrapFitMode){var r=this.parent.padding;a=h.fixedWidth-r.left-r.right}for(var o=this.canvas,u=this.context,l=function(D){return u.measureText(D).width},f=0,v=0,d=h.wrapCallback,c=h.wrapCallbackScope,p=!0,g,x,m,y=this.parser.splitText(t),T,C,S=this.wrapTextLinesPool,E=0,P=y.length;E<P;E++)if(T=this.parser.tagTextToProp(y[E],x),g=T.plainText,x=T.prop,x.img){var M=this.imageManager.getOuterWidth(x.img);a>0&&e!==ET&&a<f+M&&(s.addNewLinePen(),v+=i,f=0),s.addImagePen(f,v,M,Cs(x)),f+=M}else if(g!==""){if(u.save(),m=this.parser.propToContextStyle(this.defaultStyle,x),m.buildFont(),m.syncFont(o,u),m.syncStyle(o,u),!d)C=sp(g,l,e,a,f,S);else{C=d.call(c,g,l,a,f),typeof C=="string"&&(C=C.split(`
`));for(var R,O=0,A=C.length;O<A;O++)R=C[O],typeof R=="string"?C[O]=S.getLine(R,l(R),O<A-1?2:0):p=!1}for(var R,O=0,A=C.length;O<A;O++)R=C[O],s.addTextPen(R.text,f,v,R.width,Cs(x),R.newLineMode),R.newLineMode!==PT?(f=0,v+=i):f+=R.width;p&&S.freeLines(C),C=null,u.restore()}for(var E=0,P=this.lines.length;E<P;E++){var F=this.lines[E],I=F[F.length-1];I&&(I.width+=this.parser.getStrokeThinkness(this.defaultStyle,I.prop))}return s}get startXOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.xOffset}get startYOffset(){var t=this.defaultStyle;return t.strokeThickness/2+t.metrics.ascent}get lines(){return this.penManager.lines}get desplayLinesCount(){var t=this.penManager.linesCount,e=this.defaultStyle.maxLines;return e>0&&t>e&&(t=e),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.desplayLinesCount,e=this.defaultStyle.lineHeight*t;return t>0&&(e-=this.defaultStyle.lineSpacing),e}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new pl({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,e,a){var i;if(t==null)i=this.penManager.plainText;else{var s=this.parser.splitText(t,1);i="";for(var h=0,r=s.length;h<r;h++)i+=s[h]}return(e!=null||a!=null)&&(e==null&&(e=0),a==null&&(a=i.length),i=i.substring(e,a)),i}getPenManager(t,e){if(t===void 0)return this.copyPenManager(e,this.penManager);e===void 0&&(e=this.newPenManager());var a=this.defaultStyle;return this.updatePenManager(t,a.wrapMode,a.wrapWidth,a.lineHeight,e),e}getText(t,e,a,i){if(t==null)return this.penManager.getSliceTagText(e,a,i);var s=this.tmpPenManager,h=this.defaultStyle;return this.updatePenManager(t,h.wrapMode,h.wrapWidth,h.lineHeight,s),s.getSliceTagText(e,a,i)}copyPenManager(t,e){return e===void 0&&(e=this.penManager),e.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var MT={setInteractive:pT};Object.assign(np.prototype,lT,MT);class xf extends si{freeLine(t){if(!!t)return this.push(t),this}freeLines(t){if(!!t)return this.pushMultiple(t),this}getLine(t,e,a){var i=this.pop();return i===null&&(i={}),i.text=t,i.width=e,i.newLineMode=a,i}}const xo=Phaser.Utils.Objects.GetValue;var mo=function(n,t){t===void 0&&(t={key:n}),t.hasOwnProperty("key")||(t.key=n);var e=t.key,a=t.frame,i=t.width,s=t.height;if(i===void 0||s===void 0){var h=this.textureManager.getFrame(e,a),r=h?h.cutWidth:0,o=h?h.cutHeight:0;i===void 0&&s===void 0?(i=r,s=o):i===void 0?i=r*(s/o):s===void 0&&(s=o*(i/r))}this.images[n]={key:e,frame:a,width:i,height:s,y:xo(t,"y",0),left:xo(t,"left",0),right:xo(t,"right",0)}},AT=function(n,t,e,a,i){var s=this.get(n);e+=s.left,a+=s.y,i&&(e=Math.round(e),a=Math.round(a));var h=this.textureManager.getFrame(s.key,s.frame);t.drawImage(h.source.image,h.cutX,h.cutY,h.cutWidth,h.cutHeight,e,a,s.width,s.height)};class gl{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,e){if(typeof t=="string")mo.call(this,t,e);else if(Array.isArray(t))for(var a=t,i=0,s=a.length;i<s;i++)mo.call(this,a[i]);else{var a=t;for(var t in a)mo.call(this,t,a[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var e=this.get(t);return e?e.width+e.left+e.right:0}getFrame(t){var e=this.get(t);return e?this.textureManager.getFrame(e.key,e.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var OT={draw:AT};Object.assign(gl.prototype,OT);const RT=Phaser.Utils.Objects.IsPlainObject,LT=Phaser.DOM.AddToDOM,mf=Phaser.Display.Canvas.CanvasPool,FT=Phaser.GameObjects.GameObject,Oe=Phaser.Utils.Objects.GetValue,IT=Phaser.DOM.RemoveFromDOM,wT=Ut.SPLITREGEXP;var Is=null,yo=null,To=null;class rp extends ip{constructor(t,e,a,i,s,h,r){if(RT(e)){var o=e;e=Oe(o,"x",0),a=Oe(o,"y",0),i=Oe(o,"text",""),s=Oe(o,"style")}if(e===void 0&&(e=0),a===void 0&&(a=0),super(t,h),this.renderer=t.sys.game.renderer,this.setPosition(e,a),this.setOrigin(0,0),this.initPipeline(),this.canvas=mf.create(this),this.context=this.canvas.getContext("2d"),this._imageManager=void 0,s){if(s.hasOwnProperty("align")){var u=s.align;delete s.align,s.halign=u}s.hasOwnProperty("stroke")&&!s.hasOwnProperty("strokeThickness")&&(s.strokeThickness=1)}this.style=new vl(this,s);var l=Oe(s,"images",void 0);l&&this.addImage(l),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var f=Oe(s,"sharedPool",!0),v,d,c;f?(Is||(Is={},yo=new si,To=new xf,this.scene.game.events.once("destroy",function(){Is=null,yo=null,To=null})),Is.hasOwnProperty(h)||(Is[h]=new si),v=Is[h],d=yo,c=To):(v=new si,d=new si,c=new xf),this.canvasText=new np({parent:this,context:this.context,parser:r,style:this.style,pensPool:v,linesPool:d,wrapTextLinesPool:c}),this.parser=r,this.initRTL(),s&&s.padding&&this.setPadding(s.padding),this.setText(i)}preDestroy(){this.style.rtl&&IT(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),mf.remove(this.canvas),this.texture.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",LT(this.canvas,this.scene.sys.canvas),this.originX=1)}setText(t){return t==null?t="":Array.isArray(t)?t=t.join(`
`):t=t.toString(),t===this._text?this:(this._text=t,this.updateText(),this)}appendText(t){return t==null?this:(Array.isArray(t)&&(t=t.join(`
`)),this.setText(this.text+t.toString()),this)}setPadding(t,e,a,i){if(typeof t=="object"){var s=t,h=Oe(s,"x",null);h!==null?(t=h,a=h):(t=Oe(s,"left",0),a=Oe(s,"right",t));var r=Oe(s,"y",null);r!==null?(e=r,i=r):(e=Oe(s,"top",0),i=Oe(s,"bottom",e))}else t===void 0&&(t=0),e===void 0&&(e=t),a===void 0&&(a=t),i===void 0&&(i=e);return this.padding.left=t,this.padding.top=e,this.padding.right=a,this.padding.bottom=i,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var e=this.canvasText,a=this.style;t&&e.updatePenManager(this._text,a.wrapMode,a.wrapWidth,a.lineHeight);var i=this.padding,s,h,r=Math.ceil(e.linesWidth);a.fixedWidth===0?(this.width=r+i.left+i.right,s=r):(this.width=a.fixedWidth,s=this.width-i.left-i.right,s<r&&(s=r)),a.fixedHeight===0?(this.height=e.linesHeight+i.top+i.bottom,h=e.linesHeight):(this.height=a.fixedHeight,h=this.height-i.top-i.bottom,h<e.linesHeight&&(h=e.linesHeight));var o=this.width,u=this.height;this.updateDisplayOrigin();var l=a.resolution;o*=l,u*=l,o=Math.max(Math.ceil(o),1),u=Math.max(Math.ceil(u),1);var f=this.canvas,v=this.context;f.width!==o||f.height!==u?(f.width=o,f.height=u,this.frame.setSize(o,u)):v.clearRect(0,0,o,u),v.save(),v.scale(l,l);var d=this.style.rtl?i.right:i.left,c=i.top;e.draw(d,c,s,h),v.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=this.width,p.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t}setInteractive(t,e,a){var i=!!this.input;return FT.prototype.setInteractive.call(this,t,e,a),i||this.canvasText.setInteractive(),this}getWrappedText(t,e,a){return t=this.canvasText.getText(t,e,a,!0),t.split(wT)}getPlainText(t,e,a){return this.canvasText.getPlainText(t,e,a)}getText(t,e,a,i){return i===void 0&&(i=!1),this.canvasText.getText(t,e,a,i)}getSubString(t,e,a){return this.getText(t,e,a)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,e){return this.canvasText.getPenManager(t,e)}setSize(t,e){return this.setFixedSize(t,e)}resize(t,e){return this.setFixedSize(t,e)}get imageManager(){return this._imageManager||(this._imageManager=new gl(this.scene)),this._imageManager}addImage(t,e){return this.imageManager.add(t,e),this}drawAreaBounds(t,e){return this.canvasText.hitAreaManager.drawBounds(t,e,this),this}generateTexture(t,e,a,i,s){var h=this.canvas;return i===void 0?i=h.width:i*=this.resolution,s===void 0?s=h.height:s*=this.resolution,_v(this.scene,h,t,e,a,i,s),this}}var ee=function(n,t){return t===void 0?`\\[${n}\\]`:`\\[${n}=(${t})\\]`},xe=function(n){return`\\[/${n}\\]`};const xl="[-.0-9]+",ml="[a-z]+|#[0-9abcdef]+",yl="[^\\]]+",ap="esc",op=ee(ap),hp=xe(ap),lp="raw",up=ee(lp),fp=xe(lp),dp="b",cp=ee(dp),vp=xe(dp),pp="i",gp=ee(pp),xp=xe(pp),mp="weight",yp=ee(mp,xl),Tp=xe(mp),Cp="size",Sp=ee(Cp,xl),Ep=xe(Cp),Pp="color",Mp=ee(Pp,ml),Ap=xe(Pp),Tl="u",Op=ee(Tl),Rp=ee(Tl,ml),Lp=xe(Tl),Fp="shadow",Ip=ee(Fp),wp=xe(Fp),Cl="stroke",Bp=ee(Cl),Dp=ee(Cl,ml),bp=xe(Cl),Gp="y",Np=ee(Gp,xl),Yp=xe(Gp),Vp="img",zp=ee(Vp,yl),Up=xe(Vp),Xp="area",Wp=ee(Xp,yl),Hp=xe(Xp),kp="align",$p=ee(kp,yl),Kp=xe(kp),Zp=new RegExp(op,"i"),Vh=new RegExp(hp,"i"),Jp=new RegExp(up,"i"),zh=new RegExp(fp,"i"),BT=new RegExp(cp,"i"),DT=new RegExp(vp,"i"),bT=new RegExp(gp,"i"),GT=new RegExp(xp,"i"),yf=new RegExp(yp,"i"),NT=new RegExp(Tp,"i"),Tf=new RegExp(Sp,"i"),YT=new RegExp(Ep,"i"),Cf=new RegExp(Mp,"i"),VT=new RegExp(Ap,"i"),zT=new RegExp(Op,"i"),Sf=new RegExp(Rp,"i"),UT=new RegExp(Lp,"i"),XT=new RegExp(Ip,"i"),WT=new RegExp(wp,"i"),HT=new RegExp(Bp,"i"),Ef=new RegExp(Dp,"i"),kT=new RegExp(bp,"i"),Pf=new RegExp(Np,"i"),$T=new RegExp(Yp,"i"),Mf=new RegExp(zp,"i"),KT=new RegExp(Up,"i"),Af=new RegExp(Wp,"i"),ZT=new RegExp(Hp,"i"),Of=new RegExp($p,"i"),JT=new RegExp(Kp,"i"),Rf=new RegExp([up,fp,op,hp,cp,vp,gp,xp,yp,Tp,Sp,Ep,Mp,Ap,Op,Rp,Lp,Ip,wp,Bp,Dp,bp,Np,Yp,zp,Up,Wp,Hp,$p,Kp].join("|"),"ig");var jT=function(n,t){for(var e=[],a=0,i=!1,s=!1;;){var h=Rf.exec(n);if(!h)break;var r=h[0];if(s)if(Vh.test(r))s=!1;else continue;else if(i)if(zh.test(r))i=!1;else continue;else Zp.test(r)?s=!0:Jp.test(r)&&(i=!0);var o=Rf.lastIndex,u=o-r.length;if(a<u){var l=n.substring(a,u);e.push(l)}t===void 0&&e.push(r),a=o}var f=n.length;return a<f&&e.push(n.substring(a,f)),e};const $t=!1,jt=!0;var QT={plainText:null,prevProp:null},qT=function(n,t){t==null&&(t={});var e="";if(t.img&&pt(t,$t,"img"),t.esc)Vh.test(n)?pt(t,$t,"esc"):e=n;else if(t.raw)zh.test(n)?pt(t,$t,"raw"):e=n;else if(Zp.test(n))pt(t,jt,"esc",!0);else if(Vh.test(n))pt(t,$t,"esc");else if(Jp.test(n))pt(t,jt,"raw",!0);else if(zh.test(n))pt(t,$t,"raw");else if(BT.test(n))pt(t,jt,"b",!0);else if(DT.test(n))pt(t,$t,"b");else if(bT.test(n))pt(t,jt,"i",!0);else if(GT.test(n))pt(t,$t,"i");else if(yf.test(n)){var a=n.match(yf);pt(t,jt,"weight",a[1])}else if(NT.test(n))pt(t,$t,"weight");else if(Tf.test(n)){var a=n.match(Tf);pt(t,jt,"size",`${a[1]}px`)}else if(YT.test(n))pt(t,$t,"size");else if(Cf.test(n)){var a=n.match(Cf);pt(t,jt,"color",a[1])}else if(VT.test(n))pt(t,$t,"color");else if(zT.test(n))pt(t,jt,"u",!0);else if(Sf.test(n)){var a=n.match(Sf);pt(t,jt,"u",a[1])}else if(UT.test(n))pt(t,$t,"u");else if(XT.test(n))pt(t,jt,"shadow",!0);else if(WT.test(n))pt(t,$t,"shadow");else if(HT.test(n))pt(t,jt,"stroke",!0);else if(Ef.test(n)){var a=n.match(Ef);pt(t,jt,"stroke",a[1])}else if(kT.test(n))pt(t,$t,"stroke");else if(Pf.test(n)){var a=n.match(Pf);pt(t,jt,"y",parseFloat(a[1]))}else if($T.test(n))pt(t,$t,"y");else if(Mf.test(n)){var a=n.match(Mf);pt(t,jt,"img",a[1])}else if(KT.test(n))pt(t,$t,"img");else if(Af.test(n)){var a=n.match(Af);pt(t,jt,"area",a[1])}else if(ZT.test(n))pt(t,$t,"area");else if(Of.test(n)){var a=n.match(Of);pt(t,jt,"align",a[1])}else JT.test(n)?pt(t,$t,"align"):e=n;var i=QT;return i.plainText=e,i.prop=t,i},pt=function(n,t,e,a){return t===jt?n[e]=a:n.hasOwnProperty(e)&&delete n[e],n},_T=function(n,t){var e=eC;if(t.hasOwnProperty("img"))e.image=t.img;else{if(e.image=null,t.hasOwnProperty("family")?e.fontFamily=t.family:e.fontFamily=n.fontFamily,t.hasOwnProperty("size")){var a=t.size;typeof a=="number"&&(a=`${a}px`),e.fontSize=a}else e.fontSize=n.fontSize;e.fontStyle=tC(t),t.hasOwnProperty("color")?e.color=t.color:e.color=n.color,t.hasOwnProperty("stroke")?t.stroke===!0?(e.stroke=n.stroke,e.strokeThickness=n.strokeThickness):(e.stroke=t.stroke,e.strokeThickness=n.strokeThickness):(e.stroke=n.stroke,e.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(e.shadowColor=n.shadowColor,e.shadowOffsetX=n.shadowOffsetX,e.shadowOffsetY=n.shadowOffsetY,e.shadowBlur=n.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor=t.shadow,e.shadowOffsetX=n.shadowOffsetX,e.shadowOffsetY=n.shadowOffsetY,e.shadowBlur=n.shadowBlur,e.shadowStroke=!0,e.shadowFill=!0):(e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.shadowStroke=!1,e.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(e.underlineColor=n.underlineColor,e.underlineThickness=n.underlineThickness,e.underlineOffset=n.underlineOffset):(e.underlineColor=t.u,e.underlineThickness=n.underlineThickness,e.underlineOffset=n.underlineOffset):(e.underlineColor="#000",e.underlineThickness=0,e.underlineOffset=0),e},tC=function(n){var t=n.b,e=n.weight,a=n.i;return t||e||a?a?t?"bold italic":e?`${e} italic`:"italic":t?"bold":e.toString():""},eC=new vl,iC=function(n,t,e){e==null&&(e=sC);var a=[];for(var i in e)t.hasOwnProperty(i)||a.push(`[/${i}]`);for(var i in t){var s=t[i];if(e[i]!==s)switch(i){case"size":a.push(`[size=${s.replace("px","")}]`);break;case"color":case"weight":case"stroke":case"y":case"img":case"area":case"align":a.push(`[${i}=${s}]`);break;case"u":s===!0?a.push("[u]"):a.push(`[u=${s}]`);break;default:a.push(`[${i}]`);break}}return a.push(n),a.join("")},sC={};class jp{getStrokeThinkness(t,e){var a;return e.hasOwnProperty("stroke")?a=t.strokeThickness:a=0,a}}var nC={splitText:jT,tagTextToProp:qT,propToContextStyle:_T,propToTagText:iC};Object.assign(jp.prototype,nC);class Sl extends rp{constructor(t,e,a,i,s){var h=new jp(s);super(t,e,a,i,s,"rexBBCodeText",h)}}_.register("BBCodeText",function(n,t,e,a){var i=new Sl(this.scene,n,t,e,a);return this.scene.add.existing(i),i});q(window,"RexPlugins.UI.BBCodeText",Sl);var rC={plainText:null,prevProp:null},aC=new vl;class oC{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,e){this.tags[t]=e}getTag(t){return this.tags[t]}splitText(t,e){for(var a=[],i=0;;){var s=Co.exec(t);if(!s)break;var h=s[0],r=Co.lastIndex-h.length;if(i<r&&a.push(t.substring(i,r)),e===void 0)a.push(h);else if(e===1){if(Ff.test(h)){var o=h.match(If);a.push(o[2])}else if(wf.test(h)){var o=h.match(Bf);a.push(o[2])}}i=Co.lastIndex}var u=t.length;return i<u&&a.push(t.substring(i,u)),a}tagTextToProp(t,e){var a,i;if(Ff.test(t)){var s=t.match(If);if(s!=null){var h=s[1],r=this.tags;r.hasOwnProperty(h)?i=r[h]:i={},i._class=h,a=s[2]}}else if(wf.test(t)){var s=t.match(Bf);if(s!=null){var o=s[1];i=hC(o),i._style=o,a=s[2]}}a==null&&(a=t),i==null&&(i={});var u=rC;return u.plainText=a,u.prop=i,u}propToContextStyle(t,e){var a=aC;if(e.hasOwnProperty("img"))a.image=e.img;else{if(a.image=null,e.hasOwnProperty("family")||e.hasOwnProperty("fontFamily")||e.hasOwnProperty("font-family")){var i=e.hasOwnProperty("family")?e.family:e.hasOwnProperty("fontFamily")?e.fontFamily:e["font-family"];a.fontFamily=i}else a.fontFamily=t.fontFamily;if(e.hasOwnProperty("size")||e.hasOwnProperty("fontSize")||e.hasOwnProperty("font-size")){var s=e.hasOwnProperty("size")?e.size:e.hasOwnProperty("fontSize")?e.fontSize:e["font-size"];typeof s=="number"&&(s=`${s}px`),a.fontSize=s}else a.fontSize=t.fontSize;if(e.hasOwnProperty("style")||e.hasOwnProperty("fontStyle")||e.hasOwnProperty("font-style")){var h=e.hasOwnProperty("style")?e.style:e.hasOwnProperty("fontStyle")?e.fontStyle:e["font-style"];a.fontStyle=h}else a.fontStyle=t.fontStyle;if(e.hasOwnProperty("color")||e.hasOwnProperty("font-color")){var r=e.hasOwnProperty("color")?e.color:e["font-color"];a.color=r}else a.color=t.color;if(e.hasOwnProperty("stroke")){var o=e.stroke;a.stroke=o.hasOwnProperty("color")?o.color:t.stroke,a.strokeThickness=o.hasOwnProperty("thickness")?o.thickness:t.strokeThickness}else a.stroke=t.stroke,a.strokeThickness=t.strokeThickness}if(e.hasOwnProperty("shadow")){var u=e.shadow;a.shadowColor=u.hasOwnProperty("color")?u.color:t.shadowColor,a.shadowOffsetX=u.hasOwnProperty("offsetX")?u.offsetX:t.shadowOffsetX,a.shadowOffsetY=u.hasOwnProperty("offsetY")?u.offsetY:t.shadowOffsetY,a.shadowBlur=u.hasOwnProperty("blur")?u.blur:t.shadowBlur,a.shadowStroke=!0,a.shadowFill=!0}else a.shadowColor=t.shadowColor,a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,a.shadowBlur=t.shadowBlur,a.shadowStroke=t.shadowStroke,a.shadowFill=t.shadowFill;if(e.hasOwnProperty("u")||e.hasOwnProperty("underline")){var l=e.hasOwnProperty("u")?e.u:e.underline;a.underlineColor=l.hasOwnProperty("color")?l.color:t.underlineColor,a.underlineThickness=l.hasOwnProperty("thickness")?l.thickness:t.underlineThickness,a.underlineOffset=l.hasOwnProperty("offset")?l.offset:t.underlineOffset}else a.underlineColor=t.underlineColor,a.underlineThickness=t.underlineThickness,a.underlineOffset=t.underlineOffset;return a}getStrokeThinkness(t,e){var a;if(e.hasOwnProperty("stroke")){var i=e.stroke;a=i.hasOwnProperty("thickness")?i.thickness:t.strokeThickness}else a=t.strokeThickness;return a}propToTagText(t,e,a){return e.hasOwnProperty("_class")?t===""&&this.isTextTag(e._class)?"":`<class='${e._class}'>${t}</class>`:e.hasOwnProperty("_style")?`<style='${e._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var e=this.tags[t];return e?e.img==null:!1}}var hC=function(n){n=n.split(";");for(var t={},e,a,i,s=0,h=n.length;s<h;s++)if(e=n[s].split(":"),a=e[0],i=e[1],!(Lf(a)||Lf(i))){switch(a){case"stroke":var r=i.split(" "),l=r.length;i={},l>=1&&(i.color=r[0]),l>=2&&(i.thickness=parseInt(r[1].replace("px","")));break;case"shadow":var o=i.split(" "),l=o.length;i={},l>=1&&(i.color=o[0]),l>=2&&(i.offsetX=parseInt(o[1].replace("px",""))),l>=3&&(i.offsetY=parseInt(o[2].replace("px",""))),l>=4&&(i.blur=parseInt(o[3].replace("px","")));break;case"u":case"underline":var u=i.split(" "),l=u.length;i={},l>=1&&(i.color=u[0]),l>=2&&(i.thickness=parseInt(u[1].replace("px",""))),l>=3&&(i.offset=parseInt(u[2].replace("px","")));break;case"y":i=parseFloat(i);break}t[a]=i}return t},Lf=function(n){return n=n.replace(lC,""),n.length===0},Co=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,Ff=/<\s*class=/i,If=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,wf=/<\s*style=/i,Bf=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,lC=/^\s+|\s+$/;const uC=Phaser.Utils.Objects.GetValue;class Qp extends rp{constructor(t,e,a,i,s){var h=uC(s,"tags",void 0),r=new oC(h);super(t,e,a,i,s,"rexTagText",r)}addTag(t,e){return this.parser.addTag(t,e),this.updateText(!0)}addTags(t){for(var e in t)this.parser.addTag(e,t[e]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}}_.register("tagText",function(n,t,e,a){var i=new Qp(this.scene,n,t,e,a);return this.scene.add.existing(i),i});q(window,"RexPlugins.UI.TagText",Qp);const fn={setEventEmitter(n,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=n===!0||n===void 0,this._eventEmitter=this._privateEE?new t:n,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(n){return this._eventEmitter&&n&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},fC=Phaser.Scene;var ys=function(n){return n instanceof fC},qp=function(n){return n==null||typeof n!="object"?null:ys(n)?n:n.scene&&ys(n.scene)?n.scene:n.parent&&n.parent.scene&&ys(n.parent.scene)?n.parent.scene:null};const dC=Phaser.Game;var Df=function(n){return n instanceof dC},_p=function(n){if(n==null||typeof n!="object")return null;if(Df(n))return n;if(Df(n.game))return n.game;if(ys(n))return n.sys.game;if(ys(n.scene))return n.scene.sys.game};const cC=Phaser.Utils.Objects.GetValue;class kt{constructor(t,e){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(cC(e,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,e){this.destroy(e)}setParent(t){return this.parent=t,this.scene=qp(t),this.game=_p(t),this}}Object.assign(kt.prototype,fn);const tg={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},eg={direction:["direction",void 0]};var Ui=function(n,t,e){if(typeof e=="string")n.hasOwnProperty(e)&&(t[e]=n[e]);else{var a=e;if(Array.isArray(a))for(var i=0,s=a.length;i<s;i++)Ui(n,t,a[i]);else for(var e in a)Ui(n,t,e)}},vC=function(n){n===void 0&&(n={});var t={};return Ui(n,t,"inputType"),Ui(n,t,"type"),Ui(n,t,"style"),Ui(n,t,eg),Ui(n,t,tg),t},El=function(n,t,e,a){if(t)return!(e&&!e(n,t)||!bf(n,t)||a&&!a(n,t));for(var i=n.scene.input.manager,s=i.pointersTotal,h=i.pointers,t,r=0;r<s;r++)if(t=h[r],!(e&&!e(n,t))&&!!bf(n,t)&&!(a&&!a(n,t)))return!0;return!1},bf=function(n,t){for(var e=n.scene,a=e.input.cameras.getCamerasBelowPointer(t),i=e.input.manager,s=[n],h,r=0,o=a.length;r<o;r++)if(h=i.hitTest(t,s,a[r]),h.length>0)return!0;return!1},en=void 0,pC=function(n){n!==en&&(en!==void 0&&en.close(),en=n)},gC=function(n){n===en&&(en=void 0)};const xC=Phaser.Utils.Objects.GetValue;var da=function(n,t,e){e===void 0&&(e={});var a,i;for(var s in n)a=n[s],i=xC(t,s,a[1]),i!==void 0&&(e[a[0]]=i);return e},ig=function(n){n.addEventListener("touchstart",ws,!1),n.addEventListener("touchmove",ws,!1),n.addEventListener("touchend",ws,!1),n.addEventListener("mousedown",ws,!1),n.addEventListener("mouseup",ws,!1),n.addEventListener("mousemove",ws,!1)},ws=function(n){n.stopPropagation()};const So=Phaser.Utils.Objects.GetValue;var mC=function(n,t){var e,a=So(t,"inputType",void 0);a===void 0&&(a=So(t,"type","text")),a==="textarea"?(e=document.createElement("textarea"),e.style.resize="none"):(e=document.createElement("input"),e.type=a);var i=So(t,"style",void 0),s=e.style;return da(eg,i,s),s.position="absolute",s.opacity=0,s.pointerEvents="none",s.zIndex=0,s.transform="scale(0)",da(tg,t,e),ig(e),document.body.appendChild(e),e},yC=function(){return this.isOpened?this:this.readOnly?this:(pC(this),this.isOpened=!0,this.node||(this.node=mC(this,this.nodeConfig)),this.setFocus(),this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this),this)},TC=function(n){!n||document.body.removeChild(n)},CC=function(){return this.isOpened?(gC(this),this.setBlur(),this.isOpened=!1,this.updateText(),this.scene.sys.events.off("postupdate",this.updateText,this),this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),TC(this.node),this.node=void 0,this.emit("close",this),this):this},SC={open:yC,close:CC};const Fi=Phaser.Utils.Objects.GetValue;class Pl extends kt{constructor(t,e){super(t);var a=Fi(e,"inputType",void 0);a===void 0&&(a=Fi(e,"type","text")),this.setEnterCloseEnable(Fi(e,"enterClose",a!=="textarea"));var i=Fi(e,"onOpen",void 0);i||(i=Fi(e,"onFocus",void 0)),this.onOpenCallback=i;var s=Fi(e,"onClose",void 0);s||(s=Fi(e,"onBlur",void 0)),this.onCloseCallback=s,this.onUpdateCallback=Fi(e,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=vC(e),this.node=void 0}destroy(){this.close(),super.destroy()}onClickOutside(t){El(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){!this.node||(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){!this.node||(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,e),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){!this.node||this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){!this.node||(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(!!this.node)return this.node.style.color}set fontColor(t){!this.node||(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node?(this.node.style[t]=e,this):this}getStyle(t){if(!!this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(Pl.prototype,SC);var sg=function(n,t,e){n=n.replace(" ","");var a=e.previousText;if(n===a)return n;if(isNaN(n)){e.emit("nan",n,e),n=a;var i=e.cursorPosition-1;e.setText(n),e.setCursorPosition(i)}else e.previousText=n;return n},Ml=function(n){return _p(n).loop.delta};const Gf=Phaser.Utils.Objects.GetValue,EC=Phaser.Math.Wrap;class ng extends Pl{constructor(t,e){e===void 0&&(e={}),e.onUpdate==="number"&&(e.onUpdate=sg),super(t,e),this.setCursor(Gf(e,"cursor","|")),this.setCursorFlashDuration(Gf(e,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,e=this.text;if(this.onUpdateCallback){var a=this.onUpdateCallback(e,t,this);a!=null&&(e=a)}if(this.isOpened&&this.hasCursor){var i=this.cursorPosition;e=e.substring(0,i)+this.cursor+e.substring(i),this.prevCursorPosition!==i&&(this.prevCursorPosition=i)}return t.text!==e&&(t.setText(e),this.emit("textchange",e,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var e=this.cursorFlashTimer+Ml(this.scene);return this.cursorFlashTimer=EC(e,0,this.cursorFlashDuration),t}}_.register("hiddenEdit",function(n,t){var e=new ng(n,t);return e});q(window,"RexPlugins.UI.HiddenEdit",ng);const PC=Phaser.GameObjects.GetCalcMatrix;var MC=function(n,t,e,a){t.updateData(),e.addToRenderList(t);var i=n.pipelines.set(t.pipeline),s=PC(t,e,a),h=i.calcMatrix.copyFrom(s.calc),r=t._displayOriginX,o=t._displayOriginY,u=e.alpha*t.alpha;n.pipelines.preBatch(t);for(var l=t.geom,f=0,v=l.length;f<v;f++)l[f].webglRender(i,h,u,r,o);n.pipelines.postBatch(t)};const AC=Phaser.Renderer.Canvas.SetTransform;var OC=function(n,t,e,a){t.updateData(),e.addToRenderList(t);var i=n.currentContext;if(AC(n,i,t,e,a)){for(var s=t._displayOriginX,h=t._displayOriginY,r=t.geom,o=0,u=r.length;o<u;o++)r[o].canvasRender(i,s,h);i.restore()}};const RC={renderWebGL:MC,renderCanvas:OC},LC=Phaser.GameObjects.Shape,FC=Phaser.Utils.Array.Remove;class Ss extends LC{constructor(t,e,a,i,s){e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=2),s===void 0&&(s=i),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(e,a),this.setSize(i,s),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,e){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==e,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=e,this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=e),this}resize(t,e){return this.setSize(t,e),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==e,this._fillColor=t,this._fillAlpha=e,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,e,a){return a===void 0&&(a=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==e||this.strokeAlpha!==a,this._lineWidth=t,this._strokeColor=e,this._strokeAlpha=a,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,e=0,a=t.length;e<a;e++){var i=t[e];i.dirty&&i.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Ki(this.shapes),this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var e=t.name;return e&&(this.shapes[e]=t),this.dirty=!0,this}deleteShape(t){var e=this.getShape(t);return e&&(delete this.shapes[t],FC(this.geom,e)),this}}Object.assign(Ss.prototype,RC);const IC={setBoxFillStyle(n,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==n||this.boxFillAlpha!==t,this.boxFillColor=n,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(n,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==n||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=n,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(n,t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.boxLineWidth!==n||this.boxStrokeColor!==t||this.boxStrokeAlpha!==e,this.boxLineWidth=n,this.boxStrokeColor=t,this.boxStrokeAlpha=e,this},setUncheckedBoxStrokeStyle(n,t,e){return e===void 0&&(e=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==n||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==e,this.uncheckedBoxLineWidth=n,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=e,this},setCheckerStyle(n,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==n||this.checkAlpha!==t,this.checkerColor=n,this.checkAlpha=t,this},setBoxShape(n){return n===void 0&&(n=!1),this.isCircleShape===n?this:(this.isCircleShape=n,this.isSizeChanged=!0,this.dirty=!0,this)}},wC={setBoxSize(n){return this.dirty=this.dirty||this.boxSize!==n,this.boxSize=n,this},setCheckerSize(n){return this.dirty=this.dirty||this.checkerSize!==n,this.checkerSize=n,this}};var BC=function(n,t){return n==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=n,this.fillAlpha=t),this},DC=function(n,t,e){return n==null||t==null?this.isStroked=!1:(e===void 0&&(e=1),this.isStroked=!0,this.lineWidth=n,this.strokeColor=t,this.strokeAlpha=e),this};const bC={fillStyle:BC,lineStyle:DC};class La{constructor(){this.name=void 0,this.dirty=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}reset(){return this.fillStyle().lineStyle(),this}webglRender(t,e,a,i,s){}canvasRender(t,e,a){}updateData(){this.dirty=!1}}Object.assign(La.prototype,bC,Aa);const GC=Phaser.Geom.Polygon.Earcut;class sr extends La{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=GC(this.pathData),super.updateData(),this}webglRender(t,e,a,i,s){this.isFilled&&qv(t,e,this,a,i,s),this.isStroked&&Ra(t,this,a,i,s)}canvasRender(t,e,a){var i=this.pathData,s=i.length-1,h=i[0]-e,r=i[1]-a;t.beginPath(),t.moveTo(h,r),this.closePath||(s-=2);for(var o=2;o<s;o+=2){var u=i[o]-e,l=i[o+1]-a;t.lineTo(u,l)}this.closePath&&t.closePath(),this.isFilled&&(er(t,this),t.fill()),this.isStroked&&(ir(t,this),t.stroke())}}const Nf=Phaser.Math.DegToRad;class Fa extends sr{constructor(t,e,a,i,s,h,r,o){t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),h===void 0&&(h=360),r===void 0&&(r=!1),o===void 0&&(o=!1),super(),this.setCenterPosition(t,e),this.setRadius(a,i),this.setAngle(s,h,r),this.setPie(o),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,e){return e===void 0&&(e=t),this.x=t,this.y=e,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,e){return e===void 0&&(e=t),this.radiusX=t,this.radiusY=e,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,e,a){return a===void 0&&(a=!1),this.startAngle=t,this.endAngle=e,this.anticlockwise=a,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Wt(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,e,a){t.beginPath();var i=this.x-e,s=this.y-a,h=Nf(this.startAngle),r=Nf(this.endAngle);this.pie&&(t.moveTo(i,s),t.lineTo(i+Math.cos(h)*this.radiusX,s+Math.sin(h)*this.radiusY)),t.ellipse(i,s,this.radiusX,this.radiusY,0,h,r,this.anticlockwise),this.pie&&t.lineTo(i,s),this.isFilled&&(er(t,this),t.fill()),this.isStroked&&(ir(t,this),t.stroke())}}class Uh extends Fa{constructor(t,e,a){super(t,e,a,a,0,360)}}class NC extends sr{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),e=0,a=t.length;e<a;e++)this.pathData.push(t[e].x,t[e].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}}class YC extends Fa{constructor(t,e,a,i){super(t,e,a,i,0,360)}}class VC extends sr{constructor(t,e,a,i){t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=0),super(),this.setP0(t,e),this.setP1(a,i)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}var zC=function(n,t,e){return e.length=0,n!=null&&e.push(n,t),e};const Yf=Phaser.Math.Interpolation.QuadraticBezier;var Vf=function(n,t,e,a,i,s){for(var h=s.length,r=s[h-2],o=s[h-1],u=1,l=i-1;u<=l;u++){var f=u/l;s.push(Yf(f,r,n,e),Yf(f,o,t,a))}return s},rg=function(n){var t=n.length;if(t<2)return n;var e=n[t-2],a=n[t-1];return n.push(e),n.push(a),n};const UC={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(n,t){return this.restorePathData(),this.accumulationLengths=void 0,zC(n,t,this.pathData),this.firstPointX=n,this.firstPointY=t,this.lastPointX=n,this.lastPointY=t,this},lineTo(n,t,e){return e===void 0&&(e=!1),e&&(n+=this.lastPointX,t+=this.lastPointY),ni(n,t,this.pathData),this.lastPointX=n,this.lastPointY=t,this},verticalLineTo(n,t){return this.lineTo(n,this.lastPointY,t),this},horizontalLineTo(n,t){return this.lineTo(this.lastPointX,n,t),this},ellipticalArc(n,t,e,a,i,s,h){return h===void 0&&(h=!1),Wt(n,t,e,a,i,s,h,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(n,t,e,a,i,s){return this.ellipticalArc(n,t,e,e,a,i,s),this},quadraticBezierTo(n,t,e,a){return Vf(n,t,e,a,this.iterations,this.pathData),this.lastPointX=e,this.lastPointY=a,this.lastCX=n,this.lastCY=t,this},smoothQuadraticBezierTo(n,t){var e=this.lastPointX*2-this.lastCX,a=this.lastPointY*2-this.lastCY;return this.quadraticBezierTo(e,a,n,t),this},cubicBezierCurveTo(n,t,e,a,i,s){return Vf(n,t,e,a,i,s,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=s,this.lastCX=e,this.lastCY=a,this},smoothCubicBezierCurveTo(n,t,e,a){var i=this.lastPointX*2-this.lastCX,s=this.lastPointY*2-this.lastCY;return this.cubicBezierCurveTo(i,s,n,t,e,a),this},close(){return this.closePath=!0,this},end(){return rg(this.pathData),this}},XC=Phaser.Math.RotateAround;var WC=function(n,t,e,a){for(var i={x:0,y:0},s=0,h=a.length-1;s<h;s+=2)i.x=a[s],i.y=a[s+1],XC(i,n,t,e),a[s]=i.x,a[s+1]=i.y;return a},HC=function(n,t,e,a,i){for(var s=0,h=i.length-1;s<h;s+=2){var r=i[s]-n,o=i[s+1]-t;r*=e,o*=a,i[s]=r+n,i[s+1]=o+t}return i},ag=function(n,t,e){for(var a=0,i=e.length-1;a<i;a+=2)e[a]+=n,e[a+1]+=t;return e};const kC=Phaser.Math.DegToRad,$C=Phaser.Math.RotateAround,KC={rotateAround(n,t,e){if(this.pathData.length===0)return this;e=kC(e),WC(n,t,e,this.pathData);var a=this.pathData.length;if(this.lastPointX=this.pathData[a-2],this.lastPointY=this.pathData[a-1],this.lastCX!==void 0){var i={x:this.lastCX,y:this.lastCY};$C(i,n,t,e),this.lastCX=i.x,this.lastCY=i.y}return this},scale(n,t,e,a){if(this.pathData.length===0)return this;if(HC(n,t,e,a,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this.lastCX!==void 0){var i=this.lastCX-n,s=this.lastCY-t;i*=e,s*=a,this.lastCX=i+n,this.lastCY=s+t}return this},offset(n,t){return ag(n,t,this.pathData),this}};var Al=function(n,t,e,a){e===void 0&&(e=0),a===void 0&&(a=t.length),n.length=a-e;for(var i=0,s=n.length;i<s;i++)n[i]=t[i+e];return n};const ZC={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(Al(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},JC=Phaser.Math.Distance.Between,jC=Phaser.Math.Wrap,QC=Phaser.Math.Linear;var zf=function(n,t,e,a,i){if(a===void 0&&(a=e,e=0),e=Uf(e),a=Uf(a),e!==a){var s=t[t.length-1],h=s*e,r=s*a;e<a?Eo(n,t,h,r,i):(Eo(n,t,h,s,i),Eo(n,t,0,r,i)),rg(i)}},Eo=function(n,t,e,a,i){for(var s=e>0,h=0,r=t.length;h<r;h++){var o=h*2,u=t[h];if(s){if(u<e)continue;if(u==e)s=!1;else{var l=u-t[h-1],f=1-(u-e)/l;i.push(Mr(n,o-2,o,f)),i.push(Mr(n,o-1,o+1,f)),s=!1}}if(u<=a){if(i.push(n[o]),i.push(n[o+1]),u===a)break}else{var l=u-t[h-1],f=1-(u-a)/l;i.push(Mr(n,o-2,o,f)),i.push(Mr(n,o-1,o+1,f));break}}},Mr=function(n,t,e,a){var i=n[t],s=n[e];return QC(i,s,a)},Uf=function(n){return n===0?0:n%1===0?1:jC(n,0,1)};const qC={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var n=this.accumulationLengths,t=this.pathData,e,a,i,s,h,r=0,o=0,u=t.length;o<u;o+=2)i=t[o],s=t[o+1],h=e===void 0?0:JC(e,a,i,s),r+=h,n.push(r),e=i,a=s;return this.totalPathLength=r,this},setDisplayPathSegment(n,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,zf(this.pathDataSave,this.accumulationLengths,n,t,this.pathData),this},appendFromPathSegment(n,t,e){return t===void 0?this.pathData.push(...n.pathData):(n.updateAccumulationLengths(),zf(n.pathData,n.accumulationLengths,t,e,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},_C={draw(n,t,e){var a=this.toPoints();return t&&n.fillPoints(a,this.closePath,this.closePath),e&&n.strokePoints(a,this.closePath,this.closePath),this}};var tS=function(n,t){t===void 0&&(t=[]);for(var e=0,a=n.length-1;e<a;e+=2)t.push({x:n[e],y:n[e+1]});return t};const eS=Phaser.Geom.Polygon;var iS=function(n,t){return t===void 0&&(t=new eS),t.setTo(n),t};class og{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return tS(this.pathData)}toPolygon(t){return iS(this.pathData,t)}}Object.assign(og.prototype,UC,KC,ZC,qC,_C);class an extends sr{constructor(){super(),this.builder=new og(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,e){return this.builder.startAt(t,e),this.dirty=!0,this}lineTo(t,e,a){return this.builder.lineTo(t,e,a),this.dirty=!0,this}verticalLineTo(t,e){return this.builder.verticalLineTo(t,e),this.dirty=!0,this}horizontalLineTo(t,e){return this.builder.horizontalLineTo(t,e),this.dirty=!0,this}ellipticalArc(t,e,a,i,s,h,r){return this.builder.ellipticalArc(t,e,a,i,s,h,r),this.dirty=!0,this}arc(t,e,a,i,s,h){return this.builder.arc(t,e,a,i,s,h),this.dirty=!0,this}quadraticBezierTo(t,e,a,i){return this.builder.quadraticBezierTo(t,e,a,i),this.dirty=!0,this}smoothQuadraticBezierTo(t,e){return this.builder.smoothQuadraticBezierTo(t,e),this.dirty=!0,this}cubicBezierCurveTo(t,e,a,i,s,h){return this.builder.cubicBezierCurveTo(t,e,a,i,s,h),this.dirty=!0,this}smoothCubicBezierCurveTo(t,e,a,i){return this.builder.smoothCubicBezierCurveTo(t,e,a,i),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,e,a){return this.builder.rotateAround(t,e,a),this.dirty=!0,this}scale(t,e,a,i){return this.builder.scale(t,e,a,i),this.dirty=!0,this}offset(t,e){return this.builder.offset(t,e),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,e,a){return this.builder.appendFromPathSegment(t.builder,e,a),this}copyPathFrom(t,e,a){return this.builder.clear().appendFromPathSegment(t.builder,e,a),this}setDisplayPathSegment(t,e){return this.builder.setDisplayPathSegment(t,e),this}}const sS=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class nS extends La{constructor(t,e,a,i){t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=a),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,e),this.setSize(a,i)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,e){return this.centerX=t,this.centerY=e,this}updateData(){this.pathData.length=0;var t=this.x,e=t+this.width,a=this.y,i=a+this.height;return this.pathData.push(t,a),this.pathData.push(e,a),this.pathData.push(e,i),this.pathData.push(t,i),this.pathData.push(t,a),super.updateData(),this}webglRender(t,e,a,i,s){if(this.isFilled){var h=t.fillTint,r=sS(this.fillColor,this.fillAlpha*a);h.TL=r,h.TR=r,h.BL=r,h.BR=r,t.batchFillRect(-i+this.x,-s+this.y,this.width,this.height)}this.isStroked&&Ra(t,this,a,i,s)}canvasRender(t,e,a){this.isFilled&&(er(t,this),t.fillRect(-e,-a,this.width,this.height)),this.isStroked&&(ir(t,this),t.beginPath(),t.rect(-e,-a,this.width,this.height),t.stroke())}}const Ar=Phaser.Utils.Objects.GetValue;class ca extends sr{constructor(t,e,a,i,s,h){t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=a),s===void 0&&(s=0),h===void 0&&(h=6),super(),this.setTopLeftPosition(t,e),this.setSize(a,i),this.setRadius(s),this.setIterations(h),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,e){return this.x=t,this.y=e,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,e){return this.width=t,this.height=e,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,e){return this.centerX=t,this.centerY=e,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var e=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==e,this._convexTL=e,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var e=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==e,this._convexTR=e,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var e=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==e,this._convexBL=e,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var e=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==e,this._convexBR=e,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=Ar(t,"tl",0),this.radiusTR=Ar(t,"tr",0),this.radiusBL=Ar(t,"bl",0),this.radiusBR=Ar(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var e=this.width,a=this.height,i,s=this.iterations+1;if(i=this.radiusTL,i>0)if(this._convexTL){var h=i,r=i;Wt(h,r,i,i,180,270,!1,s,t)}else{var h=0,r=0;Wt(h,r,i,i,90,0,!0,s,t)}else ni(0,0,t);if(i=this.radiusTR,i>0)if(this._convexTR){var h=e-i,r=i;Wt(h,r,i,i,270,360,!1,s,t)}else{var h=e,r=0;Wt(h,r,i,i,180,90,!0,s,t)}else ni(e,0,t);if(i=this.radiusBR,i>0)if(this._convexBR){var h=e-i,r=a-i;Wt(h,r,i,i,0,90,!1,s,t)}else{var h=e,r=a;Wt(h,r,i,i,270,180,!0,s,t)}else ni(e,a,t);if(i=this.radiusBL,i>0)if(this._convexBL){var h=i,r=a-i;Wt(h,r,i,i,90,180,!1,s,t)}else{var h=0,r=a;Wt(h,r,i,i,360,270,!0,s,t)}else ni(0,a,t);return t.push(t[0],t[1]),ag(this.x,this.y,t),super.updateData(),this}}const rS=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;class aS extends La{constructor(t,e,a,i,s,h){t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),h===void 0&&(h=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,e),this.setP1(a,i),this.setP2(s,h)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,e){return this.x0=t,this.y0=e,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,e){return this.x1=t,this.y1=e,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,e){return this.dirty=this.dirty||this.x2!==t||this.y2!==e,this.x2=t,this.y2=e,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,e,a,i,s){if(this.isFilled){var h=rS(this.fillColor,this.fillAlpha*a),r=this.x0-i,o=this.y0-s,u=this.x1-i,l=this.y1-s,f=this.x2-i,v=this.y2-s,d=e.getX(r,o),c=e.getY(r,o),p=e.getX(u,l),g=e.getY(u,l),x=e.getX(f,v),m=e.getY(f,v);t.batchTri(d,c,p,g,x,m,h,h,h)}this.isStroked&&Ra(t,this,a,i,s)}canvasRender(t,e,a){var i=this.x1-e,s=this.y1-a,h=this.x2-e,r=this.y2-a,o=this.x3-e,u=this.y3-a;t.beginPath(),t.moveTo(i,s),t.lineTo(h,r),t.lineTo(o,u),t.closePath(),this.isFilled&&(er(t,this),t.fill()),this.isStroked&&(ir(t,this),t.stroke())}}const oS={buildShapes(){this.addShape(new ca().setName("box")).addShape(new an().setName("checker"))},updateShapes(){var n=this.width/2,t=this.height/2,e=Math.min(n,t),a=e*2,i=n-e,s=t-e,h=this.boxLineWidth,r=Math.max(a/10,2),o=this.getShape("box"),u=this.getShape("checker");if(this.isSizeChanged){var v=a*(1-this.boxSize)/2,l=h/2,f=a*this.boxSize-h;o.setTopLeftPosition(i+l+v,s+l+v).setSize(f,f),this.isCircleShape?o.setRadius(f/2):o.setRadius(0);var v=a*(1-this.checkerSize)/2,d=a*this.checkerSize/4,c=d*1,p=d*2,g=d*3;u.startAt(c,p).lineTo(p,g).lineTo(g,c).offset(i+v,s+v).end()}this.checked?(o.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(h,this.boxStrokeColor,this.boxStrokeAlpha),u.lineStyle(r,this.checkerColor)):(o.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(h,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),u.lineStyle()),this.checked&&u.setDisplayPathSegment(this.checkerAnimProgress)}},hS=Phaser.Utils.Objects.GetValue;class Ia extends kt{constructor(t,e){super(t,e),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(hS(e,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=lS[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const lS={no:0,lazy:1,always:2},uS=Phaser.Utils.Objects.GetValue;class fS extends Ia{constructor(t,e){super(t,e);var a=this.scene?"update":"step";this.tickEventName=uS(e,"tickEventName",a),this.isSceneTicker=!dS(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var dS=function(n){return n==="step"||n==="poststep"};const pi=Phaser.Utils.Objects.GetValue,Xf=Phaser.Math.Clamp;class hg{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=pi(t,"state",yn),this.timeScale=pi(t,"timeScale",1),this.delay=pi(t,"delay",0),this.repeat=pi(t,"repeat",0),this.repeatCounter=pi(t,"repeatCounter",0),this.repeatDelay=pi(t,"repeatDelay",0),this.duration=pi(t,"duration",0),this.nowTime=pi(t,"nowTime",0),this.justRestart=pi(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Bs:Tn,this.repeatCounter=0,this}stop(){return this.state=yn,this}update(t,e){this.state===yn||this.state===Or||e===0||this.timeScale===0||(this.nowTime+=e*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=Wf)):(this.nowTime=this.duration,this.state=Or):this.nowTime>=0&&(this.state=Bs))}get t(){var t;switch(this.state){case yn:case Tn:case Wf:t=0;break;case Bs:t=this.nowTime/this.duration;break;case Or:t=1;break}return Xf(t,0,1)}set t(t){t=Xf(t,-1,1),t<0?(this.state=Tn,this.nowTime=-this.delay*t):(this.state=Bs,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===yn}get isDelay(){return this.state===Tn}get isCountDown(){return this.state===Bs}get isRunning(){return this.state===Tn||this.state===Bs}get isDone(){return this.state===Or}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}}const yn=0,Tn=1,Bs=2,Wf=3,Or=-1;class cS extends fS{constructor(t,e){super(t,e),this.timer=new hg}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Cn=Phaser.Utils.Objects.GetValue,Hf=Phaser.Utils.Objects.GetAdvancedValue,vS=Phaser.Tweens.Builders.GetEaseFunction;class Es extends cS{resetFromJSON(t){return this.timer.resetFromJSON(Cn(t,"timer")),this.setEnable(Cn(t,"enable",!0)),this.setTarget(Cn(t,"target",this.parent)),this.setDelay(Hf(t,"delay",0)),this.setDuration(Hf(t,"duration",1e3)),this.setEase(Cn(t,"ease","Linear")),this.setRepeat(Cn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=vS(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,e){if(!this.isRunning||!this.enable||!this.parent.active)return this;var a=this.target,i=this.timer;return i.update(t,e),i.isDelay||this.updateGameObject(a,i),this.emit("update",a,this),i.isDone&&this.complete(),this}updateGameObject(t,e){}}const Ii=Phaser.Utils.Objects.GetValue,pS=Phaser.Math.Linear;class Ps extends Es{constructor(t,e){super(t,e),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var e=this.target;this.propertyKey=Ii(t,"key","value");var a=e[this.propertyKey];return this.fromValue=Ii(t,"from",a),this.toValue=Ii(t,"to",a),this.setEase(Ii(t,"ease",this.ease)),this.setDuration(Ii(t,"duration",this.duration)),this.setRepeat(Ii(t,"repeat",0)),this.setDelay(Ii(t,"delay",0)),this.setRepeatDelay(Ii(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),e[this.propertyKey]=this.fromValue,super.start(),this}updateGameObject(t,e){var a=e.t;a=this.easeFn(a),t[this.propertyKey]=pS(this.fromValue,this.toValue,a)}}const gS={setCheckerAnimationDuration(n){return n===void 0&&(n=0),this.checkerAnimDuration=n,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Ps(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var lg={};Object.assign(lg,IC,wC,oS,gS);const Rt=Phaser.Utils.Objects.GetValue,kf=Phaser.Utils.Objects.IsPlainObject,Po=23730,xS=16777215;class ug extends Ss{constructor(t,e,a,i,s,h,r){kf(e)?(r=e,e=Rt(r,"x",0),a=Rt(r,"y",0),i=Rt(r,"width",2),s=Rt(r,"height",2),h=Rt(r,"color",Po)):kf(h)&&(r=h,h=Rt(r,"color",Po)),super(t,e,a,i,s),this.type="rexCheckbox",h===void 0&&(h=Po),this.setBoxShape(Rt(r,"circleBox",!1)),this.setBoxFillStyle(h,Rt(r,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Rt(r,"uncheckedColor",null),Rt(r,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Rt(r,"boxLineWidth",4),Rt(r,"boxStrokeColor",h),Rt(r,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Rt(r,"uncheckedBoxStrokeColor",this.boxStrokeColor),Rt(r,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Rt(r,"checkerColor",xS),Rt(r,"checkerAlpha",1)),this.setBoxSize(Rt(r,"boxSize",1)),this.setCheckerSize(Rt(r,"checkerSize",1)),this.setCheckerAnimationDuration(Rt(r,"animationDuration",150)),this.buildShapes();var o=Rt(r,"checked");o===void 0&&(o=Rt(r,"value",!1)),this.setValue(o)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}}Object.assign(ug.prototype,lg);const Sn=Phaser.Utils.Objects.GetValue;class es extends kt{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Sn(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(Sn(t,"enable",!0)),this.setMode(Sn(t,"mode",1)),this.setClickInterval(Sn(t,"clickInterval",100)),this.setDragThreshold(Sn(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=mS[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,e,a,i){this.pointer===void 0&&(this.pointer=t,this.mode===0&&this.click(t.downTime,t,i))}onRelease(t,e,a,i){this.pointer===t&&(this.mode===1&&this.click(t.upTime,t,i),this.pointer=void 0)}onPointOut(t,e){this.pointer===t&&this.cancel()}onMove(t,e,a,i){this.pointer===t&&this.dragThreshold!==void 0&&t.getDistance()>=this.dragThreshold&&this.cancel()}click(t,e,a){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,e,a),this;this.pointer=void 0;var i=this.lastClickTime;return i!==void 0&&t-i<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,e,a),this)}cancel(){return this.pointer=void 0,this}onOver(t,e,a,i){return this.enable?(this.emit("over",this,this.parent,t,i),this):this}onOut(t,e){return this.enable?(this.emit("out",this,this.parent,t,e),this):this}}const mS={press:0,pointerdown:0,release:1,pointerup:1},$f=Phaser.Utils.Objects.GetValue;class Ol extends ug{constructor(t,e,a,i,s,h,r){super(t,e,a,i,s,h,r),this._click=new es(this,$f(r,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly($f(r,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}_.register("checkbox",function(n,t,e,a,i,s){var h=new Ol(this.scene,n,t,e,a,i,s);return this.scene.add.existing(h),h});q(window,"RexPlugins.UI.Checkbox",Ol);const yS={setTrackFillStyle(n,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==n||this.trackFillAlpha!==t,this.trackFillColor=n,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(n,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==n||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=n,this.falseValueTrackFillAlpha=t,this},setThumbStyle(n,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==n||this.checkAlpha!==t,this.thumbColor=n,this.thumbAlpha=t,this}},TS={setTrackSize(n,t){return this.dirty=this.dirty||this.trackWidth!==n||this.trackHeight!==t,this.trackWidth=n,this.trackHeight=t,this},setTrackRadius(n){return this.dirty=this.dirty||this.trackRadius!==n,this.trackRadius=n,this},setThumbSize(n,t){return t===void 0&&(t=n),this.dirty=this.dirty||this.thumbWidth!==n||this.thumbHeight!==t,this.thumbWidth=n,this.thumbHeight=t,this},setThumbRadius(n){return this.dirty=this.dirty||this.thumbRadius!==n,this.thumbRadius=n,this}},CS={setThumbPosition(n,t){return t===void 0&&(t=1-n),this.thumbLeftX=n,this.thumbRightX=t,this},setRTL(n){return n===void 0&&(n=!0),this.rtl=n,this}};/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2019 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var Mo=function(n,t,e){return(t-n)*e+n},Xn=function(n){return n>>16&255},Wn=function(n){return n>>8&255},Hn=function(n){return n&255},SS=function(n,t,e){var a=Mo(Xn(n),Xn(t),e),i=Mo(Wn(n),Wn(t),e),s=Mo(Hn(n),Hn(t),e);return(a&255)<<16|(i&255)<<8|s&255};const Kf=Phaser.Math.Linear,ES={buildShapes(){this.addShape(new ca().setName("track")).addShape(new ca().setName("thumb"))},updateShapes(){var n=this.width,t=this.height,e=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,a=this.getShape("track");if(this.isSizeChanged){var i=n*this.trackWidth,s=t*this.trackHeight,h=(n-i)/2,r=(t-s)/2,o=t*this.trackRadius;a.setTopLeftPosition(h,r).setSize(i,s).setRadius(o)}var u=SS(this.falseValueTrackColor,this.trackFillColor,e),l=Kf(this.falseValueTrackFillAlpha,this.trackFillAlpha,e);a.fillStyle(u,l);var f=this.getShape("thumb");if(this.isSizeChanged){var v=n*this.thumbWidth,d=t*this.thumbHeight,c=t*this.thumbRadius;f.setSize(v,d).setRadius(c)}var p=Kf(this.thumbLeftX,this.thumbRightX,e)*n;this.rtl&&(p=n-p);var g=t/2;f.setCenterPosition(p,g),f.fillStyle(this.thumbColor,this.thumbAlpha)}},PS={setToggleAnimationDuration(n){return n===void 0&&(n=0),this.toggleAnimDuration=n,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Ps(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var fg={};Object.assign(fg,yS,TS,CS,ES,PS);var MS=function(n){var t=.3*Xn(n)+.59*Wn(n)+.11*Hn(n);return(t&255)<<16|(t&255)<<8|t&255};const Lt=Phaser.Utils.Objects.GetValue,Zf=Phaser.Utils.Objects.IsPlainObject,Ao=23730,AS=16777215;class dg extends Ss{constructor(t,e,a,i,s,h,r){Zf(e)?(r=e,e=Lt(r,"x",0),a=Lt(r,"y",0),i=Lt(r,"width",2),s=Lt(r,"height",2),h=Lt(r,"color",Ao)):Zf(h)&&(r=h,h=Lt(r,"color",Ao)),super(t,e,a,i,s),this.type="rexToggleSwitch",h===void 0&&(h=Ao),this.setTrackFillStyle(h,Lt(r,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Lt(r,"falseValueTrackColor",MS(h)),Lt(r,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Lt(r,"thumbColor",AS),Lt(r,"thumbAlpha",1)),this.setTrackSize(Lt(r,"trackWidth",.9),Lt(r,"trackHeight",.5)),this.setTrackRadius(Lt(r,"trackRadius",this.trackHeight*.5));var o=Lt(r,"thumbHeight",void 0),u=Lt(r,"thumbWidth",o);u===void 0&&(u=this.trackHeight*.9),this.setThumbSize(u,o),this.setThumbRadius(Lt(r,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Lt(r,"thumbLeft",.3),Lt(r,"thumbRight",void 0)),this.setRTL(Lt(r,"rtl",!1)),this.setToggleAnimationDuration(Lt(r,"animationDuration",150)),this.buildShapes(),this.setValue(Lt(r,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,e){e===void 0&&(e=this.toggleAnimDuration);var a=this.toggleAnimDuration;return this.toggleAnimDuration=e,this.value=t,this.toggleAnimDuration=a,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}}Object.assign(dg.prototype,fg);const Jf=Phaser.Utils.Objects.GetValue;class Rl extends dg{constructor(t,e,a,i,s,h,r){super(t,e,a,i,s,h,r),this._click=new es(this,Jf(r,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(Jf(r,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}}_.register("toggleSwitch",function(n,t,e,a,i,s){var h=new Rl(this.scene,n,t,e,a,i,s);return this.scene.add.existing(h),h});q(window,"RexPlugins.UI.ToggleSwitch",Rl);const OS=Phaser.GameObjects.Zone,RS=Phaser.Utils.Array.Add,LS=Phaser.Utils.Array.Remove;class nr extends OS{constructor(t,e,a,i,s){e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=1),s===void 0&&(s=1),super(t,e,a,i,s),this.children=[]}destroy(t){if(!!this.scene){if(t)for(var e,a=this.children.length-1;a>=0;a--)e=this.children[a],!e.parentContainer&&!e.displayList&&e.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var e=this;return RS(this.children,t,0,function(a){a.once("destroy",e.onChildDestroy,e)},this),this}remove(t,e){var a=this;return LS(this.children,t,function(i){i.off("destroy",a.onChildDestroy,a),e&&i.destroy()}),this}onChildDestroy(t,e){this.remove(t,!1)}clear(t){for(var e=this,a,i=0,s=this.children.length;i<s;i++)a=this.children[i],a.off("destroy",e.onChildDestroy,e),t&&a.destroy();return this.children.length=0,this}}const jf=Phaser.GameObjects.Components;Phaser.Class.mixin(nr,[jf.Alpha,jf.Flip]);var Be=function(n,t){var e;if(t===void 0)n.hasOwnProperty("rexContainer")&&(e=n.rexContainer.parent);else for(e=Be(n);e&&e.name!==t;)e=Be(e);return e},cg=function(n){for(var t=Be(n);t;)n=t,t=Be(t);return n};const FS=Phaser.Math.DegToRad,IS=Phaser.Math.RadToDeg;var gt=function(n){if(!n.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return IS(this.rotation)},set:function(e){this.rotation=FS(e)}}),Object.defineProperty(t,"displayWidth",{get:function(){return n.width*this.scaleX},set:function(e){this.scaleX=e/n.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return n.height*this.scaleY},set:function(e){this.scaleY=e/n.height}}),n.rexContainer=t}return n.rexContainer};const wS={setParent(n,t){t===void 0&&(t=this);var e=gt(n);return t?(e.parent=t,e.self=n):(e.parent=null,e.self=null),this},getParent(n,t){return typeof n=="string"&&(t=n,n=void 0),n===void 0&&(n=this),Be(n,t)},getTopmostParent(n){return n===void 0&&(n=this),cg(n)}},Rr=Phaser.Utils.Objects.GetValue,vg=nr.prototype.add;var Oo=function(n,t){this.setParent(n);var e=gt(n);return pg(e,t),this.resetChildState(n).updateChildVisible(n).updateChildActive(n).updateChildScrollFactor(n).updateChildMask(n),vg.call(this,n),this.addToParentContainer(n),this.addToRenderLayer(n),this},Ro=function(n,t){this.setParent(n);var e=gt(n);return pg(e,t),e.x=n.x,e.y=n.y,e.rotation=n.rotation,e.scaleX=n.scaleX,e.scaleY=n.scaleY,e.alpha=n.alpha,e.visible=n.visible,e.active=n.active,this.updateChildPosition(n).updateChildAlpha(n).updateChildVisible(n).updateChildActive(n).updateChildScrollFactor(n).updateChildMask(n),vg.call(this,n),this.addToRenderLayer(n),this},pg=function(n,t){n.syncPosition=Rr(t,"syncPosition",!0),n.syncRotation=Rr(t,"syncRotation",!0),n.syncScale=Rr(t,"syncScale",!0),n.syncAlpha=Rr(t,"syncAlpha",!0)};const BS={add(n){return Array.isArray(n)?this.addMultiple(n):Oo.call(this,n),this},pin(n,t){return Array.isArray(n)?this.addMultiple(n,t):Oo.call(this,n,t),this},addMultiple(n){for(var t=0,e=n.length;t<e;t++)Oo.call(this,n[t]);return this},addLocal(n){return Array.isArray(n)?this.addMultiple(n):Ro.call(this,n),this},pinLocal(n,t){return Array.isArray(n)?this.addMultiple(n,t):Ro.call(this,n,t),this},addLocalMultiple(n){for(var t=0,e=n.length;t<e;t++)Ro.call(this,n[t]);return this}},Qf=nr.prototype.remove,DS=nr.prototype.clear,bS={remove(n,t){return Be(n)!==this?this:(this.setParent(n,null),t||this.removeFromRenderLayer(n),Qf.call(this,n,t),this)},unpin(n,t){return Be(n)!==this?this:(this.setParent(n,null),t||this.removeFromRenderLayer(n),Qf.call(this,n,t),this)},clear(n){for(var t=this.children,e=0,a=t.length;e<a;e++){var i=t[e];this.setParent(i,null),n||this.removeFromRenderLayer(i)}return DS.call(this,n),this}},GS={getLocalState(n){return gt(n)},resetChildState(n){return this.resetChildPositionState(n).resetChildVisibleState(n).resetChildAlphaState(n).resetChildActiveState(n),this},resetChildrenState(n){for(var t=0,e=n.length;t<e;t++)this.resetChildState(n[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},qf=Phaser.Math.RotateAround,NS={worldToLocal(n){return n.x-=this.x,n.y-=this.y,qf(n,0,0,-this.rotation),n.x/=this.scaleX,n.y/=this.scaleY,n},localToWorld(n){return n.x*=this.scaleX,n.y*=this.scaleY,qf(n,0,0,this.rotation),n.x+=this.x,n.y+=this.y,n}};var kn=function(n,t){return n===t?1:n/t};const YS={updateChildPosition(n){n.isRexContainerLite&&(n.syncChildrenEnable=!1);var t=gt(n),e=t.parent;return t.syncPosition&&(n.x=t.x,n.y=t.y,e.localToWorld(n)),t.syncRotation&&(n.rotation=t.rotation+e.rotation),t.syncScale&&(n.scaleX=t.scaleX*e.scaleX,n.scaleY=t.scaleY*e.scaleY),n.isRexContainerLite&&(n.syncChildrenEnable=!0,n.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(n){var t=gt(n),e=t.parent;return t.x=n.x,t.y=n.y,e.worldToLocal(t),t.scaleX=kn(n.scaleX,e.scaleX),t.scaleY=kn(n.scaleY,e.scaleY),t.rotation=n.rotation-e.rotation,this},setChildPosition(n,t,e){return n.x=t,n.y=e,this.resetChildPositionState(n),this},setChildLocalPosition(n,t,e){var a=gt(n);return a.x=t,a.y=e,this.updateChildPosition(n),this},resetLocalPositionState(){var n=gt(this).parent;return n&&n.resetChildPositionState(this),this}},VS=Phaser.Math.DegToRad,zS={updateChildRotation(n){var t=gt(n),e=t.parent;return t.syncRotation&&(n.rotation=e.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(n){var t=gt(n),e=t.parent;return t.rotation=n.rotation-e.rotation,this},setChildRotation(n,t){return n.rotation=t,this.resetChildRotationState(n),this},setChildAngle(n,t){return n.angle=t,this.resetChildRotationState(n),this},setChildLocalRotation(n,t){var e=gt(n);return e.rotation=t,this.updateChildRotation(n),this},setChildLocalAngle(n,t){var e=gt(n);return e.rotation=VS(t),this.updateChildRotation(n),this},resetLocalRotationState(){var n=gt(this).parent;return n&&n.resetChildRotationState(this),this}},US={updateChildScale(n){var t=gt(n),e=t.parent;return t.syncScale&&(n.scaleX=e.scaleX*t.scaleX,n.scaleY=e.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(n){var t=gt(n),e=t.parent;return t.scaleX=kn(n.scaleX,e.scaleX),t.scaleY=kn(n.scaleY,e.scaleY),this},setChildScale(n,t,e){return e===void 0&&(e=t),n.scaleX=t,n.scaleY=e,this.resetChildScaleState(n),this},setChildLocalScale(n,t,e){e===void 0&&(e=t);var a=gt(n);return a.scaleX=t,a.scaleY=e,this.updateChildScale(n),this},setChildDisplaySize(n,t,e){return n.setDisplaySize(t,e),this.resetChildScaleState(n),this},resetLocalScaleState(){var n=gt(this).parent;return n&&n.resetChildScaleState(this),this}},XS={updateChildVisible(n){var t=gt(n),e=t.parent,a=t.hasOwnProperty("maskVisible")?t.maskVisible:!0;return n.visible=e.visible&&t.visible&&a,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(n){var t=gt(n);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=n.visible,this},setChildVisible(n,t){return this.setChildLocalVisible(n,t),this},setChildLocalVisible(n,t){t===void 0&&(t=!0);var e=gt(n);return e.visible=t,this.updateChildVisible(n),this},setChildMaskVisible(n,t){t===void 0&&(t=!0);var e=gt(n);return e.maskVisible=t,this.updateChildVisible(n),this},resetLocalVisibleState(){var n=gt(this).parent;return n&&n.resetChildVisibleState(this),this}},WS={updateChildAlpha(n){var t=gt(n),e=t.parent;return t.syncAlpha&&(n.alpha=e.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(n){var t=gt(n),e=t.parent;return t.alpha=kn(n.alpha,e.alpha),this},setChildAlpha(n,t){return n.alpha=t,this.resetChildAlphaState(n),this},setChildLocalAlpha(n,t){var e=gt(n);return e.alpha=t,this.updateChildAlpha(n),this},resetLocalAlphaState(){var n=gt(this).parent;return n&&n.resetChildAlphaState(this),this}},HS={updateChildActive(n){var t=gt(n),e=t.parent;return n.active=e.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(n){var t=gt(n);return t.active=n.active,this},setChildActive(n,t){return n.active=t,this.resetChildActiveState(n),this},setChildLocalActive(n,t){t===void 0&&(t=!0);var e=gt(n);return e.active=t,this.updateChildActive(n),this},resetLocalActiveState(){var n=gt(this).parent;return n&&n.resetChildActiveState(this),this}},kS={updateChildScrollFactor(n){var t=gt(n),e=t.parent;return n.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},$S={updateChildMask(n){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==n&&(n.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(n){return this.mask=n,this},clearMask(n){return n===void 0&&(n=!1),this._mask=null,this.children.forEach(function(t){t.clearMask(!1)}),n&&this.mask&&this.mask.destroy(),this}};var on=function(n,t){if(n.length===0)return n;t===void 0&&(t=!1);var e=n[0].scene,a=e.sys.displayList;return a.depthSort(),t?n.sort(function(i,s){return a.getIndex(s)-a.getIndex(i)}):n.sort(function(i,s){return a.getIndex(i)-a.getIndex(s)}),n};const KS={setDepth(n,t){if(this.depth=n,!t&&this.children)for(var e=this.getAllChildren(),a=0,i=e.length;a<i;a++)e[a].depth=n;return this},swapDepth(n){var t=this.depth,e=n.depth;return this.setDepth(e),n.setDepth(t),this},incDepth(n){if(this.depth+=n,this.children)for(var t=this.getAllChildren(),e=0,a=t.length;e<a;e++)t[e].depth+=n;return this},bringToTop(){var n=this.displayList,t=this.getAllChildren([this]);on(t,!1);for(var e=0,a=t.length;e<a;e++){var i=t[e];n.exists(i)&&n.bringToTop(i)}return this},moveDepthBelow(n){var t=this.displayList;if(n.displayList!==t)return this;var e=this.getAllChildren([this]);on(e,!1);for(var a=0,i=e.length;a<i;a++){var s=e[a];if(t.exists(s)){t.moveBelow(n,s);break}}return this},moveDepthAbove(n){var t=this.displayList;if(n.displayList!==t)return this;var e=this.getAllChildren([this]);on(e,!0);for(var a=0,i=e.length;a<i;a++){var s=e[a];if(t.exists(s)){t.moveAbove(n,s);break}}return this}};var gg=function(n,t){var e=t(n);if(!e&&n.isRexContainerLite)for(var a=n.children,i=0,s=a.length;i<s;i++)gg(a[i],t)},Lo=function(n,t){for(var e=[n];e.length>0;){var a=e.shift(),i=t(a);!i&&a.isRexContainerLite&&e.push(...a.children)}};const hs=Phaser.Utils.Array,ZS={getChildren(n){if(!n)n=this.children;else for(var t=0,e=this.children.length;t<e;t++)n.push(this.children[t]);return n},getAllChildren(n){n===void 0&&(n=[]);var t=this;return Lo(t,function(e){e!==t&&n.push(e)}),n},getAllVisibleChildren(n){n===void 0&&(n=[]);var t=this;return Lo(t,function(e){if(e!==t){if(!e.visible)return!0;n.push(e)}}),n},bfs(n,t){return t===void 0&&(t=this),Lo(t,n),this},dfs(n,t){return t===void 0&&(t=this),gg(t,n),this},contains(n){var t=Be(n);return t?t===this?!0:this.contains(t):!1},getByName(n,t){if(t){for(var e=[this],a,i;e.length;){a=e.shift();for(var s=0,h=a.children.length;s<h;s++){if(i=a.children[s],i.name===n)return i;i.isRexContainerLite&&e.push(i)}}return null}else return hs.GetFirst(this.children,"name",n)},getRandom(n,t){return hs.GetRandom(this.children,n,t)},getFirst(n,t,e,a){return hs.GetFirstElement(this.children,n,t,e,a)},getAll(n,t,e,a){return hs.GetAll(this.children,n,t,e,a)},count(n,t,e,a){return hs.CountAllMatching(this.children,n,t,e,a)},swap(n,t){return hs.Swap(this.children,n,t),this},setAll(n,t,e,a){return hs.SetAll(this.children,n,t,e,a),this}};var Fo=function(n){for(var t=[],e=0,a=n.length;e<a;e++){var i=n[e];!i.hasOwnProperty("rexContainer")||t.push(i.rexContainer)}return t},JS=function(n){for(var t=0,e=n.length;t<e;t++){var a=n[t].scene;if(a)return a}return null},_f=function(n,t,e){if(!e.parent){n.remove();return}var a=e.parent,i=e.self;switch(t){case"x":case"y":a.updateChildPosition(i);break;case"angle":case"rotation":a.updateChildRotation(i);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":a.updateChildScale(i);break;case"alpha":a.updateChildAlpha(i);break;default:a.updateChildPosition(i),a.updateChildRotation(i),a.updateChildScale(i),a.updateChildAlpha(i);break}};const jS={tweenChild(n){var t=n.targets;Array.isArray(t)||(t=[t]);var e=this.scene||JS(t);if(!!e){n.targets=Fo(t);var a=e.tweens.add(n);return a.on("update",_f),a}},tweenSelf(n){return n.targets=[this],this.tweenChild(n)},createTweenChildConfig(n){var t=n.targets;t&&(Array.isArray(t)||(t=[t]),n.targets=Fo(t));var e=n.onUpdate;return n.onUpdate=function(a,i){e&&e(a,i),_f(a,void 0,i)},n},tween(n){var t=this.scene;return n.targets||(n.targets=this),t.tweens.add(n)},timelineChild(n){var t=n.targets;t&&(Array.isArray(t)||(t=[t]),n.targets=Fo(t));for(var e=n.tweens,a=0,i=e.length;a<i;a++)e[a]=this.createTweenChildConfig(e[a]);var s=this.scene.tweens.timeline(n);return s}},QS={addToContainer(n){this._setParentContainerFlag=!0;var t=this.getAllChildren([this]);return on(t),n.add(t),this._setParentContainerFlag=!1,this},addToLayer(n){return this.addToContainer(n),this},removeFromContainer(){if(!this.parentContainer)return this;this._setParentContainerFlag=!0;var n=this.getAllChildren([this]);return on(n),n.reverse(),this.parentContainer.remove(n),this._setParentContainerFlag=!1,this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var n=this.getParent();n;){var t=n.parentContainer;if(t)return t;n=n.getParent()}return null},addToParentContainer(n){if(!n.displayList)return this;var t=this.getParentContainer();return t?(n.isRexContainerLite?n.addToContainer(t):t.add(n),this):this}},qS={enableLayer(){if(this.privateRenderLayer)return this;var n=this.scene.add.layer();return this.moveDepthBelow(n),this.addToLayer(n),this.privateRenderLayer=n,this},getLayer(){return this.privateRenderLayer||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.privateRenderLayer)return this.privateRenderLayer;for(var n=this.getParent();n;){var t=n.privateRenderLayer;if(t)return t;n=n.getParent()}return null},addToRenderLayer(n){if(!n.displayList)return this;var t=this.getRenderLayer();if(!t)return this;n.isRexContainerLite?n.addToLayer(t):t.add(n);var e=gt(n);return e.layer=t,this},removeFromRenderLayer(n){var t=gt(n),e=t.layer;return e?(e.remove(n),t.layer=null,this):this}};var Tt=function(n){return n.displayWidth!==void 0?n.displayWidth:n.width},xt=function(n){return n.displayHeight!==void 0?n.displayHeight:n.height};const td=Phaser.Geom.Rectangle,Qi=Phaser.Math.Vector2,_S=Phaser.Math.RotateAround;var Ll=function(n,t){if(t===void 0?t=new td:t===!0&&(Io===void 0&&(Io=new td),t=Io),n.getBounds)return n.getBounds(t);var e,a,i,s,h,r,o,u;if(n.parentContainer){var l=n.parentContainer.getBoundsTransformMatrix();Xh(n,t),l.transformPoint(t.x,t.y,t),e=t.x,a=t.y,Wh(n,t),l.transformPoint(t.x,t.y,t),i=t.x,s=t.y,Hh(n,t),l.transformPoint(t.x,t.y,t),h=t.x,r=t.y,kh(n,t),l.transformPoint(t.x,t.y,t),o=t.x,u=t.y}else Xh(n,t),e=t.x,a=t.y,Wh(n,t),i=t.x,s=t.y,Hh(n,t),h=t.x,r=t.y,kh(n,t),o=t.x,u=t.y;return t.x=Math.min(e,i,h,o),t.y=Math.min(a,s,r,u),t.width=Math.max(e,i,h,o)-t.x,t.height=Math.max(a,s,r,u)-t.y,t},Io=void 0,Xh=function(n,t,e){return t===void 0?t=new Qi:t===!0&&(Fe===void 0&&(Fe=new Qi),t=Fe),n.getTopLeft?n.getTopLeft(t):(t.x=n.x-Tt(n)*n.originX,t.y=n.y-xt(n)*n.originY,wa(n,t,e))},Wh=function(n,t,e){return t===void 0?t=new Qi:t===!0&&(Fe===void 0&&(Fe=new Qi),t=Fe),n.getTopRight?n.getTopRight(t):(t.x=n.x-Tt(n)*n.originX+Tt(n),t.y=n.y-xt(n)*n.originY,wa(n,t,e))},Hh=function(n,t,e){return t===void 0?t=new Qi:t===!0&&(Fe===void 0&&(Fe=new Qi),t=Fe),n.getBottomLeft?n.getBottomLeft(t):(t.x=n.x-Tt(n)*n.originX,t.y=n.y-xt(n)*n.originY+xt(n),wa(n,t,e))},kh=function(n,t,e){return t===void 0?t=new Qi:t===!0&&(Fe===void 0&&(Fe=new Qi),t=Fe),n.getBottomRight?n.getBottomRight(t):(t.x=n.x-Tt(n)*n.originX+Tt(n),t.y=n.y-xt(n)*n.originY+xt(n),wa(n,t,e))},Fe=void 0,wa=function(n,t,e){if(e===void 0&&(e=!1),n.rotation!==0&&_S(t,n.x,n.y,n.rotation),e&&n.parentContainer){var a=n.parentContainer.getBoundsTransformMatrix();a.transformPoint(t.x,t.y,t)}return t};const ed=Phaser.Geom.Rectangle,t1=Phaser.Geom.Rectangle.Union;var e1=function(n,t){t===void 0?t=new ed:t===!0&&(wo===void 0&&(wo=new ed),t=wo),t.setTo(0,0,0,0);for(var e,a=!0,i=0,s=n.length;i<s;i++)if(e=n[i],!!e.getBounds){var h=Ll(e,!0);a?(t.setTo(h.x,h.y,h.width,h.height),a=!1):t1(h,t,t)}return t},wo,ls=Phaser.Utils.Objects.GetValue,Fl=function(n){if(!!n){var t=n.gameObjects,e=n.renderTexture,a=ls(n,"x",void 0),i=ls(n,"y",void 0),s=ls(n,"width",void 0),h=ls(n,"height",void 0),r=ls(n,"originX",0),o=ls(n,"originY",0),u=ls(n,"padding",0),l,f;if(s===void 0||h===void 0||a===void 0||i===void 0){var v=e1(t,!0),d=a!==void 0&&i!==void 0;d?(s=Math.max(a-v.left,v.right-a)*2,h=Math.max(i-v.top,v.bottom-i)*2,r=.5,o=.5):(a=v.x,i=v.y,s=v.width,h=v.height,r=0,o=0),l=v.x,f=v.y}else l=a+(0-r)*s,f=i+(0-o)*h;l-=u,f-=u,s+=u*2,h+=u*2;var c=!e;if(c){var p=t[0].scene;e=p.add.renderTexture(0,0,s,h)}e.setPosition(a,i),(e.width!==s||e.height!==h)&&e.setSize(s,h),e.setOrigin(r,o),e.camera.setScroll(l,f),t=on(Cs(t)),e.draw(t);var g=n.saveTexture;return g&&e.saveTexture(g),c&&g&&e.destroy(),e}};const i1={snapshot(n){var t=this.scaleX,e=this.scaleY,a=t===1&&e===1;a||this.setScale(1),n===void 0&&(n={}),n.gameObjects=this.getAllVisibleChildren(),n.x=this.x,n.y=this.y,n.originX=this.originX,n.originY=this.originY;var i=Fl(n),s=!!i.scene;return a||(this.setScale(t,e),s&&i.setScale(t,e)),s?i:this}},id=Phaser.Utils.Objects.GetValue;var xg=function(n,t,e){var a=n.getBounds||n.width!==void 0&&n.height!==void 0;if(!!a){var i,s;typeof e=="number"?i=e:(i=id(e,"color"),s=id(e,"lineWidth")),i===void 0&&(i=16777215),s===void 0&&(s=1),gi[0]=Xh(n,gi[0]),gi[1]=Wh(n,gi[1]),gi[2]=kh(n,gi[2]),gi[3]=Hh(n,gi[3]),t.lineStyle(s,i).strokePoints(gi,!0,!0)}},gi=[void 0,void 0,void 0,void 0];const s1=Phaser.Utils.Objects.GetValue;var n1=function(n,t){for(var e=s1(t,"drawContainer",!0),a=this.getAllVisibleChildren([this]),i=0,s=a.length;i<s;i++){var h=a[i];!e&&h.isRexContainerLite||xg(h,n,t)}return this};const r1=Phaser.Math.RotateAround;var a1=function(n,t,e){e===void 0&&(e=t);var a={x:(t-n.originX)*n.displayWidth,y:(e-n.originY)*n.displayHeight};return r1(a,0,0,n.rotation),n.originX=t,n.originY=e,n.x=n.x+a.x,n.y=n.y+a.y,n},o1=function(n,t){this.syncChildrenEnable=!1,a1(this,n,t),this.syncChildrenEnable=!0;for(var e=this.getAllChildren(),a=0,i=e.length;a<i;a++)this.resetChildPositionState(e[a]);return this},mg={changeOrigin:o1,drawBounds:n1};Object.assign(mg,wS,BS,bS,GS,NS,YS,zS,US,XS,WS,HS,kS,$S,KS,ZS,jS,QS,qS,i1);class De extends nr{constructor(t,e,a,i,s,h){Array.isArray(i)&&(h=i,i=void 0,s=void 0),super(t,e,a,i,s),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this.privateRenderLayer=void 0,h&&this.add(h)}destroy(t){!this.scene||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,e){return this.setSize(t,e),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return Be(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Be(this);return t?t.setParentContainerFlag:!1}}Object.assign(De.prototype,mg);_.register("container",function(n,t,e,a,i){var s=new De(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.Container",De);_.register("canvas",function(n,t,e,a){var i=new Me(this.scene,n,t,e,a);return this.scene.add.existing(i),i});q(window,"RexPlugins.UI.Canvas",Me);const Ds=Phaser.Utils.Objects.GetValue;class Il extends Me{constructor(t,e,a,i,s,h){super(t,e,a),this.type="rexCircleMaskImage",this.setTexture(i,s,h)}setTexture(t,e,a){typeof e=="object"&&(a=e,e=void 0),typeof a=="string"&&(a={maskType:a});var i=Ds(a,"maskType",0),s=Ds(a,"backgroundColor",void 0),h=Ds(a,"strokeColor",void 0),r=h!=null?10:0,o=Ds(a,"strokeWidth",r);if(i===void 0?i=0:typeof i=="string"&&(i=h1[i]),this._textureKey=t,this._frameName=e,i===null)return this.loadTexture(t,e),this.dirty=!0,this;var u=this.scene.sys.textures.getFrame(t,e);if(!u)return this;u.cutWidth!==this.width||u.cutHeight!==this.height?this.setCanvasSize(u.cutWidth,u.cutHeight):this.clear();var l=this.canvas,f=this.context,v=l.width,d=l.height;s!=null&&(f.fillStyle=s,f.fillRect(0,0,v,d)),f.save(),f.beginPath();var c=o/2;switch(i){case 1:var y=Math.floor(v/2),T=Math.floor(d/2),p=y-c,g=T-c;f.ellipse(y,T,p,g,0,0,2*Math.PI);break;case 2:var x=Ds(a,"radius",0),m=Ds(a,"iteration",void 0);tp(f,c,c,v-o,d-o,x,m);break;default:var y=Math.floor(v/2),T=Math.floor(d/2),C=Math.min(y,T)-c;f.arc(y,T,C,0,2*Math.PI);break}return h!=null&&(f.strokeStyle=h,f.lineWidth=o,f.stroke()),f.clip(),this.loadTexture(t,e),f.restore(),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}}const h1={circle:0,ellipse:1,roundRectangle:2};_.register("circleMaskImage",function(n,t,e,a,i){var s=new Il(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.CircleMaskImage",Il);const En=Phaser.Utils.Objects.GetValue;class yg extends Me{constructor(t,e,a,i,s,h){super(t,e,a),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(i,s,h)}setTexture(t,e,a){typeof e=="object"&&(a=e,e=void 0),typeof a=="string"&&(a={mask:{key:a}});var i=En(a,"mask.key"),s=En(a,"mask.frame"),h=En(a,"mask.invertAlpha",!1),r=En(a,"mask.scale"),o=En(a,"backgroundColor");if(i){this._maskKey=i,this._maskFrame=s,this._maskScale=r;var u=i?this.scene.sys.textures.get(i):null;this.maskFrame=u?u.get(s):null}this._textureKey=t,this._frameName=e;var l=this.maskFrame;if(l===null)return this.loadTexture(t,e),this.dirty=!0,this;var f=o!=null;this.loadTexture(t,e);var v=this.canvas,d=this.context,c=v.width,p=v.height;d.save(),d.globalCompositeOperation=h?"destination-out":"destination-in";var g,x;this._maskScale!=null?(g=l.cutWidth*this._maskScale,x=l.cutHeight*this._maskScale):(g=c,x=p);var m=(c-g)/2,y=(p-x)/2;return this.drawFrame(this._maskKey,this._maskFrame,m,y,g,x),d.restore(),f&&(d.save(),d.globalCompositeOperation="destination-over",d.fillStyle=o,d.fillRect(0,0,c,p),d.restore()),this.dirty=!0,this}resize(t,e){return this.setDisplaySize(t,e),this}}_.register("alphaMaskImage",function(n,t,e,a,i){var s=new yg(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.AlphaMaskImage",yg);const Lr=Phaser.Utils.Objects.GetValue;var ra=function(n,t){return t===void 0?n:n[t]},Zi=function(n,t,e){n===void 0&&(n={}),t===void 0&&(t=0);var a=typeof t;return a==="string"?n[t]=e:a==="number"?(n.left=t,n.right=t,n.top=t,n.bottom=t):(n.left=Lr(t,"left",0),n.right=Lr(t,"right",0),n.top=Lr(t,"top",0),n.bottom=Lr(t,"bottom",0)),n};class wl{constructor(t,e){this.setParent(t),this.type=e,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,e){return!1}}Object.assign(wl.prototype,Aa);const l1={renderContent(){},render(){if(!this.willRender)return this;var n=this.context;if(n.save(),n.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,e=this.drawY;this.autoRound&&(t=Math.round(t),e=Math.round(e)),n.translate(t,e),n.scale(this.scaleX,this.scaleY),n.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),n.restore(),this}},u1=Phaser.Math.RotateAround;var f1=function(n,t,e,a){return a===void 0?a={}:a===!0&&(Bo===void 0&&(Bo={}),a=Bo),a.x=(n-e.drawX)/e.scaleX,a.y=(t-e.drawY)/e.scaleY,e.rotation!==0&&u1(a,0,0,-e.rotation),a},Bo;const d1=Phaser.Geom.Rectangle;var c1=function(n,t){if(this.width===0||this.height===0)return!1;var e=f1(n,t,this,!0);return v1(this).contains(e.x,e.y)},v1=function(n){Fr===void 0&&(Fr=new d1);var t=n.drawTLX,e=n.drawTLY;return Fr.setTo(t,e,n.drawTRX-t,n.drawBLY-e),Fr},Fr;const p1=Phaser.Math.RotateAround;var Tg=function(n,t,e,a){return a===void 0?a={}:a===!0&&(Do===void 0&&(Do={}),a=Do),a.x=t,a.y=e,n.rotation!==0&&p1(a,0,0,n.rotation),a.x=a.x*n.scaleX+n.drawX,a.y=a.y*n.scaleY+n.drawY,a},Do;const sd=Phaser.GameObjects.Components.TransformMatrix;var g1=function(n,t,e,a){a===void 0?a={}:a===!0&&(a=x1);var i=t-n.width*n.originX,s=e-n.height*n.originY;return Pn===void 0&&(Pn=new sd,nd=new sd),n.parentContainer?n.getWorldTransformMatrix(Pn,nd):Pn.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),Pn.transformPoint(i,s,a),a},Pn,nd,x1={},m1=function(n,t,e,a,i){var s=Tg(t,e,a,!0),h=g1(n,s.x,s.y,i);return h},Cg=function(n,t,e,a,i){typeof e!="number"&&(i=e,e=0,a=0);var s=t.drawCenterX+e,h=t.drawCenterY+a;return m1(n,t,s,h,i)},y1=function(n,t,e){return Cg(this.parent,this,n,t,e)},Sg={contains:c1,getWorldPosition:y1};Object.assign(Sg,l1);const T1=Phaser.Math.DegToRad,C1=Phaser.Math.RadToDeg,Ir=Phaser.Utils.Objects.GetValue;class Ms extends wl{constructor(t,e){super(t,e),this.renderable=!0,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,e){return this.x=t,this.y=e,this}setInitialPosition(t,e){return this.x0=t,this.y0=e,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return C1(this._rotation)}set angle(t){this.rotation=T1(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,e){return e===void 0&&(e=!1),this.width=t,e&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}setScale(t,e){return e===void 0&&(e=t),this.scaleX=t,this.scaleY=e,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var e=Ir(t,"width",void 0),a=Ir(t,"height",void 0),i=Ir(t,"scaleX",void 0),s=Ir(t,"scaleY",void 0);return e!==void 0?a===void 0&&s===void 0?this.setWidth(e,!0):this.setWidth(e):i!==void 0&&this.setScaleX(i),a!==void 0?e===void 0&&i===void 0?this.setHeight(a,!0):this.setHeight(a):s!==void 0&&this.setScaleY(s),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){return this.x+this.leftSpace+this.offsetX-this.originX*this.width}get drawY(){return this.y+this.offsetY}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(Ms.prototype,Sg);var ki=function(n,t,e){return t.hasOwnProperty(n)?t[n]:e[n]};const us=Phaser.Utils.Objects.GetValue;class S1 extends Ms{constructor(t,e){super(t,"background"),this.setColor(us(e,"color",null),us(e,"color2",null),us(e,"horizontalGradient",!0)),this.setStroke(us(e,"stroke",null),us(e,"strokeThickness",2)),this.setCornerRadius(us(e,"cornerRadius",0),us(e,"cornerIteration",null))}set color(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,a){return a===void 0&&(a=!0),this.color=t,this.color2=e,this.horizontalGradient=a,this}set stroke(t){t=ut(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return t!=null&&e===void 0&&(e=2),this.stroke=t,this.strokeThickness=e,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,ki("color2",t,this),ki("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,ki("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,ki("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,e){return this.cornerRadius=t,this.cornerIteration=e,this}renderContent(){cl(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const wi=Phaser.Utils.Objects.GetValue;class E1 extends Ms{constructor(t,e){super(t,"innerbounds"),this.setColor(wi(e,"color",null),wi(e,"color2",null),wi(e,"horizontalGradient",!0)),this.setStroke(wi(e,"stroke",null),wi(e,"strokeThickness",2))}set color(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=ut(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,e,a){return a===void 0&&(a=!0),this.color=t,this.color2=e,this.horizontalGradient=a,this}set stroke(t){t=ut(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,e){return t!=null&&e===void 0&&(e=2),this.stroke=t,this.strokeThickness=e,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,wi(t,"color2",null),wi(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,wi(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,e=t.left,a=t.top,i=this.parent.width-t.left-t.right,s=this.parent.height-t.top-t.bottom,h=this.context;if(this.color!=null){var r;if(this.color2!=null){var o;this.horizontalGradient?o=h.createLinearGradient(0,0,i,0):o=h.createLinearGradient(0,0,0,s),o.addColorStop(0,this.color),o.addColorStop(1,this.color2),r=o}else r=this.color;h.fillStyle=r,h.fillRect(e,a,i,s)}this.stroke!=null&&this.strokeThickness>0&&(h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.strokeRect(e,a,i,s))}}const bt=Phaser.Utils.Objects.GetValue;class Ba{constructor(t,e){this.parent=t,this.set(e)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(bt(t,"bold",!1)),this.setItalic(bt(t,"italic",!1)),this.setFontSize(bt(t,"fontSize","16px")),this.setFontFamily(bt(t,"fontFamily","Courier")),this.setColor(bt(t,"color","#fff")),this.setStrokeStyle(bt(t,"stroke",null),bt(t,"strokeThickness",0)),this.setShadow(bt(t,"shadowColor",null),bt(t,"shadowOffsetX",0),bt(t,"shadowOffsetY",0),bt(t,"shadowBlur",0)),this.setOffset(bt(t,"offsetX",0),bt(t,"offsetY",0)),this.setSpace(bt(t,"leftSpace",0),bt(t,"rightSpace",0)),this.setAlign(bt(t,"align",void 0)),this.setBackgroundColor(bt(t,"backgroundColor",null)),this.setBackgroundHeight(bt(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(bt(t,"backgroundBottomY",void 0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(ki("stroke",t,this),ki("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(ki("shadowOffsetX",t,this),ki("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new Ba(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=ut(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,e){return this.stroke=ut(t),e!==void 0&&(this.strokeThickness=e),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=ut(t),this}setShadowOffset(t,e){return t===void 0&&(t=0),e===void 0&&(e=0),this.shadowOffsetX=t,this.shadowOffsetY=e,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,e,a,i){return this.setShadowColor(t).setShadowOffset(e,a).setShadowBlur(i),this}setBackgroundColor(t){return this.backgroundColor=ut(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,e){return this.setOffsetX(t).setOffsetY(e),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,e){return this.setLeftSpace(t).setRightSpace(e),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var e=this.hasFill,a=this.hasStroke;return t.fillStyle=e?this.color:"#000",t.strokeStyle=a?this.stroke:"#000",t.lineWidth=a?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,e){return this.syncFont(t).syncStyle(t),t.measureText(e)}}var P1=function(n,t){n===void 0&&(n=0),t===void 0&&(t=0);var e=this.fixedWidth!==n||this.fixedHeight!==t;return e?(this.fixedWidth=n,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(n>0?n:this.width,t>0?t:this.height),this):this},M1=function(n,t){var e=this.padding,a=e.left,i=e.right,s=e.top,h=e.bottom;return Zi(e,n,t),this.dirty=this.dirty||a!=e.left||i!=e.right||s!=e.top||h!=e.bottom,this},A1=function(n){return ra(this.padding,n)},O1=function(n){return this.textStyle.modify(n),this},R1=function(n){return this.defaultTextStyle.modify(n),this},L1=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},F1=function(n){return this.testString=n,this};const I1=Phaser.Utils.Array.Remove;var w1=function(n){return this.poolManager.free(n),I1(this.children,n),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},B1=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this};const D1=Phaser.Utils.Array.Remove;var b1=function(n){return D1(this.children,n),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},G1=function(){return this.setText(),this},Eg=function(n,t){var e=Array.isArray(n);return t===void 0||t===this.children.length?e?this.children.push(...n):this.children.push(n):e?this.children.splice(t,0,...n):this.children.splice(t,0,n),this.lastAppendedChildren.length=0,e?this.lastAppendedChildren.push(...n):this.lastAppendedChildren.push(n),this};const is="text",Pg="image",Mg="drawer",Ag="space",Bl="command";var Og=function(n){return n.type===is&&n.text===`
`},Rg=function(n){return n.type===is&&n.text==="\f"},N1=function(n){return n.type===is&&n.text===" "},hn=function(n){return n.type===is},Y1=function(n){return n.type===Bl};class Lg extends Ms{constructor(t,e,a){super(t,is),this.updateTextFlag=!1,this.style=new Ba(this,a),this.setText(e)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0;else{var e=this.style.getTextMetrics(this.context,this.text);this.textWidth=e.width;var a,i;"actualBoundingBoxAscent"in e?(a=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent):(a=0,i=0),this.textHeight=a+i,this.ascent=a,this.descent=i}return this.updateTextFlag=!1,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){var t=this.text;return t===`
`||t==="\f"?!1:super.willRender}renderContent(){var t=this.context,e=this.style;if(e.hasBackgroundColor){t.fillStyle=e.backgroundColor;var a=this.drawTLX,i=this.drawTRX-a,s=e.backgroundBottomY;s==null&&(s=this.drawBLY);var h=e.backgroundHeight;h==null&&(h=s-this.drawTLY);var r=s-h;t.fillRect(a,r,i,h)}var o=e.hasFill,u=e.hasStroke;!o&&!u||(e.syncFont(t).syncStyle(t),u&&(e.syncShadow(t),t.strokeText(this.text,0,0)),o&&(e.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var V1=function(n,t){t&&this.textStyle.modify(t);var e=this.poolManager.allocate(is);return e===null?e=new Lg(this,n,this.textStyle):e.setParent(this).setActive().modifyStyle(this.textStyle).setText(n),e},z1=function(n,t){t&&this.textStyle.modify(t);for(var e=[],a=0,i=n.length;a<i;a++){var s=n.charAt(a),h=this.poolManager.allocate(is);h===null?h=new Lg(this,s,this.textStyle):h.setParent(this).setActive().modifyStyle(this.textStyle).setText(s),e.push(h)}return e},rr=function(n,t){var e=this.createCharChildren(n,t);return this.addChild(e),this},U1=function(n,t){return n===void 0&&(n=""),this.removeChildren(),rr.call(this,n,t),this.dirty=!0,this},X1=function(n,t,e){var a=this.createCharChildren(t,e);return n=this.getCharChildIndex(n,!0),this.addChild(a,n),this},W1=function(n,t){t===void 0&&(t=1);for(var e=0;e<t;e++){var a=this.getCharChildIndex(n,!0);if(a===void 0)break;this.removeChild(this.children[a])}return this},H1=function(n){var t="";return this.forEachCharChild(function(e){t+=e.text},void 0,n),t};class k1 extends Ms{constructor(t,e,a){super(t,Pg),this.setTexture(e,a)}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,e){return this.key=t,this.frame=e,this.frameObj=this.scene.sys.textures.getFrame(t,e),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,e){return e===void 0&&(e=!1),this.height=t,e&&(this.scaleX=this.scaleY),this}renderContent(){var t=this.context,e=this.frameObj,a=this.frameWidth,i=this.frameHeight;t.drawImage(e.source.image,e.cutX,e.cutY,a,i,0,0,a,i)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var $1=function(n,t,e){var a=this.poolManager.allocate(Pg);return a===null?a=new k1(this,n,t):a.setParent(this).setActive().setTexture(n,t),a.modifyPorperties(e),a},Fg=function(n,t,e){var a=this.createImageChild(n,t,e);return this.addChild(a),this};class K1 extends Ms{constructor(t,e,a,i){super(t,Mg),this.setRenderCallback(e),this.setDrawerSize(a,i)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,e){return t===!0?(this.toLocalPosition=!1,t=void 0,e=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),e===void 0&&(e=t),this.drawerWidth=t,this.drawerHeight=e,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}var Z1=function(n,t,e){var a=this.poolManager.allocate(Mg);return a===null?a=new K1(this,n,t,e):a.setParent(this).setActive().setRenderCallback(n).setDrawerSize(t,e),a},J1=function(n,t,e){var a=this.createDrawerChild(n,t,e);return this.addChild(a),this};class j1 extends Ms{constructor(t,e){super(t,Ag),this.setSpaceWidth(e)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}}var Q1=function(n){var t=this.poolManager.allocate(Ag);return t===null?t=new j1(this,n):t.setParent(this).setActive().setSpaceWidth(n),t},Ig=function(n){var t=this.createSpaceChild(n);return this.addChild(t),this};class q1 extends wl{constructor(t,e,a,i,s){super(t,Bl),this.setName(e).setParameter(i).setCallback(a,s)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,e){return this.callback=t,this.scope=e,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var _1=function(n,t,e,a){var i=this.poolManager.allocate(Bl);return i===null?i=new q1(this,n,t,e,a):i.setParent(this).setActive().setName(n).setCallback(t,a).setParameter(e),i},dt=function(n,t,e,a){var i=this.createCommandChild(n,t,e,a);return this.addChild(i),this},tE=function(n){return n===void 0?n={}:typeof n=="object"&&(n=re(n)),this.wrapConfig=n,this},eE=function(n,t,e,a){a===void 0&&(a={word:[],width:0}),a.word.length=0;for(var i=n.length,s=t,h=a.word,r=0;s<i;){var o=n[s];if(!o.renderable){h.push(o),s++;continue}var u=o.type===is?o.text:null;if(u!==null&&u!==" "&&u!==`
`&&u!=="\f")h.push(o),r+=o.outerWidth,s++;else{s===t&&(h.push(o),r+=o.outerWidth);break}if(e)break}return a.width=r,a},wg=function(n){for(var t=0,e=n.length;t<e;t++){var a=n[t];if(a.align!==void 0)return a.align}},Bg=function(n,t,e){if(!(t===0&&e===0))for(var a=0,i=n.length;a<i;a++){var s=n[a];!s.renderable||(s.x+=t,s.y+=e)}},iE=function(n,t,e){var a=n.hAlign,i=n.vAlign,s,h,r=n.linesHeight;switch(i){case 1:case"center":h=(e-r)/2;break;case 2:case"bottom":h=e-r;break;default:h=0;break}for(var o=n.lines,u=0,l=o.length;u<l;u++){var f=o[u],v=f.width,d=f.children,c=wg(d);switch(c===void 0&&(c=a),c){case 1:case"center":s=(t-v)/2;break;case 2:case"right":s=t-v;break;default:s=0;break}Bg(d,s,h)}},rd=function(){var n=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,e;return"actualBoundingBoxAscent"in n?(t=n.actualBoundingBoxAscent,e=n.actualBoundingBoxDescent):(t=0,e=0),wr.ascent=t,wr.descent=e,wr.height=t+e,wr},wr={};const Te=Phaser.Utils.Objects.GetValue;var sE=function(n){var t=Te(n,"start",0);Zi(this.wrapPadding,Te(n,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,a=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=Te(n,"lineHeight"),s=Te(n,"ascent",i),h;if(i===void 0){var r=Te(n,"useDefaultTextHeight",!1);if(h=Te(n,"maxLines",0),this.fixedHeight>0&&!r){var H=this.fixedHeight-e;if(h>0)i=H/h;else{var o=rd.call(this);i=o.height,s=o.ascent,h=Math.floor((H-s)/i)}}else{var o=rd.call(this);i=o.height,s=o.ascent}}else if(this.fixedHeight>0){if(h=Te(n,"maxLines"),h===void 0){var H=this.fixedHeight-e;h=Math.floor(H/i)}}else h=Te(n,"maxLines",0);s===void 0&&(s=i);var u=h===0,l=Te(n,"wrapWidth",void 0);l===void 0&&(this.fixedWidth>0?l=this.fixedWidth-a:l=1/0);for(var f=Te(n,"letterSpacing",0),v=Te(n,"hAlign",0),d=Te(n,"vAlign",0),c=Te(n,"charWrap",!1),p={callback:"runWordWrap",start:t,isLastPage:!1,padding:this.wrapPadding,ascent:s,lineHeight:i,maxLines:h,wrapWidth:l,letterSpacing:f,hAlign:v,vAlign:d,charWrap:c,children:[],lines:[],maxLineWidth:0,linesHeight:0},g=this.children,x=0,m=g.length;x<m;x++)g[x].setActive(!1);l+=f;for(var y=this.padding.left+this.wrapPadding.left,T=this.padding.top+this.wrapPadding.top+s,C=y,S=T,E=l,P=t,M=g.length,O=p.children,A=p.lines,R=[],F=0,I=0,D;P<M;){D=eE(g,P,c,D);var N=D.word,z=N.length,U=D.width+z*f;P+=z;var W=Og(N[0]),w=Rg(N[0]),L=W||w;if(E<U||L){if(L){var B=N[0];B.setActive().setPosition(C,S),O.push(B),R.push(B)}C=y,S+=i,E=l,A.push({children:R,width:F}),I=Math.max(I,F),F=0,R=[];var b=w||!u&&A.length===h;if(b)break;if(L)continue}E-=U,F+=U;for(var x=0,m=N.length;x<m;x++){var G=N[x];G.setActive(),O.push(G),R.push(G),G.renderable&&(G.setPosition(C,S),C+=G.outerWidth+f)}}R.length>0&&(A.push({children:R,width:F}),I=Math.max(I,F)),p.start+=O.length,p.isLastPage=p.start===M,p.maxLineWidth=I,p.linesHeight=A.length*i;var Y=this.fixedWidth>0?this.fixedWidth:p.maxLineWidth+a,V=this.fixedHeight>0?this.fixedHeight:p.linesHeight+e,X=Y-a,H=V-e;iE(p,X,H),this.setCanvasSize(Y,V);for(var x=0,m=O.length;x<m;x++){var G=O[x];!G.renderable||(G.x0=G.x,G.y0=G.y)}return p};const nE=Phaser.Utils.Objects.Merge;var rE=function(n){return n===void 0&&(n={}),sE.call(this,nE(n,this.wrapConfig))},aE=function(n,t,e){var a=n.hAlign,i=n.vAlign,s,h,r=n.rtl,o=n.lines,u=n.lineWidth,l=n.linesWidth;switch(a){case 1:case"center":s=(t-l)/2;break;case 2:case"right":s=t-l;break;default:s=0;break}r&&(s+=u);for(var f=0,v=o.length;f<v;f++){var d=o[r?v-f-1:f],c=d.children,p=d.height,g=wg(c);switch(g===void 0&&(g=i),g){case 1:case"center":h=(e-p)/2;break;case 2:case"bottom":h=e-p;break;default:h=0;break}Bg(c,s,h),s+=u}};const Ce=Phaser.Utils.Objects.GetValue;var oE=function(n){var t=Ce(n,"start",0);Zi(this.wrapPadding,Ce(n,"padding",0));var e=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,a=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=Ce(n,"lineWidth",void 0),s;if(i===void 0)if(s=Ce(n,"maxLines",0),this.fixedWidth>0){var B=this.fixedWidth-a;i=B/s}else i=0;else if(this.fixedWidth>0){if(s=Ce(n,"maxLines",void 0),s===void 0){var B=this.fixedWidth-a;s=Math.floor(B/i)+1}}else s=Ce(n,"maxLines",0);var h=s===0,r=Ce(n,"fixedChildHeight",void 0);if(r===void 0){var o=Ce(n,"charPerLine",void 0);if(o!==void 0){var b=this.fixedHeight-e;r=Math.floor(b/o)}}var u=Ce(n,"wrapHeight",void 0);u===void 0&&(this.fixedHeight>0?u=this.fixedHeight-e:u=1/0);for(var l=Ce(n,"letterSpacing",0),f=Ce(n,"rtl",!0),v=Ce(n,"hAlign",f?2:0),d=Ce(n,"vAlign",0),c={callback:"runVerticalWrap",start:t,isLastPage:!1,padding:this.wrapPadding,lineWidth:i,maxLines:s,fixedChildHeight:r,wrapHeight:u,letterSpacing:l,hAlign:v,vAlign:d,rtl:f,children:[],lines:[],maxLineHeight:0,linesWidth:0},p=this.children,g=0,x=p.length;g<x;g++)p[g].setActive(!1);u+=l;for(var m=this.padding.left+this.wrapPadding.left,y=this.padding.top+this.wrapPadding.top,T=m,C=y,S=u,E=t,P=p.length,M=c.children,O=c.lines,A=[],R=0,F=0;E<P;){var I=p[E];if(E++,!G.renderable){I.setActive(),M.push(I),A.push(I);continue}var D=(r!==void 0?r:I.height)+l,N=Og(I),z=Rg(I),U=N||z;if(S<D||U){N&&(I.setActive().setPosition(T,C).setOrigin(.5),M.push(I),A.push(I)),T=m,C=y,S=u,O.push({children:A,height:R}),F=Math.max(F,R),R=0,A=[];var W=z||!h&&O.length===s;if(W)break;if(U)continue}S-=D,R+=D,I.setActive().setPosition(T,C).setOrigin(.5),M.push(I),A.push(I),C+=D}A.length>0&&(O.push({children:A,height:R}),F=Math.max(F,R)),c.start+=M.length,c.isLastPage=c.start===P,c.maxLineHeight=F,c.linesWidth=O.length*i;var w=this.fixedWidth>0?this.fixedWidth:c.linesWidth+a,L=this.fixedHeight>0?this.fixedHeight:c.maxLineHeight+e,B=w-a,b=L-e;aE(c,B,b),this.setCanvasSize(w,L);for(var g=0,x=M.length;g<x;g++){var G=M[g];!G.renderable||(G.x0=G.x,G.y0=G.y)}return c};const hE=Phaser.Utils.Objects.Merge;var lE=function(n){return n===void 0&&(n={}),oE.call(this,hE(n,this.wrapConfig))};const ad=Phaser.Utils.Objects.GetValue;var uE=function(n){var t=ad(this.wrapConfig,"callback");return t||(t=ad(n,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,n)};const fE={setVAlign(n){return this.wrapConfig.vAlign=n,this},setHAlign(n){return this.wrapConfig.hAlign=n,this}};var dE=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var n,t=0,e=this.children.length;t<e;t++)n=this.children[t],n.active&&n.render();this.innerBounds.active&&this.innerBounds.render()},cE=function(n,t,e){e===void 0&&(e=!0);for(var a=this.children,i=0,s=0,h=a.length;s<h;s++){var r=a[s];if(!(e&&!r.active)){var o;if(t?o=n.call(this,r,i,a):o=n(r,i,a),i++,o)break}}return this},vE=function(n,t,e){e===void 0&&(e=!0);for(var a=this.children,i=0,s=0,h=a.length;s<h;s++){var r=a[s];if(!(e&&!r.active)&&r.renderable&&!r.removed){var o;if(t?o=n.call(this,r,i,a):o=n(r,i,a),i++,o)break}}return this},pE=function(n,t,e){e===void 0&&(e=!0);for(var a=this.children,i=0,s=0,h=a.length;s<h;s++){var r=a[s];if(!(e&&!r.active)&&hn(r)&&!r.removed){var o;if(t?o=n.call(this,r,i,a):o=n(r,i,a),i++,o)break}}return this},gE=function(){return this.children};const xE=Phaser.Utils.Array.GetAll;var mE=function(){return xE(this.children,"active",!0)},yE=function(n,t){return t===void 0&&(t=[]),this.forEachCharChild(function(e){t.push(e)},void 0,n),t},TE=function(){return this.lastAppendedChildren},CE=function(n,t,e,a){typeof t!="number"&&(a=t,t=0,e=0);var i=n.drawCenterX+t,s=n.drawCenterY+e;return Tg(n,i,s,a)};const SE=Phaser.Math.Distance.BetweenPointsSquared;var EE=function(n,t){var e={x:n,y:t},a=1/0,i=null;return this.forEachRenderableChild(function(s){var h=SE(e,CE(s,!0));a>h&&(a=h,i=s)}),i},PE=function(n,t,e,a){return typeof n=="number"&&(n=this.getCharChild(n,!0)),Cg(this,n,t,e,a)},ME=function(){for(var n=this.children,t=0,e=0,a=0,i=n.length;a<i;a++){var s=n[a];if(!(!s.renderable||!s.active||!s.visible)){var h=s.x0!==void 0?s.x0:s.x,r=s.y0!==void 0?s.y0:s.y;t=Math.max(t,h),e=Math.max(e,r)}}var o=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,u=e+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==o||this.height!==u)&&(this.dirty=!0,this.setCanvasSize(o,u)),this},AE=function(n,t){t===void 0&&(t=!0);for(var e=this.children,a=0,i=e.length;a<i;a++){var s=e[a];if(!(t&&!s.active)&&hn(s)&&!s.removed){if(n===0)return a;n--}}},OE=function(n,t){t===void 0&&(t=!0);for(var e=this.children,a=0,i=e.length;a<i;a++){var s=e[a];if(!(t&&!s.active)&&hn(s)&&!s.removed){if(n===0)return s;n--}}},RE=function(n,t){if(typeof n!="number"&&(n=this.children.indexOf(n),n<0))return null;t===void 0&&(t=!0);var e=this.children;n>=e.length&&(n=e.length);for(var a=0,i=0;i<n;i++){var s=e[i];t&&!s.active||hn(s)&&!s.removed&&a++}return a},LE=function(n){return n===void 0&&(n=!0),this.childrenInteractiveEnable!==n&&(this.lastOverChild=null),this.childrenInteractiveEnable=n,this},Dl=function(a,t,e){for(var a=a,i=0,s=a.length;i<s;i++){var h=a[i];if(!(!h.active||!h.renderable)&&h.contains(t,e))return h}return null},FE=function(){return this.on("pointerdown",IE,this).on("pointerdown",wE,this).on("pointermove",bo,this).on("pointerover",bo,this).on("pointerout",function(n,t){bo.call(this,n,null,null,t)},this),this},IE=function(n,t,e,a){if(!!this.childrenInteractiveEnable){var i=Dl(this.children,t,e);!i||this.emit("child.pointerdown",i,n,t,e,a)}},wE=function(n,t,e,a){if(!!this.childrenInteractiveEnable){var i=Dl(this.children,t,e);!i||this.emit("child.pointerup",i,n,t,e,a)}},bo=function(n,t,e,a){if(!!this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,n,t,e,a),this.lastOverChild=null);return}var i=Dl(this.children,t,e);i!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,n,t,e,a),i!==null&&this.emit("child.pointerover",i,n,t,e,a),this.lastOverChild=i)}};const BE=Phaser.GameObjects.GameObject;var DE=function(n,t,e){var a=!!this.input;return BE.prototype.setInteractive.call(this,n,t,e),a||FE.call(this),this};const bE=Phaser.Utils.Array.BringToTop,GE=Phaser.Utils.Array.SendToBack,NE=Phaser.Utils.Array.MoveUp,YE=Phaser.Utils.Array.MoveDown,VE=Phaser.Utils.Array.MoveAbove,zE=Phaser.Utils.Array.MoveBelow,UE={moveChildToFist(n){return GE(this.children,n),this},moveChildToLast(n){return bE(this.children,n),this},movechildUp(n){return NE(this.children,n),this},movechildDown(n){return YE(this.children,n),this},movechildAbove(n,t){return VE(this.children,n,t),this},movechildBelow(n,t){return zE(this.children,n,t),this}},XE={setBackgroundColor(n,t,e){return this.background.setColor(n,t,e),this},setBackgroundStroke(n,t){return this.background.setStroke(n,t),this},setBackgroundCornerRadius(n,t){return this.background.setCornerRadius(n,t),this}},WE={setInnerBoundsColor(n,t,e){return this.innerBounds.setColor(n,t,e),this},setInnerBoundsStroke(n,t){return this.innerBounds.setStroke(n,t),this}};var Dg={setFixedSize:P1,setPadding:M1,getPadding:A1,modifyTextStyle:O1,modifyDefaultTextStyle:R1,resetTextStyle:L1,setTestString:F1,removeChild:w1,removeChildren:B1,popChild:b1,clearContent:G1,addChild:Eg,createCharChild:V1,createCharChildren:z1,setText:U1,appendText:rr,insertText:X1,removeText:W1,getText:H1,createImageChild:$1,appendImage:Fg,createDrawerChild:Z1,appendDrawer:J1,createSpaceChild:Q1,appendSpace:Ig,createCommandChild:_1,appendCommand:dt,setWrapConfig:tE,runWordWrap:rE,runVerticalWrap:lE,runWrap:uE,renderContent:dE,forEachChild:cE,forEachRenderableChild:vE,forEachCharChild:pE,getChildren:gE,getActiveChildren:mE,getCharChildren:yE,getLastAppendedChildren:TE,getNearestChild:EE,getCharWorldPosition:PE,setToMinSize:ME,getCharChildIndex:AE,getCharChild:OE,getCharIndex:RE,setChildrenInteractiveEnable:LE,setInteractive:DE};Object.assign(Dg,UE,XE,WE,fE);const HE=Phaser.Utils.Objects.GetFastValue;var kE={};class $E{constructor(t){this.pools=HE(t,"pools",kE)}free(t){if(!this.pools)return this;var e=t.type;return this.pools.hasOwnProperty(e)||(this.pools[e]=new si),this.pools[e].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var e=0,a=t.length;e<a;e++)this.free(t[e]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}}const od=Phaser.Utils.Objects.IsPlainObject,ue=Phaser.Utils.Objects.GetValue;class dn extends Me{constructor(t,e,a,i,s,h){od(e)?(h=e,e=ue(h,"x",0),a=ue(h,"y",0),i=ue(h,"width",0),s=ue(h,"height",0)):od(i)&&(h=i,i=ue(h,"width",0),s=ue(h,"height",0));var r=i===0?1:i,o=s===0?1:s;super(t,e,a,r,o),this.type="rexDynamicText",this.autoRound=!0,this.padding=Zi(),this.wrapPadding=Zi();var u=ue(h,"style",void 0);this.defaultTextStyle=new Ba(null,u),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(ue(h,"testString","|M\xC9qgy")),this.background=new S1(this,ue(h,"background",void 0)),this.innerBounds=new E1(this,ue(h,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new $E(h),this.setFixedSize(i,s),this.setPadding(ue(h,"padding",0)),this.setWrapConfig(ue(h,"wrap",void 0)),this.setChildrenInteractiveEnable(ue(h,"childrenInteractive",!1));var l=ue(h,"text",void 0);l&&this.setText(l)}updateTexture(){return this.renderContent(),super.updateTexture(),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,e){return this.setFixedSize(t,e),this}}Object.assign(dn.prototype,Dg);_.register("dynamicText",function(n,t,e,a,i){var s=new dn(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.DynamicText",dn);var KE=function(n){return ys(n)?n.sys.sound:n.sound};const ZE=Phaser.Sound.BaseSound;var bl=function(n){return n instanceof ZE};const hd=Phaser.Utils.Objects.GetValue,ld=Phaser.Utils.Objects.GetAdvancedValue,JE=Phaser.Math.Linear;class bg extends Es{constructor(t,e,a){bl(t)&&(a=e,e=t,t=void 0),e.active=!0,e.scene=t,e.game=e.manager.game,super(e,a),this.volume={},this.resetFromJSON(a)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(hd(t,"mode",0)),this.setEnable(hd(t,"enable",!0)),this.setVolumeRange(ld(t,"volume.start",this.parent.volume),ld(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=jE[t]),this.mode=t,this}setVolumeRange(t,e){return this.volume.start=t,this.volume.end=e,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateGameObject(t,e){t.volume=JE(this.volume.start,this.volume.end,e.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.destroy();break}return this}}const jE={stop:1,destroy:2};var Gg=function(n,t,e,a,i){bl(n)&&(i=a,a=e,e=t,t=n,n=void 0),a===void 0&&(a=1),i===void 0&&(i=0);var s={mode:0,volume:{start:i,end:a},duration:e};typeof t=="string"&&(t=n.sys.sound.add(t));var h;return t.hasOwnProperty("_fade")?(h=t._fade,h.stop().resetFromJSON(s)):(h=new bg(n,t,s),t._fade=h),h.start(),t.isPlaying||t.setVolume(i).play(),t},$h=function(n,t,e,a){bl(n)&&(a=e,e=t,t=n,n=void 0),a===void 0&&(a=!0);var i={mode:a?2:1,volume:{start:t.volume,end:0},duration:e},s;return t.hasOwnProperty("_fade")?(s=t._fade,s.stop().resetFromJSON(i)):(s=new bg(n,t,i),t._fade=s),s.start(),t.isPlaying||t.play(),t};const QE={setBackgroundMusicLoopValue(n){return this.backgroundMusicLoopValue=n,this},setBackgroundMusicFadeTime(n){return this.backgroundMusicFadeTime=n,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(n){return this.backgroundMusic=n,n&&(n.setLoop(this.backgroundMusicLoopValue),n.once("complete",function(){this.backgroundMusic===n&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===n&&(this.backgroundMusic=void 0)},this),n.isPlaying||n.play()),this},playBackgroundMusic(n){return this.backgroundMusic&&this.backgroundMusic.key===n?this:(this.stopBackgroundMusic(),this.setCurrentBackgroundMusic(this.sound.add(n)),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this)},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(n){return this.backgroundMusic&&Gg(this.backgroundMusic,n,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(n,t){return this.backgroundMusic&&$h(this.backgroundMusic,n,t),this},crossFadeBackgroundMusic(n,t){var e=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(n).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=e,this},setBackgroundMusicVolume(n){return this.backgroundMusicVolume=n,this}},ud=Phaser.Utils.Array.Remove,qE={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(n){var t=this.sound.add(n);return t.setVolume(this.soundEffectsVolume),this.soundEffects.push(t),t.once("complete",function(){t.destroy(),this.sound&&ud(this.soundEffects,t)},this).once("destroy",function(){!this.sound||ud(this.soundEffects,t)},this).play(),this},fadeInSoundEffect(n){var t=this.getLastSoundEffect();return t&&Gg(t,n,this.soundEffectsVolume,0),this},fadeOutSoundEffect(n,t){var e=this.getLastSoundEffect();return e&&$h(e,n,t),this},fadeOutAllSoundEffects(n,t){for(var e=this.soundEffects.length-1;e>=0;e--)$h(this.soundEffects[e],n,t);return this},setSoundEffectVolume(n,t){if(t===void 0&&(t=!1),t){var e=this.getLastSoundEffect();e&&e.setVolume(n)}else this.soundEffectsVolume=n;return this}},Mn=Phaser.Utils.Objects.GetValue;class Ng{constructor(t,e){this.sound=KE(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Mn(e,"bgm.volume",1),this.soundEffects=[],this._soundEffectsVolume=Mn(e,"soundEffect.volume",1),this.setBackgroundMusicLoopValue(Mn(e,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Mn(e,"bgm.fade",500));var a=Mn(e,"bgm.initial",void 0);a&&this.setCurrentBackgroundMusic(a)}destroy(){if(this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();return this.soundEffects.length=0,this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.sound=void 0,this}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var e=this.soundEffects,a=0,i=e.length;a<i;a++)e[a].setVolume(t)}}Object.assign(Ng.prototype,QE,qE);const Go=Phaser.Utils.Objects.GetValue;class _E extends Ia{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.isRunning=Go(t,"isRunning",!1),this.timeScale=Go(t,"timeScale",1),this.now=Go(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class Yg extends _E{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,e){return!this.isRunning||this.timeScale===0?this:(this.tick(e),this)}}var tP=function(n,t){return t===void 0&&(t=.5),n<=t?n=n/t:n=1-(n-t)/(1-t),n};const fd=Phaser.Math.Clamp;class eP{constructor(t,e){this.setTimeline(t).reset(e)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,e,a,i){return this.target=t,this.onStart=e,this.onProgress=a,this.onComplete=i,this}setDuration(t,e){return e===void 0&&(e=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=e,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=fd(t,0,1),this.yoyo&&(t=tP(t)),t}setProgress(t){t=fd(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){!t||t(this.target,this.t,this)}update(t,e){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=e,this.t=this.getProgress(),this.runCallback(this.onProgress);var a=this.remainder<=0;return a&&this.runCallback(this.onComplete),a}}class iP extends si{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var e=0,a=t.length;e<a;e++)this.free(t[e]);return this}}const sP=Phaser.Utils.Objects.GetValue,nP=new iP;class rP extends Yg{constructor(t,e){super(t,e),this.addedTimers=[],this.timers=[],this.timerPool=sP(e,"pool",nP)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var e=this.timerPool.allocate();return e?e.setTimeline(this).reset(t):e=new eP(this,t),this.addedTimers.push(e),e.runCallback(e.onStart),this.isRunning||this.start(),e}delayCall(t,e,a,i){var s=this.addTimer({duration:t,onComplete:function(h,r,o){a===void 0&&(a=[]),a.push(o),e.apply(i,a)}});return s}getTimers(t){for(var e=[],a=[this.addedTimers,this.timers],i=0,s=a.length;i<s;i++)for(var h=a[i],r=0,o=h.length;r<o;r++){var u=h[r];u.name===t&&e.push(u)}return e}update(t,e){super.update(t,e),this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var a=[],i=0,s=this.timers.length;i<s;i++){var h=this.timers[i],r=h.update(this.now,this.delta);r?this.timerPool.free(h):a.push(h)}this.timers=a,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}const aP=Phaser.Utils.Objects.GetValue;var oP=function(n,t){var e=aP(t,"sounds");return e!==!1&&(this.soundManager=new Ng(n,e)),this.gameObjectManagers={},this.timeline=new rP(this),this.managersScene=n,this};const hP={hasProperty(n){var t=this.gameObject;if(t.hasOwnProperty(n))return!0;var e=t[n];return e!==void 0},getProperty(n){return this.gameObject[n]},setProperty(n,t){return this.gameObject[n]=t,this},easeProperty(n,t,e,a,i,s,h){var r=this.tweens,o=r[n];o&&o.remove();var u=this.gameObject,l={targets:u,duration:e,ease:a,repeat:i,yoyo:s,onComplete:function(){r[n].remove(),r[n]=null,h&&h(u,n)},onCompleteScope:this};return l[n]=t,o=this.scene.tweens.add(l),o.timeScale=this.timeScale,r[n]=o,this}},lP={hasMethod(n){return typeof this.gameObject[n]=="function"},call(n,...t){if(!this.hasMethod(n))return this;var e=this.gameObject;return e[n].apply(e,t),this}},uP={hasData(n){var t=this.gameObject;return t.data?t.data.has(n):!1},getData(n){return this.gameObject.getData(n)},setData(n,t){return this.gameObject.setData(n,t),this}};class Gl{constructor(t,e,a){this.GOManager=t,this.tweens={},this.setGO(e,a)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeTweens(){var t=this.tweens,e;for(var a in t)e=t[a],e&&e.remove(),t[a]=null;return this}freeGO(){return this.freeTweens(),this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,e){return t.setName(e),this.gameObject=t,this.name=e,this.freeTweens(),this}setTimeScale(t){var e=this.tweens;for(var a in e){var i=e[a];i&&(i.timeScale=t)}return this}}Object.assign(Gl.prototype,hP,lP,uP);var Nl=function(n){for(var t in n)return!1;return!0};const fP={tint:0,alpha:1},dP={setGOFadeMode(n){return typeof n=="string"&&(n=fP[n]),this.fadeMode=n,this},setGOFadeTime(n){return this.fadeTime=n,this},hasTintFadeEffect(n){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&n.setTint!==void 0},hasAlphaFadeEffect(n){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&n.setAlpha!==void 0},fadeBob(n,t,e,a){var i=n.gameObject;return this.hasTintFadeEffect(i)?(t!==void 0&&n.setProperty("tintGray",255*t),n.easeProperty("tintGray",Math.floor(255*e),this.fadeTime,"Linear",0,!1,a)):this.hasAlphaFadeEffect(i)?(t!==void 0&&n.setProperty("alpha",t),n.easeProperty("alpha",e,this.fadeTime,"Linear",0,!1,a)):a&&a(i),this}},cP=~(255<<16)&16777215,vP=~(255<<8)&16777215,pP=16776960;var gP=function(n,t){return(t&255)<<16|n&cP},xP=function(n,t){return(t&255)<<8|n&vP},mP=function(n,t){return t&255|n&pP},yP=function(n,t,e,a){return(t&255)<<16|(e&255)<<8|a&255},TP=function(n,t){if(n.hasOwnProperty("tintR"))return n;t===void 0&&(t=16777215);var e=Xn(t),a=Wn(t),i=Hn(t);return Object.defineProperty(n,"tint",{get:function(){return t},set:function(s){s=Math.floor(s)&16777215,n.setTint&&n.setTint(s),t!==s&&(t=s,e=Xn(t),a=Wn(t),i=Hn(t))}}),Object.defineProperty(n,"tintR",{get:function(){return e},set:function(s){s=Math.floor(s)&255,e!==s&&(e=s,n.tint=gP(t,s))}}),Object.defineProperty(n,"tintG",{get:function(){return a},set:function(s){s=Math.floor(s)&255,a!==s&&(a=s,n.tint=xP(t,s))}}),Object.defineProperty(n,"tintB",{get:function(){return i},set:function(s){s=Math.floor(s)&255,i!==s&&(i=s,n.tint=mP(t,s))}}),Object.defineProperty(n,"tintGray",{get:function(){return Math.floor((e+a+i)/3)},set:function(s){s=Math.floor(s)&255,(e!==s||a!==s||i!==s)&&(e=s,a=s,i=s,n.tint=yP(t,s,s,s))}}),n.tint=t,n};const CP=Phaser.Events.EventEmitter;var SP=function(n){if(n.events)return n;var t=new CP,e=n.x;Object.defineProperty(n,"x",{get:function(){return e},set:function(h){e!==h&&(e=h,t.emit("update",n))}});var a=n.y;Object.defineProperty(n,"y",{get:function(){return a},set:function(h){a!==h&&(a=h,t.emit("update",n))}});var i=n.width;Object.defineProperty(n,"width",{get:function(){return i},set:function(h){i!==h&&(i=h,t.emit("update",n))}});var s=n.height;return Object.defineProperty(n,"height",{get:function(){return s},set:function(h){s!==h&&(s=h,t.emit("update",n))}}),n.events=t,n},EP=function(n,t,e,a){return a===void 0?a={}:a===!0&&(a=PP),a.x=e.x+e.width*n,a.y=e.y+e.height*t,a},PP={},MP=function(n,t,e,a,i){if(n.hasOwnProperty("vp"))return n;e===void 0&&(e=.5),a===void 0&&(a=.5),i===void 0&&(i=EP),SP(t);var s=t.events;n.vp=t;var h=function(){i(e,a,t,n)};s.on("update",h),n.once("destroy",function(){s.off("update",h),n.vp=void 0}),Object.defineProperty(n,"vpx",{get:function(){return e},set:function(r){e!==r&&(e=r,h())}}),Object.defineProperty(n,"vpy",{get:function(){return a},set:function(r){a!==r&&(a=r,h())}}),h()};const AP=Phaser.Utils.Array.Remove,OP={has(n){return this.bobs.hasOwnProperty(n)},get(n){return this.bobs[n]},getGO(n){var t=this.get(n);return t?t.gameObject:null},addGO(n,t){this.remove(n,!0),this.hasTintFadeEffect(t)&&TP(t),this.viewportCoordinateEnable&&MP(t,this.viewport),t.once("destroy",function(){AP(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var e=new this.BobClass(this,t,n);return this.bobs[n]=e,this},add(n,...t){var e=this.createGameObjectCallback,a=this.createGameObjectScope,i=e.call(a,this.scene,...t);this.addGO(n,i);var s=this.get(n);return this.fadeBob(s,0,1),this},forEachGO(n,t){for(var e in this.bobs){var a=this.bobs[e].gameObject,i;if(t?i=n.call(t,a,e,this):i=n(a,e,this),i)break}return this}},RP={remove(n,t){if(!this.has(n))return this;var e=this.get(n);return delete this.bobs[n],this.removedGOs.push(e.gameObject),t?e.destroy():this.fadeBob(e,void 0,0,function(){e.destroy()}),this},removeAll(){var n=this.bobs;for(var t in n)this.remove(t);return this},clear(n){n===void 0&&(n=!0);var t=this.bobs;for(var e in t)n&&t[e].destroy(),delete t[e];return this.removedGOs.length=0,this}},LP={hasProperty(n,t){return this.has(n)?this.get(n).hasProperty(t):!1},getProperty(n,t){if(!!this.has(n))return this.get(n).getProperty(t)},isNumberProperty(n,t){var e=this.getProperty(n,t);return typeof e=="number"},setProperty(n,t,e){return this.has(n)?(this.symbols&&typeof e=="string"&&this.isNumberProperty(n,t)&&(e in this.symbols?e=this.symbols[e]:console.warn(`Can't find symbol ${e}`)),this.get(n).setProperty(t,e),this):this},easeProperty(n,t,e,a,i,s,h,r){return this.has(n)?(a===void 0&&(a=1e3),i===void 0&&(i="Linear"),s===void 0&&(s=0),h===void 0&&(h=!1),this.symbols&&typeof e=="string"&&this.isNumberProperty(n,t)&&(e in this.symbols?e=this.symbols[e]:console.warn(`Can't find symbol ${e}`)),this.get(n).easeProperty(t,e,a,i,s,h,r),this):this},hasTweenTask(n,t){if(!this.has(n))return!1;var e=this.get(n).tweens;return e.hasOwnProperty(t)},getTweenTask(n,t){if(!this.has(n))return null;var e=this.get(n).tweens,a=e[t];return a||null}},FP={hasMethod(n,t){return this.has(n)?this.get(n).hasMethod(t):!1},call(n,t,...e){return this.has(n)?(this.get(n).call(t,...e),this):this}},IP={hasData(n,t){return this.has(n)?this.get(n).hasData(t):!1},getData(n,t){if(!!this.has(n))return this.get(n).getData(t)},setData(n,t,e){return this.has(n)?(this.get(n).setData(t,e),this):this}};var wP=function(n,t){return this.forEachGO(function(e){e.drawBounds?e.drawBounds(n,t):xg(e,n,t)}),this},Vg={drawGameObjectsBounds:wP};Object.assign(Vg,dP,OP,RP,LP,FP,IP);const BP=Phaser.Cameras.Scene2D.BaseCamera;var DP=function(n){return n instanceof BP};const zg=Phaser.Geom.Rectangle;var cn=function(n,t,e){DP(t)||(e=t,t=void 0),e===void 0?e=new zg:e===!0&&(e=bP);var a=n.sys.scale,i=a.baseSize,s=a.parentSize,h=a.canvasBounds,r=a.displayScale,o=h.x>=0?0:-(h.x*r.x),u=h.y>=0?0:-(h.y*r.y),l;s.width>=h.width?l=i.width:l=i.width-(h.width-s.width)*r.x;var f;return s.height>=h.height?f=i.height:f=i.height-(h.height-s.height)*r.y,e.setTo(o,u,l,f),t&&(e.width/=t.zoomX,e.height/=t.zoomY,e.centerX=t.centerX+t.scrollX,e.centerY=t.centerY+t.scrollY),e},bP=new zg;const Ne=Phaser.Utils.Objects.GetValue;class Yl{constructor(t,e){this.scene=t,this.BobClass=Ne(e,"BobClass",Gl),this.setCreateGameObjectCallback(Ne(e,"createGameObject"),Ne(e,"createGameObjectScope")),this.setEventEmitter(Ne(e,"eventEmitter",void 0));var a=Ne(e,"fade",500);typeof a=="number"?(this.setGOFadeMode(),this.setGOFadeTime(a)):(this.setGOFadeMode(Ne(a,"mode")),this.setGOFadeTime(Ne(a,"time",500)));var i=Ne(e,"viewportCoordinate",!1);i!==!1?(this.setViewportCoordinateEnable(Ne(e,"enable",!0)),this.setViewport(Ne(i,"viewport"))):this.setViewportCoordinateEnable(!1),this.setSymbols(Ne(e,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var e=this.bobs;for(var a in e)e[a].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,e){return this.createGameObjectCallback=t,this.createGameObjectScope=e,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setViewport(t){return t===void 0&&(t=cn(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return Nl(this.bobs)&&this.removedGOs.length===0}}Object.assign(Yl.prototype,fn,Vg);var Vl=function(n,t){n===void 0&&(n={}),t===void 0&&(t=Yl),n.createGameObjectScope||(n.createGameObjectScope=this);var e=new t(this.managersScene,n);return this.gameObjectManagers[n.name]=e,this},GP=function(n){return this.gameObjectManagers[n]},NP=function(){var n=[];for(var t in this.gameObjectManagers)n.push(t);return n},YP=function(n){this.timeline.timeScale=n;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(n);return this},VP=function(){return this.timeline.timeScale},zP=function(n){this.soundManager&&this.soundManager.destroy(),this.soundManager=void 0;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(n),delete this.gameObjectManagers[t];this.timeline&&this.timeline.destroy(),this.timeline=void 0,this.managersScene=void 0};const UP={addGameObjectManager:Vl,getGameObjectManager:function(n){return this.gameObjectManagers[n]},getGameObjectManagerNames:function(){var n=[];for(var t in this.gameObjectManagers)n.push(t);return n}},XP={createGameObject(n,t,...e){return this.getGameObjectManager(n).add(t,...e),this},destroyGameObject(n,t){var e=this.getGameObjectManager(n);return t===void 0?e.removeAll():e.remove(t),this},callGameObjectMethod(n,t,e,...a){return this.getGameObjectManager(n).call(t,e,...a),this},setGameObjectProperty(n,t,e,a){return this.getGameObjectManager(n).setProperty(t,e,a),this},easeGameObjectProperty(n,t,e,a,i,s,h,r){return this.getGameObjectManager(n).easeProperty(t,e,a,i,s,h,r),this},getGameObject(n,t,e){var a=this.getGameObjectManager(n);if(typeof t=="string")return a.getGO(t);var i=t;i===void 0&&(i=a.bobs),e===void 0&&(e={});for(t in i)e[t]=a.getGO(t);return e},addGameObject(n,t,e){var a=this.getGameObjectManager(n);if(typeof t=="string")a.addGO(t,e);else{var i=t;for(t in i)a.addGO(t,i[t])}return this},drawGameObjectsBounds(n,t,e){n instanceof Phaser.GameObjects.Graphics&&(e=t,t=n,n=void 0),n===void 0&&(n=this.getGameObjectManagerNames()),Array.isArray(n)||(n=[n]);for(var a=0,i=n.length;a<i;a++)this.getGameObjectManager(n[a]).drawGameObjectsBounds(t,e);return this}};var WP=function(n){class t extends n{}var e={initManagers:oP,addGameObjectManager:Vl,getGameObjectManager:GP,getGameObjectManagerNames:NP,setTimeScale:YP,getTimeScale:VP,destroyManagers:zP};return Object.assign(t.prototype,e,UP,XP),t},HP=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,kP=/^0x[0-9A-F]+$/i,Ug=function(n){return typeof n!="string"||(n===""?n=null:HP.test(n)?n=parseFloat(n):kP.test(n)?n=parseInt(n,16):n==="false"?n=!1:n==="true"&&(n=!0)),n},va=function(n){return n.replace($P,"\\$&").replace(KP,"\\x2d")},$P=/[|\\{}()[\]^$+*?.]/g,KP=/-/g;class Xg{constructor(t){this.setEventEmitter(Bt(t,"eventEmitter",void 0)),this.setValueConverter(Bt(t,"valueConvert",!0)),this.setLoopEnable(Bt(t,"loop",!1)),this.setMultipleLinesTagEnable(Bt(t,"multipleLinesTag",!1));var e=Bt(t,"delimiters","<>");this.setDelimiters(e[0],e[1]),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,e){e===void 0&&(e=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=e,t=va(this.delimiterLeft),e=va(this.delimiterRight);var a=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${e}`,a),this}setValueConverter(t){return t===!0?t=Ug:t||(t=ZP),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,e=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var a=this.reSplit.exec(t);if(!a){if(this.progressIndex<e&&(this.onContent(t.substring(this.progressIndex,e)),this.isPaused)){this.progressIndex=e;break}this.onComplete(),this.isRunning=!1;return}var i=this.reSplit.lastIndex,s=i-a[0].length;if(this.progressIndex<s&&(this.onContent(t.substring(this.progressIndex,s)),this.isPaused)){this.progressIndex=s;break}if(this.onTag(a[1]),this.progressIndex=i,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,e){return this.isPaused?this:(this.pause(),t.once(e,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}}const ZP=function(n){return n};Object.assign(Xg.prototype,fn);var JP=function(n,t){if(n==null)return[];for(var e=n.split(","),a=0,i=e.length;a<i;a++)e[a]=t(e[a]);return e};class jP extends Xg{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Bt(t,"regex.tag",void 0)),this.setValueExpression(Bt(t,"regex.value",void 0));var e=Bt(t,"delimiters","<>");this.setDelimiters(e[0],e[1])}setTagExpression(t){return t||(t=Br),this.tagExpression=t,this}setValueExpression(t){return t||(t=Br),this.valueExpression=t,this}setDelimiters(t,e){super.setDelimiters(t,e);var a=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(a,"i"),this.tagExpression!==Br||this.valueExpression!==Br){var i=`${this.tagExpression}(=${this.valueExpression})?`,s=`/${this.tagExpression}`;t=va(this.delimiterLeft),e=va(this.delimiterRight);var h=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${i})|(${s}))${e}`,h)}return this}onTag(t){var e=t.match(this.reTag),a=e[1],i=a.charAt(0)==="/";if(i&&(a=a.substring(1,a.length)),this.skipEventFlag=!1,i)this.emit(`-${a}`),this.skipEventFlag||this.emit("-",a),this.lastTagEnd=a;else{var s=JP(e[3],this.valueConverter);this.emit(`+${a}`,...s),this.skipEventFlag||this.emit("+",a,...s),this.lastTagStart=a}}}const Br="[^=]+";var QP=function(n,t,e){var a="color",i;t.on("start",function(){i=n.textStyle.color}).on(`+${a}`,function(s){n.textStyle.setColor(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setColor(i),t.skipEvent()}).on("complete",function(){n.textStyle.setColor(i)})},qP=function(n,t,e){var a="stroke",i;t.on("start",function(){i=n.textStyle.stroke,n.textStyle.setStrokeStyle(null)}).on(`+${a}`,function(s){s===void 0&&(s=i),n.textStyle.setStrokeStyle(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){n.textStyle.setStrokeStyle(i)})},_P=function(n,t,e){var a="b";t.on("start",function(){n.textStyle.setBold(!1)}).on(`+${a}`,function(){n.textStyle.setBold(!0),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setBold(!1),t.skipEvent()})},tM=function(n,t,e){var a="i";t.on("start",function(){n.textStyle.setItalic(!1)}).on(`+${a}`,function(){n.textStyle.setItalic(!0),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setItalic(!1),t.skipEvent()})},eM=function(n,t,e){var a="size",i;t.on("start",function(){i=n.textStyle.fontSize}).on(`+${a}`,function(s){n.textStyle.setFontSize(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setFontSize(i),t.skipEvent()}).on("complete",function(){n.textStyle.setFontSize(i)})},iM=function(n,t,e){var a="y",i;t.on("start",function(){i=n.textStyle.offsetY,n.textStyle.setOffsetY(0)}).on(`+${a}`,function(s){s===void 0&&(s=i),n.textStyle.setOffsetY(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){n.textStyle.setOffsetY(0)})},sM=function(n,t,e){var a="x",i;t.on("start",function(){i=n.textStyle.offsetY,n.textStyle.setOffsetX(0)}).on(`+${a}`,function(s){s===void 0&&(s=i),n.textStyle.setOffsetX(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){n.textStyle.setOffsetX(0)})},nM=function(n,t,e){var a="left",i;t.on("start",function(){i=n.textStyle.leftSpace,n.textStyle.setLeftSpace(0)}).on(`+${a}`,function(s){s===void 0&&(s=i),n.textStyle.setLeftSpace(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){n.textStyle.setLeftSpace(0)})},rM=function(n,t,e){var a="right",i;t.on("start",function(){i=n.textStyle.rightSpace,n.textStyle.setRightSpace(0)}).on(`+${a}`,function(s){s===void 0&&(s=i),n.textStyle.setRightSpace(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){n.textStyle.setRightSpace(0)})},aM=function(n,t,e){var a="shadow",i;t.on("start",function(){i=n.textStyle.shadowColor,n.textStyle.setShadowColor(null)}).on(`+${a}`,function(s){s===void 0&&(s=i),n.textStyle.setShadowColor(s),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){n.textStyle.setShadowColor(i)})},oM=function(n,t,e){var a="align";t.on(`+${a}`,function(i){n.textStyle.setAlign(i),t.skipEvent()}).on(`-${a}`,function(){n.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){n.textStyle.setAlign()})},hM=function(n,t,e){var a="img";t.on(`+${a}`,function(i){var s=n.imageManager.get(i);Fg.call(n,s.key,s.frame,{width:s.width,hieght:s.height,leftSpace:s.left,rightSpace:s.right}),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},lM=function(n,t,e){var a="space";t.on(`+${a}`,function(i){Ig.call(n,i),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},uM=function(n,t,e){var a="speed";t.on(`+${a}`,function(i){dd(n,i),t.skipEvent()}).on(`-${a}`,function(){dd(n,void 0),t.skipEvent()})},fM=function(n){this.typeWriter.setTypingSpeed(n)},dd=function(n,t){dt.call(n,"speed",fM,t,n)},dM=function(n,t,e){var a="se";t.on(`+${a}`,function(i,s){dt.call(n,"se",cM,[i,s],n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},cM=function(n){if(!this.skipSoundEffect){var t=n[0],e=n[1];this.soundManager.playSoundEffect(t),e&&this.soundManager.fadeInSoundEffect(e)}},vM=function(n,t,e){var a="se.fadein";t.on(`+${a}`,function(i){dt.call(n,"se.fadein",pM,i,n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},pM=function(n){this.soundManager.fadeInSoundEffect(n)},gM=function(n,t,e){var a="se.fadeout";t.on(`+${a}`,function(i,s){s=s==="stop",dt.call(n,"se.fadeout",xM,[i,s],n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},xM=function(n){this.soundManager.fadeOutSoundEffect(...n)},mM=function(n,t,e){var a="se.volume";t.on(`+${a}`,function(i){dt.call(n,"se.volume",yM,i,n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},yM=function(n){this.soundManager.setSoundEffectVolume(n,!0)},TM=function(n,t,e){var a="bgm";t.on(`+${a}`,function(i,s){dt.call(n,"bgm",CM,[i,s],n),t.skipEvent()}).on(`-${a}`,function(){dt.call(n,"bgm.stop",SM,void 0,n),t.skipEvent()})},CM=function(n){var t=n[0],e=n[1];this.soundManager.playBackgroundMusic(t),e&&this.soundManager.fadeInBackgroundMusic(e)},SM=function(){this.soundManager.stopBackgroundMusic()},EM=function(n,t,e){var a="bgm.fadein";t.on(`+${a}`,function(i){dt.call(n,"bgm.fadein",PM,i,n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},PM=function(n){this.soundManager.fadeInBackgroundMusic(n)},MM=function(n,t,e){var a="bgm.fadeout";t.on(`+${a}`,function(i,s){s=s==="stop",dt.call(n,"bgm.fadeout",AM,[i,s],n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},AM=function(n){this.soundManager.fadeOutBackgroundMusic(...n)},OM=function(n,t,e){var a="bgm.cross";t.on(`+${a}`,function(i,s){dt.call(n,"bgm.cross",RM,[i,s],n),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},RM=function(n){this.soundManager.crossFadeBackgroundMusic(...n)};Phaser.Utils.Objects.GetValue;var LM=function(n,t,e){var a="bgm.pause";t.on(`+${a}`,function(){dt.call(n,"bgm.pause",FM,void 0,n),t.skipEvent()}).on(`-${a}`,function(){dt.call(n,"bgm.resume",IM,void 0,n),t.skipEvent()})},FM=function(){this.soundManager.pauseBackgroundMusic()},IM=function(){this.soundManager.resumeBackgroundMusic()},wM=function(n,t,e){var a="camera.fadein";t.on(`+${a}`,function(i,s,h,r){dt.call(n,"camera.fadein",BM,[i,s,h,r],n),t.skipEvent()})},BM=function(n){this.targetCamera.fadeIn(...n)},DM=function(n,t,e){var a="camera.fadeout";t.on(`+${a}`,function(i,s,h,r){dt.call(n,"camera.fadeout",bM,[i,s,h,r],n),t.skipEvent()})},bM=function(n){this.targetCamera.fadeOut(...n)},GM=function(n,t,e){var a="camera.shake";t.on(`+${a}`,function(i,s){dt.call(n,"camera.shake",NM,[i,s],n),t.skipEvent()})},NM=function(n){this.targetCamera.shake(...n)},YM=function(n,t,e){var a="camera.flash";t.on(`+${a}`,function(i,s,h,r){dt.call(n,"camera.flash",VM,[i,s,h,r],n),t.skipEvent()})},VM=function(n){this.targetCamera.flash(...n)},zM=function(n,t,e){var a="camera.zoom";t.on(`+${a}`,function(i){dt.call(n,"camera.zoom",UM,i,n),t.skipEvent()}).on(`+${a}.to`,function(i,s,h){dt.call(n,"camera.zoom.to",XM,[i,s,h],n),t.skipEvent()})},UM=function(n){this.targetCamera.setZoom(n)},XM=function(n){this.targetCamera.zoomTo(...n)};const cd=Phaser.Math.DegToRad;var WM=function(n,t,e){var a="camera.rotate";t.on(`+${a}`,function(i){i=cd(i),dt.call(n,"camera.rotate",HM,i,n),t.skipEvent()}).on(`+${a}.to`,function(i,s,h){i=cd(i),dt.call(n,"camera.rotate.to",kM,[i,s,h],n),t.skipEvent()})},HM=function(n){this.targetCamera.setRotation(n)},kM=function(n){var t=n[0],e=n[1],a=n[2];this.targetCamera.rotateTo(t,!1,e,a)},$M=function(n,t,e){var a="camera.scroll";t.on(`+${a}`,function(i,s){dt.call(n,"camera.scroll",KM,[i,s],n),t.skipEvent()}).on(`+${a}.to`,function(i,s,h,r){dt.call(n,"camera.scroll.to",ZM,[i,s,h,r],n),t.skipEvent()})},KM=function(n){this.targetCamera.setScroll(...n)},ZM=function(n){var t=n[0],e=n[1],a=n[2],i=n[3],s=this.targetCamera,h=s.scrollX,r=s.scrollY;s.setScroll(t,e),t+=s.centerX,e+=s.centerY,s.setScroll(h,r),s.pan(t,e,a,i)},JM=function(n,t,e){var a="wait",i="click";t.on(`+${a}`,function(s){vd(n,s),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()}).on(`+${i}`,function(){vd(n,"click"),t.skipEvent()}).on(`-${i}`,function(){t.skipEvent()})},jM=function(n){this.typeWriter.wait(n)},vd=function(n,t){dt.call(n,"wait",jM,t,n)},QM=function(n,t,e){var a="r";t.on(`+${a}`,function(){rr.call(n,`
`),t.skipEvent()}).on(`-${a}`,function(){t.skipEvent()})},qM=function(n,t,e){for(var a=["pagebreak","pb"],i=0,s=a.length;i<s;i++){var h=a[i];t.on(`+${h}`,function(){rr.call(n,"\f"),t.skipEvent()}).on(`-${h}`,function(){t.skipEvent()})}},_M=function(n,t,e){var a="content.off";t.on(`+${a}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},tA=function(n,t,e){var a="content.on";t.on(`+${a}`,function(){t.setContentOutputEnable(),t.skipEvent()})},eA=function(n,t,e){t.on("content",function(a){if(t.contentOutputEnable)rr.call(n,a);else{var i=`+${t.lastTagStart}`;n.emit(`parser.${i}#content`,t,a)}})},iA=function(n,t,e){t.on("start",function(){n.emit("parser.start",t)}).on("+",function(a,...i){if(!t.skipEventFlag){var s=`+${a}`,h=i;n.emit(`parser.${s}`,t,...i,h),pd(n,s,h)}}).on("-",function(a){if(!t.skipEventFlag){var i=`-${a}`,s=[];n.emit(`parser.${i}`,t,s),pd(n,i,s)}}).on("complete",function(){n.emit("parser.complete",t)})},sA=function(n,t){var e=`tag.${t}`;n==null?this.emit(e):this.emit(e,...n)},pd=function(n,t,e){dt.call(n,t,sA,e,n)};const gd=[QP,qP,_P,tM,eM,aM,oM,iM,sM,nM,rM,hM,lM,uM,dM,vM,gM,mM,TM,EM,MM,OM,LM,wM,DM,GM,YM,zM,WM,$M,JM,QM,qM,_M,tA,eA,iA];var nA=function(n,t,e){for(var a=0,i=gd.length;a<i;a++)gd[a](n,t,e)},rA=function(n,t){for(var e=n.commentLineStart,a=t.split(`
`),i=0,s=a.length;i<s;i++){var h=a[i];h===""||(h.trim().length===0||e&&h.startsWith(e))&&(a[i]="")}return a.join("")};const aA=Phaser.Utils.Objects.GetValue;class oA extends jP{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("delimiters")||(e.delimiters="[]"),super(e),nA(t,this,e),this.setCommentLineStartSymbol(aA(e,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(rA(this,t)),this}}const hA={setDefaultTypingSpeed(n){return this.defaultSpeed=n,this},setTypingSpeed(n){return n===void 0&&(n=this.defaultSpeed),this.speed=n,this}},An="page.fadeout";var lA=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(An),this;var n=this.children.filter(function(a){return a.renderable}),t=this.fadeOutPageCallback(n,this.fadeOutPageDuration);if(!t)this.emit(An);else if(t.once)t.once("complete",function(){this.emit(An)},this);else if(t.then){var e=this;t.then(function(){e.emit(An)})}else this.emit(An);return this},zl=function(n,t){return new Promise(function(e,a){n.once(t,function(){e()})})},Qt=function(n){return zl(n,"complete")},uA=function(n){return this.children=n,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(n),this.typing(),Qt(this)};const fA="delay",Wg="anim";var Hg=function(n){n===void 0&&(n=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var e=this.getNextChild();if(!e){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(e.renderable){var a=this.animationConfig;if(a.duration>0){var i=this.timeline.addTimer({name:Wg,target:e,duration:a.duration,yoyo:a.yoyo,onStart:a.onStart,onProgress:a.onProgress,onComplete:a.onComplete});this.skipTypingAnimation&&i.seek(1)}else a.onStart&&a.onStart(e,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",e);var s=this.nextChild;if(s&&!(this.skipSpaceEnable&&N1(s))){if(t+=this.speed+n,n=0,t>0){this.typingTimer=this.timeline.addTimer({name:fA,target:this,duration:t,onComplete:function(h,r,o){h.typingTimer=void 0,Hg.call(h,o.remainder)}});break}}}else Y1(e)&&e.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},dA=function(){return this.timeline.pause(),this},cA=function(){return this.timeline.resume(),this},vA=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},pA=function(n){return this.isTypingPaused?(n===void 0&&(n=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=n):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(n)),this):this};const $e="_remove.wait",Kh="_remove.play",xd=[$e,Kh];var ss=function(n,t,e,a,i){return function(){n.emit($e,i),t.apply(a,e)}},md=function(n,t,e,a,i){var s=ss(n,e,a,i,"custom"),h=t?`wait.${t}`:"wait";n.emit(h,s)},gA=function(n,t,e,a,i){var s=ss(n,e,a,i,"time"),h;n.once($e,function(){h&&(h.remove(),h=void 0)}),h=n.timeline.delayCall(t,s),n.emit("wait.time",t)},xA=function(n,t,e,a){var i=n.clickEE;if(!!i){var s=ss(n,t,e,a,"click");n.once($e,function(){i.off("pointerdown",s,n)}),i.once("pointerdown",s,n),n.emit("wait.click")}},yd=function(n,t,e,a,i){var s=ss(n,e,a,i,"music");t&&(n.once($e,function(){t.off("complete",s,n)}),t.once("complete",s,n)),n.emit("wait.music",t),t||s()},mA=function(n){switch(n){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},yA=function(n,t,e,a,i){var s=ss(n,e,a,i,`camera.${t}`),h=n.targetCamera,r,o;switch(t){case"camera.fadein":r=h.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":r=h.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":r=h.flashEffect,o="cameraflashcomplete";break;case"camera.shake":r=h.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":r=h.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":r=h.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":r=h.panEffect,o="camerapancomplete";break}r.isRunning?(n.once($e,function(u){h.off(o,s,n)}),h.once(o,s,n),n.emit("wait.camera",t)):(n.emit("wait.camera",t),s())},TA=function(n,t,e,a,i){var s=ss(n,e,a,i,"keydown"),h=`keydown-${t.toUpperCase()}`,r=n.scene.input.keyboard;n.once($e,function(){r.off(h,s,n)}),r.once(h,s,n),n.emit("wait.keydown",t)},CA=function(n,t){var e=t.split(".");return n.gameObjectManagers.hasOwnProperty(e[0])},SA=function(n,t,e,a,i){var s=ss(n,e,a,i),h=t.split("."),r=h[0],o=n.getGameObjectManager(r),u=`wait.${r}`;switch(h.length){case 1:o.isEmpty?(n.emit(u),s()):(n.once($e,function(C){o.off("empty",s,n)}),o.once("empty",s,n),n.emit(u));return;case 2:var v=h[1];if(!o.has(v))n.emit(u,v),s();else{var l=o.get(v),f=l.gameObject;n.once($e,function(){f.off("destroy",s,n)}),f.once("destroy",s,n),n.emit(u,v)}return;case 3:var v=h[1],d=h[2],c=o.getProperty(v,d);if(typeof c=="number"){var p=o.getTweenTask(v,d);p?(n.once($e,function(){p.off("complete",s,n)}),p.once("complete",s,n),n.emit(u,v,d)):(n.emit(u,v,d),s());return}var g=d,x=g.startsWith("!");if(x&&(g=g.substring(1)),o.hasData(v,g)){var f=o.getGO(v),m=f.getData(g),y=!x;if(m===y)n.emit(u,v,d),s();else{var T=`changedata-${g}`,e=function(E,P,M){P=!!P,P===y&&s.call(n)};n.once($e,function(){f.off(T,e)}),f.on(T,e),n.emit(u,v,d)}return}}};const EA=Phaser.Input.Keyboard.KeyCodes;var kg=function(n,t,e,a,i){typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var s=0,h=t.length;s<h;s++){var r=t[s];if(r==null||r==="wait")md(n,void 0,e,a,i);else if(typeof r=="number"||!isNaN(r))gA(n,parseFloat(r),e,a,i);else if(r==="click")xA(n,e,a,i);else if(r==="se"){var o=n.soundManager.getLastSoundEffect();yd(n,o,e,a,i)}else if(r==="bgm"){var o=n.soundManager.getBackgroundMusic();yd(n,o,e,a,i)}else EA.hasOwnProperty(r.toUpperCase())?TA(n,r,e,a,i):mA(r)?yA(n,r,e,a,i):CA(n,r)?SA(n,r,e,a,i):md(n,r,e,a,i)}},PA=function(n){return this.ignoreWait?this:(this.pauseTyping(),kg(this.textPlayer,n,this.resumeTyping,[],this),this)},MA=function(n){return n===void 0&&(n=!0),this.ignoreWait=n,this},AA=function(n){return n===void 0&&(n=!0),this.skipSpaceEnable=n,this},OA=function(n){if(n===void 0&&(n=!0),this.skipTypingAnimation=n,n)for(var t=this.timeline.getTimers(Wg),e=0,a=t.length;e<a;e++)t[e].seek(1);return this},RA=function(n){if(n===void 0&&(n=!0),this.skipSoundEffect=n,n){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},LA=function(){return this.typingTimer&&this.typingTimer.seek(1),this},$g={fadeOutPage:lA,start:uA,typing:Hg,pause:dA,resume:cA,pauseTyping:vA,resumeTyping:pA,wait:PA,setIgnoreWait:MA,setSkipSpaceEnable:AA,setSkipTypingAnimation:OA,setSkipSoundEffect:RA,skipCurrentTypingDelay:LA};Object.assign($g,hA);const bs=Phaser.Utils.Objects.GetValue;class Kg{constructor(t,e){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(bs(e,"onTypingStart",IA)),this.setDefaultTypingSpeed(bs(e,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(bs(e,"skipSpace",!1)),this.setAnimationConfig(bs(e,"animation",void 0)),this.setMinSizeEnable(bs(e,"minSizeEnable",!1)),this.setFadeOutPageCallback(bs(e,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=FA),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var FA=function(n){n.setVisible&&n.setVisible()},IA=function(n){for(var t=0,e=n.length;t<e;t++){var a=n[t];a.setVisible&&a.setVisible(!1)}};Object.assign(Kg.prototype,fn,$g);class wA extends Gl{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const BA={playAnimation(n,t){return this.has(n)||this.add(n),this.get(n).playAnimation(t),this},stopAnimation(n){return this.has(n)?(this.get(n).stopAnimation(),this):this},chainAnimation(n,t){return this.has(n)?(this.get(n).chainAnimation(t),this):this},pauseAnimation(n){return this.has(n)?(this.get(n).pauseAnimation(),this):this}};var Zg={};Object.assign(Zg,BA);class Jg extends Yl{constructor(t,e){e===void 0&&(e={}),e.BobClass=wA,super(t,e)}setCreateGameObjectCallback(t,e){return!t||t==="sprite"?t=DA:t==="image"&&(t=bA),super.setCreateGameObjectCallback(t,e),this}}var DA=function(n,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),n.add.sprite(0,0,t,e)},bA=function(n,t,e){return typeof e!="string"&&typeof e!="number"&&(e=void 0),n.add.image(0,0,t,e)};Object.assign(Jg.prototype,Zg);var Td=function(n,t){return n.length===3&&n[0]===t&&n[2]==="play"},GA=function(n,t){return n.length===3&&n[0]===t&&n[2]==="stop"},NA=function(n,t,e){var a=e.name;t.on("+",function(i,...s){if(!t.skipEventFlag){var h=i.split("."),r;if(Td(h,a))r=h[1];else return;dt.call(n,`${a}.play`,YA,[a,r,s],n),t.skipEvent()}}).on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),h;if(GA(s,a))h=s[1];else return;dt.call(n,`${a}.stop`,Cd,[a,h],n),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var s=i.split("."),h;if(Td(s,a))h=s[1];else return;dt.call(n,`${a}.stop`,Cd,[a,h],n),t.skipEvent()}})},YA=function(n){var t,e,a;[t,e,a]=n;var i=a.shift(),s=this.getGameObjectManager(t);s.playAnimation(e,i),a.length>0&&s.chainAnimation(e,a)},Cd=function(n){var t,e;[t,...e]=n;var a=this.getGameObjectManager(t);a.stopAnimation(...e)},VA=function(n,t){return n.length===3&&n[0]===t&&n[2]==="pause"},zA=function(n,t,e){var a=e.name;t.on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),h;if(VA(s,a))h=s[1];else return;dt.call(n,`${a}.pause`,UA,[a,h],n),t.skipEvent()}})},UA=function(n){var t,e;[t,...e]=n;var a=this.getGameObjectManager(t);a.pauseAnimation(...e)},XA=function(n,t){return n.length===3&&n[0]===t&&n[2]==="chain"},WA=function(n,t,e){var a=e.name;t.on("+",function(i){if(!t.skipEventFlag){var s=i.split("."),h;if(XA(s,a))h=s[1];else return;var r=Array.prototype.slice.call(arguments,1);dt.call(n,`${a}.chain`,HA,[a,h,r],n),t.skipEvent()}})},HA=function(n){var t,e;[t,...e]=n;var a=this.getGameObjectManager(t);a.chainAnimation(...e)};const kA=[NA,zA,WA];var $A=function(n){n===void 0&&(n={}),n.name="sprite",n.parseCallbacks=kA,this.addGameObjectManager(n,Jg)},Sd=function(n,t){return n.length===2&&n[0]===t},KA=function(n,t,e){var a=e.name;t.on("+",function(i,...s){if(!t.skipEventFlag){var h=i.split("."),r;if(Sd(h,a))r=h[1];else return;dt.call(n,`${a}.add`,ZA,[a,r,...s],n),t.skipEvent()}}).on("-",function(i){if(!t.skipEventFlag){var s=i.split("."),h;if(Sd(s,a))h=s[1];else return;dt.call(n,`${a}.remove`,JA,[a,h],n),t.skipEvent()}})},ZA=function(n){var t,e;[t,...e]=n;var a=this.getGameObjectManager(t);a.add(...e)},JA=function(n){var t,e;[t,...e]=n;var a=this.getGameObjectManager(t);a.remove(...e)},jA=function(n,t,e){var a=e.name;t.on("-",function(i){t.skipEventFlag||i===a&&(dt.call(n,`${a}.removeall`,QA,a,n),t.skipEvent())})},QA=function(n){var t=this.getGameObjectManager(n);t.removeAll()},qA=function(n,t){return n.length===3&&n[0]===t},_A=function(n,t,e){var a=e.name;t.on("+",function(i,...s){if(!t.skipEventFlag){var h=i.split("."),r,o;if(qA(h,a))r=h[1],o=h[2];else return;dt.call(n,`${a}.call`,tO,[a,r,o,...s],n),t.skipEvent()}})},tO=function(n){var t,e,a,i;[t,e,a,...i]=n;var s=`${t}.${a}`;if(this.emit(s,e,...i),!(this.listenerCount(s)>0)){var h=this.getGameObjectManager(t);h.hasMethod(e,a)?h.call(e,a,...i):h.setProperty(e,a,i[0])}},eO={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},iO=function(n,t){return n.length===4&&n[0]===t&&eO[n[3]]},sO=function(n,t,e){var a=e.name;n.getGameObjectManager(a),t.on("+",function(i,s,h,r,o){if(!t.skipEventFlag){var u=i.split("."),l,f,v;if(iO(u,a))l=u[1],f=u[2],v=u[3];else return;typeof r=="number"&&(o=r,r=void 0),dt.call(n,`${a}.ease`,nO,[a,l,f,s,h,r,o,v],n),t.skipEvent()}})},nO=function(n){var t,e,a,i,s,h,r,o;[t,e,a,i,s,h,r,o]=n;var u=this.getGameObjectManager(t),l=u.getProperty(e,a);if(typeof l=="number"){o.endsWith("Left")||o.endsWith("Up")?o.startsWith("to")||o.startsWith("yoyo")?i=l-i:o.startsWith("from")&&(u.setProperty(e,a,l-i),i=l):o.endsWith("Right")||o.endsWith("Down")?o.startsWith("to")||o.startsWith("yoyo")?i=l+i:o.startsWith("from")&&(u.setProperty(e,a,l+i),i=l):o==="from"&&(u.setProperty(e,a,i),i=l);var f=o.startsWith("yoyo");u.easeProperty(e,a,i,s,h,r,f)}};const Ed=[KA,jA,_A,sO],rO={addGameObjectManager(n,t){n===void 0&&(n={});var e=n.name;e||console.warn("Parameter 'name' is required in TextPlayer.addGameObjectManager(config) method"),Vl.call(this,n,t);var a=n.parseCallbacks;a?a=[...a,...Ed]:a=Ed;for(var i=0,s=a.length;i<s;i++)a[i](this,this.parser,n);return this}};var aO=function(n){return this.clickTarget=n,n?ys(n)?this.clickEE=n.input:this.clickEE=n.setInteractive():this.clickEE=null,this},oO=function(n){return this.targetCamera=n,this},hO=function(n){var t=this;n?typeof n=="function"?this.nextPageInput=function(e,a,i){var s=ss(t,e,a,i);n.call(t,s)}:this.nextPageInput=function(e,a,i){kg(t,n,e,a,i)}:this.nextPageInput=null},lO=function(n,t){return this.imageManager.add(n,t),this};const uO={play(n){return this.isPlaying?this:(this.removeChildren(),this.parser.start(n),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(n){var t=Qt(this);return this.play(n),t}};Phaser.Utils.Objects.GetValue;var Zh=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once("page.fadeout",fO,this).fadeOutPage(),this)},fO=function(){var n=this.runWrap(this.lastWrapResult);this.lastWrapResult=n,this.emit("page.start");var t=function(){this.emit(Kh),n.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?Zh.call(this):this.nextPageInput&&this.nextPageInput(Zh,[],this))};this.once(Kh,function(){this.typeWriter.off("complete",t,this)}),this.typeWriter.once("complete",t,this).start(n.children)};const dO={pause(){return this.timeline.pause(),this},pauseTyping(){return this.typeWriter.pauseTyping(),this}},cO={resume(){return this.timeline.resume(),this},resumeTyping(n){return this.typeWriter.resumeTyping(n),this}};var vO=function(n){return this.typeWriter.wait(n),this};const pO={setDefaultTypingSpeed(n){return this.defaultTypingSpeed=n,this},setTypingSpeed(n){return this.typingSpeed=n,this}};var gO=function(n){return this.typeWriter.setIgnoreWait(n),this},xO=function(n){return n===void 0&&(n=!0),this.ignoreNextPageInput=n,this},mO=function(){if(!this.isPlaying||!this.isPageTyping)return this;var n=this.typeWriter.speed,t=this.typeWriter.ignoreWait,e=this.typeWriter.skipTypingAnimation,a=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(n).setIgnoreWait(t).setSkipTypingAnimation(e).setSkipSoundEffect(a)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this};const yO={getSprite(n){return this.getGameObject("sprite",n)},addSprite(n,t){return this.addGameObject("sprite",n,t),this}},TO={setContentOutputEnable(n){return this.parser.setContentOutputEnable(n),this},setContentCallback(n,t){return this.contentCallback=n,this.contentCallbackScope=t,this}};var jg={setClickTarget:aO,setTargetCamera:oO,setNextPageInput:hO,addImage:lO,typingNextPage:Zh,wait:vO,setIgnoreWait:gO,setIgnoreNextPageInput:xO,showPage:mO};Object.assign(jg,rO,uO,dO,cO,pO,yO,TO);var CO=function(n){for(var t=0,e=xd.length;t<e;t++)n.emit(xd[t])};const Pd=Phaser.Utils.Objects.IsPlainObject,Bi=Phaser.Utils.Objects.GetValue;class Ul extends WP(dn){constructor(t,e,a,i,s,h){Pd(e)?h=e:Pd(i)&&(h=i),h===void 0&&(h={});var r=h.text;delete h.text,super(t,e,a,i,s,h),this.type="rexTextPlayer",this.parser=new oA(this,Bi(h,"parser",void 0)),this.typeWriter=new Kg(this,Bi(h,"typing",void 0)),this._imageManager=void 0;var o=Bi(h,"images",void 0);o&&this.addImage(o),this.setTargetCamera(Bi(h,"camera",this.scene.sys.cameras.main)),this.initManagers(t,h);var u=Bi(h,"sprites");u!==!1&&u!==null&&$A.call(this,u),this.setIgnoreNextPageInput(Bi(h,"ignoreNextPageInput",!1)),this.setClickTarget(Bi(h,"clickTarget",this)),this.setNextPageInput(Bi(h,"nextPageInput",null)),this.isPlaying=!1,r&&this.play(r)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new gl(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||(CO(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.targetCamera=void 0,this.clickEE=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign(Ul.prototype,jg);_.register("textPlayer",function(n,t,e,a,i){var s=new Ul(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.TextPlayer",Ul);var SO=function(n){var t=n.parent,e=n.isOpened?n.selectionStart:null,a=n.isOpened?n.selectionEnd:null,i=n.prevSelectionStart,s=n.prevSelectionEnd;if(!(i===e&&s===a)){var h,r;i===null?(h=e,r=a):(h=Math.min(i,e),r=Math.max(s,a));for(var o=h;o<r;o++){var u=i===null?!1:o>=i&&o<s,l=o>=e&&o<a;if(!(u&&l)){var f=t.getCharChild(o);f&&(u?t.emit("cursorout",f,o,t):t.emit("cursorin",f,o,t))}}n.prevSelectionStart=e,n.prevSelectionEnd=a}},EO=function(n){var t=n.parent,e=t.text,a=n.cursorPosition;if(n.prevCursorPosition!==a){if(n.prevCursorPosition!==null&&n.prevCursorPosition>e.length&&(n.prevCursorPosition=null),n.prevCursorPosition!==null){var i=t.getCharChild(n.prevCursorPosition);i&&t.emit("cursorout",i,n.prevCursorPosition,t)}if(a!=null){var i=t.getCharChild(a);i&&t.emit("cursorin",i,a,t)}t.emit("movecursor",a,n.prevCursorPosition,t),n.prevCursorPosition=a}},Md=function(n){var t=n.prevSelectionStart;if(t!==null){for(var e=n.prevSelectionEnd,a=n.parent,i=t;i<e;i++){var s=a.getCharChild(i);s&&a.emit("cursorout",s,i,a)}n.prevSelectionStart=null,n.prevSelectionEnd=null}},Ad=function(n){var t=n.prevCursorPosition;if(t!==null){var e=n.parent,a=e.getCharChild(t);a&&e.emit("cursorout",a,t,e),n.prevCursorPosition=null}};const PO=Phaser.Utils.Objects.GetValue;class MO extends Pl{constructor(t,e){super(t,e),this.setSelectAllWhenFocusEnable(PO(e,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,t.on("pointerdown",function(a,i,s,h){var r=t.getNearestChild(i,s),o=t.getCharIndex(r);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(o),this.cursorMoveStartIndex=o,this.firstClickAfterOpen=!1},this).on("pointermove",function(a,i,s,h){if(!!a.isDown){var r=t.getNearestChild(i,s),o=t.getCharIndex(r);this.cursorMoveStartIndex<o?this.selectText(this.cursorMoveStartIndex,o+1):this.selectText(o,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")},this)}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,e=this.text;if(this.onUpdateCallback){var a=this.onUpdateCallback(e,t,this);a!=null&&(e=a)}return t.text!==e&&(t.setText(e),t.emit("textchange",e,t,this)),this.isOpened?this.selectionStart!==this.selectionEnd?(Ad(this),SO(this)):(Md(this),EO(this)):(Md(this),Ad(this)),this}setNumberInput(){return this.onUpdateCallback=sg,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}}const AO=Phaser.Utils.Objects.GetValue,OO=["inputType","onOpen","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var RO=function(n,t){var e=AO(t,"edit");return e===void 0&&(e={}),Ui(t,e,OO),new MO(n,e)},Xi=function(n,t){if(!n||typeof n=="number")return!1;if(n.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var e=t.split("."),a=n,i=0;i<e.length;i++)if(a.hasOwnProperty(e[i]))a=a[e[i]];else return!1;return!0}else return!1},LO=function(n){var t=!n.textArea;if(!Xi(n,"wrap.vAlign")){var e=t?"center":"top";q(n,"wrap.vAlign",e)}if(Xi(n,"wrap.charWrap")||q(n,"wrap.charWrap",!0),!Xi(n,"wrap.maxLines")){var e=t?1:void 0;q(n,"wrap.maxLines",e)}if(Xi(n,"wrap.useDefaultTextHeight")||q(n,"wrap.useDefaultTextHeight",!0),n.edit||(n.edit={}),!Xi(n.edit,"inputType")){var e=t?"text":"textarea";q(n.edit,"inputType",e)}return n},Jh=function(n,t,e,a){if(e===void 0&&(e="."),a===void 0&&(a={}),!n)return a;if(t in n)return Object.assign(a,n[t]);t+=e;for(var i in n)!i.startsWith(t)||(a[i.replace(t,"")]=n[i]);return a},Xl=function(n,t,e){if(e===void 0&&(e={}),Array.isArray(t))for(var a,i=0,s=t.length;i<s;i++)a=t[i],e[a]=n[a];else for(var a in t)e[a]=n[a];return e},Wl=function(n,t){for(var e in n)if(!(e in t)||n[e]!==t[e])return!1;for(var e in t)if(!(e in n))return!1;return!0},FO=function(n){Nl(n)||this.setCursorStyle(n).on("cursorin",function(t){var e=this.cursorStyle,a=Xl(t.style,e);Wl(e,a)||(t.styleSave=a,t.modifyStyle(e))},this).on("cursorout",function(t){!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},IO=function(n){Nl(n)||this.setFocusStyle(n).on("open",function(){var t=this.background,e=this.focusStyle,a=Xl(t,e);Wl(e,a)||(t.styleSave=a,t.modifyStyle(e))},this).on("close",function(){var t=this.background;!t.styleSave||(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},wO=function(n){var t=n.createCharChild("|");return t.text="",Eg.call(n,t),t};function Pi(){}Pi.prototype={diff(n,t,e={}){let a=e.callback;typeof e=="function"&&(a=e,e={}),this.options=e;let i=this;function s(d){return a?(setTimeout(function(){a(void 0,d)},0),!0):d}n=this.castInput(n),t=this.castInput(t),n=this.removeEmpty(this.tokenize(n)),t=this.removeEmpty(this.tokenize(t));let h=t.length,r=n.length,o=1,u=h+r;e.maxEditLength&&(u=Math.min(u,e.maxEditLength));let l=[{newPos:-1,components:[]}],f=this.extractCommon(l[0],t,n,0);if(l[0].newPos+1>=h&&f+1>=r)return s([{value:this.join(t),count:t.length}]);function v(){for(let d=-1*o;d<=o;d+=2){let c,p=l[d-1],g=l[d+1],x=(g?g.newPos:0)-d;p&&(l[d-1]=void 0);let m=p&&p.newPos+1<h,y=g&&0<=x&&x<r;if(!m&&!y){l[d]=void 0;continue}if(!m||y&&p.newPos<g.newPos?(c=DO(g),i.pushComponent(c.components,void 0,!0)):(c=p,c.newPos++,i.pushComponent(c.components,!0,void 0)),x=i.extractCommon(c,t,n,d),c.newPos+1>=h&&x+1>=r)return s(BO(i,c.components,t,n,i.useLongestToken));l[d]=c}o++}if(a)(function d(){setTimeout(function(){if(o>u)return a();v()||d()},0)})();else for(;o<=u;){let d=v();if(d)return d}},pushComponent(n,t,e){let a=n[n.length-1];a&&a.added===t&&a.removed===e?n[n.length-1]={count:a.count+1,added:t,removed:e}:n.push({count:1,added:t,removed:e})},extractCommon(n,t,e,a){let i=t.length,s=e.length,h=n.newPos,r=h-a,o=0;for(;h+1<i&&r+1<s&&this.equals(t[h+1],e[r+1]);)h++,r++,o++;return o&&n.components.push({count:o}),n.newPos=h,r},equals(n,t){return this.options.comparator?this.options.comparator(n,t):n===t||this.options.ignoreCase&&n.toLowerCase()===t.toLowerCase()},removeEmpty(n){let t=[];for(let e=0;e<n.length;e++)n[e]&&t.push(n[e]);return t},castInput(n){return n},tokenize(n){return n.split("")},join(n){return n.join("")}};function BO(n,t,e,a,i){let s=0,h=t.length,r=0,o=0;for(;s<h;s++){let l=t[s];if(l.removed){if(l.value=n.join(a.slice(o,o+l.count)),o+=l.count,s&&t[s-1].added){let f=t[s-1];t[s-1]=t[s],t[s]=f}}else{if(!l.added&&i){let f=e.slice(r,r+l.count);f=f.map(function(v,d){let c=a[o+d];return c.length>v.length?c:v}),l.value=n.join(f)}else l.value=n.join(e.slice(r,r+l.count));r+=l.count,l.added||(o+=l.count)}}let u=t[h-1];return h>1&&typeof u.value=="string"&&(u.added||u.removed)&&n.equals("",u.value)&&(t[h-2].value+=u.value,t.pop()),t}function DO(n){return{newPos:n.newPos,components:n.components.slice(0)}}const bO=new Pi;function GO(n,t,e){return bO.diff(n,t,e)}const Od=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,Rd=/\S/,Qg=new Pi;Qg.equals=function(n,t){return this.options.ignoreCase&&(n=n.toLowerCase(),t=t.toLowerCase()),n===t||this.options.ignoreWhitespace&&!Rd.test(n)&&!Rd.test(t)};Qg.tokenize=function(n){let t=n.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let e=0;e<t.length-1;e++)!t[e+1]&&t[e+2]&&Od.test(t[e])&&Od.test(t[e+2])&&(t[e]+=t[e+2],t.splice(e+1,2),e--);return t};const qg=new Pi;qg.tokenize=function(n){let t=[],e=n.split(/(\n|\r\n)/);e[e.length-1]||e.pop();for(let a=0;a<e.length;a++){let i=e[a];a%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};const NO=new Pi;NO.tokenize=function(n){return n.split(/(\S.+?[.!?])(?=\s+|$)/)};const YO=new Pi;YO.tokenize=function(n){return n.split(/([{}:;,]|\s+)/)};const VO=Object.prototype.toString,$n=new Pi;$n.useLongestToken=!0;$n.tokenize=qg.tokenize;$n.castInput=function(n){const{undefinedReplacement:t,stringifyReplacer:e=(a,i)=>typeof i>"u"?t:i}=this.options;return typeof n=="string"?n:JSON.stringify(jh(n,null,null,e),e,"  ")};$n.equals=function(n,t){return Pi.prototype.equals.call($n,n.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function jh(n,t,e,a,i){t=t||[],e=e||[],a&&(n=a(i,n));let s;for(s=0;s<t.length;s+=1)if(t[s]===n)return e[s];let h;if(VO.call(n)==="[object Array]"){for(t.push(n),h=new Array(n.length),e.push(h),s=0;s<n.length;s+=1)h[s]=jh(n[s],t,e,a,i);return t.pop(),e.pop(),h}if(n&&n.toJSON&&(n=n.toJSON()),typeof n=="object"&&n!==null){t.push(n),h={},e.push(h);let r=[],o;for(o in n)n.hasOwnProperty(o)&&r.push(o);for(r.sort(),s=0;s<r.length;s+=1)o=r[s],h[o]=jh(n[o],t,e,a,o);t.pop(),e.pop()}else h=n;return h}const Qh=new Pi;Qh.tokenize=function(n){return n.slice()};Qh.join=Qh.removeEmpty=function(n){return n};const zO=Phaser.Utils.Array.Remove;var UO=function(n,t){var e=n.text;if(t!==e){if(zO(n.children,n.lastInsertCursor),t==="")n.removeChildren();else for(var a=GO(e,t),i=0,s=0,h=a.length;s<h;s++){var r=a[s];r.removed?n.removeText(i,r.count):(r.added&&n.insertText(i,r.value),i+=r.count)}n.children.push(n.lastInsertCursor),n.runWordWrap()}};const Ld=Phaser.Utils.Objects.IsPlainObject;class Hl extends dn{constructor(t,e,a,i,s,h){Ld(e)?h=e:Ld(i)&&(h=i),h===void 0&&(h={}),LO(h);var r=h.text;r&&delete h.text;var o=Jh(h.background,"focus"),u=Jh(h.style,"cursor");super(t,e,a,i,s,h),this.type="rexCanvasInput",this._text="",this.textEdit=RO(this,h),h.focusStyle&&Object.assign(o,h.focusStyle),IO.call(this,o),h.cursorStyle&&Object.assign(u,h.cursorStyle),FO.call(this,u);var l=h.onAddChar;l&&this.on("addchar",l);var f=h.onCursorOut;f&&this.on("cursorout",f);var v=h.onCursorIn;v&&this.on("cursorin",v);var d=h.onMoveCursor;d&&this.on("movecursor",d),this.setParseTextCallback(h.parseTextCallback),this.lastInsertCursor=wO(this),r?this.setText(r):this.runWordWrap()}addChild(t,e){if(super.addChild(t,e),Array.isArray(t))for(var a=t,i=0,s=a.length;i<s;i++){var t=a[i];hn(t)&&this.emit("addchar",t,e+i,this)}else hn(t)&&this.emit("addchar",t,e,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(UO(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}setSize(t,e){return this.width===t&&this.height===e?this:(super.setSize(t,e),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=XO),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}}var XO=function(n){return n};_.register("canvasInput",function(n,t,e,a,i){var s=new Hl(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.CanvasInput",Hl);const WO=Phaser.Math.Linear,Fd=Phaser.Math.Percent,HO={setValue(n,t,e){return n==null?this:(t!==void 0&&(n=Fd(n,t,e)),this.value=n,this)},addValue(n,t,e){return t!==void 0&&(n=Fd(n,t,e)),this.value+=n,this},getValue(n,t){var e=this.value;return n!==void 0&&(e=WO(n,t,e)),e}},kO=Phaser.Math.Percent;var $O=function(n){return this.easeValuePropName=n,this},KO=function(n){return this.easeValueDuration=n,this},ZO=function(n){return this.easeFunction=n,this},JO=function(){return this.easeValueTask&&this.easeValueTask.stop(),this},jO=function(n,t,e){return n==null?this:(t!==void 0&&(n=kO(n,t,e)),this.easeValueTask===void 0&&(this.easeValueTask=new Ps(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:n,duration:this.easeValueDuration,ease:this.easeFunction}),this)},QO=function(n,t,e,a){return e===void 0&&(e=-1),a===void 0&&(a=0),this.easeValueTask===void 0&&(this.easeValueTask=new Ps(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:n,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:e,repeatDelay:a}),this};const qO={setEaseValuePropName:$O,setEaseValueDuration:KO,setEaseValueFunction:ZO,stopEaseValue:JO,easeValueTo:jO,easeValueRepeat:QO},On=Phaser.Utils.Objects.GetValue,_O=Phaser.Math.Clamp;function As(n){class t extends n{bootProgressBase(a){this.eventEmitter=On(a,"eventEmitter",this);var i=On(a,"valuechangeCallback",null);if(i!==null){var s=On(a,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",i,s)}return this.setEaseValuePropName("value").setEaseValueDuration(On(a,"easeValue.duration",0)).setEaseValueFunction(On(a,"easeValue.ease","Linear")),this}get value(){return this._value}set value(a){a=_O(a,0,1);var i=this._value,s=i!=a;this.dirty=this.dirty||s,this._value=a,s&&this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter)}}return Object.assign(t.prototype,HO,qO),t}const tR=Phaser.Math.RadToDeg,eR={buildShapes(){this.addShape(new Uh().setName("track")).addShape(new Fa().setName("bar")).addShape(new Uh().setName("center"))},updateShapes(){var n=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,a=this.radius-t,i=this.getShape("track");this.trackColor!=null&&t>0?i.setCenterPosition(n,n).setRadius(e).lineStyle(t,this.trackColor):i.reset();var s=this.getShape("bar");if(this.barColor!=null&&e>0){var h,r,o;if(this.value===1)h=!1,r=0,o=361;else{h=this.anticlockwise,r=tR(this.startAngle);var u=360*(h?1-this.value:this.value);o=u+r}s.setCenterPosition(n,n).setRadius(e).setAngle(r,o,h).lineStyle(t,this.barColor)}else s.reset();var l=this.getShape("center");this.centerColor&&a>0?l.setCenterPosition(n,n).setRadius(a).fillStyle(this.centerColor):l.reset()}},Je=Phaser.Utils.Objects.GetValue,iR=Phaser.Utils.Objects.IsPlainObject,sR=Phaser.Math.Clamp,nR=Phaser.Math.DegToRad(270);class Da extends As(Ss){constructor(t,e,a,i,s,h,r){iR(e)&&(r=e,e=Je(r,"x",0),a=Je(r,"y",0),i=Je(r,"radius",1),s=Je(r,"barColor",void 0),h=Je(r,"value",0)),i===void 0&&(i=1);var o=i*2;super(t,e,a,o,o),this.type="rexCircularProgress",this.bootProgressBase(r),this.setRadius(i),this.setTrackColor(Je(r,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Je(r,"centerColor",void 0)),this.setThickness(Je(r,"thickness",.2)),this.setStartAngle(Je(r,"startAngle",nR)),this.setAnticlockwise(Je(r,"anticlockwise",!1)),this.buildShapes(),this.setValue(h)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=sR(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}}Object.assign(Da.prototype,eR);_.register("circularProgress",function(n,t,e,a,i,s){var h=new Da(this.scene,n,t,e,a,i,s);return this.scene.add.existing(h),h});q(window,"RexPlugins.UI.CircularProgress",Da);var No=function(n,t,e,a,i,s,h,r,o,u,l,f){u===void 0&&(u=0),l===void 0&&(l=2*Math.PI),f===void 0&&(f=!1),t.beginPath(),t.ellipse(e,a,i,s,0,u,l,f),h!=null&&(t.fillStyle=h,t.fill()),r!=null&&(t.strokeStyle=r,t.lineWidth=o,t.stroke())},rR=function(n,t,e,a,i,s,h,r,o,u,l){o===void 0&&r!=null&&(o=2),u===void 0&&(u="start"),l===void 0&&(l="alphabetic"),t.font=s,t.textAlign=u,t.textBaseline=l,t.fillStyle=h,t.strokeStyle=r,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",r!=null&&r!=="none"&&o>0&&t.strokeText(i,e,a),h!=null&&h!=="none"&&t.fillText(i,e,a)},aR=function(){var n=this.radius,t=this.thickness*this.radius,e=this.radius-t/2,a=this.radius-t,i=this.canvas,s=this.context;if(this.trackColor&&t>0&&(s.save(),No(i,s,n,n,e,e,void 0,this.trackColor,t),s.restore()),this.barColor&&e>0){var h,r,o;if(this.value===1)h=!1,r=0,o=2*Math.PI;else{h=this.anticlockwise,r=this.startAngle;var u=2*Math.PI*(h?1-this.value:this.value);o=u+r}s.save(),No(i,s,n,n,e,e,void 0,this.barColor,t,r,o,h),s.restore()}if(this.centerColor&&a>0){var l;this.centerColor2?(l=this.context.createRadialGradient(n,n,0,n,n,a),l.addColorStop(0,this.centerColor),l.addColorStop(1,this.centerColor2)):l=this.centerColor,s.save(),No(i,s,n,n,a,a,l),s.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(s.save(),rR(i,s,n,n,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),s.restore())};const Gt=Phaser.Utils.Objects.GetValue,oR=Phaser.Utils.Objects.IsPlainObject,hR=Phaser.Math.Clamp,lR=Phaser.Math.DegToRad(270);class _g extends As(Me){constructor(t,e,a,i,s,h,r){oR(e)&&(r=e,e=Gt(r,"x",0),a=Gt(r,"y",0),i=Gt(r,"radius",1),s=Gt(r,"barColor",void 0),h=Gt(r,"value",0));var o=i*2;super(t,e,a,o,o),this.type="rexCircularProgressCanvas",this.bootProgressBase(r),this.setRadius(i),this.setTrackColor(Gt(r,"trackColor",void 0)),this.setBarColor(s),this.setCenterColor(Gt(r,"centerColor",void 0)),this.setThickness(Gt(r,"thickness",.2)),this.setStartAngle(Gt(r,"startAngle",lR)),this.setAnticlockwise(Gt(r,"anticlockwise",!1)),this.setTextColor(Gt(r,"textColor",void 0)),this.setTextStrokeColor(Gt(r,"textStrokeColor",void 0),Gt(r,"textStrokeThickness",void 0));var u=Gt(r,"textFont",void 0);u?this.setTextFont(u):this.setTextFont(Gt(r,"textSize","16px"),Gt(r,"textFamily","Courier"),Gt(r,"textStyle","")),this.setTextFormatCallback(Gt(r,"textFormatCallback",void 0),Gt(r,"textFormatCallbackScope",void 0)),this.setValue(h)}resize(t,e){return t=Math.floor(Math.min(t,e)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var e=t*2;this.resize(e,e)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=hR(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,e){return this.centerColor=t,this.centerColor2=e,this}get textColor(){return this._textColor}set textColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,e){return e===void 0&&(e=2),this.textStrokeColor=t,this.textStrokeThickness=e,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,e,a){var i;return e===void 0?i=t:i=a+" "+t+" "+e,this.textFont=i,this}setTextFormatCallback(t,e){return this.textFormatCallback=t,this.textFormatCallbackScope=e,this}updateTexture(){return this.clear(),aR.call(this),super.updateTexture(),this}getFormatText(t){t===void 0&&(t=this.value);var e;return this.textFormatCallbackScope?e=this.textFormatCallback(t):e=this.textFormatCallback.call(this.textFormatCallbackScope,t),e}}_.register("circularProgressCanvas",function(n,t,e,a,i,s){var h=new _g(this.scene,n,t,e,a,i,s);return this.scene.add.existing(h),h});q(window,"RexPlugins.UI.CircularProgressCanvas",_g);var uR=function(){var n=this.skewX,t=this.width-Math.abs(n),e=this.height,a=this.getShape("trackFill");a.fillStyle(this.trackColor),a.isFilled&&Yo(a,0,0,t,e,n).close();var i=this.getShape("bar");if(i.fillStyle(this.barColor),i.isFilled){var s,h;this.rtl?(s=t*(1-this.value),h=t):(s=0,h=t*this.value),Yo(i,s,0,h,e,n).close()}var r=this.getShape("trackStroke");r.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),r.isStroked&&Yo(r,0,0,t,e,n).end()},Yo=function(n,t,e,a,i,s){return s>=0?n.startAt(t+s,e).lineTo(a+s,e).lineTo(a,i).lineTo(t,i).lineTo(t+s,e):n.startAt(t,e).lineTo(a,e).lineTo(a-s,i).lineTo(t-s,i).lineTo(t,e),n};const Kt=Phaser.Utils.Objects.GetValue,Vo=Phaser.Utils.Objects.IsPlainObject;class kl extends As(Ss){constructor(t,e,a,i,s,h,r,o){Vo(e)?(o=e,e=Kt(o,"x",0),a=Kt(o,"y",0),i=Kt(o,"width",2),s=Kt(o,"height",2),h=Kt(o,"barColor",void 0),r=Kt(o,"value",0)):Vo(i)?(o=i,i=Kt(o,"width",2),s=Kt(o,"height",2),h=Kt(o,"barColor",void 0),r=Kt(o,"value",0)):Vo(h)&&(o=h,h=Kt(o,"barColor",void 0),r=Kt(o,"value",0)),super(t,e,a,i,s,o),this.type="rexLineProgress",this.bootProgressBase(o),this.addShape(new an().setName("trackFill")).addShape(new an().setName("bar")).addShape(new an().setName("trackStroke")),this.setTrackColor(Kt(o,"trackColor",void 0)),this.setBarColor(h),this.setTrackStroke(Kt(o,"trackStrokeThickness",2),Kt(o,"trackStrokeColor",void 0)),this.setSkewX(Kt(o,"skewX",0)),this.setRTL(Kt(o,"rtl",!1)),this.setValue(r)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,e){return this.trackStrokeThickness=t,this.trackStrokeColor=e,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}}var fR={updateShapes:uR};Object.assign(kl.prototype,fR);_.register("lineProgress",function(n,t,e,a,i,s,h){var r=new kl(this.scene,n,t,e,a,i,s,h);return this.scene.add.existing(r),r});q(window,"RexPlugins.UI.LineProgress",kl);var zo=function(n,t,e,a,i,s,h){h===void 0&&(h="round"),t.beginPath(),t.lineJoin=h;var r=e[0];t.moveTo(r.x,r.y);for(var o=1,u=e.length;o<u;o++)r=e[o],t.lineTo(r.x,r.y);t.closePath(),a!=null&&(t.fillStyle=a,t.fill()),i!=null&&(t.strokeStyle=i,t.lineWidth=s,t.stroke())},dR=function(){var n=this.skewX,t=this.width-Math.abs(n),e=this.height,a=this.canvas,i=this.context;(this.trackColor||this.trackStrokeColor)&&Id(0,0,t,e,n,this.trackPoints);var s,h;if(this.barColor&&(this.rtl?(s=t*(1-this.value),h=t):(s=0,h=t*this.value),Id(s,0,h,e,n,this.barPoints)),this.trackColor&&(i.save(),zo(a,i,this.trackPoints,this.trackColor),i.restore()),this.barColor){i.save();var r;if(this.barColor2){var o;if(this.isHorizontalGradient){var u=e/2;o=i.createLinearGradient(s,u,h,u)}else{var l=t/2;o=i.createLinearGradient(l,0,l,e)}o.addColorStop(0,this.rtl?this.barColor:this.barColor2),o.addColorStop(1,this.rtl?this.barColor2:this.barColor),r=o}else r=this.barColor;zo(a,i,this.barPoints,r),i.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(i.save(),zo(a,i,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),i.restore())},Id=function(n,t,e,a,i,s){s===void 0&&(s=[]),s.length=4;for(var h=0;h<4;h++)s[h]||(s[h]={});var r;return i>=0?(r=s[0],r.x=n+i,r.y=t,r=s[1],r.x=e+i,r.y=t,r=s[2],r.x=e,r.y=a,r=s[3],r.x=n,r.y=a):(r=s[0],r.x=n,r.y=t,r=s[1],r.x=e,r.y=t,r=s[2],r.x=e-i,r.y=a,r=s[3],r.x=n-i,r.y=a),s};const Nt=Phaser.Utils.Objects.GetValue,Uo=Phaser.Utils.Objects.IsPlainObject;class $l extends As(Me){constructor(t,e,a,i,s,h,r,o){Uo(e)?(o=e,e=Nt(o,"x",0),a=Nt(o,"y",0),i=Nt(o,"width",2),s=Nt(o,"height",2),h=Nt(o,"barColor",void 0),r=Nt(o,"value",0)):Uo(i)?(o=i,i=Nt(o,"width",2),s=Nt(o,"height",2),h=Nt(o,"barColor",void 0),r=Nt(o,"value",0)):Uo(h)&&(o=h,h=Nt(o,"barColor",void 0),r=Nt(o,"value",0)),super(t,e,a,i,s),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(o),this.setTrackColor(Nt(o,"trackColor",void 0)),this.setBarColor(h,Nt(o,"barColor2",void 0),Nt(o,"isHorizontalGradient",void 0)),this.setTrackStroke(Nt(o,"trackStrokeThickness",2),Nt(o,"trackStrokeColor",void 0)),this.setSkewX(Nt(o,"skewX",0)),this.setRTL(Nt(o,"rtl",!1)),this.setValue(r)}get trackColor(){return this._trackColor}set trackColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,e){return this.trackStrokeThickness=t,this.trackStrokeColor=e,this}get barColor(){return this._barColor}set barColor(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=ut(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,e,a){return a===void 0&&(a=!0),this.barColor=t,this.barColor2=e,this.isHorizontalGradient=a,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return this.clear(),dR.call(this),super.updateTexture(),this}}_.register("circularProgressCanvas",function(n,t,e,a,i,s,h){var r=new $l(this.scene,n,t,e,a,i,s,h);return this.scene.add.existing(r),r});q(window,"RexPlugins.UI.LineProgressCanvas",$l);Phaser.Math.Wrap;const Gs=Phaser.Math.Linear;var cR=function(){var n=this.getShape("triangle"),t=this.padding,e=this.width-t.right,a=0+t.left,i=this.height-t.bottom,s=0+t.top,h=(a+e)/2,r=(s+i)/2,o={0:{a:{x:a,y:s},b:{x:e,y:r},c:{x:a,y:i}},1:{a:{x:a,y:s},b:{x:h,y:i},c:{x:e,y:s}},2:{a:{x:e,y:s},b:{x:a,y:r},c:{x:e,y:i}},3:{a:{x:a,y:i},b:{x:h,y:s},c:{x:e,y:i}}},u,l,f,v,d,c;if(this.previousDirection===void 0){var p=o[this.direction],g=p.a,x=p.b,m=p.c;u=g.x,l=g.y,f=x.x,v=x.y,d=m.x,c=m.y}else{var y=o[this.previousDirection],T=o[this.direction],C=this.easeDirectionProgress;u=Gs(y.a.x,T.a.x,C),l=Gs(y.a.y,T.a.y,C),f=Gs(y.b.x,T.b.x,C),v=Gs(y.b.y,T.b.y,C),d=Gs(y.c.x,T.c.x,C),c=Gs(y.c.y,T.c.y,C)}n.startAt(u,l).lineTo(f,v).lineTo(d,c),this.arrowOnly?n.end():n.close()};const vR=Phaser.Math.DegToRad,Dr=vR(120);var pR=function(t){var t=this.getShape("triangle"),e=this.width/2,a=this.height/2,i=Math.min(e,a)*this.radius,s=this.verticeRotation;t.startAt(e+i*Math.cos(s+Dr),a+i*Math.sin(s+Dr)).lineTo(e+i*Math.cos(s),a+i*Math.sin(s)).lineTo(e+i*Math.cos(s-Dr),a+i*Math.sin(s-Dr)),this.arrowOnly?t.end():t.close()};const gR={buildShapes(){this.addShape(new an().setName("triangle"))},updateShapes(){var n=this.getShape("triangle");this.arrowOnly?n.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):n.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?cR.call(this):pR.call(this)}},xR={setEaseDuration(n){return n===void 0&&(n=0),this.easeDuration=n,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Ps(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}},Ns=Phaser.Utils.Objects.GetValue,mR=Phaser.Utils.Objects.IsPlainObject,yR=Phaser.Math.DegToRad,TR=Phaser.Math.RadToDeg;class ba extends Ss{constructor(t,e,a,i,s,h,r){var o,u,l,f,v,d,c,p;if(mR(e)){var g=e;e=g.x,a=g.y,i=g.width,s=g.height,h=g.color,r=g.alpha,o=g.strokeColor,u=g.strokeAlpha,l=g.strokeWidth,f=g.arrowOnly,v=g.direction,d=g.easeDuration,c=g.padding,p=g.radius}e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=1),s===void 0&&(s=i),f===void 0&&(f=!1),v===void 0&&(v=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=void 0),super(t,e,a,i,s),this.type="rexTriangle",this.setFillStyle(h,r),o!==void 0&&l===void 0&&(l=2),this.setStrokeStyle(l,o,u),this.setArrowOnly(f),this.setDirection(v,d),this.setPadding(c),this.setRadius(p),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=SR(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,e){return e!==void 0&&this.setEaseDuration(e),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,e,a,i){if(typeof t=="object"){var s=t,h=Ns(s,"x",null);h!==null?(t=h,a=h):(t=Ns(s,"left",0),a=Ns(s,"right",t));var r=Ns(s,"y",null);r!==null?(e=r,i=r):(e=Ns(s,"top",0),i=Ns(s,"bottom",e))}else t===void 0&&(t=0),e===void 0&&(e=t),a===void 0&&(a=t),i===void 0&&(i=e);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=e||this.padding.right!=a||this.padding.bottom!=i,this.padding.left=t,this.padding.top=e,this.padding.right=a,this.padding.bottom=i,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return TR(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=yR(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const CR={right:0,down:1,left:2,up:3};var SR=function(n){return typeof n=="string"&&(n=CR[n]),n=n%4,n};Object.assign(ba.prototype,gR,xR);_.register("triangle",function(n,t,e,a,i,s){var h=new ba(this.scene,n,t,e,a,i,s);return this.scene.add.existing(h),h});q(window,"RexPlugins.UI.Triangle",ba);var Ga=function(n){return n.hasOwnProperty("rexSizer")||(n.rexSizer={}),n.rexSizer};function ER(n){return n===void 0&&(n=this),Ga(n)}var PR=function(n){var t=Ga(n);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},MR=function(n){return n===void 0&&(n=cn(this.scene)),this.left=Math.max(this.left,n.left),this.right=Math.min(this.right,n.right),this.top=Math.max(this.top,n.top),this.bottom=Math.min(this.bottom,n.bottom),this};const fe=Phaser.Display.Align,vn={center:fe.CENTER,left:fe.LEFT_CENTER,right:fe.RIGHT_CENTER,top:fe.TOP_CENTER,bottom:fe.BOTTOM_CENTER,"left-top":fe.TOP_LEFT,"left-center":fe.LEFT_CENTER,"left-bottom":fe.BOTTOM_LEFT,"center-top":fe.TOP_CENTER,"center-center":fe.CENTER,"center-bottom":fe.BOTTOM_CENTER,"right-top":fe.TOP_RIGHT,"right-center":fe.RIGHT_CENTER,"right-bottom":fe.BOTTOM_RIGHT};var qh=new Phaser.GameObjects.Zone({sys:{queueDepthSort:ve,events:{once:ve}}},0,0,1,1);qh.setOrigin(0);var Mi={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},Kl=function(n){var t=xt(n);return n.y+t-t*n.originY},Zl=function(n){var t=Tt(n);return n.x-t*n.originX+t*.5},Jl=function(n,t){var e=xt(n);return n.y=t-e+e*n.originY,n},jl=function(n,t){var e=Tt(n),a=e*n.originX;return n.x=t+a-e*.5,n},AR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),jl(n,Zl(t)+e),Jl(n,Kl(t)+a),n},Ql=function(n){var t=Tt(n);return n.x-t*n.originX},ql=function(n,t){var e=Tt(n);return n.x=t+e*n.originX,n},OR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),ql(n,Ql(t)-e),Jl(n,Kl(t)+a),n},_l=function(n){var t=Tt(n);return n.x+t-t*n.originX},tu=function(n,t){var e=Tt(n);return n.x=t-e+e*n.originX,n},RR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),tu(n,_l(t)+e),Jl(n,Kl(t)+a),n},eu=function(n,t){var e=xt(n),a=e*n.originY;return n.y=t+a-e*.5,n},LR=function(n,t,e){return jl(n,t),eu(n,e)},iu=function(n){var t=xt(n);return n.y-t*n.originY+t*.5},FR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),LR(n,Zl(t)+e,iu(t)+a),n},IR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),ql(n,Ql(t)-e),eu(n,iu(t)+a),n},wR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),tu(n,_l(t)+e),eu(n,iu(t)+a),n},su=function(n){var t=xt(n);return n.y-t*n.originY},nu=function(n,t){var e=xt(n);return n.y=t+e*n.originY,n},BR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),jl(n,Zl(t)+e),nu(n,su(t)-a),n},DR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),ql(n,Ql(t)-e),nu(n,su(t)-a),n},bR=function(n,t,e,a){return e===void 0&&(e=0),a===void 0&&(a=0),tu(n,_l(t)+e),nu(n,su(t)-a),n},hi=[];hi[Mi.BOTTOM_CENTER]=AR;hi[Mi.BOTTOM_LEFT]=OR;hi[Mi.BOTTOM_RIGHT]=RR;hi[Mi.CENTER]=FR;hi[Mi.LEFT_CENTER]=IR;hi[Mi.RIGHT_CENTER]=wR;hi[Mi.TOP_CENTER]=BR;hi[Mi.TOP_LEFT]=DR;hi[Mi.TOP_RIGHT]=bR;var t0=function(n,t,e,a,i){return hi[e](n,t,a,i)},ar=function(n,t,e,a,i,s){qh.setPosition(t,e).setSize(a,i),t0(n,qh,s)};const Ys=Phaser.Utils.Objects.GetValue,GR=Phaser.GameObjects.Group;var NR=function(n,t){var e=n.scene,a,i,s,h,r;if(typeof t=="number")a=t;else{a=Ys(t,"color"),i=Ys(t,"lineWidth");var o=Ys(t,"name",!1);o&&(s=Ys(o,"createTextCallback",YR),h=Ys(o,"createTextCallbackScope",void 0),r=Ys(o,"align","left-top"),typeof r=="string"&&(r=vn[r]))}if(a===void 0&&(a=16777215),i===void 0&&(i=1),s&&!n.children){n.children=new GR(e),n.once("destroy",function(p,g){p.children.destroy(!g),p.children=void 0});var u=n.clear.bind(n);n.clear=function(){u(),n.children.clear(!1,!0)}}for(var l=this.getAllShownChildren([this]),f,v,d=0,c=l.length;d<c;d++){if(f=l[d],f.getBounds||f.width!==void 0&&f.height!==void 0)fs=Ll(f,fs);else continue;a!=null&&n.lineStyle(i,a).strokeRectShape(fs),f.name&&s&&(h?v=s.call(h,e):v=s(e),v&&(v.setText(f.name),n.children.add(v),ar(v,fs.x,fs.y,fs.width,fs.height,r)))}return this},YR=function(n,t,e){return n.add.text(0,0,"")},fs=void 0;const br=Phaser.Utils.Objects.GetValue;var pn=function(n,t){return t===void 0&&(t={}),typeof n=="number"?(t.left=n,t.right=n,t.top=n,t.bottom=n):(t.left=br(n,"left",0),t.right=br(n,"right",0),t.top=br(n,"top",0),t.bottom=br(n,"bottom",0)),t};const VR=De.prototype.add;var or=function(n){return VR.call(this,n),this.sizerEventsEnable&&(n.emit("sizer.add",n,this),this.emit("add",n,this)),this};const zR={addBackground(n,t,e){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(e=t,t=void 0),t===void 0&&(t=0),or.call(this,n),this.backgroundChildren.push(n);var a=this.getSizerConfig(n);return a.padding=pn(t),e!==void 0&&this.addChildrenMap(e,n),this},isBackground(n){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(n)!==-1}};var Kn=function(n,t){var e;if(t===void 0)n.hasOwnProperty("rexContainer")&&(e=n.rexContainer.parent,e&&!e.isRexSizer&&(e=null));else for(e=Kn(n);e&&e.name!==t;)e=Kn(e);return e},UR=function(n){for(var t=Kn(n);t;)n=t,t=Kn(t);return n};const hr={getParentSizer(n,t){return typeof n=="string"&&(t=n,n=void 0),n===void 0&&(n=this),Kn(n,t)},getTopmostSizer(n){return n===void 0&&(n=this),UR(n)}},XR={removeFromParentSizer(){var n=hr.getParentSizer(gameObject);return n&&n.remove(this),this}};var wd=function(n,t){return this.childrenMap[n]=t,this},WR=function(n){if(typeof n=="object"){var t=n;for(var n in this.childrenMap)if(this.childrenMap[n]===t)return delete this.childrenMap[n],this}return delete this.childrenMap[n],this},HR=function(n,t){if(typeof n=="string"&&(n=n.split(".")),n.length!==0){var e=n.shift(),a=null;if(e.charAt(0)==="#")e=e.substring(1),a=this.getByName(e,t);else if(e.indexOf("[")===-1)this.childrenMap&&(a=this.childrenMap[e]);else{var i=e.match(kR);if(i!=null&&this.childrenMap){var s=this.childrenMap[i[1]];s&&(a=s[i[2]])}}return n.length===0?a:a&&a.childrenMap?a.getElement(n):null}};const kR=/(\S+)\[(\d+)\]/i,$R={getInnerPadding(n){return ra(this.space,n)},setInnerPadding(n,t){return Zi(this.space,n,t),this},getOuterPadding(n){return ra(this.getSizerConfig(this).padding,n)},setOuterPadding(n,t){return Zi(this.getSizerConfig(this).padding,n,t),this},getChildOuterPadding(n,t){return typeof n=="string"&&(n=this.getElement(n)),ra(this.getSizerConfig(n).padding,t)},setChildOuterPadding(n,t,e){return typeof n=="string"&&(n=this.getElement(n)),Zi(this.getSizerConfig(n).padding,t,e),this}};var ru=function(n){return n===void 0&&(n=Math.max(this.childrenWidth,this.minWidth)),n},KR=function(n){var t,e;for(var a in this.sizerChildren)t=this.sizerChildren[a],t&&t.isRexSizer&&!t.ignoreLayout&&(e=this.getExpandedChildWidth(t,n),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},au=function(n){var t=Math.max(this.childrenHeight,this.minHeight);return n===void 0&&(n=t),n},ZR=function(n,t){},JR=function(n){var t;return n.isRexSizer?t=Math.max(n.minWidth,n.childrenWidth):n.minWidth!==void 0?t=n.minWidth:t=Tt(n),t},jR=function(n){var t;return n.isRexSizer?t=Math.max(n.minHeight,n.childrenHeight):n.minHeight!==void 0?t=n.minHeight:t=xt(n),t},QR=function(n,t){return t},qR=function(n,t){return t},_R=function(){return 0},tL=function(){return 0},eL=function(n){n===void 0&&(n=[]);for(var t=n.length,e=this.getChildrenSizers(n),a=n.length,i=t;i<a;i++)e[i].getAllChildrenSizers(n);return n},iL=function(n){return n===void 0&&(n=[]),n};const sL={getShownChildren(n){n===void 0&&(n=[]);for(var t=this.children,e,a=0,i=t.length;a<i;a++)e=t[a],!(e.rexSizer&&e.rexSizer.hidden)&&n.push(e);return n},getAllShownChildren(n){n===void 0&&(n=[]);for(var t=[this];t.length>0;){var e=t.shift();e.rexSizer&&e.rexSizer.hidden||(e!==this&&n.push(e),e.isRexContainerLite&&t.push(...e.children))}return n}};var lr=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var n=this.getChildrenSizers(),t,e=0,a=n.length;e<a;e++)t=n[e],!t.ignoreLayout&&t.preLayout()},nL=function(){var n=this.scaleX,t=this.scaleY,e=n===1&&t===1;return e||this.setScale(1),this.runLayout(),e||this.setScale(n,t),this},rL=function(n,t,e){if(this.ignoreLayout)return this;var a=!n;return a&&this.preLayout(),t=this.resolveWidth(t),a&&(this.resolveChildrenWidth(t),this.runWidthWrap(t)),e=this.resolveHeight(e),this.postResolveSize(t,e),this.resize(t,e),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout()},aL=function(){},oL=function(n,t,e){return this._anchor&&this._anchor.updatePosition(),this},e0=function(n){var t,e;for(var a in this.sizerChildren)t=this.sizerChildren[a],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(e=this.getExpandedChildWidth(t,n),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};class ou extends kt{constructor(t,e){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(e)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var e,a;t.x!==void 0?(e=null,a=t.x):t.left!==void 0?(e=0,a=t.left):t.right!==void 0?(e=1,a=t.right):t.centerX!==void 0&&(e=.5,a=t.centerX);var i,s;t.y!==void 0?(i=null,s=t.y):t.top!==void 0?(i=0,s=t.top):t.bottom!==void 0?(i=1,s=t.bottom):t.centerY!==void 0&&(i=.5,s=t.centerY);var h,r;a!==void 0&&(a=a.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),h=parseFloat(a[0])/100,r=a[1]===""?0:parseFloat(a[1]));var o,u;s!==void 0&&(s=s.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),o=parseFloat(s[0])/100,u=s[1]===""?0:parseFloat(s[1]));var l=t.width,f,v;l!==void 0&&(l=l.split("%"),f=parseFloat(l[0])/100,v=l[1]===""?0:parseFloat(l[1]));var d=t.height,c,p;d!==void 0&&(d=d.split("%"),c=parseFloat(d[0])/100,p=d[1]===""?0:parseFloat(d[1])),this.setAlign(e,i),this.setPercentage(h,o),this.setOffset(r,u),this.setSizePercentage(f,c),this.setSizePadding(v,p);var g=t.onResizeCallback,x=t.onResizeCallbackScope;g!==void 0&&this.setResizeCallback(g,x);var m=t.onUpdateViewportCallback,y=t.onUpdateViewportCallbackScope;return m!==void 0&&this.setUpdateViewportCallback(m,y),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,e){return this.alignX=t,this.alignY=e,this}setPercentage(t,e){return this.percentageX=t,this.percentageY=e,this}setOffset(t,e){return this.offsetX=t,this.offsetY=e,this}setSizePercentage(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}setSizePadding(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}setResizeCallback(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}setUpdateViewportCallback(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,e=this.onResizeCallbackScope,a=this.anchorWidth,i=this.anchorHeight;if(!(a===void 0&&i===void 0||!t)){var s=this.parent;a===void 0&&(a=s.width),i===void 0&&(i=s.height),e?t.call(e,a,i,s,this):t(a,i,s,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=cn(this.scene,t,this.viewport);var e=this.viewport,a=this.onUpdateViewportCallback,i=this.onUpdateViewportCallbackScope;a&&(i?a.call(i,e,this.parent,this):a(e,this.parent,this))}}var hL=function(n){n===void 0&&(n={});var t=n.hasOwnProperty("width"),e=n.hasOwnProperty("height"),a=n.hasOwnProperty("onResizeCallback");return(t||e)&&!a&&(n.onResizeCallback=function(i,s,h){t&&h.setMinWidth(i),e&&h.setMinHeight(s),h.layout()}),this._anchor===void 0?this._anchor=new ou(this,n):this._anchor.resetFromJSON(n),this};const lL=Phaser.Utils.Objects.GetValue,Vs=Phaser.Utils.Objects.GetAdvancedValue,Bd=Phaser.Math.Linear;class Zn extends Es{constructor(t,e){super(t,e),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(lL(t,"mode",0)),this.setScaleRange(Vs(t,"start",void 0),Vs(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=uL[t]),this.mode=t,this}setScaleRange(t,e){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=Vs(t,"x",this.parent.scaleX),this.startY=Vs(t,"y",this.parent.scaleY)),typeof e=="number"?(this.endX=e,this.endY=e):(this.endX=Vs(e,"x",void 0),this.endY=Vs(e,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var e=this.repeat;return this.mode===2&&e!==-1&&(e=(e+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(e),super.start(),this}updateGameObject(t,e){var a=e.t;e.isOddIteration&&(a=1-a),a=this.easeFn(a),this.hasScaleX&&(t.scaleX=Bd(this.startX,this.endX,a)),this.hasScaleY&&(t.scaleY=Bd(this.startY,this.endY,a))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const uL={stop:0,destroy:1,yoyo:2};var hu=function(n,t,e,a,i){a===void 0&&(a="Cubic");var s,h;switch(e){case 0:case"x":s={x:0},h={x:n.scaleX};break;case 1:case"y":s={y:0},h={y:n.scaleY};break;default:s=0,h=n.scale;break}var r={mode:0,start:s,end:h,duration:t,ease:a};return i===void 0?i=new Zn(n,r):i.resetFromJSON(r),i.restart(),i},i0=function(n,t,e,a,i,s){a===void 0&&(a="Linear"),i instanceof Zn&&(s=i,i=void 0),i===void 0&&(i=!0);var h={};switch(h.mode=i?1:0,e){case 0:case"x":h.end={x:0};break;case 1:case"y":h.end={y:0};break;default:h.end=0;break}return h.duration=t,h.ease=a,s===void 0?s=new Zn(n,h):s.resetFromJSON(h),s.restart(),s},fL=function(n,t,e,a,i,s,h){e===void 0&&(e=1.2),a===void 0&&(a=0),s===void 0&&(s="Cubic");var r,o;switch(i){case 0:case"x":r={x:n.scaleX},o={x:e};break;case 1:case"y":r={y:n.scaleX},o={y:e};break;default:r=n.scaleX,o=e;break}var u={mode:2,start:r,end:o,duration:t/2,ease:s,repeat:a};return h===void 0?h=new Zn(n,u):h.resetFromJSON(u),h.restart(),h};const Xo=Phaser.Utils.Objects.IsPlainObject;var Wo=function(n,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(n.emit(t.completeEventName,n),t.completeEventName=void 0)}),t.on("update",function(){var e=hr.getParentSizer(n);e&&e.resetChildPositionState(n)})};const lu={popUp(n,t,e){if(Xo(n)){var a=n;n=a.duration,t=a.orientation,e=a.ease}var i=this._scaleBehavior===void 0;return this._scaleBehavior=hu(this,n,t,e,this._scaleBehavior),i&&Wo(this,this._scaleBehavior),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(n,t,e){return this.popUp(n,t,e),Qt(this._scaleBehavior)},scaleDownDestroy(n,t,e,a){if(Xo(n)){var i=n;n=i.duration,t=i.orientation,e=i.ease,a=i.destroy}var s=this._scaleBehavior===void 0;return this._scaleBehavior=i0(this,n,t,e,a,this._scaleBehavior),s&&Wo(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(n,t,e,a){return this.scaleDownDestroy(n,t,e,a),Qt(this._scaleBehavior)},scaleDown(n,t,e){return this.scaleDownDestroy(n,t,e,!1),this},scaleDownPromise(n,t,e){return this.scaleDown(n,t,e),Qt(this._scaleBehavior)},scaleYoyo(n,t,e,a,i){if(Xo(n)){var s=n;n=s.duration,t=s.peakValue,e=s.repeat,a=s.orientation,i=s.ease}var h=this._scaleBehavior===void 0;return this._scaleBehavior=fL(this,n,t,e,a,i,this._scaleBehavior),h&&Wo(this,this._scaleBehavior),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(n,t,e,a,i){return this.scaleYoyo(n,t,e,a,i),Qt(this._scaleBehavior)}},dL=Phaser.Utils.Objects.GetValue,Dd=Phaser.Utils.Objects.GetAdvancedValue,cL=Phaser.Math.Linear;class _h extends Es{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(dL(t,"mode",0)),this.setAlphaRange(Dd(t,"start",this.parent.alpha),Dd(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=vL[t]),this.mode=t,this}setAlphaRange(t,e){return this.alphaStart=t,this.alphaEnd=e,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var a=e.t;e.isOddIteration&&(a=1-a),t.alpha=cL(this.alphaStart,this.alphaEnd,a)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const vL={stop:0,destroy:1,yoyo:2},pL=Phaser.Utils.Objects.IsPlainObject;var Na=function(n,t,e,a){var i,s;pL(e)?(i=e.start,s=e.end):s=e,i===void 0&&(i=0),s===void 0&&(s=1);var h={mode:0,start:i,end:s,duration:t};return a===void 0?a=new _h(n,h):a.resetFromJSON(h),a.restart(),a},Ya=function(n,t,e,a){e instanceof _h&&(a=e,e=void 0),e===void 0&&(e=!0);var i={mode:e?1:0,end:0,duration:t};return a===void 0?a=new _h(n,i):a.resetFromJSON(i),a.restart(),a};const bd=Phaser.Utils.Objects.IsPlainObject;var Gd=function(n,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(n.emit(t.completeEventName,n),t.completeEventName=void 0)}),t.on("update",function(){var e=hr.getParentSizer(n);e&&e.resetChildAlphaState(n)})};const gL={fadeIn(n,t){if(bd(n)){var e=n;n=e.duration,t=e.alpha}var a=this._fade===void 0;return this._fade=Na(this,n,t,this._fade),a&&Gd(this,this._fade),this._fade.completeEventName="fadein.complete",this},fadeInPromise(n,t){return this.fadeIn(n,t),Qt(this._fade)},fadeOutDestroy(n,t){if(bd(n)){var e=n;n=e.duration,t=e.destroy}var a=this._fade===void 0;return this._fade=Ya(this,n,t,this._fade),a&&Gd(this,this._fade),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(n,t){return this.fadeOutDestroy(n,t),Qt(this._fade)},fadeOut(n){return this.fadeOutDestroy(n,!1),this},fadeOutPromise(n){return this.fadeOut(n),Qt(this._fade)}},xL=Phaser.Utils.Objects.GetValue,zs=Phaser.Utils.Objects.GetAdvancedValue,Nd=Phaser.Math.Linear;class pa extends Es{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(xL(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=zs(t,"x",void 0),a=zs(t,"y",void 0);this.setTargetPosition(e,a)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=mL[t]),this.mode=t,this}setTargetPosition(t,e){if(typeof t=="number"||typeof e=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=e;else{var a=t;this.startX=zs(a,"startX",void 0),this.startY=zs(a,"startY",void 0),this.endX=zs(a,"endX",void 0),this.endY=zs(a,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateGameObject(t,e){var a=e.t;e.isOddIteration&&(a=1-a),a=this.easeFn(a),this.hasMoveX&&(t.x=Nd(this.startX,this.endX,a)),this.hasMoveY&&(t.y=Nd(this.startY,this.endY,a))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const mL={stop:0,destroy:1,yoyo:2};var ga=function(n,t){if(typeof n=="number")return n;var e=n[0],a=parseFloat(n.substr(2));switch(e){case"+":return t+a;case"-":return t-a;case"*":return t*a;case"/":return t/a}},s0=function(n,t,e,a,i,s,h){s instanceof pa&&(h=s,s=void 0),s===void 0&&(s=!1);var r={};return r.mode=s?1:0,e!==void 0&&(r.startX=n.x,r.endX=ga(e,n.x)),a!==void 0&&(r.startY=n.y,r.endY=ga(a,n.y)),r.duration=t,r.ease=i===void 0?"Linear":i,h===void 0?h=new pa(n,r):h.resetFromJSON(r),h.restart(),h},n0=function(n,t,e,a,i,s,h){s instanceof pa&&(h=s,s=void 0),s===void 0&&(s=!1);var r={};return r.mode=s?1:0,e!==void 0&&(r.startX=ga(e,n.x),r.endX=n.x),a!==void 0&&(r.startY=ga(a,n.y),r.endY=n.y),r.duration=t,r.ease=i===void 0?"Linear":i,h===void 0?h=new pa(n,r):h.resetFromJSON(r),h.restart(),h};const Yd=Phaser.Utils.Objects.IsPlainObject,Vd=Phaser.Math.Distance.Between;var zd=function(n,t){t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(n.emit(t.completeEventName,n),t.completeEventName=void 0)}),t.on("update",function(){var e=hr.getParentSizer(n);e&&e.resetChildPositionState(n)})};const yL={moveFrom(n,t,e,a,i){if(Yd(n)){var s=n;t=s.x,e=s.y,s.hasOwnProperty("speed")?n=Vd(t,e,this.x,this.y)*1e3/s.speed:n=s.duration,a=s.ease}var h=this._easeMove===void 0;return this._easeMove=n0(this,n,t,e,a,i,this._easeMove),h&&zd(this,this._easeMove),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(n,t,e,a,i){return this.moveFrom(n,t,e,a,i),Qt(this._easeMove)},moveFromDestroy(n,t,e,a){return this.moveFrom(n,t,e,a,!0),this},moveFromDestroyPromise(n,t,e,a){return this.moveFromDestroy(n,t,e,a),Qt(this._easeMove)},moveTo(n,t,e,a,i){if(Yd(n)){var s=n;t=s.x,e=s.y,s.hasOwnProperty("speed")?n=Vd(t,e,this.x,this.y)*1e3/s.speed:n=s.duration,a=s.ease}var h=this._easeMove===void 0;return this._easeMove=s0(this,n,t,e,a,i,this._easeMove),h&&zd(this,this._easeMove),this._easeMove.completeEventName="moveto.complete",this},moveToPromise(n,t,e,a,i){return this.moveTo(n,t,e,a,i),Qt(this._easeMove)},moveToDestroy(n,t,e,a){return this.moveTo(n,t,e,a,!0),this},moveToDestroyPromise(n,t,e,a){return this.moveToDestroy(n,t,e,a,!0),Qt(this._easeMove)},moveStop(n){return this._easeMove?(this._easeMove.stop(n),this):this}},Ye=Phaser.Utils.Objects.GetValue;class uu extends Ia{constructor(t,e){super(t,e),this.timer=new hg,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Ye(t,"timer")),this.setEnable(Ye(t,"enable",!0)),this.setMode(Ye(t,"mode",1)),this.isRunning=Ye(t,"isRunning",!1),this.setMagnitudeMode(Ye(t,"magnitudeMode",1)),this.setDuration(Ye(t,"duration",500)),this.setMagnitude(Ye(t,"magnitude",10)),this.ox=Ye(t,"ox",void 0),this.oy=Ye(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=TL[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=CL[t]),this.magnitudeMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,e){if(typeof t!="number"){var a=t;e=Ye(a,"magnitude",void 0),t=Ye(a,"duration",void 0)}return e!==void 0&&this.setMagnitude(e),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,e){return this.start(t,e),this}update(t,e){if(!this.isRunning||!this.enable)return this;var a=this.parent;if(!a.active)return this;if(this.timer.update(t,e),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=a.x,this.oy=a.y);var i=this.magnitude;this.magnitudeMode===1&&(i*=1-this.timer.t);var s=Math.random()*Math.PI*2,h=Math.cos(s)*i,r=Math.sin(s)*i;a.setPosition(this.ox+h,this.oy+r)}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;return this.ox===t.x&&this.oy===t.y?this:(t.setPosition(this.ox,this.oy),this.ox=void 0,this.oy=void 0,this)}}const TL={effect:0,behavior:1},CL={constant:0,decay:1},SL=Phaser.Utils.Objects.IsPlainObject;var EL=function(n,t){t.on("complete",function(){n.emit("shake.complete",n)})};const PL={shake(n,t,e){if(SL(n)){var a=n;n=a.duration,t=a.magnitude,e=a.magnitudeMode}return this._shake===void 0&&(this._shake=new uu(this,{mode:0,magnitudeMode:1}),EL(this,this._shake)),n!==void 0&&this._shake.setDuration(n),t!==void 0&&this._shake.setMagnitude(t),e!==void 0&&this._shake.setMagnitudeMode(e),this._shake.shake(),this},shakePromise(n,t){return this.shake(n,t),Qt(this._shake)}},Ud=Phaser.Utils.Objects.IsPlainObject;class ML extends kt{constructor(t,e){super(t,e),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var e=this.easeTasks[t];return e===void 0&&(e=new Ps(this.parent),this.easeTasks[t]=e,e.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),e}easeTo(t,e,a,i){if(Ud(t)){var s=t;t=s.key,e=s.value,a=s.duration,i=s.ease;var h=s.speed;a===void 0&&h!==void 0&&(a=Math.abs(e-this.parent.data.values[t])/h*1e3)}a===void 0&&(a=1e3),i===void 0&&(i="Linear");var r=this.getEaseTask(t);return r.restart({key:t,to:e,duration:a,ease:i}),this}easeFrom(t,e,a,i){if(Ud(t)){var s=t;t=s.key,e=s.value,a=s.duration,i=s.ease;var h=s.speed;a===void 0&&h!==void 0&&(a=Math.abs(e-this.parent.data.values[t])/h*1e3)}a===void 0&&(a=1e3),i===void 0&&(i="Linear");var r=this.getEaseTask(t);return r.restart({key:t,from:e,duration:a,ease:i}),this}stopEase(t,e){e===void 0&&(e=!0);var a=this.easeTasks[t];return a&&a.stop(e),this}stopAll(t){t===void 0&&(t=!0);for(var e in this.easeTasks)this.stopEase(e,t);return this}}var AL=function(n,t){t.on("complete",function(e){n.emit(`easedata.${e}.complete`,n),n.emit("easedata.complete",e,n)})};const OL={easeDataTo(n,t,e,a){return this._easeData||(this._easeData=new ML(this),AL(this,this._easeData)),this._easeData.easeTo(n,t,e,a),this},easeDataToPromise(n,t,e,a){return this.easeDataTo(n,t,e,a),zl(this._easeData,`complete-${n}`)},stopEaseData(n,t){return this._easeData?(this._easeData.stopEase(n,t),this):this},stopAllEaseData(n){return this._easeData?(this._easeData.stopAll(n),this):this}};var Wi=function(n){r0(n,!1)},Hi=function(n){r0(n,!0)},fu=function(n){if(!n)return!1;var t=Ga(n);return!t.hidden},r0=function(n,t){if(!!n){var e=Ga(n);e.hidden=t;var a=Be(n);a?a.setChildVisible(n,!t):n.setVisible(!t)}};const RL={show(n){return n===void 0&&(n=this),Wi(n),this},hide(n){return n===void 0&&(n=this),Hi(n),this},isShow(n){return n===void 0&&(n=this),fu(n)}};var Jn=function(n,t,e,a,i){if(!n||!n.getBounds||a&&!a(n,t,e))return!1;var s=Ll(n,!0);return!(!s.contains(t,e)||i&&!i(n,t,e))},du=function(n,t,e,a){if(t)return Jn(n,t.worldX,t.worldY,e,a);for(var i=n.scene.input.manager,s=i.pointersTotal,h=i.pointers,r=0;r<s;r++)if(t=h[r],Jn(n,t.worldX,t.worldY,e,a))return!0;return!1},LL=function(n,t){return t===void 0&&(t=this),du(t,n)},Va=function(n){return n&&typeof n=="function"},Ke=function(n){return Object.prototype.toString.call(n)==="[object Array]"},tl=function(n,t,e,a,i){return Jn(n,t,e,FL(a),IL(i))},Xd=function(n){var t=n.rexSizer&&n.rexSizer.hidden;return!t},FL=function(n){return n?function(t,e,a){return Xd(t)?(n(t,e,a),!0):!1}:Xd},IL=function(n){return n},wL=function(n,t,e,a,i){if(Va(e)||(i=e,e=void 0,a=void 0),i===void 0&&(this.sizerChildren?i=this.sizerChildren:i=this.children),Ke(i)){for(var s,h=0,r=i.length;h<r;h++)if(s=i[h],tl(s,n,t,e,a))return s}else{var s;for(var o in i)if(s=i[o],tl(s,n,t,e,a))return s}return null},qi=function(n,t,e){!n||t===void 0&&e===void 0||(n.resize?(t===void 0&&(t=n.width),e===void 0&&(e=n.height),n.resize(t,e)):(t!==void 0&&(n.displayWidth=t),e!==void 0&&(n.displayHeight=e)))},BL=function(n,t){return t===void 0?t={}:t===!0&&(t=DL),t.x=n.x,t.y=n.y,t.scaleX=n.scaleX,t.scaleY=n.scaleY,t.width=n.width,t.height=n.height,t.displayWidth=n.displayWidth,t.displayHeight=n.displayHeight,t},DL={},ur=function(n){this.sizerEventsEnable&&(BL(n,this.getChildPrevState(n)),this.layoutedChildren.push(n))},fr=function(n,t,e,a,i,s,h,r){ar(n,t,e,a,i,s),h!==void 0&&(n.x+=h),r!==void 0&&(n.y+=r),this.resetChildPositionState(n),this.sizerEventsEnable&&n.emit("sizer.postlayout",n,this)};const bL=Phaser.Display.Align.CENTER;var GL=function(){if(this.backgroundChildren!==void 0)for(var n=this.backgroundChildren,t=this.left,e=this.top,a=this.width,i=this.height,s,h,r,o,u,l,f,v=0,d=n.length;v<d;v++)s=n[v],h=s.rexSizer,!h.hidden&&(r=h.padding,ur.call(this,s),o=t+r.left,u=e+r.top,l=a-r.left-r.right,f=i-r.top-r.bottom,qi(s,l,f),fr.call(this,s,o,u,l,f,bL))},NL=function(n,t){var e=typeof n;if(e==="string"){var a=n;if(n=this.getElement(a),!n)return console.error(`Can get element '${a}'`),this}else(n===void 0||e!="object")&&(t=n,n=this);return t===void 0&&(t=!0),n.input&&n.input._dragTopmostSizer?n.input.draggable=t:t&&(n.setInteractive(),n.scene.input.setDraggable(n),n.on("drag",function(i,s,h){var r=this.getTopmostSizer();r.x+=s-n.x,r.y+=h-n.y,r.emit("sizer.drag",i,s,h)},this).on("dragstart",function(i,s,h){var r=this.getTopmostSizer();r.emit("sizer.dragstart",i,s,h)},this).on("dragend",function(i,s,h,r){var o=this.getTopmostSizer();o.emit("sizer.dragend",i,s,h,r)},this),n.input._dragTopmostSizer=!0),this};const a0={onClick(n,t,e,a){return n?(typeof n=="function"&&(a=e,e=t,t=n,n=this),n._click===void 0&&(n._click=new es(n,a)),n._click.on("click",t,e),this):this},offClick(n,t,e){return typeof n=="function"&&(e=t,t=n,n=this),n._click===void 0?this:(n._click.off("click",t,e),this)},enableClick(n,t){return n&&typeof n!="object"&&(t=n,n=this),n._click===void 0?this:(n._click.setEnable(t),this)},disableClick(n){return n&&typeof n!="object"&&(n=this),n._click===void 0?this:(n._click.setEnable(!1),this)}},Gr=Phaser.Utils.Objects.GetValue;class cu extends kt{constructor(t,e){super(t,e),this._enable=void 0;var a=Gr(e,"inputConfig",void 0);a&&t.setInteractive(a),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(Gr(t,"enable",!0)),this.setMode(Gr(t,"mode",1)),this.setClickInterval(Gr(t,"clickInterval",100)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this)}shutdown(t){if(!this.isShutdown){var e=this.parent.scene;e.input.off("pointerdown",this.onPress,this),e.input.off("pointerup",this.onRelease,this),super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){this._enable=t;var e=t?"enable":"disable";this.emit(e,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=YL[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}isPointerInside(t){var e=this.parent,a=e.input?El:du;return a(e,t)}onPress(t){if(this.mode===0){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.downTime,t)}}onRelease(t){if(this.mode===1){if(!this.parent.willRender(t.camera))return;this.isPointerInside(t)||this.click(t.upTime,t)}}click(t,e){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,e),this;var a=this.lastClickTime;return a!==void 0&&t-a<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,e),this)}}const YL={press:0,pointerdown:0,release:1,pointerup:1},VL={onClickOutside(n,t,e,a){return n?(typeof n=="function"&&(a=e,e=t,t=n,n=this),n._clickOutside===void 0&&(n._clickOutside=new cu(n,a)),n._clickOutside.on("clickoutside",t,e),this):this},offClickOutside(n,t,e){return typeof n=="function"&&(e=t,t=n,n=this),n._clickOutside===void 0?this:(n._clickOutside.off("clickoutside",t,e),this)},enableClickOutside(n,t){return n&&typeof n!="object"&&(t=n,n=this),n._clickOutside===void 0?this:(n._clickOutside.setEnable(t),this)},disableClickOutside(n){return n&&typeof n!="object"&&(n=this),n._clickOutside===void 0?this:(n._clickOutside.setEnable(!1),this)}},zL=["next","exit","enter"];class o0{constructor(t){var e=Bt(t,"states",void 0);e&&this.addStates(e);var a=Bt(t,"extend",void 0);if(a)for(var i in a)(!this.hasOwnProperty(i)||this[i]===void 0)&&(this[i]=a[i]);var s=Bt(t,"eventEmitter",void 0),h=Bt(t,"EventEmitterClass",void 0);this.setEventEmitter(s,h),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Bt(t,"enable",!0)),this.start(Bt(t,"start",void 0));var e=Bt(t,"init",void 0);return e&&e.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var e="exit_"+this._prevState,a=this[e];a&&a.call(this),this.emit(e,this)}if(this._stateLock=!1,this._state!=null){var i="enter_"+this._state,s=this[i];s&&s.call(this),this.emit(i,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,e=this["next_"+this.state];return e&&(typeof e=="string"?t=e:t=e.call(this)),this.goto(t),this}get stateProperties(){return zL}addState(t,e){typeof t!="string"&&(e=t,t=e.name);for(var a=this.stateProperties,i=0,s=a.length;i<s;i++){var h=a[i],r=e[h];r&&(this[`${h}_${t}`]=r)}return this}addStates(t){if(Array.isArray(t))for(var e=0,a=t.length;e<a;e++)this.addState(t[e]);else for(var i in t)this.addState(i,t[i]);return this}runMethod(t,e,a,i,s,h){var r=this[t+"_"+this.state];if(!!r){var o=arguments.length;switch(o){case 1:return r.call(this);case 2:return r.call(this,e);case 3:return r.call(this,e,a);case 4:return r.call(this,e,a,i);case 5:return r.call(this,e,a,i,s);case 6:return r.call(this,e,a,i,s,h)}for(var u=new Array(o-1),l=1;l<o;l++)u[l-1]=arguments[l];return r.apply(this,u)}}}Object.assign(o0.prototype,fn);var Ho=function(n,t,e,a,i){i===void 0&&(i=!1);var s=n._events[t];if(!s)return!1;for(var h=0,r=s.length;h<r;h++){var o=s[h];if(o.fn===e&&o.context===a&&o.once===i)return!0}return!1};const UL=["next","exit","enter","update","preupdate","postupdate"];class Ai extends o0{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Bt(t,"scene",void 0),this}get stateProperties(){return UL}update(t,e){this.runMethod("update",t,e)}preupdate(t,e){this.runMethod("preupdate",t,e)}postupdate(t,e){this.runMethod("postupdate",t,e)}startUpdate(t){t||(t=this._scene);var e=t.sys.events;return Ho(e,"update",this.update,this)?this:(this._scene=t,e.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var e=t.sys.events;return Ho(e,"preupdate",this.preupdate,this)?this:(this._scene=t,e.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var e=t.sys.events;return Ho(e,"postupdate",this.postupdate,this)?this:(this._scene=t,e.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}class XL extends Ai{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,e){this.remainderTime-=e,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>e?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const ko=Phaser.Utils.Objects.GetValue;class jn extends kt{constructor(t,e){super(t,e),this._enable=void 0,this.cooldown=new XL,this.parent.setInteractive(ko(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouching=!1,this.setEnable(ko(t,"enable",!0)),this.setCooldown(ko(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,e,a){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,e){this.cooldown.update(t,e),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer)}}const WL={onTouching(n,t,e,a){return n?(typeof n=="function"&&(a=e,e=t,t=n,n=this),n._inTouching===void 0&&(n._inTouching=new jn(n,a)),n._inTouching.on("intouch",t,e),this):this},offTouching(n,t,e){return typeof n=="function"&&(e=t,t=n,n=this),n._inTouching===void 0?this:(n._inTouching.off("intouch",t,e),this)},enableTouching(n,t){return n&&typeof n!="object"&&(t=n,n=this),n._inTouching===void 0?this:(n._inTouching.setEnable(t),this)},disableTouching(n){return n&&typeof n!="object"&&(n=this),n._inTouching===void 0?this:(n._inTouching.setEnable(!1),this)}};var h0=function(n,t,e){for(var a,i=0,s=n.length;i<s;i++)if(a=n[i],!!tl(a,t,e))return a.pointToChild(t,e);return null},ai=function(n,t,e,a,i,s,h){var r;i===void 0?r=a:r=h0(e,a,i),r&&n.emit(t,r,s,h)};const HL=Phaser.Utils.Objects.GetValue;var kL=function(n){var t=HL(n,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",$L,this))},$L=function(n,t,e,a){var i=this._childrenInteractive;ai(i.eventEmitter,`${i.eventNamePrefix}down`,i.targetSizers,n.worldX,n.worldY,n,a)};const KL=Phaser.Utils.Objects.GetValue;var ZL=function(n){var t=KL(n,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",JL,this))},JL=function(n,t,e,a){var i=this._childrenInteractive;ai(i.eventEmitter,`${i.eventNamePrefix}up`,i.targetSizers,n.worldX,n.worldY,n,a)};const jL=Phaser.Utils.Objects.GetValue;var QL=function(n){var t=jL(n,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Wd,this).on("pointerover",Wd,this).on("pointerout",qL,this))},Wd=function(n,t,e,a){var i=this._childrenInteractive,s=h0(i.targetSizers,n.worldX,n.worldY),h=i.lastOverChild;s&&h&&s===h||(i.lastOverChild=s,ai(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,h,void 0,n,a),ai(i.eventEmitter,`${i.eventNamePrefix}over`,i.targetSizers,s,void 0,n,a))},qL=function(n,t){var e=this._childrenInteractive,a=e.lastOverChild;e.lastOverChild=null,ai(e.eventEmitter,`${e.eventNamePrefix}out`,e.targetSizers,a,void 0,n,t)};const _L=Phaser.Utils.Objects.GetValue;var t2=function(n){var t=_L(n,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var e=this._childrenInteractive;this._click=new es(this,t),this._click.on("click",function(a,i,s,h){ai(e.eventEmitter,`${e.eventNamePrefix}click`,e.targetSizers,s.worldX,s.worldY,s,h)},this)}};const $o=Phaser.Utils.Objects.GetValue;class za extends Ia{constructor(t,e){var a=qp(t);a===t&&(t=void 0),super(a,e),this.gameObject=t,t&&t.setInteractive($o(e,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable($o(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds($o(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Ko,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){!this.scene||(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,e){if(!!this.enable&&this.pointer===void 0){var a=this.bounds?this.bounds.contains(t.x,t.y):!0;!a||this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=Hd,this.gameObject===void 0&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;!e||this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Ko,this.onDragEnd())}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,a=this.pointer===t;!a&&e||(a&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Hd&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Ko,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,e){}postUpdate(t,e){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=e2,this}}const Ko=0,Hd=1,e2="IDLE",ds=Phaser.Utils.Objects.GetValue,i2=Phaser.Math.Distance.Between;class Ua extends za{constructor(t,e){super(t,e);var a=this,i={states:{IDLE:{enter:function(){a.stop(),a.tapsCount=0,a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function(){var s=a.lastPointer;a.x=s.x,a.y=s.y,a.worldX=s.worldX,a.worldY=s.worldY}},BEGIN:{enter:function(){a.start(),a.tapsCount=0,a.emit("tappingstart",a,a.gameObject,a.lastPointer)}},RECOGNIZED:{enter:function(){a.start(),a.emit("tap",a,a.gameObject,a.lastPointer),a.emit(`${a.tapsCount}tap`,a,a.gameObject,a.lastPointer)}}},init:function(){this.state=cs},eventEmitter:!1};this.setRecongizedStateObject(new Ai(i))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(ds(t,"time",250)),this.setTapInterval(ds(t,"tapInterval",200)),this.setDragThreshold(ds(t,"threshold",9)),this.setTapOffset(ds(t,"tapOffset",10));var e=ds(t,"taps",void 0);return e!==void 0?this.setTaps(e):(this.setMaxTaps(ds(t,"maxTaps",void 0)),this.setMinTaps(ds(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case cs:this.state=Us;break;case Us:var t=this.lastPointer,e=i2(t.upX,t.upY,t.x,t.y);e>this.tapOffset&&(this.state=Xs,this.state=Us);break;case Xs:this.state=Us;break}}onDragEnd(){this.state===Us&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=Xs))}onDrag(){this.state!==cs&&this.pointer.getDistance()>this.dragThreshold&&(this.state=cs)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===Us){var a=this.lastPointer;if(a.isDown){var i=t-a.downTime;i>this.holdTime&&(this.state=cs)}else{var s=t-a.upTime;s>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=Xs:this.state=cs)}}}postUpdate(t,e){!this.isRunning||!this.enable||this.state===Xs&&(this.state=cs)}get isTapped(){return this.state===Xs}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,e){return e===void 0&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}}const cs="IDLE",Us="BEGIN",Xs="RECOGNIZED",kd=Phaser.Utils.Objects.GetValue;class Xa extends za{constructor(t,e){super(t,e);var a=this,i={states:{IDLE:{enter:function(){a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function(){var s=a.lastPointer;a.x=s.x,a.y=s.y,a.worldX=s.worldX,a.worldY=s.worldY}},BEGIN:{enter:function(){a.start()},exit:function(){a.stop()}},RECOGNIZED:{enter:function(){a.emit("pressstart",a,a.gameObject,a.lastPointer)},exit:function(){a.emit("pressend",a,a.gameObject,a.lastPointer)}}},init:function(){this.state=Nr},eventEmitter:!1};this.setRecongizedStateObject(new Ai(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(kd(t,"threshold",9)),this.setHoldTime(kd(t,"time",251)),this}onDragStart(){this.state=$d,this.holdTime===0&&(this.state=Zo)}onDragEnd(){this.state=Nr}onDrag(){this.state!==Nr&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Nr)}preUpdate(t,e){if(!(!this.isRunning||!this.enable)&&this.state===$d){var a=t-this.pointer.downTime;a>=this.holdTime&&(this.state=Zo)}}get isPressed(){return this.state===Zo}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Nr="IDLE",$d="BEGIN",Zo="RECOGNIZED",s2=Phaser.Utils.Objects.GetValue;class l0 extends za{constructor(t,e){super(t,e);var a=this,i={states:{IDLE:{},BEGIN:{enter:function(){var s=a.pointer;a.startX=s.x,a.startY=s.y,a.startWorldX=s.worldX,a.startWorldY=s.worldY}},RECOGNIZED:{enter:function(){a.emit("panstart",a,a.gameObject,a.lastPointer)},exit:function(){var s=a.lastPointer;a.endX=s.x,a.endY=s.y,a.endWorldX=s.worldX,a.endWorldY=s.worldY,a.emit("panend",a,a.gameObject,a.lastPointer)}}},init:function(){this.state=Kd},eventEmitter:!1};this.setRecongizedStateObject(new Ai(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(s2(t,"threshold",10)),this}onDragStart(){this.state=Zd,this.dragThreshold===0&&(this.state=Yr)}onDragEnd(){this.state=Kd}onDrag(){switch(this.state){case Zd:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Yr);break;case Yr:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var a=this.pointer;this.x=a.x,this.y=a.y,this.worldX=a.worldX,this.worldY=a.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanned(){return this.state===Yr}setDragThreshold(t){return this.dragThreshold=t,this}}const Kd="IDLE",Zd="BEGIN",Yr="RECOGNIZED",n2=Phaser.Math.Distance.Between,r2=Phaser.Math.Angle.Between,a2={getDt:function(){var n=Ml(this.scene);return n},getVelocity:function(){var n=this.pointer.position,t=this.pointer.prevPosition,e=n2(t.x,t.y,n.x,n.y),a=e/(this.getDt()*.001);return a},getVelocityX:function(){var n=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(n.x-t.x),a=e/(this.getDt()*.001);return a},getVelocityY:function(){var n=this.pointer.position,t=this.pointer.prevPosition,e=Math.abs(n.y-t.y),a=e/(this.getDt()*.001);return a},getVelocityAngle:function(){var n=this.pointer.position,t=this.pointer.prevPosition,e=r2(t.x,t.y,n.x,n.y);return e}},o2={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var h2=function(n,t,e){switch(e===void 0?e={}:e===!0&&(e=l2),e.left=!1,e.right=!1,e.up=!1,e.down=!1,n=(n+360)%360,t){case 0:n<180?e.down=!0:e.up=!0;break;case 1:n>90&&n<=270?e.left=!0:e.right=!0;break;case 2:n>45&&n<=135?e.down=!0:n>135&&n<=225?e.left=!0:n>225&&n<=315?e.up=!0:e.right=!0;break;case 3:n>22.5&&n<=67.5?(e.down=!0,e.right=!0):n>67.5&&n<=112.5?e.down=!0:n>112.5&&n<=157.5?(e.down=!0,e.left=!0):n>157.5&&n<=202.5?e.left=!0:n>202.5&&n<=247.5?(e.left=!0,e.up=!0):n>247.5&&n<=292.5?e.up=!0:(n>292.5&&n<=337.5&&(e.up=!0),e.right=!0);break}return e},l2={};const Jo=Phaser.Utils.Objects.GetValue,u2=Phaser.Math.RadToDeg;class dr extends za{constructor(t,e){super(t,e);var a=this,i={states:{IDLE:{enter:function(){a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function(){var s=a.lastPointer;a.x=s.x,a.y=s.y,a.worldX=s.worldX,a.worldY=s.worldY}},BEGIN:{enter:function(){a.validDrag=!1}},RECOGNIZED:{enter:function(){a.start(),a.updateDirectionStates(),a.emit("swipe",a,a.gameObject,a.lastPointer)},exit:function(){a.stop(),a.clearDirectionStates()}}},init:function(){this.state=jo},eventEmitter:!1};this.setRecongizedStateObject(new Ai(i)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Jo(t,"threshold",10)),this.setVelocityThreshold(Jo(t,"velocityThreshold",1e3)),this.setDirectionMode(Jo(t,"dir","8dir")),this}onDragStart(){this.state=Jd}onDragEnd(){this.state=jo}onDrag(){this.state===Jd&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Qo))}postUpdate(t,e){!this.isRunning||!this.enable||this.state===Qo&&(this.state=jo)}get isSwiped(){return this.state===Qo}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=o2[t]),this.dirMode=t,this}updateDirectionStates(){var t=u2(this.getVelocityAngle());return h2(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(dr.prototype,a2);const jo="IDLE",Jd="BEGIN",Qo="RECOGNIZED",qo=Phaser.Utils.Objects.GetValue,f2=Phaser.Utils.Array.SpliceOne,d2=Phaser.Math.Distance.Between,c2=Phaser.Math.Angle.Between;class vu{constructor(t,e){var a=t.input.manager.pointersTotal-1;a<2&&t.input.addPointer(2-a),this.scene=t,this.setEventEmitter(qo(e,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setEnable(qo(t,"enable",!0)),this.bounds=qo(t,"bounds",void 0),this.tracerState=Vr,this.pointers.length=0,Ki(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){!this.scene||(this.destroyEventEmitter(),this.pointers.length=0,Ki(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(!!this.enable&&this.pointers.length!==2){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var a=this.pointers.indexOf(t);if(a===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Vr:this.tracerState=Ln,this.onDrag1Start();break;case Ln:this.tracerState=je,this.onDrag2Start();break}}}}onPointerUp(t){if(!!this.enable){var e=this.bounds?this.bounds.contains(t.x,t.y):!0;if(!!e){var a=this.pointers.indexOf(t);if(a!==-1)switch(delete this.movedState[t.id],f2(this.pointers,a),this.tracerState){case Ln:this.tracerState=Vr,this.onDrag1End();break;case je:this.tracerState=Ln,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(!!this.enable&&t.isDown){var e=this.bounds?this.bounds.contains(t.x,t.y):!0,a=this.pointers.indexOf(t)!==-1;if(!(!a&&e)){if(a&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Ln:this.onDrag1();break;case je:this.onDrag2();break}}}}dragCancel(){return this.tracerState===je&&this.onDrag2End(),this.pointers.length=0,Ki(this.movedState),this.tracerState=Vr,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==je)return 0;var t=this.pointers[0],e=this.pointers[1];return d2(t.x,t.y,e.x,e.y)}get angleBetween(){if(this.tracerState!==je)return 0;var t=this.pointers[0],e=this.pointers[1];return c2(t.x,t.y,e.x,e.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,a=t.prevPosition;Rn.x=e.x-a.x,Rn.y=e.y-a.y}else Rn.x=0,Rn.y=0;return Rn}get centerX(){if(this.tracerState!==je)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}get centerY(){if(this.tracerState!==je)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}get prevCenterX(){if(this.tracerState!==je)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}get prevCenterY(){if(this.tracerState!==je)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=v2,this}}Object.assign(vu.prototype,fn);var Rn={};const Vr=0,Ln=1,je=2,v2="IDLE",p2=Phaser.Utils.Objects.GetValue;class u0 extends vu{constructor(t,e){super(t,e);var a=this,i={states:{IDLE:{enter:function(){a.prevDistance=void 0,a.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){a.emit("pinchstart",a)},exit:function(){a.emit("pinchend",a)}}},init:function(){this.state=jd},eventEmitter:!1};this.setRecongizedStateObject(new Ai(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(p2(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Qd,this.dragThreshold===0&&(this.state=zr)}onDrag2End(){this.state=jd}onDrag2(){switch(this.state){case Qd:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=zr}break;case zr:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinched(){return this.state===zr}setDragThreshold(t){return this.dragThreshold=t,this}}const jd="IDLE",Qd="BEGIN",zr="RECOGNIZED",g2=Phaser.Math.RotateAround;var qd=function(n,t,e,a){return g2(n,t,e,a),n.rotation+=a,n},x2=function(n,t,e,a){return a===void 0?a={}:a===!0&&(a=m2),e.getWorldPoint(n,t,a),a},m2={},y2=function(n,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var e=this.movementCenterX,a=this.movementCenterY,i=x2(this.centerX,this.centerY,t,!0),s=i.x,h=i.y,r=this.rotation;if(Array.isArray(n))for(var o=n,u=0,l=o.length;u<l;u++)n=o[u],n.x+=e,n.y+=a,qd(n,s,h,r);else n.x+=e,n.y+=a,qd(n,s,h,r);return this};const T2=Phaser.Utils.Objects.GetValue,_o=Phaser.Math.Angle.WrapDegrees,_d=Phaser.Math.Angle.ShortestBetween,th=Phaser.Math.RadToDeg,C2=Phaser.Math.DegToRad;class pu extends vu{constructor(t,e){super(t,e);var a=this,i={states:{IDLE:{enter:function(){a.prevAngle=void 0,a.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){a.emit("rotatestart",a)},exit:function(){a.emit("rotateend",a)}}},init:function(){this.state=tc},eventEmitter:!1};this.setRecongizedStateObject(new Ai(i))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(T2(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=_o(th(this.angleBetween)),this.state=ec,this.dragThreshold===0&&(this.state=Ur)}onDrag2End(){this.state=tc}onDrag2(){switch(this.state){case ec:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=_o(th(this.angleBetween));this.angle=_d(this.prevAngle,t),this.prevAngle=t,this.state=Ur}break;case Ur:var t=_o(th(this.angleBetween));this.angle=_d(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotated(){return this.state===Ur}get rotation(){return C2(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var S2={spinObject:y2};Object.assign(pu.prototype,S2);const tc="IDLE",ec="BEGIN",Ur="RECOGNIZED",E2=Phaser.Utils.Objects.GetValue;var P2=function(n){var t=E2(n,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var e=this._childrenInteractive;this._tap=new Ua(this,t),this._tap.on("tap",function(a,i,s){ai(e.eventEmitter,`${e.eventNamePrefix}${a.tapsCount}tap`,e.targetSizers,a.worldX,a.worldY,s)},this)}};const M2=Phaser.Utils.Objects.GetValue;var A2=function(n){var t=M2(n,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var e=this._childrenInteractive;this._press=new Xa(this,t),this._press.on("pressstart",function(a,i,s){ai(e.eventEmitter,`${e.eventNamePrefix}pressstart`,e.targetSizers,a.worldX,a.worldY,s)},this).on("pressend",function(a,i,s){ai(e.eventEmitter,`${e.eventNamePrefix}pressend`,e.targetSizers,a.worldX,a.worldY,s)},this)}};const O2=Phaser.Utils.Objects.GetValue;var R2=function(n){var t=O2(n,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var e=this._childrenInteractive;this._swipe=new dr(this,t),this._swipe.on("swipe",function(a,i,s){var h=a.left?"left":a.right?"right":a.up?"up":"down";ai(e.eventEmitter,`${e.eventNamePrefix}swipe${h}`,e.targetSizers,a.worldX,a.worldY,s)},this)}};const eh=Phaser.Utils.Objects.GetValue;var gu=function(n,t){return n.setInteractive(),n._childrenInteractive={targetSizers:eh(t,"targets",[n]),eventEmitter:eh(t,"eventEmitter",n),eventNamePrefix:eh(t,"inputEventPrefix","child.")},kL.call(n,t),ZL.call(n,t),QL.call(n,t),t2.call(n,t),P2.call(n,t),A2.call(n,t),R2.call(n,t),n},L2=function(n){return gu(this,n),this},F2=function(){for(var n=this.getAllChildren([this]),t=0,e=n.length;t<e;t++){var a=n[t];a.emit.apply(a,arguments)}return this},f0={getSizerConfig:ER,getChildPrevState:PR,pushIntoBounds:MR,drawBounds:NR,resolveWidth:ru,resolveChildrenWidth:KR,resolveHeight:au,postResolveSize:ZR,getChildWidth:JR,getChildHeight:jR,getExpandedChildWidth:QR,getExpandedChildHeight:qR,getChildrenWidth:_R,getChildrenHeight:tL,addChildrenMap:wd,addElement:wd,removeChildrenMap:WR,getElement:HR,getAllChildrenSizers:eL,getChildrenSizers:iL,preLayout:lr,layout:nL,runLayout:rL,layoutChildren:aL,runWidthWrap:e0,layoutBackgrounds:GL,postLayout:oL,setAnchor:hL,isInTouching:LL,pointToChild:wL,setDraggable:NL,setChildrenInteractive:L2,broadcastEvent:F2};Object.assign(f0,$R,zR,XR,hr,lu,gL,yL,PL,OL,a0,VL,WL,RL,sL);const Ws=Phaser.Utils.Objects.GetValue;class Os extends De{constructor(t,e,a,i,s,h){super(t,e,a,2,2),this.isRexSizer=!0,this.setMinSize(i,s),this.setName(Ws(h,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0;var r=Ws(h,"anchor",void 0);r&&this.setAnchor(r),this.setInnerPadding(Ws(h,"space",0));var o=Ws(h,"draggable",!1);o&&this.setDraggable(o),this.setSizerEventsEnable(Ws(h,"sizerEvents",!1)),this.setDirty(!0),Ws(h,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!!this.scene){if(t)for(var e=this.getAllChildrenSizers([this]),a=0,i=e.length;a<i;a++)e[a].sizerEventsEnable=!1;super.destroy(t),Ki(this.backgroundChildren),Ki(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,e){return this.setMinWidth(t).setMinHeight(e),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-Tt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+Tt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+Tt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-xt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+xt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+xt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left}get innerRight(){return this.right-this.space.right}get innerTop(){return this.top+this.space.top}get innerBottom(){return this.bottom-this.space.bottom}get innerWidth(){return this.width-this.space.left-this.space.right}get innerHeight(){return this.height-this.space.top-this.space.bottom}get minInnerWidth(){var t=this.minWidth-this.space.left-this.space.right;return Math.max(t,0)}get minInnerHeight(){var t=this.minHeight-this.space.top-this.space.bottom;return Math.max(t,0)}}Object.assign(Os.prototype,f0);var I2=function(){if(this.rexSizer.hidden)return 0;var n=0,t=this.sizerChildren,e,a,i;for(var s in t)e=t[s],a=e.rexSizer.padding,i=this.getChildWidth(e)+a.left+a.right,n=Math.max(i,n);return n+this.space.left+this.space.right},w2=function(){if(this.rexSizer.hidden)return 0;var n=0,t=this.sizerChildren,e,a,i;for(var s in t)e=t[s],i=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.minHeight!==void 0?e.minHeight:xt(e),a=e.rexSizer.padding,i+=a.top+a.bottom,n=Math.max(i,n);return n+this.space.top+this.space.bottom},B2=function(n,t){t===void 0&&(t=this.width);var e,a=n.rexSizer;if(a.expandWidth){var i=t-this.space.left-this.space.right,s=a.padding;e=i-s.left-s.right}return e},D2=function(n,t){t===void 0&&(t=this.height);var e,a=n.rexSizer;if(a.expandHeight){var i=t-this.space.top-this.space.bottom,s=a.padding;e=i-s.top-s.bottom}return e},b2=function(n){n===void 0&&(n=[]);var t=this.sizerChildren,e;for(var a in t)e=t[a],e.isRexSizer&&n.push(e);return n},xu=function(n,t){n.width<n.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${n.constructor.name}`),n.height<n.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${n.constructor.name}`)},G2=function(){var n,t,e,a=this.innerLeft,i=this.innerTop,s=this.innerWidth,h=this.innerHeight,r,o,u,l,f,v,d=this.sizerChildren;for(var c in d)n=d[c],!n.rexSizer.hidden&&(t=n.rexSizer,e=t.padding,ur.call(this,n),n.isRexSizer?(n.runLayout(this,this.getExpandedChildWidth(n),this.getExpandedChildHeight(n)),xu(n,this)):(f=void 0,v=void 0,t.expandWidth&&(f=s-e.left-e.right),t.expandHeight&&(v=h-e.top-e.bottom),qi(n,f,v)),r=a+e.left,u=s-e.left-e.right,o=i+e.top,l=h-e.top-e.bottom,fr.call(this,n,r,o,u,l,t.align,t.alignOffsetX,t.alignOffsetY))};const ic=Phaser.Utils.Objects.IsPlainObject,Qe=Phaser.Utils.Objects.GetValue,sc=Phaser.Display.Align.CENTER,N2=Phaser.Utils.String.UUID;var Y2=function(n,t,e,a,i,s,h,r,o){if(or.call(this,n),ic(t)){var l=t;t=Qe(l,"key",void 0),e=Qe(l,"align",sc),r=Qe(l,"offsetX",0),o=Qe(l,"offsetY",0),a=Qe(l,"padding",0),i=Qe(l,"expand",!0),n.isRexSizer||(s=Qe(l,"minWidth",n._minWidth),h=Qe(l,"minHeight",n._minHeighted))}var u=t!==void 0;u||(t=N2()),typeof e=="string"&&(e=vn[e]),e===void 0&&(e=sc),r===void 0&&(r=0),o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=!0),n.isRexSizer||(s===void 0&&(s=n._minWidth),h===void 0&&(h=n._minHeight));var l=this.getSizerConfig(n);return l.align=e,l.alignOffsetX=r,l.alignOffsetY=o,l.padding=pn(a),ic(i)?(l.expandWidth=Qe(i,"width",!1),l.expandHeight=Qe(i,"height",!1)):(l.expandWidth=i,l.expandHeight=i),n.isRexSizer||(l.expandWidth&&(n.minWidth=s===void 0?Tt(n):s),l.expandHeight&&(n.minHeight=h===void 0?xt(n):h)),this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=n,u&&this.addChildrenMap(t,n),this};const V2={add:Y2},z2=Phaser.Utils.Array.Remove,U2=De.prototype.remove;var Wa=function(n,t){return this.isBackground(n)&&z2(this.backgroundChildren,n),U2.call(this,n,t),!t&&this.sizerEventsEnable&&(n.emit("sizer.remove",n,this),this.emit("remove",n,this)),this};const X2=De.prototype.clear;var Ha=function(n){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!n&&this.sizerEventsEnable,e;if(t&&(e=this.getChildren([])),X2.call(this,n),t)for(var a,i=0,s=e.length;i<s;i++)a=e[i],a.emit("sizer.remove",a,this),this.emit("remove",a,this);return this};const W2={remove(n,t){var e;if(typeof n=="string"){if(e=n,n=this.sizerChildren[e],!n)return this}else{if(this.getParentSizer(n)!==this)return this;e=this.childToKey(n)}return e&&(delete this.sizerChildren[e],this.childrenMap.hasOwnProperty(e)&&delete this.childrenMap[e]),Wa.call(this,n,t),this},removeAll(n){for(var t in this.sizerChildren)this.remove(t,n);return this},clear(n){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return Ha.call(this,n),this}};var d0={getChildrenWidth:I2,getChildrenHeight:w2,getExpandedChildWidth:B2,getExpandedChildHeight:D2,getChildrenSizers:b2,layoutChildren:G2};Object.assign(d0,V2,W2);var ka=function(n,t){if(Array.isArray(n))return n.indexOf(t);for(var e in n)if(n[e]===t)return e;return null};const nc=Phaser.Utils.Objects.IsPlainObject,Hs=Phaser.Utils.Objects.GetValue;class Ae extends Os{constructor(t,e,a,i,s,h){nc(e)?(h=e,e=Hs(h,"x",0),a=Hs(h,"y",0),i=Hs(h,"width",void 0),s=Hs(h,"height",void 0)):nc(i)&&(h=i,i=Hs(h,"width",void 0),s=Hs(h,"height",void 0)),super(t,e,a,i,s,h),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var e=t;if(this.sizerChildren.hasOwnPropery(e))return e}else return ka(this.sizerChildren,t);return null}}Object.assign(Ae.prototype,d0);var H2=Phaser.Math.Distance.Between,xa=function(n,t,e){var a=n.width/2;return H2(a,a,t,e)<=a};const k2=Phaser.Math.Angle.Between,$2=Phaser.Math.Angle.Normalize;var rc=function(n,t,e){if(!!this.enable&&!!n.isDown){var a=this.sizerChildren.knob;if(!!xa(a,t,e)){var i=a.width/2,s=a.startAngle,h=k2(i,i,t,e),r=a.anticlockwise?s-h:h-s,o=$2(r)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-o)<.1?this.value=o:this.easeValueTo(o)}}},K2=function(){var n=this.sizerChildren.knob;n.on("pointerdown",rc,this).on("pointermove",rc,this).setInteractive()};const ac=Phaser.Math.Angle.Between,Z2=Phaser.Math.Angle.Wrap;var J2=function(n,t,e){if(!(!this.enable||this.panPointer)){var a=this.sizerChildren.knob;!xa(a,t,e)||c0.call(this,n)}},j2=function(n,t,e){if(!!this.enable&&!!n.isDown){var a=this.sizerChildren.knob;switch(this.panState){case mu:xa(a,t,e)&&c0.call(this,n);break;case p0:xa(a,t,e)?q2.call(this):v0.call(this);break}}},Q2=function(n,t,e){!this.enable||this.panPointer!==n||v0.call(this)},c0=function(n){this.panPointer=n,this.panState=p0},v0=function(){this.panPointer=void 0,this.panState=mu},q2=function(){var n=this.panPointer.prevPosition,t=this.panPointer.position,e=this.sizerChildren.knob,a=ac(e.x,e.y,n.x,n.y),i=ac(e.x,e.y,t.x,t.y),s=e.anticlockwise?a-i:i-a,h=Z2(s)/(Math.PI*2);this.stopEaseValue(),this.value+=h};const mu=0,p0=1;var _2=function(){var n=this.sizerChildren.knob;n.on("pointerdown",J2,this).on("pointermove",j2,this).on("pointerup",Q2,this).setInteractive(),this.panPointer=void 0,this.panState=mu},tF=function(n,t){return this.textFormatCallback=n,this.textFormatCallbackScope=t,this},g0=function(n){n===void 0&&(n=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(n):t=this.textFormatCallback.call(this.textFormatCallbackScope,n),t},eF=function(n){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(g0.call(this,n)),t.layout&&t.layout()),this};const iF={setTextFormatCallback:tF,getFormatText:g0,updateText:eF},Ve=Phaser.Utils.Objects.GetValue,sF=Phaser.Math.Snap.To;class $a extends As(Ae){constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexKnob",this.bootProgressBase(e);var a=Ve(e,"background",void 0),i=Ve(e,"text",void 0);a&&this.addBackground(a),i&&(e.textColor=void 0,e.textStrokeColor=void 0,this.setTextFormatCallback(Ve(e,"textFormatCallback",void 0),Ve(e,"textFormatCallbackScope",void 0)));var s=new Da(t,e);s.setDepth(Ve(e,"knobDepth",0)),s._value=-1,t.add.existing(s),this.add(s,"knob"),i&&(this.add(i,"text","center",0,!1),t.children.moveBelow(s,i)),this.addChildrenMap("background",a),this.addChildrenMap("knob",s),this.addChildrenMap("text",i),this.setEnable(Ve(e,"enable",void 0)),this.setGap(Ve(e,"gap",void 0)),this.setValue(Ve(e,"value",0),Ve(e,"min",void 0),Ve(e,"max",void 0));var h=Ve(e,"input",0);switch(typeof h=="string"&&(h=nF[h]),h){case 0:_2.call(this);break;case 1:K2.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=sF(t,this.gap));var e=this.value;this.sizerChildren.knob.value=t;var a=this.value;e!==a&&(this.updateText(),this.eventEmitter.emit("valuechange",a,e,this.eventEmitter))}}const nF={pan:0,drag:0,click:1,none:-1};Object.assign($a.prototype,iF);_.register("knob",function(n){var t=new $a(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Knob",$a);const rF={arc:Fa,circle:Uh,curve:NC,ellipse:YC,line:VC,lines:an,rectangle:nS,roundRectangle:ca,triangle:aS},oc=Phaser.Utils.Objects.GetValue,aF=Phaser.Utils.Objects.IsPlainObject,oF=function(){for(var n=this.getShapes(),t=0,e=n.length;t<e;t++)n[t].lineStyle().fillStyle()},hF={createShape(n,t){var e=rF[n],a=new e;return t&&a.setName(t),a},buildShapes(n){var t=oc(n,"create",void 0);if(aF(t)){var e=t;for(var a in e){var i=e[a];switch(typeof i){case"number":for(var s=0;s<i;s++)this.addShape(this.createShape(a));break;case"string":this.addShape(this.createShape(a,i));break;default:for(var h=i,s=0,r=h.length;s<r;s++)this.addShape(this.createShape(a,h[s]));break}}}else if(Array.isArray(t))for(var e=t,s=0,r=e.length;s<r;s++){var o=e[s];this.addShape(this.createShape(o.type,o.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(oc(n,"update"))},setUpdateShapesCallback(n){return n===void 0&&(n=oF),this.dirty=this.dirty||this.updateCallback!==n,this.updateCallback=n,this},updateShapes(){this.updateCallback.call(this)}},hc=Phaser.GameObjects.Components.TransformMatrix,lF=Phaser.Math.TransformXY;var uF=function(n,t,e,a,i){a===void 0&&(a=n.scene.cameras.main),i===void 0?i={}:i===!0&&(i=fF);var s=a.scrollX,h=a.scrollY,r=t+s*n.scrollFactorX-s,o=e+h*n.scrollFactorY-h;return n.parentContainer?(Xr===void 0&&(Xr=new hc,lc=new hc),n.getWorldTransformMatrix(Xr,lc),Xr.applyInverse(r,o,i)):lF(r,o,n.x,n.y,n.rotation,n.scaleX,n.scaleY,i),i.x+=n.displayOriginX,i.y+=n.displayOriginY,i},Xr,lc,fF={};const Fn=Phaser.Utils.Objects.GetValue,dF=Phaser.Utils.Objects.IsPlainObject;class Ka extends Ss{constructor(t,e,a,i,s,h){dF(e)&&(h=e,e=Fn(h,"x",0),a=Fn(h,"y",0),i=Fn(h,"width",2),s=Fn(h,"height",2)),super(t,e,a,i,s),this.type=Fn(h,"type","rexCustomShapes"),this.buildShapes(h)}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}worldToLocalXY(t,e,a,i){return typeof a=="boolean"&&(i=a,a=void 0),uF(this,t,e,a,i)}}Object.assign(Ka.prototype,hF);_.register("customShapes",function(n,t,e,a,i){var s=new Ka(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.CustomShapes",Ka);const In=Phaser.Utils.Objects.GetValue,cF=Phaser.Utils.Objects.IsPlainObject;class x0 extends As(Ka){constructor(t,e,a,i,s,h){cF(e)&&(h=e,e=In(h,"x",0),a=In(h,"y",0),i=In(h,"width",2),s=In(h,"height",2)),h===void 0&&(h={}),h.type||(h.type="rexCustomProgress"),super(t,e,a,i,s,h),this.bootProgressBase(h),this.setValue(In(h,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}}_.register("customProgress",function(n,t,e,a,i){var s=new x0(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.CustomProgress",x0);const vF={setTransitionStartCallback(n,t){return this.onStartCallback=n,this.onStartCallbackScope=t,this},setTransitionProgressCallback(n,t){return this.onProgressCallback=n,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(n,t){return this.onCompleteCallback=n,this.onCompleteCallbackScope=t,this}},pF=Phaser.Utils.Objects.IsPlainObject,Re=Phaser.Utils.Objects.GetValue;var gF={out:0,in:1};const xF={setTransitionDirection(n){return typeof n=="string"&&(n=gF[n]),this.dir=n,this},setDuration(n){return this.duration=n,this},setEaseFunction(n){return this.easeFunction=n,this},setNextTexture(n,t){return this.nextImage.setTexture(n,t),this},transit(n,t){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),pF(n)){var e=n;n=Re(e,"key",void 0),t=Re(e,"frame",void 0),this.setDuration(Re(e,"duration",this.duration)).setEaseFunction(Re(e,"ease",this.easeFunction)).setTransitionDirection(Re(e,"dir",this.dir));var a=Re(e,"mask",void 0);a&&this.setMaskGameObject(a),this.setMaskEnable(a===!0);var i=Re(e,"onStart",void 0),s=Re(e,"onProgress",void 0),h=Re(e,"onComplete",void 0);(i!==void 0||s!==void 0||h!==void 0)&&this.setTransitionStartCallback(i,Re(e,"onStartScope",void 0)).setTransitionProgressCallback(s,Re(e,"onProgressScope",void 0)).setTransitionCompleteCallback(h,Re(e,"onCompleteScope",void 0))}return this.setNextTexture(n,t),this.start(),this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Ps(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var uc=function(n,t,e,a,i){switch(this.clear().fillStyle(16777215),this.shape){case 1:var s=Math.min(n,t)/2;this.fillCircle(-n*(a-.5),-t*(i-.5),s+e);break;default:this.fillRect(-(n*a)-e,-(t*i)-e,n+2*e,t+2*e);break}};const mF=Phaser.GameObjects.Graphics;class el extends mF{constructor(t,e,a){e===void 0&&(e=0),typeof e=="string"&&(e=yF[e]),a===void 0&&(a=0),super(t.scene),this.parent=t,this.shape=e,this.padding=a,this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}setPosition(t,e){var a=this.parent;return t===void 0&&(t=a.x),e===void 0&&(e=a.y),super.setPosition(t,e),this}resize(t,e,a){var i=this.parent;return t===void 0&&(t=i.width),e===void 0&&(e=i.height),a===void 0&&(a=this.padding),this.widthSave===t&&this.heightSave===e&&this.paddingSave===a?this:(this.widthSave=t,this.heightSave=e,this.paddingSave=a,this.originXSave=i.originX,this.originYSave=i.originY,uc.call(this,t,e,a,i.originX,i.originY),this)}setOrigin(t,e){e===void 0&&(e=t);var a=this.parent;return t===void 0&&(t=a.originX),e===void 0&&(e=a.originY),this.originXSave===t&&this.originYSave===e?this:(this.originXSave=t,this.originYSave=e,uc.call(this,this.widthSave,this.heightSave,this.paddingSave,t,e),this)}}const yF={rectangle:0,circle:1},TF={setMaskGameObject(n){if(!n)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(n===!0&&this.maskGameObject instanceof el)return this;if(this.maskGameObject===n)return this;this.removeMaskGameObject()}return n===!0&&(n=new el(this)),this.maskGameObject=n,this.maskGameObject.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(this.maskGameObject),this.childrenMask=this.maskGameObject.createGeometryMask(),this},removeMaskGameObject(){return this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,!0),this.maskGameObject=void 0,this},setImageMaskEnable(n,t,e){return t===void 0&&(t=!0),this.childrenMask||this.setMaskGameObject(!0),t?(n.setMask(this.childrenMask),e&&this.childrenMask.setInvertAlpha()):n.clearMask(),this},setCurrentImageMaskEnable(n,t){return this.setImageMaskEnable(this.currentImage,n,t),this},setNextImageMaskEnable(n,t){return this.setImageMaskEnable(this.nextImage,n,t),this},setCellImagesMaskEnable(n,t){for(var e=this.getCellImages(),a=0,i=e.length;a<i;a++)this.setImageMaskEnable(e[a],n,t);return this},setMaskEnable(n,t){return this.setImageMaskEnable(this.backImage,n,t),this.setImageMaskEnable(this.frontImage,n,t),this.setCellImagesMaskEnable(n,t),this}};var CF=function(n,t){t===void 0&&(t=",");var e;return n==="__BASE"?e=function(a,i){return`${a}${t}${i}`}:e=function(a,i){return`${n}_${a}${t}${i}`},e},SF=function(n,t,e,a,i,s){e==null&&(e="__BASE"),s||(s=CF(e,s));for(var h=n.sys.textures.get(t),r=h.source[0].isRenderTexture,o=typeof e=="object"?e:h.get(e),u=o.width,l=o.height,f,v,d,c=u/a,p=l/i,g=0,x=0,m=0;m<i;m++){g=0;for(var y=0;y<a;y++)d=s(y,m),f=g+o.cutX,r?v=l-x-p+o.cutY:v=x+o.cutY,h.add(d,0,f,v,c,p),g+=c;x+=p}return{getFrameNameCallback:s,cellWidth:c,cellHeight:p,columns:a,rows:i}};const xi=Phaser.Utils.Objects.GetValue,EF=Phaser.GameObjects.Image,PF=Phaser.Utils.Objects.IsPlainObject,MF=Phaser.Math.RotateAround;var AF=function(n,t,e,a){PF(t)&&(a=t,t=xi(a,"columns",1),e=xi(a,"rows",1));var i=xi(a,"onCreateImage");if(!i){var s=xi(a,"ImageClass",EF);i=function(z,U,W){return new s(z,0,0,U,W)}}for(var h=xi(a,"originX",.5),r=xi(a,"originY",.5),o=xi(a,"add",!0),u=xi(a,"align",o),l=xi(a,"objectPool",void 0),f=n.scene,v=n.texture,d=n.frame,c=SF(f,v,d,t,e),p=c.getFrameNameCallback,g=n.scaleX,x=n.scaleY,m=n.rotation,y=n.getTopLeft(),T=y.x,C=y.y,S=[],E=c.cellWidth*g,P=c.cellHeight*x,M=0;M<e;M++)for(var O=0;O<t;O++){var A,R=p(O,M);l&&l.length>0?A=l.pop().setTexture(v,R):A=i(f,v,R),o&&f.add.existing(A);var F=T+E*O,I=C+P*M,D=F+h*E,N=I+r*P;u&&(A.setOrigin(h,r).setPosition(D,N).setScale(g,x).setRotation(m),MF(A,T,C,m)),S.push(A)}return S};const OF={gridCutImage(n,t,e,a){a===void 0&&(a={}),a.objectPool=this.imagesPool;for(var i=AF(n,t,e,a),s,h=0,r=i.length;h<r;h++)s=i[h],s.setVisible(!0),this.add(s);return this.cellImages=i,this.setChildLocalVisible(n,!1),i},gridCutCurrentImage(n,t,e){return this.gridCutImage(this.currentImage,n,t,e)},gridCutNextImage(n,t,e){return this.gridCutImage(this.nextImage,n,t,e)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var n=this.cellImages[0].texture,t=this.cellImages,e,a,i=0,s=t.length;i<s;i++)e=t[i],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),a=e.frame.name,e.setTexture(),n.remove(a);return this.imagesPool.push(...t),t.length=0,this}},RF={setFlipX(n){return this.flipX=n,this},setFlipY(n){return this.flipY=n,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(n,t){return this.flipX=n,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var m0={};Object.assign(m0,vF,xF,TF,OF,RF);var LF=function(n,t,e,a){},FF=function(n,t,e,a){n.setChildLocalAlpha(t,1-a).setChildLocalAlpha(e,a)},IF=function(n,t,e,a){n.setChildLocalAlpha(t,1)};const fc=Phaser.Utils.Objects.IsPlainObject,Xt=Phaser.Utils.Objects.GetValue,wF=Phaser.Math.Clamp;class yu extends De{constructor(t,e,a,i,s,h){fc(e)?(h=e,e=Xt(h,"x",0),a=Xt(h,"y",0),i=Xt(h,"key",void 0),s=Xt(h,"frame",void 0)):fc(s)&&(h=s,s=void 0);var r=Xt(h,"back",void 0),o=Xt(h,"front",void 0);r||(r=t.add.image(e,a,i,s)),o||(o=t.add.image(e,a,i,s));var u=Xt(h,"width",o.width),l=Xt(h,"height",o.height);super(t,e,a,u,l),r.setVisible(!1),this.addMultiple([r,o]),this.type="rexTransitionImage",this.backImage=r,this.frontImage=o,this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[];var f=Xt(h,"onStart",void 0),v=Xt(h,"onProgress",void 0),d=Xt(h,"onComplete",void 0),c=Xt(h,"dir",0);f===void 0&&v===void 0&&d===void 0&&(f=LF,v=FF,d=IF,c=0),this.setTransitionStartCallback(f,Xt(h,"onStartScope",void 0)).setTransitionProgressCallback(v,Xt(h,"onProgressScope",void 0)).setTransitionCompleteCallback(d,Xt(h,"onCompleteScope",void 0)).setTransitionDirection(c).setDuration(Xt(h,"duration",1e3)).setEaseFunction(Xt(h,"ease","Linear"));var p=Xt(h,"mask",void 0);p&&this.setMaskGameObject(p),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1}destroy(t){!this.scene||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}get t(){return this._t}set t(t){if(t=wF(t,0,1),this._t!==t){this._t=t;var e=this.currentImage,a=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),ih(this.onStartCallback,this.onStartCallbackScope,this,e,a,t)),ih(this.onProgressCallback,this.onProgressCallbackScope,this,e,a,t),t===1){ih(this.onCompleteCallback,this.onCompleteCallbackScope,this,e,a,t);var i=a.texture.key,s=a.frame.name;this.frontImage.setTexture(i,s),this.backImage.setTexture(i,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,e){return super.setOrigin(t,e),this.backImage.setOrigin(t,e),this.frontImage.setOrigin(t,e),this.maskGameObject&&this.maskGameObject.setOrigin(t,e),this}setTexture(t,e){return this.frontImage.setTexture(t,e),this.backImage.setTexture(t,e).setVisible(!1),this}}var ih=function(n,t,e,a,i,s){!n||(t?n.call(t,e,a,i,s):n(e,a,i,s))};Object.assign(yu.prototype,m0);_.register("transitionImage",function(n,t,e,a,i){var s=new yu(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.TransitionImage",yu);const BF=Phaser.GameObjects.Rectangle;class Tu extends BF{constructor(t,e,a){super(t,0,0,2,2,e,1),this.setAlpha(a),this.setScrollFactor(0),this.boot()}boot(){var t=this.scene;t.sys.events.on("prerender",this.resize,this)}destroy(t){!this.scene||(this.scene.sys.events.off("prerender",this.resize,this),super.destroy(t))}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}resize(){var t=this.scene,e=t.sys.scale.gameSize,a=t.sys.cameras.main,i=e.width,s=e.height,h=1/a.zoom,r=i/2,o=s/2,u=i*h,l=s*h;(this.x!==r||this.y!==o)&&this.setPosition(r,o),(this.width!==u||this.height!==l)&&this.setSize(u,l).setOrigin(.5)}}_.register("fullWindowRectangle",function(n,t){var e=new Tu(this.scene,n,t);return this.scene.add.existing(e),e});q(window,"RexPlugins.UI.FullWindowRectangle",Tu);const sh=Phaser.Utils.Objects.GetValue;class Za extends kt{constructor(t,e){super(t,{eventEmitter:!1}),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.setHitAreaMode(sh(t,"hitAreaMode",0)),this.setEnable(sh(t,"enable",!0)),this.setStopMode(sh(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,e,a,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointerup",function(t,e,a,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointermove",function(t,e,a,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointerover",function(t,e,a,i){this.stopAllLevels&&i.stopPropagation()},this).on("pointerout",function(t,e){this.stopAllLevels&&e.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=DF[t]);var e=this.parent;return e.input&&e.removeInteractive(),t===0?e.setInteractive():e.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var DF={default:0,fullWindow:1};const dc=Phaser.Utils.Objects.GetValue;class Cu extends Tu{constructor(t,e){var a=dc(e,"color",0),i=dc(e,"alpha",.8);super(t,a,i),this.touchEventStop=new Za(this,{hitAreaMode:1})}}_.register("cover",function(n){var t=new Cu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Cover",Cu);var bF=function(n){if(this.rexSizer.hidden)return 0;n===void 0&&(n=!0);var t=0,e=this.sizerChildren,a,i,s;if(this.orientation===0)for(var h=this.space.item,r=!0,o=0,u=e.length;o<u;o++)a=e[o],!a.rexSizer.hidden&&(a.rexSizer.proportion===0||n?s=this.getChildWidth(a):s=0,i=a.rexSizer.padding,s+=i.left+i.right,r?r=!1:s+=h,t+=s);else for(var o=0,u=e.length;o<u;o++)a=e[o],a.hasOwnProperty("rexSizer")&&(a.rexSizer.hidden||(i=a.rexSizer.padding,s=this.getChildWidth(a)+i.left+i.right,t=Math.max(s,t)));return t+this.space.left+this.space.right},GF=function(n){if(this.rexSizer.hidden)return 0;n===void 0&&(n=!0);var t=0,e=this.sizerChildren,a,i,s;if(this.orientation===0)for(var h=0,r=e.length;h<r;h++)a=e[h],!a.rexSizer.hidden&&(i=a.rexSizer.padding,s=this.getChildHeight(a)+i.top+i.bottom,t=Math.max(s,t));else for(var o=this.space.item,u=!0,h=0,r=e.length;h<r;h++)a=e[h],a.hasOwnProperty("rexSizer")&&(a.rexSizer.hidden||(a.rexSizer.proportion===0||n?s=this.getChildHeight(a):s=0,i=a.rexSizer.padding,s+=i.top+i.bottom,u?u=!1:s+=o,t+=s));return t+this.space.top+this.space.bottom},NF=function(n,t){t===void 0&&(t=this.width);var e,a=n.rexSizer,i=a.padding;if(this.orientation===0)a.proportion>0&&this.proportionLength>0&&(e=a.proportion*this.proportionLength);else if(a.expand){var s=t-this.space.left-this.space.right;e=s-i.left-i.right}return e},YF=function(n,t){t===void 0&&(t=this.height);var e,a=n.rexSizer,i=a.padding;if(this.orientation===0){if(a.expand){var s=t-this.space.top-this.space.bottom;e=s-i.top-i.bottom}}else a.proportion>0&&this.proportionLength>0&&(e=a.proportion*this.proportionLength);return e},VF=function(n){n===void 0&&(n=[]);for(var t=this.sizerChildren,e,a=0,i=t.length;a<i;a++)e=t[a],e.isRexSizer&&n.push(e);return n},zF=function(){return this._childrenProportion=void 0,this.proportionLength=void 0,lr.call(this),this};const UF=Phaser.Math.Wrap;var XF=function(){for(var n=this.sizerChildren,t,e,a,i=this.innerLeft,s=this.innerTop,h=this.innerWidth,r=this.innerHeight,o=i,u=s,l,f,v,d,c,p,g,x=this.startChildIndex,m=0,y=n.length;m<y;m++)x===0?g=m:g=UF(m+x,0,y),this.rtl&&(g=y-g-1),t=n[g],!t.rexSizer.hidden&&(e=t.rexSizer,a=e.padding,ur.call(this,t),t.isRexSpace?(c=0,p=0):(c=this.getExpandedChildWidth(t),p=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,c,p),xu(t,this)):qi(t,c,p),c===void 0&&(c=Tt(t)),p===void 0&&(p=xt(t)),this.orientation===0?(l=o+a.left,e.proportion===0||this.proportionLength===0?v=c:v=e.proportion*this.proportionLength,f=u+a.top,d=r-a.top-a.bottom):(l=o+a.left,v=h-a.left-a.right,f=u+a.top,e.proportion===0||this.proportionLength===0?d=p:d=e.proportion*this.proportionLength),fr.call(this,t,l,f,v,d,e.align),this.orientation===0?o+=v+a.left+a.right+this.space.item:u+=d+a.top+a.bottom+this.space.item)},WF=function(t){var t=ru.call(this,t);if(this.proportionLength===void 0&&this.orientation===0){var e=t-this.childrenWidth;e>0?(e=t-this.getChildrenWidth(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t},HF=function(t){var t=au.call(this,t);if(this.proportionLength===void 0&&this.orientation===1){var e=t-this.childrenHeight;e>0?(e=t-this.getChildrenHeight(!1),this.proportionLength=e/this.childrenProportion):this.proportionLength=0}return t};const kF=Phaser.GameObjects.Zone;class Ja extends kF{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var $F=function(n,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var a=-1,i=1/0,s=0,h=e.length;s<h;s++){var r=e[s],o;this.orientation===0?o=Math.abs(r.left-n):o=Math.abs(r.top-t),i>o&&(i=o,a=s)}var r=e[e.length-1],o;return this.orientation===0?o=Math.abs(r.right-n):o=Math.abs(r.bottom-t),i>o&&(i=o,a=s+1),a};const y0=Phaser.Utils.Objects.IsPlainObject,Di=Phaser.Utils.Objects.GetValue,cc=Phaser.Display.Align.CENTER,KF={min:0,full:-1};var nh=function(n,t,e,a,i,s,h,r,o){or.call(this,n);var u=n.isRexSpace,l=typeof t;if(t===null)return this;if(l!=="number"){if(l==="string")t=KF[t];else if(y0(t)){var f=t;t=Di(f,"proportion",void 0),e=Di(f,"align",cc),a=Di(f,"padding",0),i=Di(f,"expand",!1),s=Di(f,"key",void 0),h=Di(f,"index",void 0),n.isRexSizer||(r=Di(f,"minWidth",void 0),o=Di(f,"minHeight",void 0))}}typeof e=="string"&&(e=vn[e]),t===void 0&&(t=u?1:0),e===void 0&&(e=cc),a===void 0&&(a=0),i===void 0&&(i=!1),r===void 0&&(u?r=0:n.isRexSizer||(r=n._minWidth)),o===void 0&&(u?o=0:n.isRexSizer||(o=n._minHeight));var f=this.getSizerConfig(n);return f.proportion=t,f.align=e,f.padding=pn(a),f.expand=i,h===void 0||h>=this.sizerChildren.length?this.sizerChildren.push(n):this.sizerChildren.splice(h,0,n),n.isRexSizer||(t>0&&(this.orientation===0?n.minWidth=r===void 0?Tt(n):r:n.minHeight=o===void 0?xt(n):o),i&&(this.orientation===0?n.minHeight=o:n.minWidth=r)),s!==void 0&&this.addChildrenMap(s,n),this};const ZF={add:nh,addSpace(n){return this.insertSpace(void 0,n),this},insertSpace(n,t){return t===void 0&&(t=1),nh.call(this,new Ja(this.scene),{proportion:t,minWidth:0,minHeight:0,index:n}),this},insert(n,t,e,a,i,s,h,r){return y0(e)&&(e.index=n),nh.call(this,t,e,a,i,s,h,n,r),this},insertAtPosition(n,t,e,a,i,s,h,r,o){var u=$F.call(this,n,t);return u===-1&&(u=void 0),this.insert(u,e,a,i,s,h,r,o),this}},JF=Phaser.Utils.Array.Remove,jF={remove(n,t){return this.getParentSizer(n)!==this?this:(JF(this.sizerChildren,n),Wa.call(this,n,t),this)},removeAll(n){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],n);return this},clear(n){return this.sizerChildren.length=0,Ha.call(this,n),this}},QF={getChildAlign(n){return this.getSizerConfig(n).align},setChildAlign(n,t){return typeof t=="string"&&(t=vn[t]),this.getSizerConfig(n).align=t,this}},qF={getChildProportion(n){return this.getSizerConfig(n).proportion},setChildProportion(n,t){return this.getSizerConfig(n).proportion=t,this}},_F={getChildExpand(n){return this.getSizerConfig(n).expand},setChildExpand(n,t){return this.getSizerConfig(n).expand=t,this}};var T0={getChildrenWidth:bF,getChildrenHeight:GF,getExpandedChildWidth:NF,getExpandedChildHeight:YF,getChildrenSizers:VF,preLayout:zF,layoutChildren:XF,resolveWidth:WF,resolveHeight:HF};Object.assign(T0,ZF,jF,QF,qF,_F);var tI=function(){for(var n=0,t=this.sizerChildren,e,a,i=0,s=t.length;i<s;i++)e=t[i],!e.rexSizer.hidden&&(a=e.rexSizer.proportion,a>0&&(n+=a));return n},eI={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},ja=function(n){return typeof n=="string"&&(n=eI[n]),n};const rh=Phaser.Utils.Objects.IsPlainObject,Le=Phaser.Utils.Objects.GetValue;class ct extends Os{constructor(t,e,a,i,s,h,r){rh(e)?(r=e,e=Le(r,"x",0),a=Le(r,"y",0),i=Le(r,"width",void 0),s=Le(r,"height",void 0),h=Le(r,"orientation",0)):rh(i)?(r=i,i=Le(r,"width",void 0),s=Le(r,"height",void 0),h=Le(r,"orientation",0)):rh(h)&&(r=h,h=Le(r,"orientation",0)),h===void 0&&(h=0),super(t,e,a,i,s,r),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(h),this.setItemSpacing(Le(r,"space.item",0)),this.setStartChildIndex(Le(r,"startChildIndex",0)),this.setRTL(Le(r,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=ja(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=tI.call(this)),this._childrenProportion}}Object.assign(ct.prototype,T0);const iI=Phaser.GameObjects.GameObject;var gn=function(n){return n instanceof iI},sI=function(n,t){if(t===!1)return null;if(gn(t))return t;var e=new Ei(n,t);return n.add.existing(e),e.expandSquare=!0,e},cr=function(n,t){t=t?re(t):{};var e=new Hl(n,t);return n.add.existing(e),e};const vc=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],nI=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];var il={},pc;for(var Wr=0,rI=vc.length;Wr<rI;Wr++)pc=vc[Wr].toLowerCase(),il[pc]=nI[Wr];var aI=function(n){return n=n.toLowerCase(),il.hasOwnProperty(n)?il[n]:null},oI=function(n){return typeof n!="string"||(n.startsWith("#")?n=parseInt(n.substring(1),16):n.startsWith("0x")?n=parseInt(n.substring(2),16):n=aI(n)),n};const hI=Phaser.Utils.String.Pad;var gc=function(n,t){t===void 0&&(t="0x");var e=n.toString(16).toUpperCase();return e=hI(e,6,0,1),e=t+e,e},lI=function(n,t){!n||(n.setTint?n.setTint(t):n.setFillStyle&&n.setFillStyle(t))};const bi=Phaser.Utils.Objects.GetValue,uI=Phaser.Math.Clamp;class Su extends ct{constructor(t,e){e===void 0&&(e={}),e.orientation=0,super(t,e),this.type="rexColorInputLite";var a=bi(e,"background",void 0),i=sI(t,bi(e,"swatch")),s=bi(e,"inputText"),h=cr(t,s);a&&this.addBackground(a),i&&this.add(i,{proportion:0,expand:!1});var r=bi(s,"width")===void 0?1:0,o=bi(s,"height")===void 0;this.add(h,{proportion:r,expand:o}),this.addChildrenMap("background",a),this.addChildrenMap("swatch",i),this.addChildrenMap("inputText",h),h.on("close",function(){this.setValue(h.value)},this);var u=bi(e,"valuechangeCallback",null);if(u!==null){var l=bi(e,"valuechangeCallbackScope",void 0);this.on("valuechange",u,l)}this.setValue(bi(e,"value",0))}preLayout(){var t=this.childrenMap.swatch;t&&t.expandSquare&&t.resize(1,1)}postResolveSize(t,e){var a=this.childrenMap.swatch;if(a&&a.expandSquare){var i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(a,"top")-this.getChildOuterPadding(a,"bottom");a.resize(i,i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=oI(t),t==null){var a=this.childrenMap.inputText;a.setText(gc(this._value));return}}else t=uI(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var e=this.childrenMap.swatch;e&&lI(e,t);var a=this.childrenMap.inputText;a.setText(gc(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}}var fI={setCreateColorPickerBackgroundCallback(n){return this.colorPickerCreateBackgroundCallback=n,this},setColorPickerHPalettePosition(n){return this.colorPickerHPalettePosition=n,this},setColorPickerExpandDirection(n){return typeof n=="string"&&(n=dI[n]),this.colorPickerExpandDirection=n,this},setColorPickerEaseInDuration(n){return n===void 0&&(n=0),this.colorPickerEaseInDuration=n,this},setColorPickerEaseOutDuration(n){return n===void 0&&(n=0),this.colorPickerEaseOutDuration=n,this},setColorPickerTransitInCallback(n){return this.colorPickerTransitInCallback=n,this},setColorPickerTransitOutCallback(n){return this.colorPickerTransitOutCallback=n,this},setColorPickerBounds(n){return this.colorPickerBounds=n,this},setColorPickerWidth(n){return this.colorPickerWidth=n,this},setColorPickerHeight(n){return this.colorPickerHeight=n,this},setColorPickerSize(n,t){return this.setColorPickerWidth(n).setColorPickerHeight(t),this},setColorPickerSpace(n){return n===void 0&&(n={}),this.colorPickerSpace=n,this},setColorComponentsHeight(n){return this.colorComponentsHeight=n,this},setColorComponentsFormatLabelConfig(n){return this.colorComponentsFormatLabelConfig=n,this},setColorComponentsInputTextConfig(n){return this.colorComponentsInputTextConfig=n,this},setColorComponentsSpace(n){return n===void 0&&(n={}),this.colorComponentsSpace=n,this}};const dI={down:0,up:1},C0=Phaser.Display.Color,ma=Phaser.Math.Percent;var cI=function(n,t,e){e===void 0&&(e=!1);var a=n.width,i=n.height,s=new C0;if(e)for(var h=0;h<i;h++){var r=ma(h,0,i);s.setFromHSV(r,1,1),t.fillStyle=s.rgba,t.fillRect(0,h,a,1)}else for(var o=0;o<a;o++){var r=ma(o,0,a);s.setFromHSV(r,1,1),t.fillStyle=s.rgba,t.fillRect(o,0,1,i)}},vI=function(n,t,e){for(var a=n.width,i=n.height,s=t.getImageData(0,0,a,i),h=s.data,r=new C0,o=0;o<i;o++)for(var u=0;u<a;u++){var l=ma(u,0,a),f=1-ma(o,0,i);r.setFromHSV(e,l,f);var v=(o*a+u)*4;h[v]=r.red,h[v+1]=r.green,h[v+2]=r.blue,h[v+3]=255}t.putImageData(s,0,0)};const pI=Phaser.Display.Color,xc=Phaser.Math.Percent,gI=Phaser.Display.Color.ColorToRGBA,xI=Phaser.Display.Color.HSVToRGB;class mI extends Me{constructor(t,e,a,i,s,h){e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=2),s===void 0&&(s=2),super(t,e,a,i,s),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new pI,this.setOrientation(h),this.setSize(i,s)}setOrientation(t){return this.orientation=ja(t),this}updateTexture(){return cI(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,e){return t===void 0?this.hue:(this.orientation===0?this.hue=xc(t,0,this.width):this.hue=xc(e,0,this.height),this.hue)}getColor(t,e){if(t===void 0)return this.color;var a=this.getHue(t,e);return this.colorObject.setFromRGB(xI(a,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,e){return e===void 0?e={}:e===!0&&(ah===void 0&&(ah={}),e=ah),this.colorObject.setFromRGB(gI(t)),this.orientation===0?(e.x=this.width*this.colorObject.h,e.y=this.height/2):(e.x=this.width/2,e.y=this.height*this.colorObject.h),e}}var ah=void 0,yI=Phaser.Math.RotateAround,S0=function(n,t,e,a){a===void 0?a={}:a===!0&&(oh===void 0&&(oh={}),a=oh),t-=n.width*n.originX,e-=n.height*n.originY;var i={x:t*n.scaleX,y:e*n.scaleY};return yI(i,0,0,-n.rotation),a.x=n.x+t,a.y=n.y+e,a},oh;class TI extends Ae{constructor(t,e){e===void 0&&(e={}),super(t,e);var a=e.width!=null?1:0,i=new mI(t).setOrientation(a);t.add.existing(i),this.type="rexColorPicker.HPalette",i.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var s=new Ei(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(s),this.add(i,{key:"paletteCanvas",expand:!0}).add(s,{key:"marker",expand:!1})}resize(t,e){if(this.width===t&&this.height===e)return this;super.resize(t,e);var a=Math.min(t,e);return this.childrenMap.marker.setSize(a,a),this}onPaletteCanvasPointerDown(t,e,a,i){if(!!t.isDown){var s=this.childrenMap.paletteCanvas,h=s.getColor(e,a);this.setMarkerPosition(h),this.emit("input",h)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var e=this.childrenMap.paletteCanvas;return e.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var e=this.childrenMap.paletteCanvas,a=this.childrenMap.marker,i=e.colorToLocalPosition(t,!0);return S0(e,i.x,i.y,a),this.resetChildPositionState(a),this}getHue(t,e){var a=this.childrenMap.paletteCanvas;return a.getHue(t,e)}}const CI=Phaser.Display.Color,mc=Phaser.Math.Percent,yc=Phaser.Display.Color.ColorToRGBA,SI=Phaser.Display.Color.HSVToRGB;class EI extends Me{constructor(t,e,a,i,s,h){e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=2),s===void 0&&(s=2),super(t,e,a,i,s),this.type="rexColorPicker.SVPaletteCanvas",h===void 0&&(h=1),this.colorObject=new CI,this.setHue(h),this.setSize(i,s)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return vI(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,e){if(t===void 0)return this.colorObject.color;var a=mc(t,0,this.width),i=1-mc(e,0,this.height);return this.colorObject.setFromRGB(SI(this.hue,a,i)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(yc(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,e){return e===void 0?e={}:e===!0&&(hh===void 0&&(hh={}),e=hh),this.colorObject.setFromRGB(yc(t)),e.x=this.width*this.colorObject.s,e.y=this.height*(1-this.colorObject.v),e}}var hh=void 0;class PI extends Ae{constructor(t,e){super(t,e);var a=new EI(t);t.add.existing(a),this.type="rexColorPicker.SVPalette",a.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var i=new Ei(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(i),this.add(a,{key:"paletteCanvas",expand:!0}).add(i,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,e,a,i){if(!!t.isDown){var s=this.childrenMap.paletteCanvas,h=s.getColor(e,a);this.setMarkerPosition(h),this.emit("input",h)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var e=this.childrenMap.paletteCanvas;return e.setHue(t),this}setColor(t){if(this.color===t)return this;var e=this.childrenMap.paletteCanvas;return e.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var e=this.childrenMap.paletteCanvas,a=this.childrenMap.marker,i=e.colorToLocalPosition(t,!0);return S0(e,i.x,i.y,a),this.resetChildPositionState(a),this}}const ze=Phaser.Utils.Objects.GetValue;class Eu extends ct{constructor(t,e){super(t,e),this.type="rexColorPicker",this.freezePalettes=!1;var a=ze(e,"hPalette.position",0);typeof a=="string"&&(a=MI[a]);var i=a===0||a===2?1:0;this.setOrientation(i);var s=ze(e,"background",void 0),h,r;if(this.orientation===0){var h=ze(e,"hPalette.width",void 0);h===void 0&&(h=ze(e,"hPalette.size",10))}else r=ze(e,"hPalette.height",void 0),r===void 0&&(r=ze(e,"hPalette.size",10));var o=new TI(t,{width:h,height:r});t.add.existing(o);var u=ze(e,"svPalette.width",void 0),l=ze(e,"svPalette.height",void 0),f=new PI(t,{width:u,height:l});t.add.existing(f),s&&this.addBackground(s);var v={proportion:0,expand:!0},d,c;this.orientation===0?(d=u===void 0?1:0,c=l===void 0):(d=l===void 0?1:0,c=u===void 0);var p={proportion:d,expand:c};a===0||a===3?this.add(f,p).add(o,v):this.add(o,v).add(f,p),o.on("input",function(){f.setHue(o.getHue()),this.setValue(f.color,!0)},this),f.on("input",function(){this.setValue(f.color,!0)},this),this.addChildrenMap("background",s),this.addChildrenMap("hPalette",o),this.addChildrenMap("svPalette",f);var g=ze(e,"valuechangeCallback",null);if(g!==null){var x=ze(e,"valuechangeCallbackScope",void 0);this.on("valuechange",g,x)}this.setValue(ze(e,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var e=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,e,this)}}setValue(t,e){return this.freezePalettes=!!e,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}runLayout(t,e,a){return this.ignoreLayout?this:(super.runLayout(t,e,a),this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),this)}}var MI={bottom:0,left:1,top:2,right:3},Ji=function(n,t){var e=new Ei(n,t);return n.add.existing(e),e};const AI=Phaser.GameObjects.Text;var E0=function(n,t){var e=new AI(n,0,0,"",t);return n.add.existing(e),e};const OI=Phaser.GameObjects.Image;var ya=function(n,t){var e=new OI(n,0,0,"");return n.add.existing(e),e},Pu=function(n,t){return t=t?re(t):{},t.background=Ji(n,t.background),t.text=E0(n,t.text),t.icon!==null&&(t.icon=ya(n,t.icon)),t.action!==null&&(t.action=ya(n,t.action)),t},Ci=function(n,t,e,a){var i=new el(t,e,a);if(n&&!n.isRexSizer){var s=i.createGeometryMask();n.setMask(s),this.once("destroy",function(){n.setMask(),s.destroy()})}return this.pin(i),i},Hr=function(n,t,e){if(!!n){var a=t==null,i=e==null;return a&&i||(a||(n.displayWidth=t),i||(n.displayHeight=e),a&&(n.scaleX=n.scaleY),i&&(n.scaleY=n.scaleX)),n}};const Zt=Phaser.Utils.Objects.GetValue;class Oi extends ct{constructor(t,e){super(t,e),this.type="rexLabel";var a=Zt(e,"background",void 0),i=Zt(e,"icon",void 0),s=Zt(e,"iconMask",void 0),h=Zt(e,"text",void 0),r=Zt(e,"action",void 0),o=Zt(e,"actionMask",void 0),u=Zt(e,"align",void 0),l=Zt(e,"space.icon",0),f=Zt(e,"space.text",0);if(a&&this.addBackground(a),(u==="right"||u==="bottom"||u==="center")&&this.addSpace(),i){var v;this.orientation===0?(h||r)&&(v={right:l}):(h||r)&&(v={bottom:l}),this.add(i,{proportion:0,padding:v}),s&&(s=Ci.call(this,i,i,1))}var d=Zt(e,"iconSize");if(this.setIconSize(Zt(e,"iconWidth",d),Zt(e,"iconHeight",d)),h){var c=Zt(e,"expandTextWidth",!1),p=Zt(e,"expandTextHeight",!1),g,v,x;this.orientation===0?(g=c?1:0,r&&(v={right:f}),x=p):(g=p?1:0,r&&(v={bottom:f}),x=c),this.add(h,{proportion:g,expand:x,padding:v})}r&&(this.add(r),o&&(o=Ci.call(this,r,r,1)));var m=Zt(e,"actionSize");this.setActionSize(Zt(e,"actionWidth",m),Zt(e,"actionHeight",m)),u==="center"&&this.addSpace(),this.addChildrenMap("background",a),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",s),this.addChildrenMap("text",h),this.addChildrenMap("action",r),this.addChildrenMap("actionMask",o)}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var e=this.childrenMap.text;e!==void 0&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setIconTexture(t,e){var a=this.childrenMap.icon;return a===void 0?this:(a.setTexture(t,e),Hr(a,this.iconWidth,this.iconHeight),this.resetChildScaleState(a),this)}setTexture(t,e){return this.setIconTexture(t,e),this}setIconSize(t,e){return this.iconWidth=t,this.iconHeight=e,this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}setActionTexture(t,e){var a=this.childrenMap.action;return a===void 0?this:(a.setTexture(t,e),Hr(a,this.actionWidth,this.actionHeight),this.resetChildScaleState(a),this)}get actionTexture(){var t=this.childrenMap.action;if(t!==void 0)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t!==void 0)return t.frame}setActionSize(t,e){return this.actionWidth=t,this.actionHeight=e,this}preLayout(){super.preLayout(),Hr(this.childrenMap.icon,this.iconWidth,this.iconHeight),Hr(this.childrenMap.action,this.actionWidth,this.actionHeight)}runLayout(t,e,a){if(this.ignoreLayout)return this;super.runLayout(t,e,a);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(t,e){super.resize(t,e);var a=this.childrenMap.iconMask;a&&a.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}resetDisplayContent(t){t===void 0&&(t={});var e=t.text||"";this.setText(e);var a=this.childrenMap.icon;a&&(t.icon===void 0?this.hide(a):this.show(a),t.iconSize&&a.setDisplaySize(t.iconSize,t.iconSize),this.setIconTexture(t.icon,t.iconFrame));var i=this.childrenMap.action;return i&&(t.action===void 0?this.hide(i):this.show(i),t.actionSize&&i.setDisplaySize(t.actionSize,t.actionSize),this.setActionTexture(t.action,t.actionFrame)),this}}var P0=function(n,t){t=Pu(n,t);var e=new Oi(n,t);return n.add.existing(e),e};const qe=Phaser.Utils.Objects.GetValue,RI=Phaser.Display.Color,LI=Phaser.Display.Color.ColorToRGBA,FI=Phaser.Display.Color.HSVToRGB,vs=Phaser.Math.Clamp;class Mu extends ct{constructor(t,e){e===void 0&&(e={}),e.orientation=0,super(t,e),this.type="rexColorComponents",this.colorObject=new RI;var a=qe(e,"background",void 0),i=qe(e,"formatLabel",void 0);gn(i)||(i=P0(t,i).resetDisplayContent());var s=[];if(e.inputText0&&e.inputText1&&e.inputText2)s.push(e.inputText0),s.push(e.inputText1),s.push(e.inputText2);else for(var h=qe(e,"inputText"),r=0;r<3;r++){var o=cr(t,h).setMaxLength(3).setNumberInput();s.push(o)}a&&this.addBackground(a);var l=qe(e,"proportion.formatLabel",0),u=!!i.isRexContainerLite,f=qe(e,"expand.formatLabel",u);this.add(i,{proportion:l,expand:f});for(var l=qe(h,"width")===void 0?1:0,f=qe(h,"height")===void 0,r=0,v=s.length;r<v;r++)this.add(s[r],{proportion:l,expand:f});this.addChildrenMap("background",a),this.addChildrenMap("formatLabel",i),this.addChildrenMap("components",s),this.onClick(i,this.toggleColorFormat,this);for(var r=0,v=s.length;r<v;r++)s[r].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var d=qe(e,"valuechangeCallback",null);if(d!==null){var c=qe(e,"valuechangeCallbackScope",void 0);this.on("valuechange",d,c)}i.setText("RGB"),this.setValue(qe(e,"value",16777215))}get value(){return this._value}set value(t){t=vs(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(LI(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,e,a,i;return this.colorFormat==="RGB"?(e=this.colorObject.red,a=this.colorObject.green,i=this.colorObject.blue):(e=Math.floor(this.colorObject.h*360),a=Math.floor(this.colorObject.s*100),i=Math.floor(this.colorObject.v*100)),t[0].setValue(e),t[1].setValue(a),t[2].setValue(i),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var e=vs(t[0].value,0,255),a=vs(t[1].value,0,255),i=vs(t[2].value,0,255);this.colorObject.setTo(e,a,i)}else{var s=vs(t[0].value,0,359)/360,h=vs(t[1].value,0,100)/100,r=vs(t[2].value,0,100)/100;this.colorObject.setFromRGB(FI(s,h,r))}return this}}const lh=Phaser.Utils.Objects.GetValue;class II extends ct{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexColorInput.ColorPickerPanel";var a=lh(e,"background",void 0),i=new Eu(t,{hPalette:e.hPalette||{},svPalette:e.svPalette||{},space:{item:lh(e,"space.hPalette",8)}});t.add.existing(i);var s;e.colorComponents&&(s=new Mu(t,e.colorComponents),t.add.existing(s)),a&&(this.addBackground(a),new Za(a,{stopAllLevels:!1})),this.add(i,{proportion:1,expand:!0}),s&&this.add(s,{proportion:0,expand:!0}),this.addChildrenMap("background",a),this.addChildrenMap("colorPicker",i),this.addChildrenMap("colorComponents",s),i.on("valuechange",function(h){this.setValue(h)},this),s&&s.on("valuechange",function(h){this.setValue(h)},this),this.setValue(lh(e,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var e=this.childrenMap.colorPicker;e.setValue(t);var a=this.childrenMap.colorComponents;a&&a.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var wI=function(t){var t=this.scene,e,a=this.colorPickerCreateBackgroundCallback;a&&(e=a.call(this,t),t.add.existing(e));var i=this.colorPickerWidth;i===void 0&&(i=this.width);var s=this.colorPickerHeight;s===void 0&&(s=i);var h;this.colorComponentsHeight>0?h={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:h=!1;var r=new II(t,{width:i,height:s,background:e,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:h,value:this.value});return t.add.existing(r),r};class BI extends Ai{constructor(t,e){super(e),this.parent=t;var a=e.initState||"IDLE";this.start(a)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var e=t.runTransitionInCallback();t.delayCall(e,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var e=t.runTransitionOutCallback();t.delayCall(e,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}}var M0=function(n,t,e,a,i){var s=n.scene,h=s.sys.events,r=s.time.delayedCall(t,h.once,["postupdate",function(){e.call(a,i)}],h);return r};const DI={delayCall(n,t,e){return this.delayCallTimer=M0(this,n,t,e),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},bI={setTransitInTime(n){return this.transitInTime=n,this},setTransitOutTime(n){return this.transitOutTime=n,this},setTransitInCallback(n){return n||(n=ve),this.transitInCallback=n,this},setTransitOutCallback(n){return n||(n=ve),this.transitOutCallback=n,this}},GI={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(n,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?n:this.parent;var e=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=e,this}},NI={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(n,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?n:this.parent;var e=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=e,this}};var A0={};Object.assign(A0,DI,bI,GI,NI);const ks=Phaser.Utils.Objects.GetValue;class Qa extends kt{constructor(t,e){super(t,e),this.setTransitInTime(ks(e,"duration.in",200)),this.setTransitOutTime(ks(e,"duration.out",200)),this.setTransitInCallback(ks(e,"transitIn")),this.setTransitOutCallback(ks(e,"transitOut")),this.oneShotMode=ks(e,"destroy",!1),this.delayCallTimer=void 0,this._state=new BI(this,{eventEmitter:!1,initState:ks(e,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Qa.prototype,A0);var YI=function(n,t,e,a,i){a===void 0&&(a="Linear");var s={};switch(s.mode=0,e){case 0:case"x":s.end={x:0};break;case 1:case"y":s.end={y:0};break;default:s.end=0;break}return s.duration=t,s.ease=a,i===void 0?i=new Zn(n,s):i.resetFromJSON(s),i.restart(),i},VI=function(n,t,e,a,i){return Xi(n,t)?Bt(n,t):e&&Xi(n,e)?Bt(n,e):a&&Xi(n,a)?Bt(n,a):i};const wn=Phaser.Utils.Objects.GetValue;var zI=function(n,t){var e=wn(t,"expandDirection",void 0);typeof e=="string"&&(e=UI[e]);var a=VI(t,"alignTarget","alignTargetX"),i=wn(t,"alignTargetY",a),s=wn(t,"alignOffsetX",0),h=wn(t,"alignOffsetY",0),r=wn(t,"bounds"),o=e===0,u=e===1,l=!o&&!u,f=o||l?0:1;n.setOrigin(0,f);var v=a.getTopLeft().x,d=i.getBottomLeft().y;n.setPosition(v+s,d+h);var c=r;c||(c=cn(n.scene)),l&&n.getBottomLeft().y>c.bottom&&(d=i.getTopLeft().y,n.setOrigin(0,1).setPosition(v+s,d+h))};const UI={down:0,up:1},Tc=Phaser.Utils.Objects.GetValue;class O0 extends Qa{constructor(t,e){e===void 0&&(e={}),e.transitIn==null&&(e.transitIn=function(s,h){hu(s,h,"y","Cubic")}),e.transitOut==null&&(e.transitOut=function(s,h){YI(s,h,"y","Linear")}),e.manualClose=!0,e.clickOutsideClose=!0,e.destroy=!0,super(t,e),zI(t,e),t.isRexSizer&&t.layout();var a=Tc(e,"touchOutsideClose",!1),i=Tc(e,"anyTouchClose",!1);i&&(a=!1),i?this.once("open",this.anyTouchClose,this):a&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Jn(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}var XI=function(){if(!this.colorPicker){var n=wI.call(this),t=new O0(n,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){n.on("valuechange",function(e){this.setValue(e)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=n,this.dropDownBehavior=t,this.pin(n),this}},R0={openColorPicker:XI};Object.assign(R0,fI);const Jt=Phaser.Utils.Objects.GetValue;class qa extends Su{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexColorInput",e.hasOwnProperty("colorPicker")||(e.colorPicker={background:{color:0}});var a=e.colorPicker,i=a!==!1&&a!==null;if(i){this.setColorPickerSize(Jt(a,"width",160),Jt(a,"height",170));var s,h=Jt(a,"background");h?s=function(d){return Ji(d,h)}:s=Jt(a,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(s),this.setColorPickerHPalettePosition(Jt(a,"hPalettePosition",0)),this.setColorPickerExpandDirection(Jt(a,"expandDirection")),this.setColorPickerEaseInDuration(Jt(a,"easeIn",500)),this.setColorPickerEaseOutDuration(Jt(a,"easeOut",500)),this.setColorPickerTransitInCallback(Jt(a,"transitIn")),this.setColorPickerTransitOutCallback(Jt(a,"transitOut")),this.setColorPickerBounds(Jt(a,"bounds"));var r=Jt(a,"space");r===void 0&&(r={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(r)}var o=e.colorComponents,u=o!==!1&&o!==null;if(i&&u){this.setColorComponentsHeight(Jt(o,"height",30)),this.setColorComponentsFormatLabelConfig(Jt(o,"formatLabel"));var l=Jt(o,"inputText");l||(l=Jt(e,"inputText")),this.setColorComponentsInputTextConfig(l);var f=Jt(o,"space");f===void 0&&(f={item:8}),this.setColorComponentsSpace(f)}var v=this.childrenMap.swatch;v&&i&&this.onClick(v,this.openColorPicker,this)}}Object.assign(qa.prototype,R0);_.register("colorInput",function(n){var t=new qa(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.ColorInput",qa);_.register("colorInputLite",function(n){var t=new Su(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.ColorInputBase",Su);_.register("colorPicker",function(n){var t=new Eu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.ColorPicker",Eu);_.register("colorComponents",function(n){var t=new Mu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.ColorComponents",Mu);var WI=function(n){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,HI(this,n)),this},HI=function(n,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var e=t.options;e.responsive=!1,e.maintainAspectRatio=!1,e.hasOwnProperty("devicePixelRatio")||(e.devicePixelRatio=1);var a=!1;e.animation===void 0?e.animation={}:e.animation===!1&&(a=!0,e.animation={});var i=e.animation;a&&(i.duration=0);var s=i.onProgress;i.onProgress=function(r){s&&s(r),n.needRedraw()};var h=i.onComplete;return i.onComplete=function(r){h&&h(r),n.needRedraw()},t},kI=function(n){if(this.chart!==void 0)if(typeof n=="string"){for(var t=this.chart.data.datasets,e,a=0,i=t.length;a<i;a++)if(e=t[a],e.label===n)return e}else return this.chart.data.datasets[n]},$I=function(n,t){var e=this.getChartDataset(n);if(e!==void 0){if(typeof t=="string"){var a=this.chart.data.labels;if(t=a.indexOf(t),t===-1)return}return e.data[t]}},KI=function(n,t,e){if(this.chart===void 0)return this;var a=this.getChartDataset(n);if(typeof t=="string"){var i=this.chart.data.labels;if(t=i.indexOf(t),t===-1)return this}return a.data[t]=e,this},ZI=function(){return this.chart===void 0?this:(this.chart.update(),this)};class Au extends Me{constructor(t,e,a,i,s,h){super(t,e,a,i,s),this.type="rexChart",this.chart=void 0,h!==void 0&&this.setChart(h)}destroy(t){!this.scene||(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,e){if(t===this.width&&e===this.height)return this;if(super.resize(t,e),this.chart){var a=this.chart;a.height=this.canvas.height,a.width=this.canvas.width,a.aspectRatio=a.height?a.width/a.height:null,a.update()}return this}}var JI={setChart:WI,getChartDataset:kI,getChartData:$I,setChartData:KI,updateChart:ZI};Object.assign(Au.prototype,JI);_.register("chart",function(n,t,e,a,i){var s=new Au(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.Chart",Au);_.register("sizer",function(n,t,e,a,i,s){var h=new ct(this.scene,n,t,e,a,i,s);return this.scene.add.existing(h),h});q(window,"RexPlugins.UI.Sizer",ct);var L0=function(){return Array.prototype.reduce.call(arguments,jI,0)},jI=function(n,t){return n+t},QI=function(n){if(this.rexSizer.hidden)return 0;n===void 0&&(n=!0);for(var t=0,e,a=this.sizerChildren,i,s,h,r,o=0;o<this.columnCount;o++){if(r=this.columnProportions[o],e=0,r===0||n){for(var u=0;u<this.rowCount;u++)i=a[u*this.columnCount+o],i&&(i.rexSizer.hidden||(s=i.rexSizer.padding,h=this.getChildWidth(i)+s.left+s.right,e=Math.max(e,h)));t+=e}this.columnWidth[o]=e}var l=this.space,f=Math.max(l.indentLeftOdd,l.indentLeftEven);return t+L0(l.left,f,...l.column,l.right)},qI=function(n){if(this.rexSizer.hidden)return 0;n===void 0&&(n=!0);for(var t=0,e,a=this.sizerChildren,i,s,h,r,o=0;o<this.rowCount;o++){if(r=this.rowProportions[o],e=0,r===0||n){for(var u=0;u<this.columnCount;u++)i=a[o*this.columnCount+u],i&&(i.rexSizer.hidden||(h=i.isRexSizer?Math.max(i.minHeight,i.childrenHeight):i.hasOwnProperty("minHeight")?i.minHeight:xt(i),s=i.rexSizer.padding,h+=s.top+s.bottom,e=Math.max(e,h)));t+=e}this.rowHeight[o]=e}var l=this.space,f=Math.max(l.indentTopOdd,l.indentTopEven);return t+L0(l.top,f,...l.row,l.bottom)},_I=function(n,t){var e,a=n.rexSizer;if(a.expand){var i=a.padding;e=t-i.left-i.right}return e},tw=function(n,t){var e,a=n.rexSizer;if(a.expand){var i=a.padding;e=t-i.top-i.bottom}return e},ew=function(n){n===void 0&&(n=[]);for(var t=this.sizerChildren,e,a=0,i=t.length;a<i;a++)e=t[a],e&&e.isRexSizer&&n.push(e);return n},iw=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,lr.call(this),this},sw=function(){for(var n,t,e,a=this.innerLeft,i=this.innerTop,s,h=i,r,o,u,l,f,v,d=this.space.column,c=this.space.row,p=this.space.indentLeftOdd,g=this.space.indentLeftEven,x=this.space.indentTopOdd,m=this.space.indentTopEven,y,T,C,S,E=0;E<this.rowCount;E++){T=this.getRowHeight(E),C=E%2?g:p,s=a+C;for(var P=0;P<this.columnCount;P++){if(y=this.getColumnWidth(P),n=this.getChildAt(P,E),!n||n.rexSizer.hidden){s+=y+d[P];continue}ur.call(this,n),f=this.getExpandedChildWidth(n,y),v=this.getExpandedChildHeight(n,T),n.isRexSizer?(n.runLayout(this,f,v),xu(n,this)):qi(n,f,v),t=n.rexSizer,e=t.padding,r=s+e.left,u=y-e.left-e.right,S=P%2?m:x,o=h+S+e.top,l=T-e.top-e.bottom,fr.call(this,n,r,o,u,l,t.align),s+=y+d[P]}h+=T+c[E]}},nw=function(t){var t=ru.call(this,t);if(this.proportionWidthLength===void 0){var e=this.totalColumnProportions;if(e>0){var a=t-this.getChildrenWidth(!1);a>=0&&(this.proportionWidthLength=a/e)}else this.proportionWidthLength=0}return t},rw=function(t){var t=au.call(this,t);if(this.proportionHeightLength===void 0){var e=this.totalRowProportions;if(e>0){var a=t-this.getChildrenHeight(!1);a>=0&&(this.proportionHeightLength=a/e)}else this.proportionHeightLength=0}return t},aw=function(n){var t,e,a;for(var i in this.sizerChildren)t=this.sizerChildren[i],t&&t.isRexSizer&&!t.ignoreLayout&&(a=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,a),e=t.resolveWidth(e),t.resolveChildrenWidth(e))},ow=function(n){var t,e,a;for(var i in this.sizerChildren)t=this.sizerChildren[i],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(a=this.getColumnWidth(parseInt(i)%this.columnCount),e=this.getExpandedChildWidth(t,a),t.isRexSizer&&(e=t.resolveWidth(e)),t.runWidthWrap(e));return this};const hw=Phaser.Utils.Objects.IsPlainObject,$s=Phaser.Utils.Objects.GetValue,Cc=Phaser.Display.Align.CENTER;var Sc=function(n,t,e,a,i){if(typeof n=="number"||typeof t=="number")if(n===void 0){for(var s,h=0;h<a;h++)if(s=t*a+h,!e[s])return s}else if(t===void 0){for(var s,h=0;h<i;h++)if(s=h*a+n,!e[s])return s}else{var s=t*a+n;if(!e[s])return s}else if(t===!0){for(var s,h=0;h<a;h++)for(var r=0;r<i;r++)if(s=r*a+h,!e[s])return s}else for(var h=0,o=e.length;h<o;h++)if(!e[h])return h;return null},lw=function(n,t,e,a,i,s,h){if(or.call(this,n),hw(t)){var o=t;t=$s(o,"column",void 0),e=$s(o,"row",void 0),a=$s(o,"align",Cc),i=$s(o,"padding",0),s=$s(o,"expand",!1),h=$s(o,"key",void 0)}var r=Sc(t,e,this.sizerChildren,this.columnCount,this.rowCount);if(r===null){if(typeof t=="number"&&typeof e=="number")return this;e===!0||typeof e=="number"?this.addEmptyColumn():this.addEmptyRow(),r=Sc(t,e,this.sizerChildren,this.columnCount,this.rowCount)}typeof a=="string"&&(a=vn[a]),a===void 0&&(a=Cc),i===void 0&&(i=0),s===void 0&&(s=!0);var o=this.getSizerConfig(n);return o.align=a,o.padding=pn(i),o.expand=s,this.sizerChildren[r]=n,h!==void 0&&this.addChildrenMap(h,n),this};const uw={add:lw};var qs=function(n,t,e,a){e===void 0&&(e=0),a===void 0&&(a=n.length-1);for(var i=e;i<=a;i++)n[i]=t;return n};const fw={remove(n,t){if(this.getParentSizer(n)!==this)return this;var e=this.sizerChildren.indexOf(n);return e!==-1&&(this.sizerChildren[e]=null),Wa.call(this,n,t),this},removeAt(n,t,e){var a=this.getChildAt(n,t);return a&&this.remove(a,e),this},removeAll(n){for(var t=this.sizerChildren.length-1;t>=0;t--){var e=this.sizerChildren[t];!e||this.remove(e,n)}return this},clear(n){return qs(this.sizerChildren,null),Ha.call(this,n),this}},Ec=Phaser.Utils.Objects.GetValue;var dw=function(n,t,e,a,i){if(e===void 0&&(e=0),a===void 0&&(a=0),this.columnCount=n,this.rowCount=t,this.gridCount=n*t,this.sizerChildren===void 0?this.sizerChildren=[]:this.removeAll(),this.sizerChildren.length=n*t,qs(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=n,typeof e=="number")qs(this.columnProportions,e);else for(var s=0;s<n;s++)this.columnProportions[s]=e[s]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof a=="number")qs(this.rowProportions,a);else for(var s=0;s<t;s++)this.rowProportions[s]=a[s]||0;this.columnWidth=[],this.columnWidth.length=n,this.rowHeight=[],this.rowHeight.length=t,this.space.column=[],this.space.column.length=n-1;var h=Ec(i,"column",0);if(typeof h=="number")qs(this.space.column,h);else for(var s=0,r=this.space.column.length;s<r;s++)this.space.column[s]=h[s]||0;this.space.row=[],this.space.row.length=t-1;var o=Ec(i,"row",0);if(typeof o=="number")qs(this.space.row,o);else for(var s=0,r=this.space.row.length;s<r;s++)this.space.row[s]=o[s]||0;return this},F0=function(n,t,e){t===void 0&&(t=this.rowProportions[0]||0),e===void 0&&(e=this.space.row[0]||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var a=[n*this.columnCount,0],i=0;i<this.columnCount;i++)a.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,a),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(n,0,e),this},cw=function(n,t){return F0.call(this,this.rowCount,n,t),this},I0=function(n,t,e){t===void 0&&(t=this.columnProportions[0]||0),e===void 0&&(e=this.space.column[0]||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var a=this.rowCount-1;a>=0;a--){var i=a*this.columnCount+n;this.sizerChildren.splice(i,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(n,0,e),this},vw=function(n,t){return I0.call(this,this.columnCount,n,t),this},w0={getChildrenWidth:QI,getChildrenHeight:qI,getExpandedChildWidth:_I,getExpandedChildHeight:tw,getChildrenSizers:ew,preLayout:iw,layoutChildren:sw,resolveWidth:nw,resolveHeight:rw,resolveChildrenWidth:aw,runWidthWrap:ow,resetGrid:dw,inseryEmptyRow:F0,addEmptyRow:cw,insertEmptyColumn:I0,addEmptyColumn:vw};Object.assign(w0,uw,fw);var pw=function(){for(var n=0,t,e=0;e<this.columnCount;e++)t=this.columnProportions[e],t>0&&(n+=t);return n},gw=function(){for(var n=0,t,e=0;e<this.rowCount;e++)t=this.rowProportions[e],t>0&&(n+=t);return n};const kr=Phaser.Utils.Objects.IsPlainObject,Ct=Phaser.Utils.Objects.GetValue;class Ri extends Os{constructor(t,e,a,i,s,h,r,o,u,l){kr(e)?(l=e,e=Ct(l,"x",0),a=Ct(l,"y",0),i=Ct(l,"width",void 0),s=Ct(l,"height",void 0),h=Ct(l,"column",l.col||0),r=Ct(l,"row",0),o=Ct(l,"columnProportions",0),u=Ct(l,"rowProportions",0)):kr(i)?(l=i,i=Ct(l,"width",void 0),s=Ct(l,"height",void 0),h=Ct(l,"column",l.col||0),r=Ct(l,"row",0),o=Ct(l,"columnProportions",0),u=Ct(l,"rowProportions",0)):kr(h)?(l=h,h=Ct(l,"column",l.col||0),r=Ct(l,"row",0),o=Ct(l,"columnProportions",0),u=Ct(l,"rowProportions",0)):kr(o)&&(l=o,o=Ct(l,"columnProportions",0),u=Ct(l,"rowProportions",0)),super(t,e,a,i,s,l),this.type="rexGridSizer",this.resetGrid(h,r,o,u,Ct(l,"space",void 0)),this.setIndentLeft(Ct(l,"space.indentLeftOdd",0),Ct(l,"space.indentLeftEven",0)),this.setIndentTop(Ct(l,"space.indentTopOdd",0),Ct(l,"space.indentTopEven",0)),this.addChildrenMap("items",this.sizerChildren);var f=Ct(l,"createCellContainerCallback");if(f)for(var a=0,v=this.rowCount;a<v;a++)for(var e=0,d=this.columnCount;e<d;e++){var c={column:e,row:a},p=f(t,e,a,c);p&&this.add(p,c)}}destroy(t){!this.scene||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0)}setIndentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIndentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setColumnProportion(t,e){return t>=this.columnProportions.length?this:(this.columnProportions[t]=e,this)}setRowProportion(t,e){return t>=this.rowProportions.length?this:(this.rowProportions[t]=e,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=pw.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=gw.call(this)),this._totalRowProportions}getChildAt(t,e){return this.sizerChildren[e*this.columnCount+t]}childToGridIndex(t,e){if(!t)return null;var a=this.sizerChildren.indexOf(t);return a===-1?null:(e===void 0&&(e={}),e.x=a%this.columnCount,e.y=Math.floor(a/this.columnCount),e)}getColumnWidth(t){var e=this.columnProportions[t],a=e===0?this.columnWidth[t]:e*this.proportionWidthLength;return a}getRowHeight(t){var e=this.rowProportions[t],a=e===0?this.rowHeight[t]:e*this.proportionHeightLength;return a}}Object.assign(Ri.prototype,w0);_.register("gridSizer",function(n,t,e,a,i,s,h,r,o){var u=new Ri(this.scene,n,t,e,a,i,s,h,r,o);return this.scene.add.existing(u),u});q(window,"RexPlugins.UI.GridSizer",Ri);var xw=function(){return this.rexSizer.hidden?0:this.maxChildWidth+this.space.left+this.space.right},mw=function(){return this.rexSizer.hidden?0:this.widthWrapResult.height+this.space.top+this.space.bottom},yw=function(n){n===void 0&&(n=[]);for(var t=this.sizerChildren,e,a=0,i=t.length;a<i;a++)e=t[a],e!==`
`&&e.isRexSizer&&n.push(e);return n},Tw=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,lr.call(this),this},Cw=function(){for(var n=this.innerWidth,t=this.justifyPercentage,e=this.space.item,a=this.space.line,i=this.space.indentLeftOdd,s=this.space.indentLeftEven,h=this.space.indentTopOdd,r=this.space.indentTopEven,o,u,l,f=0,v,d,c=this.innerLeft,p=this.innerTop,g,x,m,y,T=this.widthWrapResult.lines,C,S,E,P,M=p,O=0,A=T.length;O<A;O++){switch(C=T[O],S=C.children,this.rtl&&S.reverse(),v=O%2?s:i,P=c+v,E=n-C.width,this.align){case 0:break;case 1:P+=E;break;case 2:P+=E/2;break;case 3:f=uh(n,E,t,S.length);break;case 4:f=uh(n,E,t,S.length),f===0&&(P+=E);break;case 5:f=uh(n,E,t,S.length),f===0&&(P+=E/2);break}for(var R=!0,F=0,I=S.length;F<I;F++)o=S[F],!o.rexSizer.hidden&&(u=o.rexSizer,l=u.padding,ur.call(this,o),g=P+l.left,R?R=!1:g+=e,d=F%2?r:h,x=M+d+l.top,m=Tt(o),y=xt(o),P=g+m+l.right+f,fr.call(this,o,g,x,m,y,u.align));M+=C.height+a}},uh=function(n,t,e,a){return t/n<=e?t/(a-1):0},Sw=function(n,t){t===void 0?t={lines:[],width:0,height:0}:(t.lines.length=0,t.width=0,t.height=0);for(var e=this.sizerChildren,a=this.space.item,i=this.space.line,s=this.space.indentLeftOdd,h=this.space.indentLeftEven,r=this.space.indentTopOdd,o=this.space.indentTopEven,u,l,f,v=0,d,c=t.lines,p=void 0,g,x=0,m=e.length;x<m;x++){if(u=e[x],u===`
`)u=void 0,l=0,g=!0;else{if(u.rexSizer.hidden)continue;u.isRexSizer&&u.layout(),l=Ew(u),g=v<l||p===void 0}if(g){p&&(p.width=n-(v+a),t.width=Math.max(t.width,p.width),t.height+=p.height+i),p={children:[],height:0},c.push(p);var d=c.length%2?s:h;v=n-d}v-=l+a,u&&(p.children.push(u),f=Pw(u),p.height=Math.max(p.height,f))}return p&&(p.width=n-(v+a),t.width=Math.max(t.width,p.width),t.height+=p.height),t.height+=Math.max(r,o),t},Ew=function(n){var t=n.rexSizer.padding;return Tt(n)+t.left+t.right},Pw=function(n){var t=n.rexSizer.padding;return xt(n)+t.top+t.bottom},Mw=function(n){var t=n-this.space.left-this.space.right;this.widthWrapResult=Sw.call(this,t,this.widthWrapResult),e0.call(this,n)};const Pc=Phaser.Math.Distance.Between;var Aw=function(n,t){var e=this.sizerChildren;if(e.length===0)return-1;for(var a=-1,i=1/0,s=0,h=e.length;s<h;s++){var r=e[s];if(!(Math.abs(r.centerY-t)>r.height/2)){var u=Pc(r.left,r.centerY,n,t);i>u&&(i=u,a=s);var o=e[s+1];if(!(o&&o.y===r.y)){var u=Pc(r.right,r.centerY,n,t);i>u&&(i=u,a=s+1)}}}return a};const Ow=Phaser.Utils.Objects.IsPlainObject,fh=Phaser.Utils.Objects.GetValue,Rw=Phaser.Display.Align.CENTER;var dh=function(n,t,e,a){if(n===`
`)return this.addNewLine(),this;if(or.call(this,n),Ow(t)){var i=t;t=fh(i,"padding",0),e=fh(i,"key",void 0),a=fh(i,"index",void 0)}t===void 0&&(t=0);var i=this.getSizerConfig(n);return i.align=Rw,i.padding=pn(t),a===void 0||a>=this.sizerChildren.length?this.sizerChildren.push(n):this.sizerChildren.splice(a,0,n),e!==void 0&&this.addChildrenMap(e,n),this};const Lw={add(n,t,e){if(Ke(n))for(var a=n,i=0,s=a.length;i<s;i++)dh.call(this,a[i],t);else dh.call(this,n,t,e);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(n,t,e,a){return dh.call(this,t,e,a,n),this},insertAtPosition(n,t,e,a,i){var s=Aw.call(this,n,t);return s===-1&&(s=void 0),this.insert(s,e,a,i),this}},Fw=Phaser.Utils.Array.Remove,Iw={remove(n,t){return this.getParentSizer(n)!==this?this:(Fw(this.sizerChildren,n),Wa.call(this,n,t),this)},removeAll(n){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],n);return this},clear(n){return this.sizerChildren.length=0,Ha.call(this,n),this}};var B0={getChildrenWidth:xw,getChildrenHeight:mw,getChildrenSizers:yw,preLayout:Tw,layoutChildren:Cw,runWidthWrap:Mw};Object.assign(B0,Lw,Iw);var ww=function(n){n===void 0&&(n=this.sizerChildren);for(var t=0,e,a,i=0,s=n.length;i<s;i++)e=n[i],e!==`
`&&(a=this.getChildWidth(e),t=Math.max(a,t));return t},Bw=function(n){n===void 0&&(n=this.sizerChildren);for(var t=0,e,a,i=0,s=n.length;i<s;i++)e=n[i],e!==`
`&&(a=e.isRexSizer?Math.max(e.minHeight,e.childrenHeight):e.hasOwnProperty("minHeight")?e.minHeight:xt(e),t=Math.max(a,t));return t};const Mc=Phaser.Utils.Objects.IsPlainObject,_t=Phaser.Utils.Objects.GetValue;class ns extends Os{constructor(t,e,a,i,s,h){Mc(e)?(h=e,e=_t(h,"x",0),a=_t(h,"y",0),i=_t(h,"width",void 0),s=_t(h,"height",void 0)):Mc(i)&&(h=i,i=_t(h,"width",void 0),s=_t(h,"height",void 0)),super(t,e,a,i,s,h),this.type="rexFixWidthSizer",this.sizerChildren=[],this.setOrientation(_t(h,"orientation",0)),this.setItemSpacing(_t(h,"space.item",0)),this.setLineSpacing(_t(h,"space.line",0)),this.setIntentLeft(_t(h,"space.indentLeftOdd",0),_t(h,"space.indentLeftEven",0)),this.setIntentTop(_t(h,"space.indentTopOdd",0),_t(h,"space.indentTopEven",0)),this.setAlign(_t(h,"align",0)),this.setJustifyPercentage(_t(h,"justifyPercentage",.25)),this.setRTL(_t(h,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=ja(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,e){return this.space.indentLeftOdd=t,this.space.indentLeftEven=e,this}setIntentTop(t,e){return this.space.indentTopOdd=t,this.space.indentTopEven=e,this}setAlign(t){return typeof t=="string"&&(t=Dw[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=ww.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=Bw.call(this)),this._maxChildHeight}}const Dw={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(ns.prototype,B0);_.register("fixWidthSizer",function(n,t,e,a,i){var s=new ns(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.FixWidthSizer",ns);_.register("overlapSizer",function(n,t,e,a,i){var s=new Ae(this.scene,n,t,e,a,i);return this.scene.add.existing(s),s});q(window,"RexPlugins.UI.OverlapSizer",Ae);_.register("space",function(){var n=new Ja(this.scene);return n});q(window,"RexPlugins.UI.Space",Ja);_.register("label",function(n){var t=new Oi(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Label",Oi);const Pt=Phaser.Utils.Objects.GetValue;class D0 extends ct{constructor(t,e){super(t,e),this.type="rexTitleLabel";var a=Pt(e,"background",void 0),i=Pt(e,"icon",void 0),s=Pt(e,"iconMask",void 0),h=Pt(e,"title",void 0),r=Pt(e,"separator",void 0),o=Pt(e,"text",void 0),u=Pt(e,"action",void 0),l=Pt(e,"actionMask",void 0),f=o||h||r;if(a&&this.addBackground(a),i){var v=void 0;this.orientation===0?(f||u)&&(v={right:Pt(e,"space.icon",0),top:Pt(e,"space.iconTop",0),bottom:Pt(e,"space.iconBottom",0)}):(f||u)&&(v={bottom:Pt(e,"space.icon",0),left:Pt(e,"space.iconLeft",0),right:Pt(e,"space.iconRight",0)}),this.add(i,{proportion:0,padding:v}),s&&(s=Ci.call(this,i,i,1))}if(f){var d=new ct(t,{orientation:1}),c=Pt(e,"space.separator",0);if(h){var p=Pt(e,"align.title","right"),v={bottom:!r&&o?c:0};d.add(h,{align:p})}if(r){var v={top:h?c:0,bottom:o?c:0,left:Pt(e,"space.separatorLeft",0),right:Pt(e,"space.separatorRight",0)};d.add(r,{expand:!0,padding:v})}if(o){var g=Pt(e,"align.text","right");d.add(o,{align:g})}var v=void 0;u&&(v={right:Pt(e,"space.text",0)}),this.add(d,{proportion:1,padding:v})}if(u){var v;this.orientation===0?v={top:Pt(e,"space.actionTop",0),bottom:Pt(e,"space.actionBottom",0)}:v={left:Pt(e,"space.actionLeft",0),right:Pt(e,"space.actionRight",0)},this.add(u,{proportion:0,padding:v}),l&&(l=Ci.call(this,u,u,1))}this.addChildrenMap("background",a),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",s),this.addChildrenMap("title",h),this.addChildrenMap("separator",r),this.addChildrenMap("text",o),this.addChildrenMap("action",u),this.addChildrenMap("actionMask",l)}get title(){var t=this.childrenMap.title;return t===void 0?"":t.title}set title(t){var e=this.childrenMap.title;e!==void 0&&e.setText(t)}setTitle(t){return this.title=t,this}appendTitle(t){return this.title+=t,this}get text(){var t=this.childrenMap.text;return t===void 0?"":t.text}set text(t){var e=this.childrenMap.text;e!==void 0&&e.setText(t)}setText(t){return this.text=t,this}appendText(t){return this.text+=t,this}setTexture(t,e){var a=this.childrenMap.icon;if(a!==void 0)return a.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,e,a){if(this.ignoreLayout)return this;super.runLayout(t,e,a);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(t,e){super.resize(t,e);var a=this.childrenMap.iconMask;a&&a.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}}_.register("titleLabel",function(n){var t=new D0(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.TitleLabel",D0);const yt=Phaser.Utils.Objects.GetValue,bw=Phaser.Utils.Objects.IsPlainObject;var Gw=function(n,t){var e=yt(t,"background",void 0),a=yt(t,"icon",void 0),i=yt(t,"iconMask",void 0),s=yt(t,"nameText",void 0),h=yt(t,"valueText",void 0),r=yt(t,"bar",void 0),o=yt(t,"action",void 0),u=yt(t,"actionMask",void 0);bw(r)&&(r=new $l(n,r),n.add.existing(r),s&&n.children.moveBelow(r,s),h&&n.children.moveBelow(r,h));var l=s||h||r;if(e&&this.addBackground(e),a){var f=void 0;this.orientation===0?(l||o)&&(f={right:yt(t,"space.icon",0),top:yt(t,"space.iconTop",0),bottom:yt(t,"space.iconBottom",0)}):(l||o)&&(f={bottom:yt(t,"space.icon",0),left:yt(t,"space.iconLeft",0),right:yt(t,"space.iconRight",0)}),this.add(a,{proportion:0,padding:f}),i&&(i=Ci.call(this,a,a,1))}if(l){var v=new ct(n,{orientation:1}),d;if(s||h){if(d=new ct(n,{orientation:0}),s){s.text===""&&s.setText(" "),s.setOrigin(0,s.originY);var f={left:yt(t,"space.name",0)};d.add(s,{padding:f})}if(h){h.text===""&&h.setText(" "),h.setOrigin(1,h.originY),d.addSpace();var f={right:yt(t,"space.value",0)};d.add(h,{padding:f}),this.setValueTextFormatCallback(yt(t,"valueTextFormatCallback",Nw),yt(t,"valueTextFormatCallbackScope",void 0))}v.add(d,{expand:!0})}if(r){var f={top:d?yt(t,"space.bar",0):0,bottom:yt(t,"space.barBottom",0),left:yt(t,"space.barLeft",0),right:yt(t,"space.barRight",0)};v.add(r,{expand:!0,padding:f})}var f=void 0;o&&(f={right:yt(t,"space.text",0)});var c=yt(t,"align.text","bottom");this.add(v,{proportion:1,align:c,padding:f})}if(o){var f;this.orientation===0?f={top:yt(t,"space.actionTop",0),bottom:yt(t,"space.actionBottom",0)}:f={left:yt(t,"space.actionLeft",0),right:yt(t,"space.actionRight",0)},this.add(o,{proportion:0,padding:f}),u&&(u=Ci.call(this,o,o,1))}this.addChildrenMap("background",e),this.addChildrenMap("icon",a),this.addChildrenMap("iconMask",i),this.addChildrenMap("name",s),this.addChildrenMap("value",h),this.addChildrenMap("bar",r),this.addChildrenMap("action",o),this.addChildrenMap("actionMask",u)},Nw=function(n,t,e){return n.toString()},Yw=function(n,t){return this.valueTextFormatCallback=n,this.valueTextFormatCallbackScope=t,this},b0=function(n,t,e){n===void 0&&(n=this.value),t===void 0&&(t=this.minValue),e===void 0&&(e=this.maxValue);var a;return this.valueTextFormatCallbackScope?a=this.valueTextFormatCallback(n,t,e):a=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,n,t,e),a},Vw=function(n,t,e){var a=this.childrenMap.value;return a&&this.valueTextFormatCallback&&(a.setText(b0.call(this,n,t,e)),a.layout&&a.layout()),this};const zw=Phaser.Math.Clamp;var Uw=function(n,t,e){return n=zw(n,t,e),this.value=n,this.minValue=t,this.maxValue=e,this.updateValueText(n,t,e),this.setBarValue(n,t,e),this};const Xw={setValueTextFormatCallback:Yw,getFormatValueText:b0,updateValueText:Vw,setValue:Uw};class Ou extends ct{constructor(t,e){super(t,e),this.type="rexNameValueLabel",Gw.call(this,t,e)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var e=this.childrenMap.name;e!==void 0&&e.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var e=this.childrenMap.value;e!==void 0&&e.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var e=this.childrenMap.bar;e!==void 0&&e.setValue(t)}setBarValue(t,e,a){var i=this.childrenMap.bar;return i===void 0?this:(i.setValue(t,e,a),this)}easeBarValueTo(t,e,a){var i=this.childrenMap.bar;return i===void 0?this:(i.easeValueTo(t,e,a),this)}setTexture(t,e){var a=this.childrenMap.icon;if(a!==void 0)return a.setTexture(t,e),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}runLayout(t,e,a){if(this.ignoreLayout)return this;super.runLayout(t,e,a);var i=this.childrenMap.iconMask;i&&(i.setPosition(),this.resetChildPositionState(i));var s=this.childrenMap.actionMask;return s&&(s.setPosition(),this.resetChildPositionState(s)),this}resize(t,e){super.resize(t,e);var a=this.childrenMap.iconMask;a&&a.resize();var i=this.childrenMap.actionMask;return i&&i.resize(),this}}Object.assign(Ou.prototype,Xw);_.register("nameValueLabel",function(n){var t=new Ou(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.NameValueLabel",Ou);const $r=ct.prototype.add,Ac=ct.prototype.addSpace;var ch=function(n){var t=!n.isRexSpace,e=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var a=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");a&&Ac.call(this),$r.call(this,n,{proportion:e,expand:!0});var i=!this.buttonsExpand&&this.buttonsAlign==="center";i&&Ac.call(this),this.hasTailSpace=i}else $r.call(this,n,{proportion:e,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var s=this.sizerChildren.length-1;$r.call(this,n,{index:s,proportion:e,expand:!0})}else $r.call(this,n,{proportion:e,expand:!0});return t&&this.buttonGroup.add(n),this};const Ww={addButton(n){if(Ke(n))for(var t=n,e=0,a=t.length;e<a;e++)ch.call(this,t[e]);else ch.call(this,n);return this},addButtons(n){for(var t=0,e=n.length;t<e;t++)ch.call(this,n[t]);return this}},Hw=ct.prototype.remove,kw=ct.prototype.clear;var vh=function(n,t){return this.getParentSizer(n)!==this?this:(this.buttonGroup.remove(n),Hw.call(this,n,t),this)};const $w={remove(n,t){if(Ke(n))for(var e=n,a=0,i=e.length;a<i;a++)vh.call(this,e[a],t);else vh.call(this,n,t);return this},clear(n){var t=this.buttonGroup.buttons;return t.length=0,kw.call(this,n),this},removeButton(e,t){var e=this.getButton(e);return e?(this.remove(e,t),this):this},clearButtons(n){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)vh.call(this,t[e],n);return this}},Kw={add(n){if(this.buttons.push(n),this.buttonsType){var t=n.name;t===""?console.error(`${this.parent.constructor.name}: Button key is an empty string`):this.buttonMap.hasOwnProperty(t)&&console.error(`${this.parent.constructor.name}: Duplicate button key '${t}'`),this.buttonMap[t]=n,this.dataManager.set(t,void 0).set(t,!1)}return n._buttonBehavior=new es(n,this.clickConfig),n._buttonBehavior.on("click",function(e,a,i,s){this.fireEvent("button.click",a,i,s)},this).on("enable",function(e,a){this.fireEvent("button.enable",a)},this).on("disable",function(e,a){this.fireEvent("button.disable",a)},this),n.on("pointerover",function(e,a,i,s){this.fireEvent("button.over",n,e,s)},this).on("pointerout",function(e,a){this.fireEvent("button.out",n,e,a)},this),this},addMultiple(n){for(var t=0,e=n.length;t<e;t++)this.add(gameObject[t]);return this}},Zw=Phaser.Utils.Array.Remove,Jw={remove(n){if(Zw(this.buttons,n),this.buttonsType){var t=n.name;delete this.buttonMap[t],this.dataManager.remove(t)}return this},clear(){if(this.buttons.length=0,this.buttonsType)for(var n in this.buttonMap)delete this.buttonMap[n],this.dataManager.remove(n);return this}};var jw=function(n,t,...e){var a;if(typeof t=="number"){if(a=t,t=this.buttons[a],!t)return}else if(a=this.buttons.indexOf(t),a===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(n,t,a,...e),this.groupName!==void 0?this.eventEmitter.emit(n,t,this.groupName,a,...e):this.eventEmitter.emit(n,t,a,...e)};const _s=Phaser.Utils.Objects.GetValue;var Oc=function(n){var t=_s(n,"dataManager",void 0);if(t===void 0){var e=this.parent;e.setDataEnabled(),t=e.data}this.dataManager=t;var a,i;a=_s(n,"setValueCallback",void 0),i=_s(n,"setValueCallbackScope",void 0),a===void 0&&(a=_s(n,"setButtonStateCallback",void 0),i=_s(n,"setButtonStateCallbackScope",void 0)),this.setValueCallback=a,this.setValueCallbackScope=i,t.events.on("changedata",function(s,h,r,o){var u=this.buttonMap[h];if(!!u){var l=this.setValueCallback,f=this.setValueCallbackScope;l&&(f?l.call(f,u,r,o):l(u,r,o)),this.fireEvent("button.statechange",u,r,o)}},this)};const Qw={setButtonsType(n){n===void 0&&(n={});var t=_s(n,"buttonsType",n.type);switch(this.buttonsType=t,t){case"radio":this.setRadioType(n);break;case"checkboxes":this.setCheckboxesType(n);break}return this},setRadioType(n){Oc.call(this,n);var t=void 0,e=this.parent,a=this.buttons,i=this.dataManager;return Object.defineProperty(e,"value",{get:function(){return t},set:function(s){s!==t&&(t=s,a.forEach(function(h){var r=h.name,o=i.get(r);r===s?o||i.set(r,!0):o&&i.set(r,!1)}))},enumerable:!0,configurable:!0}),e.on("button.click",function(s){e.value=s.name}),this},setCheckboxesType(n){Oc.call(this,n);var t=this.parent,e=this.dataManager;return t.on("button.click",function(a){e.toggle(a.name)}),this},clearAllButtonsState(){for(var n in this.buttonMap)this.dataManager.set(n,!1);return this},getAllButtonsState(){var n={};for(var t in this.buttonMap)n[t]=this.dataManager.get(t);return n},setSelectedButtonName(n){return this.parent.value=n,this},getSelectedButtonName(){return this.parent.value},setButtonState(n,t){return t===void 0&&(t=!0),this.dataManager.set(n,t),this},getButtonState(n){return this.dataManager.get(n)}};var qw=function(n,t){if(n)if(Ke(n)){for(var e,a=0,i=n.length;a<i;a++)if(e=Rc(n[a],t),e)return e}else{var e;for(var s in n)if(e=Rc(n[s],t),e)return e}else return null},Rc=function(n,t){return n?n.hasOwnProperty("name")?n.name===t?n:null:GetElementByName(n,t):null};const _a={getButton(n){var t=this.buttons,e,a=typeof n;switch(a){case"number":e=t[n];break;case"string":e=qw(t,n);break;default:e=n,t.indexOf(e)===-1&&(e=void 0);break}return e},setButtonEnable(n,t){var e=this.buttons;if(n===void 0||typeof n=="boolean"){t=n;for(var a=0,i=e.length;a<i;a++)e[a]._buttonBehavior.setEnable(t)}else this.getButton(n)._buttonBehavior.setEnable(t);return this},toggleButtonEnable(n){var t=this.buttons;if(n===void 0||typeof n=="boolean")for(var e=0,a=t.length;e<a;e++)t[e]._buttonBehavior.toggleEnable();else this.getButton(n)._buttonBehavior.toggleEnable();return this},getButtonEnable(n){return n===void 0&&(n=0),this.getButton(n)._buttonBehavior.enable},emitButtonClick(n){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",n),this},showButton(n){return Wi(this.getButton(n)),this},hideButton(n){return Hi(this.getButton(n)),this},isButtonShown(n){return fu(this.getButton(n)),this},forEachButtton(n,t){for(var e=this.buttons,a=0,i=e.length;a<i;a++)t?n.call(t,e[a],a,e):n(e[a],a,e);return this}};class to{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[],this.buttonMap={}}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}var _w={fireEvent:jw};Object.assign(to.prototype,Kw,Jw,Qw,_a,_w);const Ru={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(n){return this.buttonGroup.setSelectedButtonName(n),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(n,t){return this.buttonGroup.setButtonState(n,t),this},getButtonState(n){return this.buttonGroup.getButtonState(n)}},ps=Phaser.Utils.Objects.GetValue;class Ht extends ct{constructor(t,e){e===void 0&&(e={});var a=e.space;typeof a=="number"&&(e.space={item:a}),super(t,e),this.type="rexButtons",this.buttonGroup=new to({parent:this,eventEmitter:ps(e,"eventEmitter",this),groupName:ps(e,"groupName",void 0),clickConfig:ps(e,"click",void 0)}).setButtonsType(e);var i=ps(e,"background",void 0),s=ps(e,"buttons",void 0);this.buttonsExpand=ps(e,"expand",!1),this.buttonsAlign=ps(e,"align",void 0),i&&this.addBackground(i),s&&this.addButtons(s),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Ht.prototype,Ww,$w,_a,Ru);_.register("buttons",function(n){var t=new Ht(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Buttons",Ht);const tB=Ri.prototype.add,eB={addButton(n,t,e){return tB.call(this,n,t,e,void 0,0,this.buttonsExpand),this.buttonGroup.add(n),this},addButtons(n,t){for(var e=0,a=n;e<a;e++)this.addButton(n[e],void 0,t);return this}},iB=Ri.prototype.remove,sB=Ri.prototype.clear;var ph=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),iB.call(this,e,t),this):this};const nB={remove(n,t){if(Ke(n))for(var e=n,a=0,i=e.length;a<i;a++)ph.call(this,e[a],t);else ph.call(this,n,t);return this},clear(n){var t=this.buttonGroup.buttons;return t.length=0,sB.call(this,n),this},removeButton(n,t){return this.remove(n,t),this},clearButtons(n){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)ph.call(this,t[e],n);return this}},_e=Phaser.Utils.Objects.GetValue;class vr extends Ri{constructor(t,e){e===void 0&&(e={});var a=_e(e,"row",0),i=_e(e,"column",e.col||0),s=_e(e,"createCellContainerCallback"),h=_e(e,"buttons",void 0),r=_e(e,"expand",!0),o=r?1:0;if(s&&(e.createCellContainerCallback=void 0),h!==void 0){a=Math.max(a,h.length);for(var u=0,l=h.length;u<l;u++)i=Math.max(i,h[u].length)}e.row=a,e.column=i,e.columnProportions=o,e.rowProportions=o,super(t,e),this.type="rexGridButtons",this.buttonGroup=new to({parent:this,eventEmitter:_e(e,"eventEmitter",this),groupName:_e(e,"groupName",void 0),clickConfig:_e(e,"click",void 0)}).setButtonsType(e);var f=_e(e,"background",void 0);if(this.buttonsExpand=r,_e(e,"space",void 0),f&&this.addBackground(f),h)for(var v,d,c=0,p=h.length;c<p;c++){v=h[c];for(var g=0,x=v.length;g<x;g++)d=v[g],d&&this.addButton(d,g,c)}else if(s)for(var m=0;m<a;m++)for(var y=0;y<i;y++){var d=s(t,y,m);d&&this.addButton(d,y,m)}this.addChildrenMap("background",f),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(vr.prototype,eB,nB,_a,Ru);_.register("gridButtons",function(n){var t=new vr(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.GridButtons",vr);const G0=ns.prototype.add;var Kr=function(n){return G0.call(this,n),this.buttonGroup.add(n),this};const rB={addButton(n){if(Ke(n))for(var t=n,e=0,a=t.length;e<a;e++)Kr.call(this,t[e]);else Kr.call(this,n);return this},addButtons(n){if(Ke(n[0]))for(var t=n,e,a=0,i=t.length-1;a<=i;a++){e=t[a];for(var s=0,h=e.length;s<h;s++)Kr.call(this,e[s]);a>i&&G0.addNewLine(this)}else for(var s=0,h=n.length;s<h;s++)Kr.call(this,n[s]);return this}},aB=ns.prototype.remove,oB=ns.prototype.clear;var gh=function(e,t){var e=this.getButton(e);return e?(this.buttonGroup.remove(e),aB.call(this,e,t),this):this};const hB={remove(n,t){if(Ke(n))for(var e=n,a=0,i=e.length;a<i;a++)gh.call(this,e[a],t);else gh.call(this,n,t);return this},clear(n){var t=this.buttonGroup.buttons;return t.length=0,oB.call(this,n),this},removeButton(n,t){return this.remove(n,t),this},clearButtons(n){for(var t=this.buttonGroup.buttons,e=t.length-1;e>=0;e--)gh.call(this,t[e],n);return this}},Ks=Phaser.Utils.Objects.GetValue;class _i extends ns{constructor(t,e){e===void 0&&(e={});var a=e.space;typeof a=="number"&&(e.space={item:a,line:a}),super(t,e),this.type="rexFixWidthButtons",this.buttonGroup=new to({parent:this,eventEmitter:Ks(e,"eventEmitter",this),groupName:Ks(e,"groupName",void 0),clickConfig:Ks(e,"click",void 0)}).setButtonsType(e);var i=Ks(e,"background",void 0),s=Ks(e,"buttons",void 0);this.buttonsAlign=Ks(e,"align",void 0),i&&this.addBackground(i),s&&this.addButtons(s),this.addChildrenMap("background",i),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(_i.prototype,rB,hB,_a,Ru);_.register("fixWidthButtons",function(n){var t=new _i(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.FixWidthButtons",_i);const lB={getChoice(n){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(n)},getAction(n){return this.childrenMap.actionsSizer.getButton(n)},getToolbar(n){return this.childrenMap.toolbarSizer.getButton(n)},getLeftToolbar(n){return this.childrenMap.leftToolbarSizer.getButton(n)},setChoiceEnable(n,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonEnable(n,t),this},setActionEnable(n,t){return this.childrenMap.actionsSizer.setButtonEnable(n,t),this},setToolbarEnable(n,t){return this.childrenMap.toolbarSizer.setButtonEnable(n,t),this},setLeftToolbarEnable(n,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(n,t),this},toggleChoiceEnable(n){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(n),this},toggleActionEnable(n){return this.childrenMap.actionsSizer.toggleButtonEnable(n),this},toggleToolbarEnable(n){return this.childrenMap.toolbarSizer.toggleButtonEnable(n),this},toggleLeftToolbarEnable(n){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(n),this},getChoiceEnable(n){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(n):!1},getActionEnable(n){return this.childrenMap.actionsSizer.getButtonEnable(n)},getToolbarEnable(n){return this.childrenMap.toolbarSizer.getButtonEnable(n)},getLeftToolbarEnable(n){return this.childrenMap.leftToolbarSizer.getButtonEnable(n)},emitChoiceClick(n){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(n),this},emitActionClick(n){return this.childrenMap.actionsSizer.emitButtonClick(n),this},emitToolbarClick(n){return this.childrenMap.toolbarSizer.emitButtonClick(n),this},emitLeftToolbarClick(n){return this.childrenMap.leftToolbarSizer.emitButtonClick(n),this},showChoice(n){var t=this.childrenMap.choicesSizer;return t&&t.showButton(n),this},showAction(n){return this.childrenMap.actionsSizer.showButton(n),this},showToolbar(n){return this.childrenMap.toolbarSizer.showButton(n),this},showLeftToolbar(n){return this.childrenMap.leftToolbarSizer.showButton(n),this},hideChoice(n){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(n),this},hideAction(n){return this.childrenMap.actionsSizer.hideButton(n),this},hideToolbar(n){return this.childrenMap.toolbarSizer.hideButton(n),this},hideLeftToolbar(n){return this.childrenMap.leftToolbarSizer.hideButton(n),this},addChoice(n){var t=this.childrenMap.choicesSizer;return t&&t.addButton(n),this},addAction(n){return this.childrenMap.actionsSizer.addButton(n),this},addToolbar(n){return this.childrenMap.toolbarSizer.addButton(n),this},addLeftToolbar(n){return this.childrenMap.leftToolbarSizer.addButton(n),this},removeChoice(n,t){var e=this.childrenMap.choicesSizer;return e&&e.removeButton(n,t),this},removeAction(n,t){return this.childrenMap.actionsSizer.removeButton(n,t),this},removeToolbar(n,t){return this.childrenMap.toolbarSizer.removeButton(n,t),this},removeLeftToolbar(n,t){return this.childrenMap.leftToolbarSizer.removeButton(n,t),this},clearChoices(n){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(n),this},clearActions(n){return this.childrenMap.actionsSizer.clearButtons(n),this},clearToolbar(n){return this.childrenMap.toolbarSizer.clearButtons(n),this},clearLeftToolbar(n){return this.childrenMap.leftToolbarSizer.clearButtons(n),this},forEachChoice(n,t){var e=this.childrenMap.choicesSizer;return e&&e.forEachButtton(n,t),this},forEachAction(n,t){return this.childrenMap.actionsSizer.forEachButtton(n,t),this},forEachToolbar(n,t){return this.childrenMap.toolbarSizer.forEachButtton(n,t),this},forEachLeftToolbar(n,t){return this.childrenMap.leftToolbarSizer.forEachButtton(n,t),this},setAllButtonsEnable(n){return n===void 0&&(n=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(n),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(n),this.childrenMap.actionsSizer&&this.setActionEnable(n),this.childrenMap.choicesSizer&&this.setChoiceEnable(n),this},getChoicesButtonStates(){var n=this.childrenMap.choicesSizer;return n?n.getAllButtonsState():{}},getChoicesButtonState(n){var t=this.childrenMap.choicesSizer;return n===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(n):!1},setChoicesButtonState(n,t){var e=this.childrenMap.choicesSizer;return e&&e.setButtonState(n,t),this},clearChoicesButtonStates(){var n=this.childrenMap.choicesSizer;return n&&n.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var n=this.childrenMap.choicesSizer;return n?n.getSelectedButtonName():""},setChoicesSelectedButtonName(n){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(n),this}},st=Phaser.Utils.Objects.GetValue;class pr extends ct{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexDialog",this.eventEmitter=st(e,"eventEmitter",this);var a=st(e,"background",void 0),i=st(e,"title",void 0),s=st(e,"toolbar",void 0),h=st(e,"toolbarBackground",void 0),r=st(e,"leftToolbar",void 0),o=st(e,"leftToolbarBackground",void 0),u=st(e,"content",void 0),l=st(e,"description",void 0),f,v=st(e,"choices",void 0),d=st(e,"choicesBackground",void 0),c,p=st(e,"actions",void 0),g=st(e,"actionsBackground",void 0),x=st(e,"click",void 0);a&&this.addBackground(a);var m;s&&(m=new Ht(t,{groupName:"toolbar",background:h,buttons:s,orientation:0,space:{item:st(e,"space.toolbarItem",0)},click:x,eventEmitter:this.eventEmitter}));var y;if(r&&(y=new Ht(t,{groupName:"leftToolbar",background:o,buttons:r,orientation:0,space:{item:st(e,"space.leftToolbarItem",0)},click:x,eventEmitter:this.eventEmitter})),i||s||r){var T=!!i&&st(e,"expand.title",!0),C=st(e,"align.title","center"),S=i&&!T&&C==="center"||!i&&(s||r),E=!S,P;E?P=new ct(t,{orientation:0}):P=new Ae(t);var M=E?!0:{height:!0};if(y&&P.add(y,{align:"left",expand:M}),i){E&&!T&&C==="right"&&P.addSpace();var A={left:st(e,"space.titleLeft",0),right:st(e,"space.titleRight",0)},R=T?1:0;P.add(i,{align:C,proportion:R,expand:M,padding:A}),E&&!T&&C==="left"&&P.addSpace()}m&&(E&&!i&&P.addSpace(),P.add(m,{align:"right",expand:M}));var O=st(e,"space.title",0),A;(u||l||v||p)&&(A={bottom:O});var R=st(e,"proportion.title",0);this.add(P,{padding:A,proportion:R,expand:!0})}if(u){var F=st(e,"align.content","center"),I=st(e,"space.content",0),A={left:st(e,"space.contentLeft",0),right:st(e,"space.contentRight",0),bottom:l||v||p?I:0},R=st(e,"proportion.content",0),D=st(e,"expand.content",!0);this.add(u,{align:F,padding:A,proportion:R,expand:D})}if(l){var F=st(e,"align.description","center"),N=st(e,"space.description",0),A={left:st(e,"space.descriptionLeft",0),right:st(e,"space.descriptionRight",0),bottom:v||p?N:0},R=st(e,"proportion.description",0),D=st(e,"expand.description",!0);this.add(l,{align:F,padding:A,proportion:R,expand:D})}if(v){var z=st(e,"choicesType","").split("-"),U=Bn(z,"wrap")?_i:Bn(z,"grid")?vr:Ht,W=Bn(z,"radio")?"radio":Bn(z,"checkboxes")?"checkboxes":void 0,w={left:st(e,"space.choicesBackgroundLeft",0),right:st(e,"space.choicesBackgroundRight",0),top:st(e,"space.choicesBackgroundTop",0),bottom:st(e,"space.choicesBackgroundBottom",0)},L=st(e,"space.choice",0);U===Ht?w.item=L:U===_i?(w.item=L,w.line=st(e,"space.choiceLine",L)):(w.column=st(e,"space.choiceColumn",L),w.row=st(e,"space.choiceRow",L));var B={width:st(e,"choicesWidth",void 0),height:st(e,"choicesHeight",void 0),groupName:"choices",buttonsType:W,background:d,buttons:v,space:w,click:x,eventEmitter:this.eventEmitter,setValueCallback:st(e,"choicesSetValueCallback",void 0),setValueCallbackScope:st(e,"choicesSetValueCallbackScope",void 0)};U===Ht&&(B.orientation=Bn(z,"x")?0:1),f=new U(t,B);var b=st(e,"space.choices",0),A={left:st(e,"space.choicesLeft",0),right:st(e,"space.choicesRight",0),bottom:p?b:0},F=st(e,"align.choices","center"),R=st(e,"proportion.choices",0),D=st(e,"expand.choices",!0);this.add(f,{align:F,padding:A,proportion:R,expand:D})}if(p){c=new Ht(t,{groupName:"actions",background:g,buttons:p,orientation:0,space:{item:st(e,"space.action",0)},expand:st(e,"expand.actions",!1),align:st(e,"align.actions","center"),click:x,eventEmitter:this.eventEmitter});var A={left:st(e,"space.actionsLeft",0),right:st(e,"space.actionsRight",0)},R=st(e,"proportion.action",0);this.add(c,{align:"center",padding:A,proportion:R,expand:!0})}Dn(this,"click"),Dn(this,"over"),Dn(this,"out"),Dn(this,"enable"),Dn(this,"disalbe"),this.addChildrenMap("background",a),this.addChildrenMap("title",i),this.addChildrenMap("toolbar",s),this.addChildrenMap("leftToolbar",r),this.addChildrenMap("content",u),this.addChildrenMap("description",l),this.addChildrenMap("choices",f?f.buttons:void 0),this.addChildrenMap("actions",c?c.buttons:void 0),this.addChildrenMap("choicesSizer",f),this.addChildrenMap("actionsSizer",c),this.addChildrenMap("toolbarSizer",m),this.addChildrenMap("leftToolbarSizer",y)}}var Bn=function(n,t){return n.indexOf(t)!==-1},Lc={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},Dn=function(n,t){n.on(`button.${t}`,function(e,a,i,s,h){!Lc.hasOwnProperty(a)||n.emit(`${Lc[a]}.${t}`,e,i,s,h)})};Object.assign(pr.prototype,lB);_.register("dialog",function(n){var t=new pr(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Dialog",pr);class N0 extends pr{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("choices")||(e.choices=[]);var a,i;typeof e.choices=="function"?(a=e.choices,i=void 0,e.choices=[]):(a=e.createChoiceCallback,i=e.createChoiceCallbackScope),super(t,e),this.type="rexChoices",this.setCreateChoiceCallback(a,i)}setCreateChoiceCallback(t,e){return this.createChoiceCallback=t,this.createChoiceCallbackScope=e,this}setChildText(t,e){return typeof t=="string"&&(t=this.childrenMap[t]),t?(e?t.show().setText(e):t.hide(),this):this}setTitle(t){return this.setChildText("title",t),this}setContent(t){return this.setChildText("content",t),this}setDescription(t){return this.setChildText("description",t),this}setChoices(t){var e=this.childrenMap.choices;if(t.length>e.length){var a=this.createChoiceCallback,i=this.createChoiceCallbackScope;if(a)for(var s=0,h=t.length-e.length;s<h;s++){var r;i?r=a.call(i,this.scene):r=a(this.scene),this.addChoice(r)}}for(var s=0,h=e.length;s<h;s++)this.setChildText(e[s],t[s]);return this}setText(t){return t===void 0&&(t={}),this.setTitle(t.title).setContent(t.content).setDescription(t.description).setChoices(t.choices),this}clickChoicePromise(t){t&&this.setText(t).layout();var e=this;return new Promise(function(a,i){e.once("choice.click",function(s,h,r,o){a({button:s,index:h,pointer:r})})})}}_.register("choices",function(n){var t=new N0(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Choices",N0);const St=Phaser.Utils.Objects.GetValue;class Lu extends ct{constructor(t,e){e===void 0&&(e={}),e.orientation=1,super(t,e),this.type="rexHolyGrail";var a=St(e,"background",void 0);a&&this.addBackground(a);var i=St(e,"header",void 0);if(i){var s=St(e,"proportion.header",0),h=St(e,"align.header","center"),r=St(e,"space.header",void 0);typeof r=="number"&&(r={bottom:r});var o=St(e,"expand.header",!0);this.add(i,{proportion:s,align:h,padding:r,expand:o})}var u=new ct(t,{orientation:0});this.add(u,{proportion:1,align:"center",padding:0,expand:!0});var l=St(e,"leftSide",void 0);if(l){var s=St(e,"proportion.leftSide",0),h=St(e,"align.leftSide","center"),r=St(e,"space.leftSide",void 0);typeof r=="number"&&(r={right:r});var o=St(e,"expand.leftSide",!0);u.add(l,{proportion:s,align:h,padding:r,expand:o})}var f=St(e,"content",void 0);if(f){var s=St(e,"proportion.content",1),h=St(e,"align.content","center"),r=St(e,"space.content",void 0),o=St(e,"expand.content",!0);u.add(f,{proportion:s,align:h,padding:r,expand:o})}var v=St(e,"rightSide",void 0);if(v){var s=St(e,"proportion.rightSide",0),h=St(e,"align.rightSide","center"),r=St(e,"space.rightSide",void 0);typeof r=="number"&&(r={left:r});var o=St(e,"expand.rightSide",!0);u.add(v,{proportion:s,align:h,padding:r,expand:o})}var d=St(e,"footer",void 0);if(d){var s=St(e,"proportion.footer",0),h=St(e,"align.footer","center"),r=St(e,"space.footer",void 0);typeof r=="number"&&(r={top:r});var o=St(e,"expand.footer",!0);this.add(d,{proportion:s,align:h,padding:r,expand:o})}this.addChildrenMap("background",a),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",l),this.addChildrenMap("content",f),this.addChildrenMap("rightSide",v),this.addChildrenMap("footer",d)}}_.register("holyGrail",function(n){var t=new Lu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.HolyGrail",Lu);const uB={getButtonsSizer(n){return this.childrenMap[`${n}ButtonsSizer`]},getButton(n,t){var e=this.getButtonsSizer(n);return e?e.getButton(t):void 0},setButtonEnable(n,t,e){return this.getButtonsSizer(n).setButtonEnable(t,e),this},setLeftButtonEnable(n,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(n,t),this},setRightButtonEnable(n,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(n,t),this},setTopButtonEnable(n,t){return this.childrenMap.topButtonsSizer.setButtonEnable(n,t),this},setBottomButtonEnable(n,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(n,t),this},toggleButtonEnable(n,t){return this.getButtonsSizer(n).toggleButtonEnable(t),this},toggleLeftButtonEnable(n){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(n),this},toggleRightButtonEnable(n){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(n),this},toggleTopButtonEnable(n){return this.childrenMap.topButtonsSizer.toggleButtonEnable(n),this},toggleBottomButtonEnable(n){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(n),this},getButtonEnable(n,t){return this.getButtonsSizer(n).getButtonEnable(t)},getLeftButtonEnable(n){return this.childrenMap.leftButtonsSizer.getButtonEnable(n)},getRightButtonEnable(n){return this.childrenMap.rightButtonsSizer.getButtonEnable(n)},getTopButtonEnable(n){return this.childrenMap.topButtonsSizer.getButtonEnable(n)},getBottomButtonEnable(n){return this.childrenMap.bottomButtonsSizer.getButtonEnable(n)},emitButtonClick(n,t){var e=this.getButtonsSizer(n);return e?(e.emitButtonClick(t),this):this},emitLeftButtonClick(n){return this.childrenMap.leftButtonsSizer.emitButtonClick(n),this},emitRightButtonClick(n){return this.childrenMap.rightButtonsSizer.emitButtonClick(n),this},emitTopButtonClick(n){return this.childrenMap.topButtonsSizer.emitButtonClick(n),this},emitBottomButtonClick(n){return this.childrenMap.bottomButtonsSizer.emitButtonClick(n),this},getLeftButton(n){return this.childrenMap.leftButtonsSizer.getButton(n)},getRightButton(n){return this.childrenMap.rightButtonsSizer.getButton(n)},getTopButton(n){return this.childrenMap.topButtonsSizer.getButton(n)},getBottomButton(n){return this.childrenMap.bottomButtonsSizer.getButton(n)},showButton(n,t){return Wi(this.getButton(n,t)),this},showLeftButton(n){return Wi(this.getLeftButton(n)),this},showRightButton(n){return Wi(this.getRightButton(n)),this},showTopButton(n){return Wi(this.getTopButton(n)),this},showBottomButton(n){return Wi(this.getBottomButton(n)),this},hideButton(n,t){return Hi(this.getButton(n,t)),this},hideLeftButton(n){return Hi(this.getLeftButton(n)),this},hideRightButton(n){return Hi(this.getRightButton(n)),this},hideTopButton(n){return Hi(this.getTopButton(n)),this},hideBottomButton(n){return Hi(this.getBottomButton(n)),this},addButton(n,t){return this.getButtonsSizer(n).addButton(t),this},addLeftButton(n){return this.addButton("left",n),this},addRightButton(n){return this.addButton("right",n),this},addTopButton(n){return this.addButton("top",n),this},removeButton(n,t,e){return this.getButtonsSizer(n).removeButton(t,e),this},removeLeftButton(n,t){return this.removeButton("left",n,t),this},removeRightButton(n,t){return this.removeButton("right",n,t),this},removeTopButton(n,t){return this.removeButton("top",n,t),this},removeBottomButton(n,t){return this.removeButton("bottom",n,t),this},clearButtons(n,t){return this.getButtonsSizer(n).clearButtons(t),this},clearLeftButtons(n){return this.clearButtons("left",n),this},clearRightButtons(n){return this.clearButtons("right",n),this},clearTopButtons(n){return this.clearButtons("top",n),this},clearBottomButtonss(n){return this.clearButtons("bottom",n),this},forEachButton(n,t,e){return this.getButtonsSizer(n).forEachButtton(t,e),this},forEachLeftButton(n,t){return this.childrenMap.leftButtonsSizer.forEachButtton(n,t),this},forEachRightButton(n,t){return this.childrenMap.rightButtonsSizer.forEachButtton(n,t),this},forEachTopButton(n,t){return this.childrenMap.topButtonsSizer.forEachButtton(n,t),this},forEachBottomButton(n,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(n,t),this}},Mt=Phaser.Utils.Objects.GetValue;class Fu extends Ri{constructor(t,e){e===void 0&&(e={}),e.column=3,e.row=3,super(t,e),this.type="rexTabs",this.eventEmitter=Mt(e,"eventEmitter",this);var a=Mt(e,"background",void 0),i=Mt(e,"panel",void 0),s=Mt(e,"leftButtons",void 0),h=Mt(e,"leftButtonsBackground",void 0),r,o=Mt(e,"rightButtons",void 0),u=Mt(e,"rightButtonsBackground",void 0),l,f=Mt(e,"topButtons",void 0),v=Mt(e,"topButtonsBackground",void 0),d,c=Mt(e,"bottomButtons",void 0),p=Mt(e,"bottomButtonsBackground",void 0),g,x=Mt(e,"click",void 0);if(a&&this.addBackground(a),i&&this.add(i,1,1,"center",0,!0),s){var m=Mt(e,"space.leftButtonsOffset",0),y=Mt(e,"space.leftButton",0);r=new Ht(t,{groupName:"left",background:h,buttons:s,orientation:1,space:{item:y},align:Mt(e,"align.leftButtons",void 0),click:x,eventEmitter:this.eventEmitter});var T={top:m};this.add(r,0,1,"top",T,!1)}if(o){var C=Mt(e,"space.rightButtonsOffset",0),S=Mt(e,"space.rightButton",0);l=new Ht(t,{groupName:"right",background:u,buttons:o,orientation:1,space:{item:S},align:Mt(e,"align.rightButtons",void 0),click:x,eventEmitter:this.eventEmitter});var T={top:C};this.add(l,2,1,"top",T,!1)}if(f){var E=Mt(e,"space.topButtonsOffset",0),P=Mt(e,"space.topButton",0);d=new Ht(t,{groupName:"top",background:v,buttons:f,orientation:0,space:{item:P},align:Mt(e,"align.topButtons",void 0),click:x,eventEmitter:this.eventEmitter});var T={left:E};this.add(d,1,0,"left",T,!1)}if(c){var M=Mt(e,"space.bottomButtonsOffset",0),O=Mt(e,"space.bottomButton",0);g=new Ht(t,{groupName:"bottom",background:p,buttons:c,orientation:0,space:{item:O},align:Mt(e,"align.bottomButtons",void 0),click:x,eventEmitter:this.eventEmitter});var T={left:M};this.add(g,1,2,"left",T,!1)}this.addChildrenMap("background",a),this.addChildrenMap("panel",i),this.addChildrenMap("leftButtons",s),this.addChildrenMap("rightButtons",o),this.addChildrenMap("topButtons",f),this.addChildrenMap("bottomButtons",c),this.addChildrenMap("leftButtonsSizer",r),this.addChildrenMap("rightButtonsSizer",l),this.addChildrenMap("topButtonsSizer",d),this.addChildrenMap("bottomButtonsSizer",g)}}Object.assign(Fu.prototype,uB);_.register("tabs",function(n){var t=new Fu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Tabs",Fu);const Fc=Phaser.Math.Percent;var Y0=function(n,t,e){var a;return n.y===t.y?a=Fc(e.x,n.x,t.x):n.x===t.x&&(a=Fc(e.y,n.y,t.y)),a},fB=function(n,t,e){if(!!this.enable){xh.x=t,xh.y=e;var a,i;this.reverseAxis?(a=this.getEndPoint(),i=this.getStartPoint()):(a=this.getStartPoint(),i=this.getEndPoint()),this.value=Y0(a,i,xh)}},xh={},Ic=function(n,t,e){if(!!this.enable&&!!n.isDown){mh.x=n.worldX,mh.y=n.worldY;var a,i;this.reverseAxis?(a=this.getEndPoint(),i=this.getStartPoint()):(a=this.getStartPoint(),i=this.getEndPoint());var s=Y0(a,i,mh);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-s)<.1?this.value=s:this.easeValueTo(s)}},mh={},V0=function(n,t){t===void 0&&(t=dB);var e=this.childrenMap.thumb,a=e.x,i=e.y;return ar(e,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,n),t.x=e.x,t.y=e.y,e.x=a,e.y=i,t},dB={};const cB=Phaser.Display.Align.LEFT_CENTER,vB=Phaser.Display.Align.TOP_CENTER;var pB=function(n){if(n===void 0&&(n=gB),this.childrenMap.thumb){var t=this.orientation===0?cB:vB;V0.call(this,t,n)}else this.orientation===0?(n.x=this.innerLeft+1,n.y=this.centerY):(n.x=this.centerX,n.y=this.innerTop+1);return n},gB={};const xB=Phaser.Display.Align.RIGHT_CENTER,mB=Phaser.Display.Align.BOTTOM_CENTER;var yB=function(n){if(n===void 0&&(n=TB),this.childrenMap.thumb){var t=this.orientation===0?xB:mB;V0.call(this,t,n)}else this.orientation===0?(n.x=this.innerRight-1,n.y=this.centerY):(n.x=this.centerX,n.y=this.innerBottom-1);return n},TB={};const wc=Phaser.Math.Linear;var CB=function(n,t,e,a){return a===void 0&&(a=SB),a.x=wc(t.x,e.x,n),a.y=wc(t.y,e.y,n),a},SB={},EB=function(n){var t=this.childrenMap.thumb;if(t===void 0)return this;n===void 0&&(n=this.value);var e,a;return this.reverseAxis?(e=this.getEndPoint(),a=this.getStartPoint()):(e=this.getStartPoint(),a=this.getEndPoint()),CB(n,e,a,t),this.resetChildPositionState(t),this};const PB=Phaser.Display.Align.LEFT_CENTER,MB=Phaser.Display.Align.TOP_CENTER,AB=Phaser.Display.Align.RIGHT_CENTER,OB=Phaser.Display.Align.BOTTOM_CENTER;var RB=function(n){var t=this.childrenMap.indicator;if(t===void 0)return this;n===void 0&&(n=this.value);var e=this.reverseAxis,a,i,s=this.childrenMap.thumb;if(s)if(this.orientation===0){var h=Tt(s);if(e){var r=s.x-h*s.originX;a=this.right-r}else{var r=s.x-h*s.originX,o=r+h;a=o-this.left}}else{var u=xt(s);if(e){var l=s.y-u*s.originY;i=this.bottom-l}else{var l=s.y-u*s.originY,f=l+u;i=f-this.top}}else this.orientation===0?a=this.width*n:i=this.height*n;qi(t,a,i);var v;e?v=this.orientation===0?AB:OB:v=this.orientation===0?PB:MB,t0(t,this,v),this.resetChildPositionState(t)};const Ue=Phaser.Utils.Objects.GetValue,LB=Phaser.Math.Clamp,FB=Phaser.Math.Snap.To;class Rs extends As(ct){constructor(t,e){super(t,e),this.type="rexSlider",this.bootProgressBase(e),this.reverseAxis=Ue(e,"reverseAxis",!1);var a=Ue(e,"background",void 0),i=Ue(e,"track",void 0),s=Ue(e,"indicator",void 0),h=Ue(e,"thumb",void 0);a&&this.addBackground(a),i&&this.add(i,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0}),s&&this.pin(s),h&&this.pin(h);var r=Ue(e,"input",0);switch(typeof r=="string"&&(r=IB[r]),r){case 0:h&&(h.setInteractive(),this.scene.input.setDraggable(h),h.on("drag",fB,this).on("dragstart",function(o){this.eventEmitter.emit("inputstart",o)},this).on("dragend",function(o){this.eventEmitter.emit("inputend",o)},this));break;case 1:this.on("pointerdown",Ic,this).on("pointermove",Ic,this).on("pointerdown",function(o){this.eventEmitter.emit("inputstart",o)},this).on("pointerup",function(o){this.eventEmitter.emit("inputend",o)},this).on("pointerover",function(o){o.isDown&&this.eventEmitter.emit("inputstart",o)},this).on("pointerout",function(o){o.isDown&&this.eventEmitter.emit("inputend",o)},this).setInteractive();break}this.addChildrenMap("background",a),this.addChildrenMap("track",i),this.addChildrenMap("indicator",s),this.addChildrenMap("thumb",h),this.setEnable(Ue(e,"enable",void 0)),this.setGap(Ue(e,"gap",void 0)),this.setValue(Ue(e,"value",0),Ue(e,"min",void 0),Ue(e,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,e,a){return t&&e!==void 0&&(t=t/(a-e)),this.gap=t,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=FB(t,this.gap));var e=this._value;this._value=LB(t,0,1),e!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,e,this.eventEmitter))}runLayout(t,e,a){return this.ignoreLayout?this:(super.runLayout(t,e,a),this.updateThumb(),this.updateIndicator(),this)}}const IB={pan:0,drag:0,click:1,none:-1};var wB={getStartPoint:pB,getEndPoint:yB,updateThumb:EB,updateIndicator:RB};Object.assign(Rs.prototype,wB);_.register("slider",function(n){var t=new Rs(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Slider",Rs);const z0={v:0,vertical:0,y:0,h:1,horizontal:1,x:1},BB=Phaser.Utils.Objects.GetValue;var eo=function(n,t){var e=BB(n,"scrollMode",0);return typeof e=="string"&&(e=z0[e]),e};const de=Phaser.Utils.Objects.GetValue;class io extends ct{constructor(t,e){super(t,e),this.type="rexScrollBar";var a=de(e,"background",void 0),i=de(e,"buttons",void 0),s=de(i,"top",de(i,"left",void 0)),h=de(i,"bottom",de(i,"right",void 0)),r,o=de(e,"slider",void 0);if(a&&this.addBackground(a),s){this.add(s);var u=new jn(s);u.on("intouch",function(){if(!!this.enable){var g=r.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=g}},this)}if(o){o.orientation=this.orientation,o.eventEmitter=this,o.value=null;var l;if(this.orientation===0){var f=de(o,"width",void 0);l=f===void 0?1:0}else{var v=de(o,"height",void 0);l=v===void 0?1:0}r=new Rs(t,o),t.add.existing(r),this.add(r,{proportion:l})}if(h){this.add(h);var u=new jn(h);u.on("intouch",function(){if(!!this.enable){var x=r.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=x}},this)}var d=[s,h];this.addChildrenMap("background",a),this.addChildrenMap("slider",r),this.addChildrenMap("buttons",d);var c=de(e,"valuechangeCallback",null);if(c!==null){var p=de(e,"valuechangeCallbackScope",void 0);this.on("valuechange",c,p)}this.setEnable(de(e,"enable",void 0)),this.setValue(de(e,"value",0)),this.setScrollStep(de(i,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,a){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,a),this}addValue(t,e,a){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,a),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,a){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,a),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}}class DB extends io{constructor(t,e){e===void 0&&(e={});var a=Cs(e);e={slider:a},e.orientation=a.orientation,delete a.orientation,e.background=a.background,delete a.background,e.buttons=a.buttons,delete a.buttons,super(t,e);var i=this.childrenMap.slider;this.addChildrenMap("track",i.childrenMap.track),this.addChildrenMap("indicator",i.childrenMap.indicator),this.addChildrenMap("thumb",i.childrenMap.thumb)}}class bB extends Ai{constructor(t,e){super(e),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,e=this.parent,a=e.dragState;return a.isDown&&(t=e.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,e){this.next()}next_DRAGBEGIN(){var t,e=this.parent,a=e.dragState;return a.isDown?t=a.pointer.getDistance()>=e.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,e){this.next()}next_DRAG(){var t,e=this.parent,a=e.dragState;return a.isUp&&(e.outOfBounds?t="BACK":e.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,e){var a=this.parent,i=a.dragState;i.justMoved&&a.dragging(),this.next()}enter_DRAG(){this.parent.onDragStart()}exit_DRAG(){this.parent.onDragEnd()}next_SLIDE(){var t,e=this.parent,a=e.dragState;return a.isDown?t="DRAG":e.isSliding||(t="IDLE"),t}enter_SLIDE(){this.parent.onSliding()}exit_SLIDE(){this.parent.stop()}update_SLIDE(t,e){this.parent.sliding(t,e),this.next()}next_BACK(){var t,e=this.parent,a=e.dragState;return a.isDown?t="DRAG":e.isPullBack||(t="IDLE"),t}enter_BACK(){this.parent.onPullBack()}exit_BACK(){this.parent.stop()}update_BACK(t,e){this.parent.pullBack(t,e),this.next()}}const Zr=Phaser.Utils.Objects.GetValue,GB=Phaser.Math.Distance.Between;class NB extends kt{constructor(t,e){super(t,e),this._enable=void 0,t.setInteractive(Zr(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Zr(t,"enable",!0)),this.holdThreshold=Zr(t,"holdThreshold",50),this.pointerOutReleaseEnable=Zr(t,"pointerOutRelease",!0),this}boot(){this.parent.on("pointerdown",this.onPointIn,this),this.parent.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&this.parent.on("pointerout",this.onPointOut,this),this.parent.on("pointermove",this.onPointerMove,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Ml(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=GB(this.preX,this.preY,this.x,this.y),e=t/(this.dt*.001);return e}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,e,a){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.localX=e,this.localY=a)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,e,a){!this.enable||!t.isDown||this.pointer!==t||(this.localX=e,this.localY=a)}preupdate(t,e){if(!!this.enable){var a=this.pointer;this.justMoved=!1,a&&!this.isInTouched?(this.x=a.worldX,this.y=a.worldY,this.preX=a.worldX,this.preY=a.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",a,this.localX,this.localY)):a&&this.isInTouched?this.x===a.x&&this.y===a.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=a.worldX,this.y=a.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",a,this.localX,this.localY)):!a&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",a))}}}const yh=Phaser.Utils.Objects.GetValue;class YB{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(yh(t,"value",0)),this.setSpeed(yh(t,"speed",0)),this.setAcceleration(yh(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class VB{constructor(){this.value,this.dir,this.movement=new YB}init(t,e,a,i,s){return this.value=t,this.end=s,s!==void 0?this.dir=t<s:this.dir=e,this.movement.setSpeed(a).setAcceleration(-i),this}stop(){this.movement.reset()}update(t){var e=this.movement.getDeltaValue(t);return this.dir||(e=-e),this.end===void 0?this.value+=e:e===0?this.value=this.end:(this.value+=e,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Yt=Phaser.Utils.Objects.GetValue,zB=Phaser.Math.Clamp;class UB extends kt{constructor(t,e){super(t,e);var a=Yt(e,"enable",!0);this._state=new bB(this,{enable:a,eventEmitter:!1});var i={inputConfig:Yt(e,"inputConfig",void 0),enable:a,pointerOutRelease:Yt(e,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new NB(t,i),this._enable=void 0,this._value=void 0,this._slowDown=new VB;var s=Yt(e,"valuechangeCallback",null);if(s!==null){var h=Yt(e,"valuechangeCallbackScope",void 0);this.on("valuechange",s,h)}if(s=Yt(e,"overmaxCallback",null),s!==null){var h=Yt(e,"overmaxCallbackScope",void 0);this.on("overmax",s,h)}if(s=Yt(e,"overminCallback",null),s!==null){var h=Yt(e,"overminCallbackScope",void 0);this.on("overmin",s,h)}this.resetFromJSON(e),this.boot()}resetFromJSON(t){this.setOrientationMode(Yt(t,"orientation",0)),this.setDragThreshold(Yt(t,"threshold",10)),this.setSlidingDeceleration(Yt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Yt(t,"backDeceleration",2e3));var e=Yt(t,"dragReverse",!1)?-1:1;this.setDragRatio(e);var a=Yt(t,"bounds",void 0);return a?this.setBounds(a):this.setBounds(Yt(t,"max",0),Yt(t,"min",0)),this.setValue(Yt(t,"value",this.maxValue||0)),this.setEnable(Yt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=XB[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRatio(t){return this.dragRatio=t,this}setBounds(t,e){if(Array.isArray(t)){var a=t;t=a[0],e=a[1]}return t<e?(this.minValue=t,this.maxValue=e):(this.minValue=e,this.maxValue=t),this}get value(){return this._value}set value(t){if(t!==this._value){var e=this._value,a=this.overMax(t),i=this.overMin(t);a&&this.emit("overmax",t,e),i&&this.emit("overmin",t,e),this.backEnable||(a&&(t=this.maxValue),i&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,e)}}setValue(t,e){return e===void 0&&(e=!1),e&&(t=zB(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,e){return this.setValue(this.value+t,e),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRatio,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRatio,t}onDragStart(){this.emit("dragstart")}onDragEnd(){this.emit("dragend")}dragging(){this.value+=this.dragDelta}onSliding(){var t=this.value,e=this.dragSpeed;if(e===0){this._slowDown.stop(),this._state.next();return}var a=this.slidingDeceleration;this._slowDown.init(t,e>0,Math.abs(e),a)}sliding(t,e){e*=.001;var a=this._slowDown.update(e).value;this.overMax(a)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(a)?(this.value=this.minValue,this._slowDown.stop()):this.value=a}onPullBack(){var t=this.value,e=this.outOfMinBound?this.minValue:this.maxValue,a=Math.abs(e-t),i=this.backDeceleration,s=Math.sqrt(2*i*a);this._slowDown.init(t,void 0,s,i,e)}pullBack(t,e){e*=.001,this.value=this._slowDown.update(e).value,this._slowDown.isMoving||this._state.next()}stop(){this._slowDown.stop()}}const XB={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Jr=Phaser.Utils.Objects.GetValue;class WB extends kt{constructor(t,e){if(super(t,e),this.parent!==this.scene?this.focusMode=Jr(e,"focus",!1):this.focusMode=!1,this.setSpeed(Jr(e,"speed",.1)),this.setEnable(Jr(e,"enable",!0)),!this.focusMode)this.scene.input.on("wheel",this.onSceneScroll,this);else{var t=this.parent;t.setInteractive(Jr(e,"inputConfig",void 0)).on("wheel",function(i,s,h,r,o){!this.enable||this.scroll(h)},this)}}destroy(){this.focusMode||this.scene.input.off("wheel",this.onSceneScroll,this)}onSceneScroll(t,e,a,i,s,h){!this.enable||this.scroll(i)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}scroll(t){t*=this.speed,this.emit("scroll",t,this.parent,this)}}const Vt=Phaser.Utils.Objects.GetValue;var HB=function(n,t){var e=n.scene,a=eo(t),i=new ct(e,{orientation:a}),s=Vt(t,"child.gameObject",void 0),h=0,r=Vt(t,"slider",void 0),o,u=0,l=Vt(r,"position",0);typeof l=="string"&&(l=kB[l]);var f=l===0,v=Vt(t,"scroller",!0),d,c=Vt(t,"mouseWheelScroller",!1),p;if(s){var g=Vt(t,"space.child",0);if(n.childMargin={},typeof g!="number"){var x=g;a===0?(h={left:Vt(x,"left",0),right:Vt(x,"right",0)},n.childMargin.top=Vt(x,"top",0),n.childMargin.bottom=Vt(x,"bottom",0)):(h={top:Vt(x,"top",0),bottom:Vt(x,"bottom",0)},n.childMargin.top=Vt(x,"left",0),n.childMargin.bottom=Vt(x,"right",0))}else r&&(a===0?h=f?{right:g}:{left:g}:h=f?{bottom:g}:{top:g}),n.childMargin.top=0,n.childMargin.bottom=0;r?(r===!0&&(r={}),r.orientation=i.orientation===0?1:0,o=new DB(e,r),u=Vt(t,"space.slider",0),n.adaptThumbSizeMode=Vt(r,"adaptThumbSize",!1),n.minThumbSize=Vt(r,"minThumbSize",void 0)):(n.adaptThumbSizeMode=!1,n.minThumbSize=void 0),v&&(v===!0&&(v={}),v.orientation=a,d=new UB(s,v)),c&&(p=new WB(s,c)),o&&!f&&i.add(o,{proportion:0,align:"center",padding:u,expand:!0});var m=Vt(t,"child.proportion",1),y=Vt(t,"child.expand",!0);i.add(s,{proportion:m,align:"center",padding:h,expand:y}),o&&f&&i.add(o,{proportion:0,align:"center",padding:u,expand:!0})}return o&&o.on("valuechange",function(T){n.t=T,n.emit("scroll",n)}),d&&d.on("valuechange",function(T){n.childOY=T,n.emit("scroll",n)}),p&&p.on("scroll",function(T){n.addChildOY(-T,!0)}),n.addChildrenMap("child",s),n.addChildrenMap("slider",o),n.addChildrenMap("scroller",d),n.addChildrenMap("mouseWheelScroller",p),i},kB={right:0,left:1,bottom:0,top:1},$B=function(){var n=this.topChildOY,t=this.bottomChildOY,e=this.childrenMap.scroller,a=this.childrenMap.slider;return e&&e.setBounds(t,n),a&&a.setEnable(t!==n),this.updateController(),this.adaptThumbSizeMode&&KB.call(this),this},KB=function(){var n=Math.min(this.childVisibleHeight/this.childHeight,1),t=this.childrenMap.slider,e=t.childrenMap.track,a=t.childrenMap.thumb,i=this.minThumbSize;if(this.scrollMode===0){var s=e.displayHeight*n;i!==void 0&&s<i&&(s=i),qi(a,void 0,s)}else{var h=e.displayWidth*n;i!==void 0&&h<i&&(h=i),qi(a,h,void 0)}ZB.call(this)},ZB=function(){var n=this.childrenMap.slider,t=n.minWidth,e=n.minHeight;n.minWidth=n.width,n.minHeight=n.height,n.layout(),n.minWidth=t,n.minHeight=e},JB=function(){var n=this.childrenMap.scroller,t=this.childrenMap.slider;n&&n.setValue(this.childOY),t&&t.setValue(this.t)};const ti=Phaser.Utils.Objects.GetValue,Bc=Phaser.Math.Clamp;class so extends ct{constructor(t,e){e===void 0&&(e={});var a=eo(e);e.orientation=a===0?1:0,super(t,e),this.type=ti(e,"type","rexScrollable");var i=ti(e,"background",void 0),s=HB(this,e),h=ti(e,"header",void 0),r=ti(e,"footer",void 0);if(i&&this.addBackground(i),h){var o=ti(e,"align.header","center"),u=ti(e,"space.header",0),l;a===0?l={bottom:u}:l={right:u};var f=ti(e,"expand.header",!0);this.add(h,{proportion:0,align:o,padding:l,expand:f})}if(s&&this.add(s,{proportion:1,align:"center",padding:0,expand:!0}),r){var o=ti(e,"align.footer","center"),v=ti(e,"space.footer",0),l;a===0?l={top:v}:l={left:v};var f=ti(e,"expand.footer",!0);this.add(r,{proportion:0,align:o,padding:l,expand:f})}this.addChildrenMap("background",i),this.addChildrenMap("header",h),this.addChildrenMap("footer",r),this.runLayoutFlag=!1}runLayout(t,e,a){return this.ignoreLayout?this:(super.runLayout(t,e,a),this.resizeController(),this.runLayoutFlag||(this.runLayoutFlag=!0,this.setT(0)),this)}set t(t){var e=this.childMargin;if(e.top!==0||e.bottom!==0){var a=this.childrenMap.child,i=a.topChildOY-a.bottomChildOY,s=i+e.top+e.bottom,h=s*t-e.top;t=h/i}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,e=this.childMargin;if(e.top!==0||e.bottom!==0){var a=this.childrenMap.child,i=a.topChildOY-a.bottomChildOY,s=i+e.top+e.bottom,h=i*t+e.top;t=h/s}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get scrollMode(){return this.orientation===0?1:0}setChildOY(t,e){return e===void 0&&(e=!1),e&&(t=Bc(t,this.bottomChildOY,this.topChildOY)),this.childOY=t,this}addChildOY(t,e){return this.setChildOY(this.childOY+t,e),this}setT(t,e){return e===void 0&&(e=!1),e&&(t=Bc(t,0,1)),this.t=t,this}addT(t,e){return this.setT(this.t+t,e),this}scrollToTop(){return this.t=0,this}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var e=this.childrenMap.slider;!e||e.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var e=this.childrenMap.scroller;!e||e.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var e=this.childrenMap.mouseWheelScrollerEnable;!e||e.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var e=this.childrenMap.child;return e.setInteractive(),e.input.dropZone=t,this}}var jB={resizeController:$B,updateController:JB};Object.assign(so.prototype,jB);class U0{constructor(t,e){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,e){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,e),this}setCellContainerAlign(t){return typeof t=="string"&&(t=vn[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var e=this.parent;this._deltaHeight===0&&t!==0?e.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&e.nonZeroDeltaHeightCount--;var a=this._deltaHeight!==t;if(this._deltaHeight=t,a){e.resetTotalRowsHeight();var i=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(i,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(U0.prototype,Aa);const Dc=Phaser.Utils.Objects.GetValue,QB=Phaser.Utils.Array.SpliceOne;class qB{constructor(t,e){this.parent=t,this.cells=[],this.cellPool=new si,this.resetFromJSON(e)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var e=t.cellHeight;e===void 0&&(e=30);var a=t.cellWidth;return a===void 0&&(a=30),this.setDefaultCellHeight(e),this.setDefaultCellWidth(a),this.initCells(Dc(t,"cellsCount",0)),this.setColumnCount(Dc(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var e=this.cells;e.length=t;for(var a=0;a<t;a++)e[a]=null;return this}insertNewCells(t,e){var a=this.cells;if(t===a.length){var i=t+e;a.legth=i;for(var s=t;s<i;s++)a[s]=null}else{var h=[];h.length=e;for(var s=0;s<e;s++)h[s]=null;this.cells.splice(t,0,...h)}return this.resetTotalRowsHeight(),this}removeCells(t,e){for(var a=t+e,i=t;i<a;i++)this.freeCell(i);return a===this.cells.length?this.cells.length=t:(e===1?QB(this.cells,t):this.cells.splice(t,e),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){return this.colCount=t,this.resetTotalRowsHeight(),this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,e){if(this.defaultCellHeightMode){var r=t/this.defaultCellHeight;return e?r=Math.ceil(r):r=Math.floor(r),r}for(var a=this.rowCount,i=t,s,h,r=0;;)if(h=this.getRowHeight(r),i-=h,s=r>=0&&r<a,i>0&&s)r+=1;else{if(i===0)return r;if(e){var o=r;r+=1,s=r>=0&&r<a,s||(r=o)}return r}}widthToColIndex(t,e){var a=t/this.defaultCellWidth;return e?a=Math.ceil(a):a=Math.floor(a),a}colRowToCellIndex(t,e){return t>=this.colCount?null:e*this.colCount+t}rowIndexToHeight(t,e){if(this.defaultCellHeightMode)return(e-t+1)*this.defaultCellHeight;for(var a,i=0,s=t;s<=e;s++)a=this.getRowHeight(s),i+=a;return i}colIndexToWidth(t,e){return(e-t+1)*this.defaultCellWidth}getRowHeight(t){var e=this.colCount;if(e<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var a=0,i,s=0;s<e;s++)i=this.getCellHeight(this.colRowToCellIndex(s,t)),a<i&&(a=i);return a}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var e;if(this.defaultCellHeightMode)e=this.defaultCellHeight;else{var a=this.getCell(t,!1),i=a?a.deltaHeight:0;e=this.defaultCellHeight+i}return e}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,e){if(!this.isValidCellIdx(t))return null;if(e===void 0&&(e=!0),this.cells[t]===null&&e){var a=this.newCell(t);this.cells[t]=a}return this.cells[t]}newCell(t){var e=this.cellPool.pop();return e===null?e=new U0(this):e.setParent(this),e.index=t,e}buildCellIndex(t){t===void 0&&(t=0);for(var e=this.cells,a,i=t,s=e.length;i<s;i++)a=e[i],a&&(a.index=i);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var _B=function(n){var t=this.table,e=this.topTableOY,a=this.bottomTableOY,i=n>this.topTableOY,s=n<this.bottomTableOY;if(this.clampTableOXY){var h=t.rowCount,r=t.heightToRowIndex(this.instHeight,!0);h<r?n=0:i?n=e:s&&(n=a)}return this._tableOY!==n&&(this._tableOY=n),i&&(this.execeedTopState||this.emit("execeedtop",this,n,e)),this.execeedTopState=i,s&&(this.execeedBottomState||this.emit("execeedbottom",this,n,a)),this.execeedBottomState=s,this},tD=function(n){var t=this.table,e=this.leftTableOX,a=this.rightTableOX,i=n>this.leftTableOX,s=n<this.rightTableOX;if(this.clampTableOXY){var h=t.colCount,r=t.widthToColIndex(this.instWidth,!0);h<r?n=0:i?n=e:s&&(n=a)}return this._tableOX!==n&&(this._tableOX=n),i&&(this.execeedLeftState||this.emit("execeedleft",this,n,e)),this.execeedLeftState=i,s&&(this.execeedRightState||this.emit("execeedright",this,n,a)),this.execeedRightState=s,this},X0=function(n){return n.hasOwnProperty("geometryMask")?n.geometryMask:n.bitmapMask};const eD=Phaser.Geom.Intersects.RectangleToRectangle,iD=Phaser.Geom.Rectangle.Overlaps;var sD=function(n,t,e){if(!!t){e===void 0&&(e=n.getAllChildren());for(var a=n.getBounds(),i=X0(t),s,h,r,o=0,u=e.length;o<u;o++)if(s=e[o],!s.hasOwnProperty("isRexContainerLite")&&s!==i&&!!nD(s))if(s.getBounds)switch(h=s.getBounds(h),r=rD(a,h),r){case 4:aD(n,s);break;case 0:eD(a,h)||iD(a,h)?Th(n,s,t):oD(n,s);break;default:Th(n,s,t);break}else Th(n,s,t)}},nD=function(n){if(!n.displayList)return!1;for(;;){var t=n.rexContainer;if(t)if(t.visible){var e=t.parent;if(e){n=e;continue}else return!0}else return!1;else return n.visible}},rD=function(n,t){var e=0,a=t.top,i=t.bottom,s=t.left,h=t.right;return e+=n.contains(s,a)?1:0,e+=n.contains(s,i)?1:0,e+=n.contains(h,a)?1:0,e+=n.contains(h,i)?1:0,e},aD=function(n,t,e){n.setChildMaskVisible(t,!0),t.clearMask&&t.clearMask()},Th=function(n,t,e){n.setChildMaskVisible(t,!0),t.setMask&&t.setMask(e)},oD=function(n,t,e){n.setChildMaskVisible(t,!1),t.clearMask&&t.clearMask()};const Ch=Phaser.Utils.Objects.GetValue,hD={update:0,everyTick:1},W0={setupChildrenMask(n){return n===!1?this:(this.setMaskUpdateMode(Ch(n,"updateMode",0)),this.enableChildrenMask(Ch(n,"padding",0)),this.setMaskLayer(Ch(n,"layer",void 0)),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this):this},setMaskUpdateMode(n){return typeof n=="string"&&(n=hD[n]),this.maskUpdateMode=n,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(n){var t=Ci.call(this,null,this,0,n);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(n){return n===void 0&&(n=!0),this.maskChildrenFlag=n,this},setMaskLayer(n){return this.maskLayer=n,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):sD(this,this.childrenMask),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var n=X0(this.childrenMask);return n.setPosition().resize(),this.resetChildPositionState(n),this}};var lD=function(){if(this.cellsCount!==0){var n=this.table,t=n.heightToRowIndex(-this.tableOY);t<=0&&(t=0);var e=t,a=n.widthToColIndex(-this.tableOX);a<=0&&(a=0);for(var i=a,s=n.colRowToCellIndex(i,e),h=this.bottomBound,r=this.rightBound,o=n.cellsCount-1,u=n.colCount-1,l=this.getCellTLX(i),f=l,v=this.getCellTLY(e);v<h&&s<=o;){if(this.table.isValidCellIdx(s)){var d=n.getCell(s,!0);this.visibleCells.set(d),this.preVisibleCells.contains(d)||this.showCell(d);var c,p;if(this.scrollMode===0?(c=f,p=v):(c=v,p=f),d.cellContainerAlign==null)d.setXY(c,p);else{var g=d.getContainer();ar(g,c,p,d.width,d.height,d.cellContainerAlign),d.setXY(g.x,g.y)}}f<r&&i<u?(f+=n.getColWidth(i),i+=1):(f=l,v+=n.getRowHeight(e),i=a,e+=1),s=n.colRowToCellIndex(i,e)}}},H0=function(n){var t=null,e=n.getContainer();if(e?(t=e,n.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",n,t,this),this.cellContainersPool){var e=n.getContainer();e?t===null?this.cellContainersPool.add(e):t!==e&&(this.cellContainersPool.add(e),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},uD=function(n){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,e=this.tableOX+this.table.colIndexToWidth(0,n-1)+t;return e},fD=function(n){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,e=this.tableOY+this.table.rowIndexToHeight(0,n-1)+t;return e},dD=function(){var n=this.preVisibleCells,t=this.visibleCells;n.iterate(function(e){t.contains(e)||this.hideCell(e)},this)},k0=function(n){if(this.emit("cellinvisible",n),this.cellContainersPool){var t=n.popContainer();t&&this.cellContainersPool.killAndHide(t)}n.destroyContainer()},cD=function(n){return n===void 0&&(n=!1),n&&(bc.call(this),this.hideCells()),bc.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),this},bc=function(){var n=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=n,this.visibleCells.clear()},vD=function(n){var t=this.table.getCell(n,!1);return t&&this.visibleCells.contains(t)},$0=function(n,t){t-=this.y+this.topLeftY,n-=this.x+this.topLeftX;var e=this.tableOY-(this.scrollMode===0?t:n),a=this.tableOX-(this.scrollMode===0?n:t),i=this.table,s=i.heightToRowIndex(-e),h=i.widthToColIndex(-a),r=i.colRowToCellIndex(h,s);return r===null||!this.isCellVisible(r)?null:r},pD=function(n,t){var e=$0.call(this,n,t);if(e!==null)return this.getCellContainer(e)},gD=function(n,t){return this.visibleCells.each(n,t),this},xD=function(n,t){return this.visibleCells.iterate(n,t),this},mD=function(n,t){return this.table.cells.slice().forEach(n,t),this},yD=function(n,t){return this.table.cells.forEach(n,t),this},TD=function(n){var t=this.cellsCount;return t===n?this:(t>n?this.removeCells(n,t-n):this.insertNewCells(t,n-t),this)};const CD=Phaser.Math.Clamp;var SD=function(n,t){return typeof n=="object"&&(n=n.index),t===void 0&&(t=1),t<=0?this:(n=CD(n,0,this.cellsCount),this.table.insertNewCells(n,t),this)},ED=function(n,t){if(typeof n=="object"&&(n=n.index),t===void 0&&(t=1),n<0&&(t+=n,n=0),t<=0)return this;if(n>this.cellsCount)return this;for(var e,a=n,i=n+t;a<i;a++)e=this.getCell(a,!1),e&&(this.visibleCells.contains(e)&&(k0.call(this,e),this.visibleCells.delete(e)),this.preVisibleCells.delete(e));return this.table.removeCells(n,t),this},PD=function(n){return this.table.colCount===n?this:(this.table.setColumnCount(n),this)},MD=function(n,t){return this.setCellsCount(n*t),this.table.setColumnCount(n),this},AD=function(n){var t=this.table.getCell(n,!1);return!t||!t.container?this:(H0.call(this,t),this)},K0={setTableOY:_B,setTableOX:tD,showCells:lD,showCell:H0,getCellTLX:uD,getCellTLY:fD,hideCells:dD,hideCell:k0,updateTable:cD,isCellVisible:vD,pointToCellIndex:$0,pointToCellContainer:pD,eachVisibleCell:gD,iterateVisibleCell:xD,eachCell:mD,iterateCell:yD,setCellsCount:TD,insertNewCells:SD,removeCells:ED,setColumnCount:PD,setGridSize:MD,updateVisibleCell:AD};Object.assign(K0,W0);const OD=Phaser.GameObjects.Group,Gc=Phaser.Structs.Set,ei=Phaser.Utils.Objects.GetValue;class Z0 extends De{constructor(t,e,a,i,s,h){h===void 0&&(h={}),super(t,e,a,i,s),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new Gc,this.preVisibleCells=new Gc,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var r=ei(h,"reuseCellContainer",!1);r&&(this.cellContainersPool=new OD(t));var o=ei(h,"cellVisibleCallback",null);if(o!==null){var u=ei(h,"cellVisibleCallbackScope",void 0);this.on("cellvisible",o,u)}if(o=ei(h,"cellInvisibleCallback",null),o!==null){var u=ei(h,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",o,u)}ei(h,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(ei(h,"mask",void 0)),this.setScrollMode(ei(h,"scrollMode",0)),this.setClampMode(ei(h,"clamplTableOXY",!0));var l,f,v,d=this.scrollMode===0;if(d?(l=h.cellWidth,f=h.cellHeight,v=h.columns):(l=h.cellHeight,f=h.cellWidth,v=ei(h,"rows",h.columns)),v||(v=1),this.expandCellSize=l===void 0,this.expandCellSize){var i=d?this.width:this.height;l=i/v}h.cellWidth=l,h.cellHeight=f,h.columns=v,this.table=new qB(this,h),this.updateTable()}destroy(t){!this.scene||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=RD[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,e){return this.setTableOY(e).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,e){return this.addTableOY(e).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var e=this.table.getCell(t,!1),a;return e&&(a=e.getContainer()),a}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,e){var a;return typeof t=="number"?a=this.table.getCell(t,!0):a=t,a.height=e,this}setCellWidth(t,e){var a;return typeof t=="number"?a=this.table.getCell(t,!0):a=t,a.width=e,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t,e=this.tableWidth,a=this.instWidth;return e>a?t=e-a:t=0,t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,e){return this.width===t&&this.height===e?this:(super.resize(t,e),this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount),this.updateTable(!0),this.layoutChildrenMask(),this.maskChildren(),this)}}Object.assign(Z0.prototype,K0);const RD={v:0,vertical:0,h:1,horizontal:1};var LD=function(n){Object.defineProperty(n,"childOY",{configurable:!0,get:function(){return n.tableOY},set:function(t){n.tableOY=t}}),Object.defineProperty(n,"topChildOY",{get:function(){return n.topTableOY}}),Object.defineProperty(n,"bottomChildOY",{get:function(){return n.bottomTableOY}}),Object.defineProperty(n,"childVisibleHeight",{get:function(){return n.instHeight}}),Object.defineProperty(n,"childHeight",{get:function(){return n.tableHeight}})},FD=function(n){n.on("cellvisible",function(t,h,a){var i=this.createCellContainerCallback,s=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var h;s?h=i.call(s,t,h,a):h=i(t,h,a),h&&(t.cellContainerAlign==null&&h.setOrigin&&h.setOrigin(0),h.isRexSizer&&h.layout()),t.item=void 0,t.items=void 0,t.setContainer(h)},this)},oi=function(n,t,e,a,i,s,h){var r;if(i===void 0?r=a:r=e.pointToCellIndex(a,i),r!=null){var o=e.getCellContainer(r);o&&n.emit(t,o,r,s,h)}},ID=function(n,t){n.on("pointerdown",function(e,a,i,s){oi(this.eventEmitter,"cell.down",n,e.worldX,e.worldY,e,s)},this).on("pointerup",function(e,a,i,s){oi(this.eventEmitter,"cell.up",n,e.worldX,e.worldY,e,s)},this)},wD=function(n,t){n.on("pointermove",Nc,this).on("pointerover",Nc,this).on("pointerout",BD,this)},Nc=function(n,t,e,a){var i=this.childrenMap.child,s=i.pointToCellIndex(n.worldX,n.worldY);if(s!==i.input.lastOverCellIndex){var h=i.input.lastOverCellIndex;i.input.lastOverCellIndex=s,oi(this.eventEmitter,"cell.out",i,h,void 0,n,a),oi(this.eventEmitter,"cell.over",i,s,void 0,n,a)}},BD=function(n,t){var e=this.childrenMap.child,a=e.input.lastOverCellIndex;e.input.lastOverCellIndex=void 0,oi(this.eventEmitter,"cell.out",e,a,void 0,n,t)};const DD=Phaser.Utils.Objects.GetValue;var bD=function(n,t){var e=DD(t,"click",void 0);e!==!1&&(e===void 0&&(e={}),e.threshold=10,n._click=new es(n,e),n._click.on("click",function(a,i,s,h){oi(this.eventEmitter,"cell.click",i,s.worldX,s.worldY,s,h)},this))};const GD=Phaser.Utils.Objects.GetValue;var ND=function(n,t){var e=GD(t,"tap",void 0);e!==!1&&(n._tap=new Ua(n,e),n._tap.on("tap",function(a,i,s){var h=`cell.${a.tapsCount}tap`;oi(this.eventEmitter,h,a.gameObject,a.worldX,a.worldY,s)},this))};const YD=Phaser.Utils.Objects.GetValue;var VD=function(n,t){var e=YD(t,"press",void 0);e!==!1&&(n._press=new Xa(n,e),n._press.on("pressstart",function(a,i,s){oi(this.eventEmitter,"cell.pressstart",n,a.worldX,a.worldY,s)},this).on("pressend",function(a,i,s){oi(this.eventEmitter,"cell.pressend",n,a.worldX,a.worldY,s)},this))};const zD=Phaser.Utils.Objects.GetValue;var UD=function(n,t){var e=zD(t,"swipe",void 0);e!==!1&&(e===void 0&&(e={}),e.dir="4dir",n._swipe=new dr(n,e),n._swipe.on("swipe",function(a,i,s){var h=a.left?"left":a.right?"right":a.up?"up":"down";oi(this.eventEmitter,`cell.swipe${h}`,n,a.worldX,a.worldY,s)},this))},XD=function(n,t){n.setInteractive(),ID.call(this,n,t),wD.call(this,n,t),bD.call(this,n,t),ND.call(this,n,t),VD.call(this,n,t),UD.call(this,n,t)},WD=function(n){n===void 0?this.items.length=0:this.items=n;var t=this.childrenMap.child;return t.setCellsCount(this.items.length),t.updateTable(!0),this.resizeController(),this};const ii=Phaser.Utils.Objects.GetValue;class Iu extends so{constructor(t,e){e===void 0&&(e={});var a=eo(e),i=ii(e,"table",void 0);i===void 0&&(i={}),i.scrollMode=a,i.clamplTableOXY=ii(e,"clamplChildOY",!1);var s=ii(i,"width",void 0),h=ii(i,"height",void 0),r=new Z0(t,0,0,s,h,i);t.add.existing(r);var o,u;a===0?(o=s===void 0?1:0,u=h===void 0):(o=h===void 0?1:0,u=s===void 0),LD(r),r.minWidth=s===void 0?0:void 0,r.minHeight=h===void 0?0:void 0,e.type="rexGridTable",e.child={gameObject:r,proportion:o,expand:u};var l=ii(e,"space",void 0);l&&(l.child=l.table),super(t,e),this.addChildrenMap("table",r),this.addChildrenMap("tableLayer",r.maskLayer),this.eventEmitter=ii(e,"eventEmitter",this);var f=ii(e,"createCellContainerCallback",ve),v=ii(e,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(f,v),FD.call(this,r),this.resizeControllerFlag=!1;var d=a===0?"cellheightchange":"cellwidthchange";r.on(d,function(){this.resizeControllerFlag=!0},this),ii(i,"interactive",!0)&&XD.call(this,r,i),this.setItems(ii(e,"items",[])),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,e){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=e,this}refresh(){return this.setItems(this.items),this}getCell(t){var e=this.childrenMap.child;return e.getCell(t)}getCellContainer(t){var e=this.childrenMap.child;return e.getCellContainer(t)}updateVisibleCell(t){var e=this.childrenMap.child;return e.updateVisibleCell(t)}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}}var HD={setItems:WD};Object.assign(Iu.prototype,HD);_.register("gridTable",function(n){var t=new Iu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.GridTable",Iu);var wu=function(n,t){return n.sameOrientation?n.orientation=t.orientation:n.orientation=t.orientation===0?1:0,n},kD=function(n,t){n.popUp(wu(n.root.easeIn,n))},$D=function(n,t){n.scaleDown(wu(n.root.easeOut,n))};const KD={setTransitInCallback(n){return n===void 0&&(n=kD),this.transitInCallback=n,this},setTransitOutCallback(n){return n===void 0&&(n=$D),this.transitOutCallback=n,this}},ZD={delayCall(n,t,e){return this.timer=M0(this,n,t,e),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var JD=function(n,t){var a=this.childrenMap.subMenu;if(a&&a.parentButton===n)return this;this.collapseSubMenu();var e;this.root.toggleOrientation?e=this.orientation===0?1:0:e=this.orientation;var a=new this.constructor(this.scene,{items:t,orientation:e,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:n});return this.pin(a),this.childrenMap.subMenu=a,this.root.emit("expand",a,n,this),this},jD=function(){var n=this.root;n.emit("collapse",this,this.parentButton,n);var t=n.easeOut.duration;return n.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},QD=function(){var n=this.childrenMap.subMenu;return n===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(n),n.collapse(),this)},J0={expandSubMenu:JD,collapse:jD,collapseSubMenu:QD};Object.assign(J0,KD,ZD);var qD=function(n,t,e,a){var i;return e&&(t.scene=n,a?i=e.call(a,t):i=e(t),t.scene=void 0),i},_D=function(n,t,e,a){var i,s=[],h;if(t&&e)for(var r=0,o=t.length;r<o;r++)i=t[r],i.scene=n,a?h=e.call(a,i,r,t):h=e(i,r,t),i.scene=void 0,s.push(h);return s},tb=function(n){n.on(n.root.expandEventName,function(t,e){if(!this._isPassedEvent){var a=this.root.childrenKey,i=this.items[e][a];i&&this.expandSubMenu(t,i)}},n).on("button.click",function(t,e,a,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,e,a,i),this.root._isPassedEvent=!1)},n).on("button.over",function(t,e,a,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,e,a,i),this.root._isPassedEvent=!1)},n).on("button.out",function(t,e,a,i){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,e,a,i),this.root._isPassedEvent=!1)},n)},Yc=function(n,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=ja(t.orientation)===n.orientation:t.sameOrientation=!0,t.destroy=!1,t},eb=function(){var n=this.root,t=n.easeIn.duration;n.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const se=Phaser.Utils.Objects.GetValue;class no extends Ht{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1);var a=e._rootMenu,i=e._parentMenu,s=e._parentButton,h=se(e,"popup",!0),r=se(e,"items",void 0),o=se(e,"createBackgroundCallback",void 0),u=se(e,"createBackgroundCallbackScope",void 0);e.background=qD(t,r,o,u);var l=se(e,"createButtonCallback",void 0),f=se(e,"createButtonCallbackScope",void 0);if(e.buttons=_D(t,r,l,f),super(t,e),this.type="rexMenu",this.items=r,this.root=a===void 0?this:a,this.isRoot=this.root===this,this.parentMenu=i,this.parentButton=s,this.timer=void 0,this.isRoot){this.isPopUpMode=h;var v=e.bounds;v===void 0&&(v=cn(t)),this.bounds=v,this.subMenuSide=[this.y<v.centerY?nl:oa,this.x<v.centerX?sl:aa];var d=se(e,"subMenuSide",void 0);d!==void 0&&(typeof d=="string"&&(d=ib[d]),this.subMenuSide[this.orientation]=d),this.toggleOrientation=se(e,"toggleOrientation",!1),this.expandEventName=se(e,"expandEvent","button.click"),this.easeIn=Yc(this,se(e,"easeIn",0)),this.easeOut=Yc(this,se(e,"easeOut",0)),this.setTransitInCallback(se(e,"transitIn")),this.setTransitOutCallback(se(e,"transitOut")),this.createBackgroundCallback=o,this.createBackgroundCallbackScope=u,this.createButtonCallback=l,this.createButtonCallbackScope=f,this.childrenKey=se(e,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=se(e,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var c=0,p=0;if(!this.root.easeIn.sameOrientation){var g=wu(this.root.easeIn,this).orientation,x=i?i.orientation:this.orientation,d=this.root.subMenuSide[x];g===0&&d===aa&&(c=1),g===1&&d===oa&&(p=1)}if(h&&this.setOrigin(c,p).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var d=this.root.subMenuSide[i.orientation];switch(d){case aa:this.alignTop(s.top).alignRight(s.left);break;case sl:this.alignTop(s.top).alignLeft(s.right);break;case oa:this.alignLeft(s.left).alignBottom(s.top);break;case nl:this.alignLeft(s.left).alignTop(s.bottom);break}}tb(this),h&&(this.pushIntoBounds(this.root.bounds),eb.call(this))}destroy(t){!this.scene||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}const aa=2,sl=0,oa=3,nl=1,ib={up:oa,down:nl,left:aa,right:sl};Object.assign(no.prototype,J0);_.register("menu",function(n){var t=new no(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Menu",no);var sb={setWrapEnable(n){return n===void 0&&(n=!0),this.listWrapEnable=n,this},setCreateButtonCallback(n){return this.listCreateButtonCallback=n,this},setCreateListBackgroundCallback(n){return this.listCreateBackgroundCallback=n,this},setButtonClickCallback(n){return this.listOnButtonClick=n,this},setButtonOverCallback(n){return this.listOnButtonOver=n,this},setButtonOutCallback(n){return this.listOnButtonOut=n,this},setListExpandDirection(n){return typeof n=="string"&&(n=nb[n]),this.listExpandDirection=n,this},setListEaseInDuration(n){return n===void 0&&(n=0),this.listEaseInDuration=n,this},setListEaseOutDuration(n){return n===void 0&&(n=0),this.listEaseOutDuration=n,this},setListTransitInCallback(n){return this.listTransitInCallback=n,this},settListTransitOutCallback(n){return this.listTransitOutCallback=n,this},setListBounds(n){return this.listBounds=n,this},setListWidth(n){return this.listWidth=n,this},setListHeight(n){return this.listHeight=n,this},setListSize(n,t){return this.setListWidth(n).setListHeight(t),this},setListAlignmentMode(n){return this.listAlignMode=n,this},setListSpace(n){return n===void 0&&(n={}),this.listSpace=n,this},setListDraggable(n){return n===void 0&&(n=!0),this.listDraggable=n,this}};const nb={down:0,up:1};var rb=function(){var n=this.scene,t,e=this.listCreateBackgroundCallback;e&&(t=e.call(this,n),n.add.existing(t));var a=[],i=this.listCreateButtonCallback;if(i)for(var s=this.options,h=0,r=s.length;h<r;h++){var o=i.call(this,n,s[h],h,s);n.add.existing(o),a.push(o)}var u=this.listWidth;u===void 0&&(this.listAlignMode==="text"?u=this.getElement("text").width:u=this.width);var l=this.listHeight,f;return this.listWrapEnable?f=new _i(n,{width:u,height:l,background:t,buttons:a,space:this.listSpace,draggable:this.listDraggable}):f=new Ht(n,{width:u,height:l,orientation:"y",background:t,buttons:a,space:this.listSpace,draggable:this.listDraggable}),n.add.existing(f),f},ab=function(){if(this.listPanel)return this;var n=rb.call(this);n.on("button.over",function(e,a,i,s){this.listOnButtonOver&&this.listOnButtonOver.call(this,e,a,i,s),this.emit("button.over",this,n,e,a,i,s)},this).on("button.out",function(e,a,i,s){this.listOnButtonOut&&this.listOnButtonOut.call(this,e,a,i,s),this.emit("button.out",this,n,e,a,i,s)},this);var t=new O0(n,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:this.getElement(this.listAlignMode),alignTargetY:this,bounds:this.listBounds,anyTouchClose:!0}).on("open",function(){n.on("button.click",function(e,a,i,s){this.listOnButtonClick&&this.listOnButtonClick.call(this,e,a,i,s),this.emit("button.click",this,n,e,a,i,s)},this),this.emit("list.open",this,n)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0},this);return this.listPanel=n,this.dropDownBehavior=t,this.pin(n),this},ob=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this):this},hb=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},j0={openListPanel:ab,closeListPanel:ob,toggleListPanel:hb};Object.assign(j0,sb);const Ft=Phaser.Utils.Objects.GetValue;class ro extends Oi{constructor(t,e){super(t,e),this.type="rexDropDownList",this.timer=void 0,this.setOptions(Ft(e,"options"));var a=Ft(e,"list");this.setWrapEnable(Ft(a,"wrap",!1)),this.setCreateButtonCallback(Ft(a,"createButtonCallback")),this.setCreateListBackgroundCallback(Ft(a,"createBackgroundCallback")),this.setButtonClickCallback(Ft(a,"onButtonClick")),this.setButtonOverCallback(Ft(a,"onButtonOver")),this.setButtonOutCallback(Ft(a,"onButtonOut")),this.setListExpandDirection(Ft(a,"expandDirection")),this.setListEaseInDuration(Ft(a,"easeIn",500)),this.setListEaseOutDuration(Ft(a,"easeOut",100)),this.setListTransitInCallback(Ft(a,"transitIn")),this.settListTransitOutCallback(Ft(a,"transitOut")),this.setListSize(Ft(a,"width"),Ft(a,"height")),this.setListAlignmentMode(Ft(a,"alignParent","text")),this.setListBounds(Ft(a,"bounds")),this.setListSpace(Ft(a,"space")),this.setListDraggable(Ft(a,"draggable",!1)),this.setValueChangeCallback(Ft(e,"setValueCallback"),Ft(e,"setValueCallbackScope")),this.setValue(Ft(e,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,e){return this.valueChangeCallback=t,this.valueChangeCallbackScope=e,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var e=this._value;this._value=t;var a=this.valueChangeCallback,i=this.valueChangeCallbackScope;a&&(i?a.call(i,this,t,e):a(this,t,e))}}}Object.assign(ro.prototype,j0);_.register("dropDownList",function(n){var t=new ro(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.DropDownList",ro);const lb=Phaser.GameObjects.Text;var Bu=function(n){return n instanceof lb};const ub=Phaser.GameObjects.BitmapText;var Q0=function(n){return n instanceof ub};const Pe=0,Ie=1,we=2;var gr=function(n){var t;return Q0(n)?t=we:Bu(n)?t=Pe:t=Ie,t},Du=function(n,t,e){var a=gr(n);switch(a){case Pe:e=n.getWrappedText(t);break;case Ie:e=n.getPenManager(t,e);break;case we:n.maxWidth>0?e=n.setText(t).getTextBounds().wrappedText.split(`
`):e=t.split(`
`);break}return e},fb=function(n,t){n===void 0&&(n=this.startLineIndex),t===void 0&&(t=n+this.pageLinesCount);var e;switch(this.textObjectType){case Pe:case we:e=this.lines.slice(n,t).join(`
`);break;case Ie:var a=this.lines.getLineStartIndex(n),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(a,i,!0);break}return e},Sh=function(n){return Array.isArray(n)?n=n.join(`
`):typeof n=="number"&&(n=n.toString()),n};const db={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(Sh(e));var e=this.sections.join(`
`);this.lines=Du(this.parent,e,this.lines);for(var a=this.totalLinesCount-t,i=Math.ceil(a/this.pageLinesCount),s=0;s<i;s++)this.pageStartIndexes.push(t+s*this.pageLinesCount);return this},setText(n,t){t===void 0&&(t=!0),t&&this.resetPageIdx(),this.clearText();for(var e=Sh(n).split(this.pageBreak),a=0,i=e.length;a<i;a++)this.appendPage(e[a]);return this},appendText(n){var t=this.content+Sh(n);return this.setText(t,!1),this}},cb=Phaser.Math.Clamp,vb={getPage(n){return n===void 0&&(n=this.pageIndex),this.setPageIndex(n).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},resetPageIdx(){return this.pageIndex=-1,this},setPageIndex(n){return n=cb(n,0,this.pageCount-1),this.pageIndex=n,this.startLineIndex=this.pageStartIndexes[n],this.endLineIndex=this.pageStartIndexes[n+1],this}};var bu=function(n,t){var e=gr(n);switch(e){case Pe:var s=n.style,a=s.wordWrapWidth,i=s.wordWrapCallback;s.wordWrapWidth=0,s.wordWrapCallback=void 0,n.setText(t),s.wordWrapWidth=a,s.wordWrapCallback=i;break;case Ie:var s=n.style,h=s.wrapMode;s.wrapMode=0,n.setText(t),s.wrapMode=h;break;case we:var r=n._maxWidth;n._maxWidth=0,n.setText(t),n._maxWidth=r;break}};const pb={showPage(n){return this.displayText(this.getPage(n)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},show(){return this.displayText(this.getLines()),this},showNextLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex+1).getLines()),this},showPreviousLine(){return this.displayText(this.setStartLineIndex(this.startLineIndex-1).getLines()),this},displayText(n){bu(this.parent,n)}};var q0={getLines:fb};Object.assign(q0,db,vb,pb);const bn=Phaser.Utils.Objects.GetValue,gb=Phaser.Math.Clamp;class _0 extends kt{constructor(t,e){super(t,{eventEmitter:!1}),this.textObjectType=gr(this.parent),this.pageStartIndexes=[],this.lines=Du(this.parent,""),this.sections=[],this.resetFromJSON(e)}resetFromJSON(t){return this.setMaxLines(bn(t,"maxLines",void 0)),this.setPageBreak(bn(t,"pageBreak",`\f
`)),this.setText(bn(t,"text","")),this.setStartLineIndex(bn(t,"start",0)),this.setPageIndex(bn(t,"page",-1)),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case Pe:this.lines.length=0;break;case Ie:this.lines.destroy();break;case we:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get startLineIndex(){return this._startLineIndex}set startLineIndex(t){t=gb(t,0,this.totalLinesCount-1),this._startLineIndex=t}setStartLineIndex(t){return this.startLineIndex=t,this}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case Pe:case Ie:var e=this.parent.style.maxLines;e>0?t=e:t=this.totalLinesCount;break;case we:t=this.totalLinesCount;break}return t}get content(){return this.sections.join(this.pageBreak)}}Object.assign(_0.prototype,q0);var xb=function(n,t){var e=gr(n);switch(e){case Pe:n.style.syncFont(n.canvas,n.context),t=n.runWordWrap(t);break;case Ie:t=n.getText(t,void 0,void 0,!0);break;case we:t=n.setText(t).getTextBounds().wrappedText;break}return t};const Zs=Phaser.Utils.Objects.GetFastValue,Eh=Phaser.Utils.Objects.GetValue;class mb extends kt{constructor(t,e){super(t,e),this.timer=null,this.resetFromJSON(e)}resetFromJSON(t){this.setTextWrapEnable(Eh(t,"wrap",!1)),this.setTypeMode(Eh(t,"typeMode",0)),this.setTypingSpeed(Eh(t,"speed",333)),this.setTextCallback=Zs(t,"setTextCallback",null),this.setTextCallbackScope=Zs(t,"setTextCallbackScope",null),this.setTypingContent(Zs(t,"text","")),this.typingIdx=Zs(t,"typingIdx",0),this.insertIdx=Zs(t,"insertIdx",null);var e=Zs(t,"elapsed",null);return e!==null&&this.start(void 0,void 0,this.typingIdx,e),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=yb[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var e=Vc(t);this.textWrapEnable&&(e=xb(this.parent,e)),this._text=e}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIdx===this.textLen}start(t,e,a,i){return t!==void 0&&this.setTypingContent(t),e!==void 0&&(this.speed=e),a===void 0&&(a=0),this.typingIdx=a+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(i)),this}appendText(t){var e=this.text.concat(Vc(t));return this.isTyping?this.setTypingContent(e):this.start(e,void 0,this.textLen),this}stop(t){var e=this.getTimer();return e&&this.freeTimer(),t&&(this.typingIdx=this.textLen,this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)),this}pause(){var t=this.getTimer();return t&&(t.paused=!0),this}resume(){var t=this.getTimer();return t&&(t.paused=!1),this}setTypingContent(t){return this.text=t,this.textLen=this.getTextLength(this.text),this}onTyping(){var t=this.getTypingString(this.text,this.typingIdx,this.textLen,this.typeMode);this.setText(t),this.emit("type"),this.isLastChar?(this.freeTimer(),this.emit("complete",this,this.parent)):(this.timer.delay=this.speed,this.typingIdx++)}getTypingString(t,e,a,i){var s;if(i===0){var h=0,r=e;this.insertIdx=r,s=this.getSubString(t,h,r)}else if(i===1){var r=a,h=r-e;this.insertIdx=0,s=this.getSubString(t,h,r)}else if(i===2){var o=a/2,h=Math.floor(o-e/2),r=h+e;this.insertIdx=e%2?e:0,s=this.getSubString(t,h,r)}else if(i===3){var u=Math.floor(e/2),l;if(u>0){var r=a,h=r-u;l=this.getSubString(t,h,r)}else l="";var f=e-u,v;if(f>0){var h=0,r=h+f;this.insertIdx=r,v=this.getSubString(t,h,r)}else v="",this.insertIdx=0;s=v+l}return s}startTimer(t){this.timer&&this.freeTimer();var e;return t===void 0?e=0:(this.speed,e=t),this.timer=this.scene.time.addEvent({delay:0,startAt:e,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIdx):t=this.setTextCallback(t,this.isLastChar,this.insertIdx)),this.textWrapEnable?bu(this.parent,t):this.parent.setText(t)}getTextLength(t){var e=this.parent,a;return e.getPlainText?a=e.getPlainText(t).length:a=t.length,a}getSubString(t,e,a){var i=this.parent,s;return i.getSubString?s=i.getSubString(t,e,a):s=t.slice(e,a),s}}var Vc=function(n){return Array.isArray(n)?n=n.join(`
`):typeof n=="number"&&(n=n.toString()),n};const yb={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3},zc=Phaser.Utils.Objects.GetValue;class Gu extends Oi{constructor(t,e){e===void 0&&(e={text:Tb(t)}),super(t,e),this.type="rexTextBox";var a=this.childrenMap.text;this.page=new _0(a,zc(e,"page",void 0)),this.typing=new mb(a,zc(e,"typing",e.type)),this.typing.on("complete",this.onPageEnd,this).on("type",this.onType,this),this.textWidth=a.width,this.textHeight=a.height}start(t,e){return this.page.setText(t),e!==void 0&&this.setTypingSpeed(e),this.typeNextPage(),this}typeNextPage(){if(this.isLastPage)this.emit("complete");else{var t=this.page.getNextPage();this.typing.start(t)}return this}pause(){return this.typing.pause(),this}resume(){return this.typing.resume(),this}stop(t){return this.typing.stop(t),this}setTypeSpeed(t){return this.typing.setTypingSpeed(t),this}setTypingSpeed(t){return this.typing.setTypingSpeed(t),this}get isTyping(){return this.typing.isTyping}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}onType(){var t=this.childrenMap.text;(this.textWidth!==t.width||this.textHeight!==t.height)&&(this.textWidth=t.width,this.textHeight=t.height,this.getTopmostSizer().layout()),this.emit("type")}onPageEnd(){this.emit("pageend"),this.isLastPage&&this.emit("complete")}}var Tb=function(n){return n.add.text(0,0,"",{wordWrap:{width:200},maxLines:5})};_.register("textBox",function(n){var t=new Gu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.TextBox",Gu);const Se=Phaser.Utils.Objects.GetValue;class Nu extends ct{constructor(t,e){super(t,e),this.type="rexNumberBar";var a=Se(e,"background",void 0),i=Se(e,"icon",void 0),s=Se(e,"iconMask",void 0),h=Se(e,"slider",void 0),r=Se(e,"text",void 0),o=Se(e,"space.icon",0),u=Se(e,"space.slider",0);if(a&&this.addBackground(a),i){var l;this.orientation===0?(h||r)&&(l={right:o}):(h||r)&&(l={bottom:o}),this.add(i,{proportion:0,align:"center",padding:l}),s&&(s=Ci.call(this,i,i,1))}var f;if(h){h.orientation=this.orientation,h.eventEmitter=this,h.value=null,h.hasOwnProperty("input")||(h.input=-1),f=new Rs(t,h),t.add.existing(f);var l;this.orientation===0?r&&(l={right:u}):r&&(l={bottom:u});var v;if(this.orientation===0){var d=Se(h,"width",void 0);v=d===void 0?1:0}else{var c=Se(h,"height",void 0);v=c===void 0?1:0}this.add(f,{proportion:v,align:"center",padding:l})}r&&this.add(r),this.addChildrenMap("background",a),this.addChildrenMap("icon",i),this.addChildrenMap("iconMask",s),this.addChildrenMap("slider",f),this.addChildrenMap("text",r);var p=Se(e,"valuechangeCallback",null);if(p!==null){var g=Se(e,"valuechangeCallbackScope",void 0);this.on("valuechange",p,g)}this.setEnable(Se(e,"enable",void 0)),this.setValue(Se(e,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){!this.childrenMap.slider||(this.childrenMap.slider.value=t)}setValue(t,e,a){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,e,a),this}addValue(t,e,a){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,e,a),this}getValue(t,e){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,e):0}easeValueTo(t,e,a){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,e,a),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var e;return t.text?e=t.text:e=t.getData("text"),e}set text(t){var e=this.childrenMap.text;e!==void 0&&(e.setText?e.setText(t):e.setData("text",t))}setText(t){return this.text=t,this}}_.register("numberBar",function(n){var t=new Nu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.NumberBar",Nu);_.register("scrollBar",function(n){var t=new io(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.ScrollBar",io);const Ph=Phaser.Utils.Objects.GetValue,Uc={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"};class Yu extends Ae{constructor(t,e){super(t,e),this.type="rexBadge";var a=Ph(e,"background",void 0);a&&this.addBackground(a),this.addChildrenMap("background",a);var i=Ph(e,"main",void 0);i&&this.add(i,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",i);for(var s in Uc){var h=Ph(e,s,void 0);h&&(this.add(h,{key:s,align:Uc[s],expand:!1}),this.addChildrenMap(s,h))}}}_.register("badgeLabel",function(n){var t=new Yu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.BadgeLabel",Yu);const Cb=Ae.prototype.add;var Xc=function(n,t,e,a,i,s,h,r,o){return n.setVisible(!1),Cb.call(this,n,t,e,a,i,s,h,r,o),this};const Sb={add:Xc,addPage:Xc};var Eb=function(n){return n===void 0?null:this.sizerChildren.hasOwnProperty(n)?this.sizerChildren[n]:null};const Wc=De.prototype.setChildVisible;var Pb=function(n,t){this._previousKey=this._currentKey;var e=this.previousPage;e&&(this.swapMode===0?(Wc.call(this,e,!1),this.emit("pageinvisible",e,this._previousKey,this)):e.destroy()),n&&!this.sizerChildren.hasOwnProperty(n)&&this.emit("createpage",n,this),this._currentKey=n;var a=this.currentPage;return a&&(Wc.call(this,a,!0),this.emit("pagevisible",a,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&a.setAlpha(0).fadeIn(t,1)),this},Mb=function(n){return this.sizerChildren.hasOwnProperty(n)},tx={getPage:Eb,swapPage:Pb,hasPage:Mb};Object.assign(tx,Sb);const Hc=Phaser.Utils.Objects.GetValue;class xr extends Ae{constructor(t,e){super(t,e),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Hc(e,"swapMode",0)),this.setFadeInDuration(Hc(e,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=Ab[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(xr.prototype,tx);const Ab={invisible:0,destroy:1};_.register("pages",function(n){var t=new xr(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Pages",xr);const ex=Phaser.Math.Vector3,Ob=Phaser.Math.Matrix4;var kc=new ex,$c=new ex,Kc=new Ob,Rb=function(n,t,e,a,i,s,h){t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),h===void 0&&(h=0),kc.set(t,e,a),$c.set(i,s,h),Kc.fromRotationXYTranslation($c,kc,!0);for(var r=0,o=n.vertices.length;r<o;r++)n.vertices[r].transformMat4(Kc)};const Lb=Phaser.GameObjects.Mesh,Fb=Phaser.Utils.Objects.IsPlainObject,gs=Phaser.Utils.Objects.GetValue,Ib=Phaser.Geom.Mesh.GenerateGridVerts,Mh=Phaser.Math.RadToDeg,ha=Phaser.Math.DegToRad,ix=45,wb=1+1/Math.sin(ha(ix));class sx extends Lb{constructor(t,e,a,i,s,h){Fb(e)&&(h=e,e=gs(h,"x",0),a=gs(h,"y",0),i=gs(h,"key",null),s=gs(h,"frame",null)),super(t,e,a,i,s),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(wb),this.hideCCW=gs(h,"hideCCW",!0);var r=gs(h,"gridWidth",32),o=gs(h,"gridHeight",r);this.resetVerts(r,o)}resetPerspective(){return this.setPerspective(this.width,this.height,ix),this}resetVerts(t,e){if(t!==void 0&&(this.gridWidth=t),e!==void 0&&(this.gridHeight=e),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var a=this.frame.cutWidth,i=this.frame.cutHeight;Ib({mesh:this,texture:this.texture.key,frame:this.frame.name,width:a/this.height,height:i/this.height,widthSegments:Math.ceil(a/this.gridWidth),heightSegments:Math.ceil(i/this.gridHeight),flipY:this.frame.source.isRenderTexture});var s=this.transformInfo;return s&&this.transformVerts(s.x,s.y,s.z,s.rotateX,s.rotateY,s.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Mh(this.rotationX)}set angleX(t){this.rotationX=ha(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Mh(this.rotationY)}set angleY(t){this.rotationY=ha(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Mh(this.rotationZ)}set angleZ(t){this.rotationZ=ha(t)}transformVerts(t,e,a,i,s,h){return t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),h===void 0&&(h=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=e,this.transformInfo.rotateX=i,this.transformInfo.rotateY=s,this.transformInfo.rotateZ=h,Rb(this,t,e,a,i,s,h),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,a=0,i=e.length;a<i;a++)e[a].color=t}setTint(t){return this.tint=t,this}}const Bb=Phaser.GameObjects.RenderTexture,Db=Phaser.Utils.Objects.IsPlainObject,jr=Phaser.Utils.Objects.GetValue;class nx extends sx{constructor(t,e,a,i,s,h){Db(e)&&(h=e,e=jr(h,"x",0),a=jr(h,"y",0),i=jr(h,"width",32),s=jr(h,"height",32));var r=new Bb(t,e,a,i,s).setOrigin(.5);super(t,e,a,r.texture.key,null,h),this.type="rexPerspectiveRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}snapshot(t,e){return e===void 0&&(e={}),e.gameObjects=t,e.renderTexture=this.rt,Fl(e),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}}Phaser.Animations.AnimationState;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var ke=function(n,t,e,a){if(Array.isArray(n))for(var i=!1,s=0,h=n.length;s<h;s++){var r=n[s];if(!(a&&!r)&&(e?i=t.call(e,r,s,n):i=t(r,s,n),i))return}else{var i=!1;for(var o in n){var r=n[o];if(!(a&&!r)&&(e?i=t.call(e,r,o,n):i=t(r,o,n),i))return}}};const Ah=Phaser.Math.RadToDeg,Oh=Phaser.Math.DegToRad;class bb extends De{constructor(t,e,a,i,s,h){super(t,e,a,i,s),this.faces=h,ke(h,function(r){r.setPosition(e,a),this.add(r)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Ah(this.rotationX)}set angleX(t){this.rotationX=Oh(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Ah(this.rotationY)}set angleY(t){this.rotationY=Oh(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Ah(this.rotationZ)}set angleZ(t){this.rotationZ=Oh(t)}setDebug(t,e){return ke(this.faces,function(a){a.setDebug(t,e)},null,!0),this}panX(t){return ke(this.faces,function(e){e.panX(t)},null,!0),this}panY(t){return ke(this.faces,function(e){e.panY(t)},null,!0),this}panZ(t){return ke(this.faces,function(e){e.panZ(t)},null,!0),this}transformVerts(t,e,a,i,s,h){return ke(this.faces,function(r){r.transformVerts(t,e,a,i,s,h)},null,!0),this}forEachFace(t,e,a){return ke(this.faces,t,e,a),this}}const Gb=Phaser.Utils.Objects.IsPlainObject,Nb={key:"__WHITE"},Yb={image:sx,rendertexture:nx};var Zc=function(n,t){t===void 0&&(t=Nb);var e;return Gb(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),e=new Yb[t.type](n,t),n.add.existing(e)):e=t,e},Vb=function(n,t,e){var a;if(e===void 0){a=[];for(var i,s,h=0,r=t.length;h<r;h++)s=t[h],s?i=Zc(n,s):i=null,a.push(i)}else{a={};for(var i,o,h=0,r=e.length;h<r;h++)o=e[h],t.hasOwnProperty(o)?i=Zc(n,t[o]):i=null,a[o]=i}return a};const zb=Phaser.Math.DegToRad,Jc=zb(180);var Ub=function(n,t){var e=t.back;e&&(n.orientation===0?e.transformVerts(0,0,0,0,Jc,0):e.transformVerts(0,0,0,Jc,0,0))};const Rh=Phaser.Utils.Objects.GetValue,Xb=Phaser.Math.Linear;class Wb extends Es{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Rh(t,"ease","Cubic")),this.setFrontToBackDirection(Rh(t,"frontToBack",0)),this.setBackToFrontDirection(Rh(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=jc[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=jc[t]),this.endAngleBF=t===0?-180:180,this}start(t,e){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var a=e+1,i=this.parent;return i.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*a):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*a),super.start(),this}flip(t,e){return this.isRunning?this:(t===void 0&&(t=this.duration),e===void 0&&(e=0),this.start(t,e),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+e+1)%2,this)}flipRight(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,e),this}flipLeft(t,e){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,e),this}updateGameObject(t,e){var a=this.easeFn(e.t),i=Xb(this.startAngle,this.endAngle,a);t.orientation===0?t.angleY=i:t.angleX=i}}const jc={right:0,"left-to-right":0,left:1,"right-to-left":1},Hb=Phaser.Utils.Objects.IsPlainObject,xs=Phaser.Utils.Objects.GetValue,kb=["back","front"];class $b extends bb{constructor(t,e,a,i){Hb(e)&&(i=e,e=xs(i,"x",0),a=xs(i,"y",0));var s=Vb(t,i,kb),h=s.back,r=s.front,o=xs(i,"width"),u=xs(i,"height");if(o===void 0||u===void 0){if(o===void 0){var l=r?r.width:0,f=h?h.width:0;o=Math.max(l,f)}if(u===void 0){var v=r?r.height:0,d=h?h.height:0;u=Math.max(v,d)}}super(t,e,a,o,u,s),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,ke(s,function(p,g){this[`${g}Face`]=p},this);var c=xs(i,"flip",void 0);c!==!1&&(this.flip=new Wb(this,c)),this.setOrientation(xs(i,"orientation",0)),Ub(this,s),this.setFace(xs(i,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,ke(this.faces,function(e){e.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,ke(this.faces,function(e){e.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,ke(this.faces,function(e){e.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=Kb[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=Zb[t]),this.currentFaceIndex=t;var e=t===1,a=e?180:0;this.orientation===0?this.angleY=a:this.angleX=a}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const Kb={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},Zb={front:0,back:1};Phaser.Utils.Objects.GetValue;Phaser.Math.RadToDeg;Phaser.Math.DegToRad;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Angle.ShortestBetween;Phaser.Math.Wrap;Phaser.Math.Linear;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.DegToRad;Phaser.Math.RadToDeg;Phaser.Math.Angle.WrapDegrees;Phaser.Math.Linear;Phaser.Math.Wrap;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;Phaser.Math.Wrap;const Jb=Phaser.Utils.Objects.GetValue;var jb=function(n,t,e){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=Jb(e,"useParentBounds",!1),t.setPosition(n.x,n.y).setVisible(!1),n.pin(t)},rx=function(n,t){if(!n)return!1;for(var e=t.visibleSibling,a=0,i=e.length;a<i;a++)n.setChildVisible(e[a],!0);return e.length=0,n.setChildVisible(t,!1),t.isRunning=!1,!0},Qb=function(n,t){if(!n)return!1;rx(n,t);var e=t.useParentBounds;Fl({gameObjects:n.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:e?n.displayWidth:void 0,height:e?n.displayHeighth:void 0,originX:e?n.originX:void 0,originY:e?n.originY:void 0}),n.setChildVisible(t,!0);for(var a=t.visibleSibling,i=n.children,s=0,h=i.length;s<h;s++){var r=i[s];r.visible&&r!==t&&(n.setChildVisible(r,!1),a.push(r))}return t.isRunning=!0,!0},ax=function(n){return class extends n{constructor(e,a){var i=e.scene;super(i,0,0,1,1,a),i.add.existing(this),jb(e,this,a)}destroy(e){!this.scene||(this.exit(),super.destroy(e))}enter(){var e=Qb(this.rexContainer.parent,this);return e&&this.syncSize(),this}exit(){return rx(this.rexContainer.parent,this),this}}};class ox extends ax(nx){get perspectiveState(){return this.isRunning}}const qb=Phaser.Utils.Objects.GetValue;var _b=function(n){var t=this.scene;this.setSnapshotPadding(qb(n,"snapshotPadding",0)),n=Cs(n),delete n.width,delete n.height,n.front={width:1,height:1},n.back={width:1,height:1};var e=new $b(t,n);t.add.existing(e);var a=e.flip;if(a){var i=this;a.on("start",function(){i.enterPerspectiveMode()}).on("complete",function(){i.exitPerspectiveMode()})}return e};const tG=["front","back"],eG={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var n=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,n),this.setChildVisible(this.childrenMap.back,!n),this},setSnapshotPadding(n){return this.snapshotPadding=n,this},snapshotFace(n){typeof n=="number"&&(n=tG[n]);var t=this.perspectiveCard.faces[n],e=this.childrenMap[n];t.rt.clear();var a=e.visible;e.visible=!0;var i=e.isRexContainerLite?e.getAllVisibleChildren():e;return t.snapshot(i,{padding:this.snapshotPadding}),e.visible=a,this}},Qc=Phaser.Utils.Objects.GetValue;class Vu extends Ae{constructor(t,e){super(t,e),this.type="rexPerspectiveCard";var a=e.back,i=Qc(e,"expand.back",!0);this.add(a,{key:"back",expand:i});var s=e.front,h=Qc(e,"expand.front",!0);this.add(s,{key:"front",expand:h}),this.perspectiveCard=_b.call(this,e),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var e=t===0,a=this.childrenMap.front,i=this.childrenMap.back;this.setChildVisible(a,e),this.setChildVisible(i,!e)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,e,a,i,s,h){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,e,a,i,s,h),this}forEachFace(t,e,a){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,e,a),this}}Object.assign(Vu.prototype,eG);_.register("perspectiveCard",function(n){var t=new Vu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.PerspectiveCard",Vu);var iG=function(n){var t=this.getElement("tabs.buttons");if(!(n>=t.length))return t[n].name},sG=function(n){for(var t=this.getElement("tabs.buttons"),e=0,a=t.length;e<a;e++)if(t[e].name===n)return e};const nG=Phaser.Utils.Objects.IsPlainObject,Lh=Phaser.Utils.Objects.GetValue,rG=Phaser.Utils.String.UUID;var aG=function(n,t,e){if(nG(n)){var a=n;n=Lh(a,"key"),t=Lh(a,"tab"),e=Lh(a,"page")}return n||(n=rG()),t.name=n,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(e,{key:n}),this},oG=function(n,t){var e;if(typeof n=="number"?e=n:e=this.getPageIndex(n),e!=null){var a;t!==void 0&&(a=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(e),a!==void 0&&(this.childrenMap.pages.fadeInDuration=a)}return this},hG=function(n){return this.swapPage(0,n),this},lG=function(n){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,n),this};const uG={swapPage:oG,swapFirstPage:hG,swapLastPage:lG};var fG=function(n,t){typeof n=="number"&&(n=this.getPageKey(n));var e=this.childrenMap.tabs,a=e.getByName(n),i=this.childrenMap.pages,s=i.getElement(n);return!a||!s?this:(i.removeChildrenMap(n),e.removeButton(a,t),i.remove(s,t),this)};const dG={removePage:fG};var cG=function(n){return typeof n=="number"&&(n=this.getPageKey(n)),this.childrenMap.pages.getPage(n)},vG=function(n){var t;return typeof n=="number"?t=n:t=this.getPageIndex(n),this.getElement("tabs.buttons")[t]},hx={getPageKey:iG,getPageIndex:sG,addPage:aG,getPage:cG,getTab:vG};Object.assign(hx,uG,dG);const ms=Phaser.Utils.Objects.GetValue,Qr=ct.prototype.add;class ao extends ct{constructor(t,e){e===void 0&&(e={});var a=ms(e,"tabPosition","top"),i=a==="left"||a==="right"?"x":"y";e.orientation=i,super(t,e),this.type="rexTabPages";var s=ms(e,"background",void 0);s&&this.addBackground(s);var h=ms(e,"pages"),r=new xr(t,h);t.add.existing(r);var o=i==="y",u=o?ms(e,"wrapTabs",!1):!1,l=ms(e,"tabs",void 0);l===void 0&&(l={});var f=u?_i:Ht;l.orientation=o?"x":"y",l.buttonsType="radio";var v=new f(t,l);t.add.existing(v);var d=u?!0:ms(e,"expand.tabs",!1),c=ms(e,"align.tabs","left");switch(a){case"top":case"left":Qr.call(this,v,{proportion:0,expand:d,align:c}),Qr.call(this,r,{proportion:1,expand:!0});break;case"bottom":case"right":Qr.call(this,r,{proportion:1,expand:!0}),Qr.call(this,v,{proportion:0,expand:d,align:c});break}this.addChildrenMap("background",s),this.addChildrenMap("tabs",v),this.addChildrenMap("pages",r),v.on("button.click",function(p){var g=p.name;r.hasPage(g)&&r.swapPage(g)}),v.on("button.statechange",function(p,g,x,m){var y=x?"tab.focus":"tab.blur";this.emit(y,p,p.name)},this),r.on("pagevisible",function(p,g,x){this.emit("page.focus",p,g)}),r.on("pageinvisible",function(p,g,x){this.emit("page.blur",p,g)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}}Object.assign(ao.prototype,hx);_.register("tabPages",function(n){var t=new ao(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.TabPages",ao);class pG extends Qa{constructor(t,e){e===void 0&&(e={}),e.destroy=!1,super(t,e)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const gG={expand(n){if(this.expanded===!0)return this;n===void 0&&(n=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,e=this.childrenMap.child;this.show(e);var a=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();return a.layout(),t.emit("folder.expand",n,this),e.emit("folder.expand",n,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,n),this},collapse(n){if(this.expanded===!1)return this;n===void 0&&(n=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,e=this.childrenMap.child;return t.emit("folder.collapse",n,this),e.emit("folder.collapse",n,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(e,1,1).hide(e);var a=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();a.layout(),this.emit("collapse.complete",this)},this).requestClose(null,n),this},toggle(n){return this.expanded?this.collapse(n):this.expand(n),this}};var xG=function(n,t){lu.popUp.call(n,t,this.expandDirection)},mG=function(n,t){lu.scaleDown.call(n,t,this.expandDirection)};const yG={setTransitionDuration(n){return this.transitionDuration=n,this.childTransition.setTransitInTime(n).setTransitOutTime(n),this},setExpandCallback(n){return n===void 0&&(n=xG.bind(this)),this.childTransition.setTransitInCallback(n),this},setCollapseCallback(n){return n===void 0&&(n=mG.bind(this)),this.childTransition.setTransitOutCallback(n),this}},Xe=Phaser.Utils.Objects.GetValue;class oo extends ct{constructor(t,e){e===void 0&&(e={}),e.hasOwnProperty("orientation")||(e.orientation=1),super(t,e),this.type="rexFolder",this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var a=e.background,i=e.title,s=e.child;a&&this.addBackground(a);var h=this.orientation===1?"left":"top",f=Xe(e,"align.title",h),v=Xe(e,"expand.title",!0);this.add(i,{proportion:0,align:f,expand:v});var r=Xe(e,"toggleByTarget",void 0),o=Xe(e,"toggleClickConfig");r===void 0&&(r=i),r&&a0.onClick.call(r,function(){this.toggle()},this,o),this.childTransition=new pG(s);var u=Xe(e,"customChildOrigin",!1);if(!u){var l=this.rtl?1:0;s.setOrigin(l)}var f=Xe(e,"align.child","left"),v=Xe(e,"expand.child",!0),d=v?1:0;this.add(s,{proportion:d,align:f,expand:v}),this.addChildrenMap("title",i),this.addChildrenMap("child",s),this.addChildrenMap("background",a);var c=e.transition;this.setTransitionDuration(Xe(c,"duration",200)),this.setExpandCallback(Xe(c,"expandCallback",void 0)),this.setCollapseCallback(Xe(c,"collapseCallback",void 0)),this.reLayoutTarget=Xe(e,"reLayoutTarget",void 0);var p=e.onExpandStart;p&&this.on("expand.start",p);var g=e.onExpandComplete;g&&this.on("expand.complete",g);var x=e.onCollapseStart;x&&this.on("collapse.start",x);var m=e.onCollapseComplete;m&&this.on("collapse.complete",m)}}Object.assign(oo.prototype,gG,yG);_.register("folder",function(n){var t=new oo(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Folder",oo);var TG=function(n){return n!==void 0&&(this.text=n),this.lines=Du(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},lx=function(n){return(n-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},ux=function(n){return n*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},CG=function(n){var t=n+this.visibleLinesCount+1,e;switch(this.textObjectType){case Pe:e=this.lines.slice(n,t).join(`
`);break;case Ie:var a=this.lines.getLineStartIndex(n),i=this.lines.getLineEndIndex(t-1);e=this.lines.getSliceTagText(a,i,!0);break;case we:e=this.lines.slice(n,t).join(`
`);break}return e},fx=function(){var n=this.textObject.rexSizer;this.textObject.y+=n.offsetY-n.preOffsetY,n.preOffsetY=n.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&SG.call(this)},SG=function(){if(!!this.textObject.setCrop){var n=this.textObject.rexSizer.offsetY,t,e;n<=0?(t=-n,e=this.height):(t=0,e=this.height-n),this.textObject.setCrop(0,t,this.width,e)}},EG=function(){var n=Math.max(Math.floor(lx.call(this,-this.textOY)),0),t=ux.call(this,n)+this.textOY,e=CG.call(this,n);return bu(this.textObject,e),this.textObject.rexSizer.offsetY=t,fx.call(this),this},PG=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,lr.call(this),this},MG=function(n,t,e){if(e+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===e)){switch(this.textObjectWidth=t,this._textObjectRealHeight=e,this.textObjectType){case Pe:case Ie:n.setFixedSize(t,e);var a=n.style,i=Math.max(t,0);this.textObjectType===Pe?a.wordWrapWidth=i:(a.wrapMode===0&&(a.wrapMode=1),a.wrapWidth=i);break;case we:n.setMaxWidth(t);break}this.setText()}},AG=function(){var n,t,e,a=this.left,i=this.top,s,h,r,o;n=this.textObject,n.rexSizer.hidden||(t=n.rexSizer,e=t.padding,s=a+e.left,h=i+e.top,r=this.width-e.left-e.right,o=this.height-e.top-e.bottom,MG.call(this,n,r,o),ar(n,s,h,r,o,t.align),t.preOffsetY=0,fx.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))};const OG={setText:TG,updateTextObject:EG,preLayout:PG,layoutChildren:AG},qc=Phaser.Utils.Objects.IsPlainObject,Ee=Phaser.Utils.Objects.GetValue,RG=Phaser.Display.Align.TOP_LEFT;class dx extends Os{constructor(t,e,a,i,s,h){qc(e)?(h=e,e=Ee(h,"x",0),a=Ee(h,"y",0),i=Ee(h,"width",void 0),s=Ee(h,"height",void 0)):qc(i)&&(h=i,i=Ee(h,"width",void 0),s=Ee(h,"height",void 0)),super(t,e,a,i,s,h),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this.lines=void 0,this.text=Ee(h,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Ee(h,"clamplTextOY",!0)),this.alwaysScrollable=Ee(h,"alwaysScrollable",!1);var r=Ee(h,"background",void 0),o=Ee(h,"text",void 0);o===void 0&&(o=LG(t)),this.textCropEnable=Ee(h,"textCrop",!!o.setCrop);var u=Ee(h,"textMask",!this.textCropEnable);r&&this.addBackground(r),this.add(o),this.sizerChildren=[o];var l=this.getSizerConfig(o);l.align=RG,l.padding=pn(0),l.expand=!0,this.textObject=o,this.textObjectType=gr(o),l.preOffsetY=0,l.offsetY=0,u&&(this.textMask=Ci.call(this,this.textObject,this)),this.addChildrenMap("background",r),this.addChildrenMap("text",o)}destroy(t){if(!!this.scene){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case Pe:this.lines.length=0;break;case Ie:this.lines.destroy();break;case we:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case Pe:case Ie:var e=this.textObject.style;t=e.metrics.fontSize+e.strokeThickness;break;case we:var a=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*a;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case Pe:case Ie:t=this.textObject.lineSpacing;break;case we:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(lx.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=ux.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var e=this.topTextOY,a=this.bottomTextOY,i=this.textOYExceedTop(t),s=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:i?t=e:s&&(t=a)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,s&&(this.execeedBottomState||this.emit("execeedbottom",this,t,a)),this.execeedBottomState=s}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var LG=function(n){return n.add.text(0,0,"")};Object.assign(dx.prototype,OG);var FG=function(n){Object.defineProperty(n,"childOY",{configurable:!0,get:function(){return n.textOY},set:function(t){n.textOY=t}}),Object.defineProperty(n,"topChildOY",{get:function(){return n.topTextOY}}),Object.defineProperty(n,"bottomChildOY",{get:function(){return n.bottomTextOY}}),Object.defineProperty(n,"childVisibleHeight",{get:function(){return n.textObjectHeight}}),Object.defineProperty(n,"childHeight",{get:function(){return n.textHeight}})},IG=function(n){var t=this.childrenMap.child;return t.setText(n),this.resizeController(),this},wG=function(n){return this.setText(this.text+n),this};const mi=Phaser.Utils.Objects.GetValue;class ho extends so{constructor(t,e){e===void 0&&(e={});var a=mi(e,"text",void 0),i=mi(e,"textWidth",void 0),s=mi(e,"textHeight",void 0),h=mi(e,"textCrop",!!a.setCrop),r=mi(e,"textMask",!h),o=mi(e,"content",""),u=new dx(t,{width:i,height:s,text:a,textMask:r,textCrop:h&&!r,content:o,clamplTextOY:mi(e,"clamplChildOY",!1),alwaysScrollable:mi(e,"alwaysScrollable",!1)});t.add.existing(u);var l=i===void 0?1:0,f=s===void 0;FG(u),e.scrollMode=0,e.type="rexTextArea",e.child={gameObject:u,proportion:l,expand:f};var v=mi(e,"space",void 0);v&&(v.child=v.text),super(t,e),this.addChildrenMap("text",a)}get text(){return this.childrenMap.child.text}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}var BG={setText:IG,appendText:wG};Object.assign(ho.prototype,BG);_.register("textArea",function(n){var t=new ho(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.TextArea",ho);var DG=function(){if(this.rexSizer.hidden)return 0;var n,t=this.child,e=t.rexSizer;return e.hidden?n=0:this.scrollMode===0?n=this.getChildWidth(t):n=0,n},bG=function(){if(this.rexSizer.hidden)return 0;var n,t=this.child,e=t.rexSizer;return e.hidden||this.scrollMode===0?n=0:n=t.isRexSizer?Math.max(t.minHeight,t.childrenHeight):t.hasOwnProperty("minHeight")?t.minHeight:xt(t),n},GG=function(n){return n===void 0&&(n=[]),this.child&&this.child.isRexSizer&&n.push(this.child),n},NG=function(){var n=this.left,t=this.top;this.scrollMode===0?t+=this.childOY:n+=this.childOY,this.child.setPosition(n,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},YG=function(){var n=this.child,t,e;n.rexSizer.hidden||(this.scrollMode===0?t=this.width:e=this.height,n.isRexSizer?n.runLayout(this,t,e):qi(n,t,e),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren())},cx={getChildrenWidth:DG,getChildrenHeight:bG,getChildrenSizers:GG,resetChildPosition:NG,layoutChildren:YG};Object.assign(cx,W0);const _c=Phaser.Utils.Objects.IsPlainObject,We=Phaser.Utils.Objects.GetValue,VG=Phaser.Display.Align.TOP_LEFT;class vx extends Os{constructor(t,e,a,i,s,h){_c(e)?(h=e,e=We(h,"x",0),a=We(h,"y",0),i=We(h,"width",void 0),s=We(h,"height",void 0)):_c(i)&&(h=i,i=We(h,"width",void 0),s=We(h,"height",void 0)),super(t,e,a,i,s,h),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setScrollMode(We(h,"scrollMode",!0)),this.setClampMode(We(h,"clamplChildOY",!0));var r=We(h,"child",void 0),o=We(h,"expand",!0);r.setOrigin&&r.setOrigin(0),this.add(r),this.sizerChildren=[r];var u=this.getSizerConfig(r);u.align=VG,u.expand=o,this.child=r,this.setupChildrenMask(We(h,"mask",void 0))}destroy(t){!this.scene||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=z0[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampChildOY=t,this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get childHeight(){return this.scrollMode===0?xt(this.child):Tt(this.child)}get childWidth(){return this.scrollMode===0?Tt(this.child):xt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get childVisibleHeight(){return this.instHeight}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}get childOY(){return this._childOY}set childOY(t){var e=this.topChildOY,a=this.bottomChildOY,i=this.childOYExceedTop(t),s=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:i?t=e:s&&(t=a)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),i&&(this.execeedTopState||this.emit("execeedtop",this,t,e)),this.execeedTopState=i,s&&(this.execeedBottomState||this.emit("execeedbottom",this,t,a)),this.execeedBottomState=s}setChildOY(t){return this.childOY=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}setChildOYByPercentage(t){return this.t=t,this}}Object.assign(vx.prototype,cx);const Gn=Phaser.Utils.Objects.GetValue;class px extends so{constructor(t,e){e===void 0&&(e={});var a=eo(e),i=Gn(e,"panel",void 0);i===void 0&&(i={}),i.scrollMode=a,i.clamplChildOY=Gn(e,"clamplChildOY",!1);var s=new vx(t,i);t.add.existing(s);var h=Gn(i,"width",void 0),r=Gn(i,"height",void 0),o,u;a===0?(o=h===void 0?1:0,u=r===void 0):(o=r===void 0?1:0,u=h===void 0),e.type="rexScrollablePanel",e.child={gameObject:s,proportion:o,expand:u};var l=Gn(e,"space",void 0);l&&(l.child=l.panel),super(t,e),this.addChildrenMap("panel",s.child),this.addChildrenMap("panelLayer",s.maskLayer)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),gu(this.childrenMap.child,t),this}}_.register("scrollablePanel",function(n){var t=new px(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.ScrollablePanel",px);const qr={popUp:function(n,t){n.popUp(t)},scaleDown:function(n,t){n.scaleDown(t)},fadeIn:function(n,t){n.fadeIn(t)},fadeOut:function(n,t){n.fadeOut(t)}},la=Phaser.Utils.Objects.GetValue;var rl=function(n,t,e){var a=la(e,"reverse",!1),i;if(Ke(n[0]))if(a)for(var h=n.length,s=h-1;s>=0;s--)i=rl(n[s],t,e);else for(var s=0,h=n.length;s<h;s++)i=rl(n[s],t,e);else i=zG(n,t,e);return i},zG=function(n,t,e){var a=la(e,"argsConvert",void 0),i=la(e,"argsConvertScope",void 0),s=n[0];if(Gi=Al(Gi,n,1),a){a===!0&&(a=Ug,i=void 0);for(var h=0,r=Gi.length;h<r;h++)i?Gi[h]=a.call(i,Gi[h],n):Gi[h]=a(Gi[h],n)}var o;typeof s=="string"?(o=t[s],o==null&&(o=la(t,s,null))):o=s;var u=o.apply(t,Gi);return u},Gi=[];const He=Phaser.Utils.Objects.GetValue;class UG extends kt{constructor(t,e){super(t,e);var a=He(e,"clock",void 0);a||(a=new Yg(t)),this.clock=a,this.clock.on("update",this.update,this),this.resetFromJSON(e)}resetFromJSON(t){return this.clock.resetFromJSON(He(t,"clock",void 0)),this.state=He(t,"state",0),this.commands=He(t,"commands",[]),this.scope=He(t,"scope",void 0),this.setTimeUnit(He(t,"timeUnit",0)),this.setDtMode(He(t,"dtMode",0)),this.index=He(t,"index",0),this.nextTime=He(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,e,a){this.stop();var i=He(a,"timeUnit",void 0);i!==void 0&&this.setTimeUnit(i);var s=He(a,"dtMode",void 0);return s!==void 0&&this.setDtMode(s),t=t.filter(function(h){var r=h[0];return!isNaN(r)}).map(function(h){var r=h[0];return typeof r=="string"&&(h[0]=parseFloat(h[0])),h}),this.dtMode===0&&t.sort(function(h,r){var o=h[0],u=r[0];return o>u?1:o<u?-1:0}),this.commands=t,this.scope=e,this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var e=this.commands.length-1;;){var a=this.commands[this.index],i=a[1];if(Ke(i)||(i=Al(XG,a,1)),rl(i,this.scope),this.emit("runcommand",i,this.scope),this.index===e)return this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var e=this.commands[this.index][0];return this.timeUnit===1&&(e=e*1e3),this.dtMode===1&&(e+=t),e}setDtMode(t){return typeof t=="string"&&(t=HG[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=WG[t]),this.timeUnit=t,this}}var XG=[];const WG={ms:0,s:1,sec:1},HG={abs:0,absolute:0,inc:1,increment:1},Nn=Phaser.Utils.Objects.GetValue;class zu extends Oi{constructor(t,e){e===void 0&&(e={text:createDefaultTextObject(t)}),super(t,e),this.type="rexToast",this.setTransitInTime(Nn(e,"duration.in",200)),this.setDisplayTime(Nn(e,"duration.hold",1200)),this.setTransitOutTime(Nn(e,"duration.out",200)),this.setTransitInCallback(Nn(e,"transitIn",Ni.popUp)),this.setTransitOutCallback(Nn(e,"transitOut",Ni.scaleDown)),this.player=new UG(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setDisplayTime(t){return this.displayTime=t,this}setTransitOutTime(t){return this.transitOutTime=t,this}setTransitInTime(t){return this.transitInTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Ni[t]),t){case Ni.popUp:t=qr.popUp;break;case Ni.fadeIn:t=qr.fadeIn;break}return t||(t=ve),this.transitInCallback=t,this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Ni[t]),t){case Ni.scaleDown:t=qr.scaleDown;break;case Ni.fadeOut:t=qr.fadeOut;break}return t||(t=ve),this.transitOutCallback=t,this}setScale(t,e){return e===void 0&&(e=t),this.scaleX0=t,this.scaleY0=e,super.setScale(t,e),this}showMessage(t){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),t===void 0){if(this.messages.length===0)return this;t=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(t),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof t=="string"?this.setText(t):t(this),this.layout();var e=[[0,[this.transitInCallback,this,this.transitInTime]],[this.transitInTime,[ve]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[ve]]];return this.player.load(e,this).once("complete",function(){this.showMessage()},this).start(),this}}const Ni={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};_.register("toast",function(n){var t=new zu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Toast",zu);var kG=function(){return function(n,t,e,a){t!=="panel"&&e.setChildVisible(n,!0)}},$G=function(){return function(n,t,e,a){t!=="panel"&&e.setChildVisible(n,!1)}};const KG={show:kG,hide:$G};var ZG=function(n,t){return t===void 0&&(t=1),function(e,a,i,s){a!=="panel"&&i.fadeChild(e,s?0:n,t)}},JG=function(n,t){return t===void 0&&(t=0),function(e,a,i,s){a!=="panel"&&i.fadeChild(e,s?0:n,t)}};const jG={show:ZG,hide:JG};var tv=function(n,t){return function(e,a,i,s){a!=="panel"&&i.moveChild(e,s?0:n,t)}};const QG={show:tv,hide:tv};var ev=function(n,t){return function(e,a,i,s){a==="panel"&&i.moveChild(e,s?0:n,t)}};const qG={show:ev,hide:ev},Fh={visible:KG,fade:jG,move:QG,"move-panel":qG};var _G=function(n){var t,e;[t,...e]=typeof n=="string"?[n]:n;var a,i;return Fh.hasOwnProperty(t)?(a=Fh[t].show.apply(null,e),i=Fh[t].hide.apply(null,e)):(a=ve,i=ve),{show:a,hide:i}};const tN={showChild(n,t){var e=this.sizerChildren[n];return e&&(this.emit("showchild",e,n,this,t),this.resetChildState(e)),this},hideChild(n,t){var e=this.sizerChildren[n];return e&&(this.emit("hidechild",e,n,this,t),this.resetChildState(e)),this},swapChild(n,t){return this.currentChildKey===n||(this.currentChildKey==="panel"||n==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=n,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(n,t))),this},showPanel(n){return this.swapChild("panel",n),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var n=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(n),this},toggleRightSide(){var n=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(n),this},toggleTopSide(){var n=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(n),this},toggleBottomSide(){var n=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(n),this}},eN=De.prototype.setChildVisible,iN={setChildVisible(n,t){var e;if(typeof n=="string"){var e=n;n=this.sizerChildren[e]}else e=ka(this.sizerChildren,n);return t===void 0&&(t=this.currentChildKey===e),eN.call(this,n,t),this}},sN={fadeChild(n,t,e){var a;return typeof n=="string"?(a=n,n=this.sizerChildren[a]):a=ka(this.sizerChildren,n),t===void 0&&(t=500),e===void 0&&(e=this.currentChildKey===a?1:0),n.fadeIn(t,{start:n.alpha,end:e}),this},fadeChildPromise(n,t,e){return typeof n=="string"&&(n=this.sizerChildren[key]),this.fadeChild(n,t,e),n._fade?Qt(n._fade):Promise.resolve()}},nN={moveChild(n,t,e,a){var i;typeof n=="string"?(i=n,n=this.sizerChildren[i]):i=ka(this.sizerChildren,n),t===void 0&&(t=500);var s=this.currentChildKey===i;if(a===void 0)switch(i){case"leftSide":case"rightSide":a=Tt(n);break;case"topSide":case"bottomSide":a=xt(n);break;default:if(s)switch(this.previousChildKey){case"leftSide":case"rightSide":a=Tt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":a=xt(this.sizerChildren[this.previousChildKey]);break;default:a=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":a=Tt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":a=xt(this.sizerChildren[this.currentChildKey]);break;default:a=0;break}break}var h,r,o,u;if(s)switch(i){case"panel":switch(this.previousChildKey){case"leftSide":h=!0;break;case"rightSide":r=!0;break;case"topSide":o=!0;break;case"bottomSide":u=!0;break}break;case"leftSide":r=!0;break;case"rightSide":h=!0;break;case"topSide":u=!0;break;case"bottomSide":o=!0;break}else switch(i){case"panel":switch(this.currentChildKey){case"leftSide":r=!0;break;case"rightSide":h=!0;break;case"topSide":u=!0;break;case"bottomSide":o=!0;break}break;case"leftSide":h=!0;break;case"rightSide":r=!0;break;case"topSide":o=!0;break;case"bottomSide":u=!0;break}return h?n.moveTo(t,`-=${a}`,void 0,e):r?n.moveTo(t,`+=${a}`,void 0,e):o?n.moveTo(t,void 0,`-=${a}`,e):u?n.moveTo(t,void 0,`+=${a}`,e):n.moveTo(0),this},moveChildPromise(n,t,e,a){return typeof n=="string"&&(n=this.sizerChildren[key]),this.moveChild(n,t,e,a),n._easeMove?Qt(n._easeMove):Promise.resolve()}};var gx={};Object.assign(gx,iN,sN,nN);const ce=Phaser.Utils.Objects.GetValue;class Uu extends Ae{constructor(t,e){super(t,e),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var a=ce(e,"showChildCallback",void 0);if(a)if(Va(a)){var i=ce(e,"showChildCallbackScope",void 0);this.on("showchild",a,i);var s=ce(e,"hideChildCallback",void 0),h=ce(e,"hideChildCallbackScope",void 0);this.on("hidechild",s,h)}else{var r=_G(a);this.on("showchild",r.show),this.on("hidechild",r.hide)}var o=ce(e,"background",void 0),u=ce(e,"panel",void 0),l=ce(e,"leftSide",void 0),f=ce(e,"rightSide",void 0),v=ce(e,"topSide",void 0),d=ce(e,"bottomSide",void 0);if(o&&this.addBackground(o),u&&this.add(u,"panel","center",0,!0),l){var c=ce(e,"expand.left",!0);this.add(l,"leftSide","left-top",0,{height:c})}if(f){var c=ce(e,"expand.right",!0);this.add(f,"rightSide","right-top",0,{height:c})}if(v){var c=ce(e,"expand.top",!0);this.add(v,"topSide","left-top",0,{width:c})}if(d){var c=ce(e,"expand.bottom",!0);this.add(d,"bottomSide","left-bottom",0,{width:c})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}Object.assign(Uu.prototype,tN,gx);_.register("sides",function(n){var t=new Uu(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Sides",Uu);class xx extends Oi{constructor(t,e){e=Pu(t,e),super(t,e),this.type="rexTweaker.Title"}setTitle(t){return t=t?re(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class rN extends xx{constructor(t,e){e===void 0&&(e={}),super(t,e),this.type="rexTweaker.FolderTitle";var a=new ba(t,e.expandedIcon);t.add.existing(a),this.addSpace().add(a,{proportion:0,expand:!1,padding:1}),this.addChildrenMap("expandedIcon",a)}preLayout(){var t=this.childrenMap.expandedIcon;t.resize(1,1)}postResolveSize(t,e){var a=this.childrenMap.expandedIcon,i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(a,"top")-this.getChildOuterPadding(a,"bottom");a.resize(i,i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}setExpandedState(t){t===void 0&&(t=!0);var e=t?"down":"right",a=this.childrenMap.expandedIcon;return a.setDirection(e),this}}var mx=function(n,t){var e=new ku(n,t);return n.add.existing(e),e},Xu=function(n,t,e){return Ji(n,e)};class aN extends oo{constructor(t,e){super(t,e),this.type="rexTweaker.Folder"}setTitle(t){var e=this.childrenMap.title;return e.setTitle(t),this}setBindingTarget(t){var e=this.childrenMap.child;return e.setBindingTarget(t),this}}const Js=Phaser.Utils.Objects.GetValue;var oN=function(n,t,e){var a=Js(e,"title")||{},i=new rN(n,a);n.add.existing(i),i.on("folder.expand",function(){i.setExpandedState(!0)}).on("folder.collapse",function(){i.setExpandedState(!1)});var s={root:Js(e,"root"),styles:Js(e,"tweaker"),space:Js(e,"space")||{}},h=mx(n,s),r=Js(e,"background"),o=Xu(n,t,r),u=new aN(n,{orientation:1,title:i,child:h,background:o,transition:{duration:Js(e,"transition.duration",200)}});return n.add.existing(u),u};const iv=Phaser.Utils.Objects.GetValue;var hN=function(n){var t=this.scene,e=iv(this.styles,"folder")||{};e.tweaker=this.styles,e.root=this.root;var a=oN(t,n,e);delete e.tweaker,delete e.root,this.add(a,{expand:!0}),a.setTitle(n);var i=iv(n,"expanded",!0);i?a.expand(0):a.collapse(0);var s=a.getElement("child");return n.key&&this.root.addChildrenMap(n.key,s),s};class lN extends ao{setBindingTarget(t){for(var e=this.childrenMap.pages.children,a=0,i=e.length;a<i;a++)e[a].setBindingTarget(t);return this}}var uN=function(n,t){var e=new fN(n,t);return n.add.existing(e),e};class fN extends Ei{constructor(t,e){e===void 0&&(e={}),super(t,e);var a=Jh(e,"active");for(var i in a){var s=dN[i]||i,h=a[i];delete a[i],a[s]=h}this.activeStyle=a}modifyStyle(t){for(var e in t)this[e]=t[e];return this}setActiveState(t){if(t===void 0&&(t=!0),this.activeState===t)return this;if(this.activeState=t,t){var e=this.activeStyle,a=Xl(this,e);if(Wl(e,a))return;this.styleSave=a,this.modifyStyle(e)}else{if(!this.styleSave)return this;this.modifyStyle(this.styleSave),this.styleSave=void 0}return this}}const dN={color:"fillColor",alpha:"fillAlpha",strokeColor:"strokeColor",strokeAlpha:"strokeAlpha",strokeWidth:"lineWidth"};var cN=function(n,t){return t=t?re(t):{},t.background=uN(n,t.background),t.text=E0(n,t.text),t.icon!==null&&(t.icon=ya(n,t.icon)),t.action!==null&&(t.action=ya(n,t.action)),t},Wu=function(n,t){t=cN(n,t);var e=new vN(n,t);return n.add.existing(e),e};class vN extends Oi{setActiveState(t){return this.childrenMap.background.setActiveState(t),this}}const _r=Phaser.Utils.Objects.GetValue;var pN=function(n,t,e){var a=new lN(n,e);n.add.existing(a);for(var i=_r(e,"tab"),s={root:_r(e,"root"),styles:_r(e,"tweaker")},h=_r(t,"pages")||[],r=0,o=h.length;r<o;r++){var u=h[r];a.addPage({key:u.title,tab:Wu(n,i).setActiveState(!1).resetDisplayContent({text:u.title}),page:mx(n,s)})}return a.on("tab.focus",function(l,f){l.setActiveState(!0)}).on("tab.blur",function(l,f){l.setActiveState(!1)}),a};const sv=Phaser.Utils.Objects.GetValue;var gN=function(n){var t=this.scene,e=sv(this.styles,"tab")||{};e.tweaker=this.styles,e.root=this.root;var a=pN(t,n,e);delete e.tweaker,delete e.root,this.add(a,{expand:!0});for(var i=sv(n,"pages")||[],s=[],h=0,r=0,o=i.length;r<o;r++){var u=a.getPage(r),l=i[r].show;l&&(h=r);var f=i[r].key;f&&this.root.addChildrenMap(f,u),s.push(u)}return a.swapPage(h,0),s};const al="string",yx="number",Tx="range",Cx="list",xN="buttons",Sx="boolean",mN="toggleSwitch",yN="color";var TN=function(n,t){if(t.view)return t.view;if(t.options)return Cx;switch(typeof n){case"number":return CN(t,"min","max")?Tx:yx;case"string":return al;case"boolean":return Sx;default:return al}},CN=function(n,...t){for(var e=0,a=t.length;e<a;e++)if(n[t[e]]===void 0)return!1;return!0};const SN={setupBinding(){var n=this.childrenMap.inputField;return n.on("valuechange",function(t){!this.bindingTarget||(this.bindingTarget[this.bindTargetKey]=t)},this),this},setBindingTarget(n,t){return this.bindingTarget=n,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue(),this},setBindingTargetKey(n){return this.bindTargetKey=n,this},syncTargetValue(){if(!this.bindingTarget||!this.bindTargetKey)return this;var n=this.childrenMap.inputField;return n.setValue(this.bindingTarget[this.bindTargetKey]),this}},EN={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(!!this.bindingTarget){var n=this.bindingTarget[this.bindTargetKey],t=this.childrenMap.inputField;t.value!==n&&t.setValue(n)}}},nv=Phaser.Utils.Objects.GetValue;class Hu extends ct{constructor(t,e){super(t,e),this.type="rexTweaker.InputRow";var a=e.inputTitle,i=e.inputField,s=e.background,h=nv(e,"proportion.title",1);this.add(a,{proportion:h,expand:!0});var h=nv(e,"proportion.inputField",2);this.add(i,{proportion:h,expand:!0}),s&&this.addBackground(s),this.addChildrenMap("title",a),this.addChildrenMap("inputField",i),this.addChildrenMap("background",s),this.setupBinding()}destroy(t){!this.scene||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var e=this.childrenMap.title;return e.setTitle(t),this}}Object.assign(Hu.prototype,SN,EN);var Ex=function(n,t,e){var a=new xx(n,e);return n.add.existing(a),a};class rs extends ct{get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.emit("valuechange",t))}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this._readOnly}set readOnly(t){this._readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,!0}setTextFormatCallback(t){return this.textFormatCallback=t,this}}class PN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.TextInput";var a=e.inputText,i=cr(t,a);this.add(i,{proportion:1,expand:!0}),this.addChildrenMap("inputText",i),i.on("close",function(){this.setValue(i.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(e),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var rv=function(n,t,e){var a=new PN(n,e);return n.add.existing(a),a.setInputTextReadOnly(!!t.inputTextReadOnly),a};class MN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.NumberInput";var a=e.inputNumber||e.inputText,i=cr(t,a).setNumberInput();this.add(i,{proportion:1,expand:!0}),this.addChildrenMap("inputText",i),i.on("close",function(){this.setValue(i.value)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText(e),super.value=t}}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var AN=function(n,t,e){var a=new MN(n,e);return n.add.existing(a),a.setInputTextReadOnly(!!t.inputTextReadOnly),a},ON=function(n,t){t=t?re(t):{},t.track&&(t.track=Ji(n,t.track)),t.indicator&&(t.indicator=Ji(n,t.indicator));var e=t.thumb;return e&&(t.thumb=Ji(n,e)),t},RN=function(n,t){t=ON(n,t);var e=new Rs(n,t);return n.add.existing(e),e};const Ih=Phaser.Utils.Objects.GetValue,LN=Phaser.Math.Linear,FN=Phaser.Math.Snap.Floor;class IN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.RangeInput";var a=e.slider,i=this.orientation===0?"track.height":"track.width",s=Ih(a,i),h=RN(t,a),l=Ih(e,"proportion.range.slider",2),r=s===void 0;this.add(h,{proportion:l,expand:r});var o=e.inputNumber||e.inputText,u=cr(t,o).setNumberInput(),l=Ih(e,"proportion.range.inputText",1);this.add(u,{proportion:l,expand:!0}),this.addChildrenMap("slider",h),this.addChildrenMap("inputText",u),u.on("close",function(){this.setValue(u.value)},this),h.on("valuechange",function(){var f=LN(this.minValue,this.maxValue,h.value);this.step&&(f=FN(f,this.step,this.minValue)),this.setValue(f)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.textFormatCallback?this.textFormatCallback(t):t;this.childrenMap.inputText.setText("").setText(e),this.childrenMap.slider.setValue(t,this.minValue,this.maxValue),super.value=t}}setRange(t,e,a){return this.minValue=t,this.maxValue=e,this.step=a,this.childrenMap.slider.setGap(a,t,e),this}setInputTextReadOnly(t){return t===void 0&&(t=!0),this.childrenMap.inputText.setReadOnly(t),this}}var wN=function(n,t,e){var a=new IN(n,e);return n.add.existing(a),a.setRange(t.min,t.max,t.step),a.setInputTextReadOnly(!!t.inputTextReadOnly),a},BN=function(n,t){t=t?re(t):{};var e=t.label||t.button,a=t.button||t.label;delete t.label,delete t.button;var i=Pu(n,e);return i.list=t,i.list.createButtonCallback=function(s,h){var r=Wu(s,a).resetDisplayContent({text:h.text});return r},i.list.onButtonOver=function(s,h,r,o){s.setActiveState(!0)},i.list.onButtonOut=function(s,h,r,o){s.setActiveState(!1)},i},DN=function(n,t){t=BN(n,t);var e=new ro(n,t);return n.add.existing(e),e},Px=function(n,t){for(var e=0,a=n.length;e<a;e++){var i=n[e];if(i.value===t)return i.text}},Mx=function(n,t){for(var e=0,a=n.length;e<a;e++){var i=n[e];if(i.text===t)return i.value}};class bN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ListInput";var a=DN(t,e.list);this.add(a,{proportion:1,expand:!0}),this.addChildrenMap("list",a),a.on("button.click",function(i,s,h,r,o,u){var l=Mx(a.options,h.text);this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.childrenMap.list,a=Px(e.options,t);e.resetDisplayContent({text:a}),super.value=t}}setOptions(t){return this.childrenMap.list.setOptions(t),this}}var GN=function(n,t,e){var a=new bN(n,e);return n.add.existing(a),a.setOptions(t.options),a},Ax=function(n,t){var e=new Ht(n,t);return n.add.existing(e),e},NN=function(n,t){for(var e=0,a=n.length;e<a;e++){var i=n[e];!i||i.setActiveState(i.text===t)}};const YN=Phaser.Utils.Objects.GetValue;class VN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ButtonsInput";var a=e.button?re(e.button):{},i=YN(a,"expand",!0);i&&(a.align="center"),delete a.expand;var s=Ax(t,{expand:i});s.buttonConfig=a,this.add(s,{proportion:1,expand:!0}),this.addChildrenMap("list",s),s.on("button.click",function(h,r,o,u){var l=Mx(s.options,h.text);this.setValue(l)},this)}get value(){return this._value}set value(t){if(this._value!==t){var e=this.childrenMap.list,a=Px(e.options,t);NN(e.childrenMap.buttons,a),super.value=t}}setOptions(t){var e=this.childrenMap.list;e.options=t;var a=this.scene,i=e.buttonConfig;e.clearButtons(!0);for(var s=0,h=t.length;s<h;s++){var r=t[s],o=Wu(a,i).setActiveState(!1).resetDisplayContent({text:r.text});e.addButton(o)}return this}}var zN=function(n,t,e){var a=new VN(n,e);return n.add.existing(a),a.setOptions(t.options),a},UN=function(n,t){var e=new Ol(n,t);return n.add.existing(e),e};class XN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.CheckboxInput";var a=e.checkbox,i=UN(t,a);this.add(i,{proportion:0,expand:!1}),this.addChildrenMap("checkbox",i),i.on("valuechange",function(s){this.setValue(s)},this)}preLayout(){var t=this.childrenMap.checkbox;t.resize(1,1)}postResolveSize(t,e){var a=this.childrenMap.checkbox,i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(a,"top")-this.getChildOuterPadding(a,"bottom");a.resize(i,i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}get value(){return this._value}set value(t){this._value!==t&&(this.childrenMap.checkbox.setValue(t),super.value=t)}}var WN=function(n,t,e){var a=new XN(n,e);return n.add.existing(a),a},HN=function(n,t){var e=new Rl(n,t);return n.add.existing(e),e};class kN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ToggleSwitchInput";var a=e.toggleSwitch,i=HN(t,a);this.addSpace().add(i,{proportion:0,expand:!1}),this.addChildrenMap("toggleSwitch",i),i.on("valuechange",function(s){this.setValue(s)},this)}preLayout(){var t=this.childrenMap.toggleSwitch;t.resize(1,1)}postResolveSize(t,e){var a=this.childrenMap.toggleSwitch,i=e-this.getInnerPadding("top")-this.getInnerPadding("bottom")-this.getChildOuterPadding(a,"top")-this.getChildOuterPadding(a,"bottom"),s=t-this.getInnerPadding("left")-this.getInnerPadding("right")-this.getChildOuterPadding(a,"left")-this.getChildOuterPadding(a,"right");a.resize(Math.min(i*1.2,s),i),this.proportionLength=void 0,this._childrenWidth=void 0,this.resolveWidth(t,!0)}get value(){return this._value}set value(t){this._value!==t&&(this.childrenMap.toggleSwitch.setValue(t),super.value=t)}}var $N=function(n,t,e){var a=new kN(n,e);return n.add.existing(a),a},KN=function(n,t){t=t?re(t):{};var e=new qa(n,t);return n.add.existing(e),e};class ZN extends rs{constructor(t,e){e===void 0&&(e={}),super(t),this.type="rexTweaker.ColorInput";var a=e.colorInput,i=KN(t,a);this.add(i,{proportion:1,expand:!0}),this.addChildrenMap("colorInput",i),i.on("valuechange",function(s){this.setValue(s)},this)}get value(){return this._value}set value(t){this._value!==t&&(this.childrenMap.colorInput.setValue(t),super.value=t)}}var JN=function(n,t,e){var a=new ZN(n,e);return n.add.existing(a),a},jN=function(n,t,e){var a=t.view,i;switch(a){case al:i=rv;break;case yx:i=AN;break;case Tx:i=wN;break;case Cx:i=GN;break;case xN:i=zN;break;case Sx:i=WN;break;case mN:i=$N;break;case yN:i=JN;break;default:i=Va(a)?a:rv;break}var s=i(n,t,e,s);return s.setTextFormatCallback(t.format),s};const av=Phaser.Utils.Objects.GetValue;var QN=function(n,t,e){var a=av(e,"title")||{},i=Ex(n,t,a),s=jN(n,t,e),h=av(e,"background")||{},r=Ji(n,h),o=new Hu(n,{...t,...e,inputTitle:i,inputField:s,background:r});return n.add.existing(o),o.setTitle(t),o};const qN=Phaser.Utils.Objects.GetValue;var _N=function(n,t,e){arguments.length===1?(e=n,n=e.bindingTarget,t=e.bindingKey):e===void 0&&(e={}),e.title||(e.title=t),e.view||(e.view=TN(n[t],e));var a=qN(this.styles,"inputRow"),i=QN(this.scene,e,a);return this.add(i,{expand:!0}),i.setBindingTarget(n,t),e.monitor&&i.startMonitorTarget(),e.key&&this.root.addChildrenMap(e.key,i),this};const wh=Phaser.Utils.Objects.GetValue;var t3=function(n,t,e){for(var a=wh(e,"title")||{},i=Ex(n,t,a),s=t.buttons,h=wh(e,"button")||{},r=[],o=0,u=s.length;o<u;o++){var l=P0(n,h);r.push(l);var f=s[o];l.resetDisplayContent({text:f.label}),l.callback=f.callback}var v=Ax(n,{buttons:r,expand:r.length===1}),d=wh(e,"background")||{},c=Ji(n,d),p=new Hu(n,{...e,inputTitle:i,inputField:v,background:c});return n.add.existing(p),p.setTitle(t),v.on("button.click",function(g){g.callback(p.bindingTarget)}),p};const e3=Phaser.Utils.Objects.GetValue;var ov=function(n){var t=this.scene;n===void 0&&(n={}),n.hasOwnProperty("label")&&(n.buttons=[{label:n.label,callback:n.callback}],delete n.label,delete n.callback);var e=n.bindingTarget;delete n.bindingTarget;var a=e3(this.styles,"inputRow")||{},i=t3(t,n,a);return this.add(i,{expand:!0}),e&&i.setBindingTarget(e),n.key&&this.root.addChildrenMap(n.key,i),this};const i3=Phaser.Utils.Objects.GetValue;var s3=function(n){var t=this.scene,e=i3(this.styles,"separator"),a=Xu(t,n,e);return this.add(a,{expand:!0}),this},n3=function(n){for(var t=this.sizerChildren,e=0,a=t.length;e<a;e++){var i=t[e];!i.setBindingTarget||i.setBindingTarget(n)}return this},r3={addFolder:hN,addTab:gN,addInput:_N,addButton:ov,addButtons:ov,addSeparator:s3,setBindingTarget:n3};const a3=Phaser.Utils.Objects.GetValue;class ku extends ct{constructor(t,e){e===void 0&&(e={}),e.orientation===void 0&&(e.orientation="y"),super(t,e),this.type="rexTweakerShell",this.styles=a3(e,"styles")||{};var a=Xu(t,void 0,e.background);a&&this.addBackground(a)}}Object.assign(ku.prototype,r3);class Ox extends ku{constructor(t,e){e===void 0&&(e={}),e.styles===void 0&&(e.styles={}),e.background=e.styles.background||{},e.space=e.styles.space||{},super(t,e),this.type="rexTweaker",this.root=e.root||this}}_.register("tweaker",function(n){var t=new Ox(this.scene,n);return this.scene.add.existing(t),t});q(window,"RexPlugins.UI.Tweaker",Ox);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Rx(n){return typeof n>"u"||n===null}function o3(n){return typeof n=="object"&&n!==null}function h3(n){return Array.isArray(n)?n:Rx(n)?[]:[n]}function l3(n,t){var e,a,i,s;if(t)for(s=Object.keys(t),e=0,a=s.length;e<a;e+=1)i=s[e],n[i]=t[i];return n}function u3(n,t){var e="",a;for(a=0;a<t;a+=1)e+=n;return e}function f3(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var d3=Rx,c3=o3,v3=h3,p3=u3,g3=f3,x3=l3,zt={isNothing:d3,isObject:c3,toArray:v3,repeat:p3,isNegativeZero:g3,extend:x3};function Lx(n,t){var e="",a=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(e+='in "'+n.mark.name+'" '),e+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!t&&n.mark.snippet&&(e+=`

`+n.mark.snippet),a+" "+e):a}function Qn(n,t){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=t,this.message=Lx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Qn.prototype=Object.create(Error.prototype);Qn.prototype.constructor=Qn;Qn.prototype.toString=function(t){return this.name+": "+Lx(this,t)};var ne=Qn;function Bh(n,t,e,a,i){var s="",h="",r=Math.floor(i/2)-1;return a-t>r&&(s=" ... ",t=a-r+s.length),e-a>r&&(h=" ...",e=a+r-h.length),{str:s+n.slice(t,e).replace(/\t/g,"\u2192")+h,pos:a-t+s.length}}function Dh(n,t){return zt.repeat(" ",t-n.length)+n}function m3(n,t){if(t=Object.create(t||null),!n.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var e=/\r?\n|\r|\0/g,a=[0],i=[],s,h=-1;s=e.exec(n.buffer);)i.push(s.index),a.push(s.index+s[0].length),n.position<=s.index&&h<0&&(h=a.length-2);h<0&&(h=a.length-1);var r="",o,u,l=Math.min(n.line+t.linesAfter,i.length).toString().length,f=t.maxLength-(t.indent+l+3);for(o=1;o<=t.linesBefore&&!(h-o<0);o++)u=Bh(n.buffer,a[h-o],i[h-o],n.position-(a[h]-a[h-o]),f),r=zt.repeat(" ",t.indent)+Dh((n.line-o+1).toString(),l)+" | "+u.str+`
`+r;for(u=Bh(n.buffer,a[h],i[h],n.position,f),r+=zt.repeat(" ",t.indent)+Dh((n.line+1).toString(),l)+" | "+u.str+`
`,r+=zt.repeat("-",t.indent+l+3+u.pos)+`^
`,o=1;o<=t.linesAfter&&!(h+o>=i.length);o++)u=Bh(n.buffer,a[h+o],i[h+o],n.position-(a[h]-a[h+o]),f),r+=zt.repeat(" ",t.indent)+Dh((n.line+o+1).toString(),l)+" | "+u.str+`
`;return r.replace(/\n$/,"")}var y3=m3,T3=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],C3=["scalar","sequence","mapping"];function S3(n){var t={};return n!==null&&Object.keys(n).forEach(function(e){n[e].forEach(function(a){t[String(a)]=e})}),t}function E3(n,t){if(t=t||{},Object.keys(t).forEach(function(e){if(T3.indexOf(e)===-1)throw new ne('Unknown option "'+e+'" is met in definition of "'+n+'" YAML type.')}),this.options=t,this.tag=n,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=S3(t.styleAliases||null),C3.indexOf(this.kind)===-1)throw new ne('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var qt=E3;function hv(n,t){var e=[];return n[t].forEach(function(a){var i=e.length;e.forEach(function(s,h){s.tag===a.tag&&s.kind===a.kind&&s.multi===a.multi&&(i=h)}),e[i]=a}),e}function P3(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,e;function a(i){i.multi?(n.multi[i.kind].push(i),n.multi.fallback.push(i)):n[i.kind][i.tag]=n.fallback[i.tag]=i}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(a);return n}function ol(n){return this.extend(n)}ol.prototype.extend=function(t){var e=[],a=[];if(t instanceof qt)a.push(t);else if(Array.isArray(t))a=a.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(a=a.concat(t.explicit));else throw new ne("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(s){if(!(s instanceof qt))throw new ne("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ne("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ne("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(s){if(!(s instanceof qt))throw new ne("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ol.prototype);return i.implicit=(this.implicit||[]).concat(e),i.explicit=(this.explicit||[]).concat(a),i.compiledImplicit=hv(i,"implicit"),i.compiledExplicit=hv(i,"explicit"),i.compiledTypeMap=P3(i.compiledImplicit,i.compiledExplicit),i};var Fx=ol,Ix=new qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),wx=new qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),Bx=new qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),Dx=new Fx({explicit:[Ix,wx,Bx]});function M3(n){if(n===null)return!0;var t=n.length;return t===1&&n==="~"||t===4&&(n==="null"||n==="Null"||n==="NULL")}function A3(){return null}function O3(n){return n===null}var bx=new qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:M3,construct:A3,predicate:O3,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function R3(n){if(n===null)return!1;var t=n.length;return t===4&&(n==="true"||n==="True"||n==="TRUE")||t===5&&(n==="false"||n==="False"||n==="FALSE")}function L3(n){return n==="true"||n==="True"||n==="TRUE"}function F3(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var Gx=new qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:R3,construct:L3,predicate:F3,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function I3(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function w3(n){return 48<=n&&n<=55}function B3(n){return 48<=n&&n<=57}function D3(n){if(n===null)return!1;var t=n.length,e=0,a=!1,i;if(!t)return!1;if(i=n[e],(i==="-"||i==="+")&&(i=n[++e]),i==="0"){if(e+1===t)return!0;if(i=n[++e],i==="b"){for(e++;e<t;e++)if(i=n[e],i!=="_"){if(i!=="0"&&i!=="1")return!1;a=!0}return a&&i!=="_"}if(i==="x"){for(e++;e<t;e++)if(i=n[e],i!=="_"){if(!I3(n.charCodeAt(e)))return!1;a=!0}return a&&i!=="_"}if(i==="o"){for(e++;e<t;e++)if(i=n[e],i!=="_"){if(!w3(n.charCodeAt(e)))return!1;a=!0}return a&&i!=="_"}}if(i==="_")return!1;for(;e<t;e++)if(i=n[e],i!=="_"){if(!B3(n.charCodeAt(e)))return!1;a=!0}return!(!a||i==="_")}function b3(n){var t=n,e=1,a;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),a=t[0],(a==="-"||a==="+")&&(a==="-"&&(e=-1),t=t.slice(1),a=t[0]),t==="0")return 0;if(a==="0"){if(t[1]==="b")return e*parseInt(t.slice(2),2);if(t[1]==="x")return e*parseInt(t.slice(2),16);if(t[1]==="o")return e*parseInt(t.slice(2),8)}return e*parseInt(t,10)}function G3(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!zt.isNegativeZero(n)}var Nx=new qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:D3,construct:b3,predicate:G3,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),N3=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Y3(n){return!(n===null||!N3.test(n)||n[n.length-1]==="_")}function V3(n){var t,e;return t=n.replace(/_/g,"").toLowerCase(),e=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:e*parseFloat(t,10)}var z3=/^[-+]?[0-9]+e/;function U3(n,t){var e;if(isNaN(n))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(zt.isNegativeZero(n))return"-0.0";return e=n.toString(10),z3.test(e)?e.replace("e",".e"):e}function X3(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||zt.isNegativeZero(n))}var Yx=new qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Y3,construct:V3,predicate:X3,represent:U3,defaultStyle:"lowercase"}),Vx=Dx.extend({implicit:[bx,Gx,Nx,Yx]}),zx=Vx,Ux=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Xx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function W3(n){return n===null?!1:Ux.exec(n)!==null||Xx.exec(n)!==null}function H3(n){var t,e,a,i,s,h,r,o=0,u=null,l,f,v;if(t=Ux.exec(n),t===null&&(t=Xx.exec(n)),t===null)throw new Error("Date resolve error");if(e=+t[1],a=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(e,a,i));if(s=+t[4],h=+t[5],r=+t[6],t[7]){for(o=t[7].slice(0,3);o.length<3;)o+="0";o=+o}return t[9]&&(l=+t[10],f=+(t[11]||0),u=(l*60+f)*6e4,t[9]==="-"&&(u=-u)),v=new Date(Date.UTC(e,a,i,s,h,r,o)),u&&v.setTime(v.getTime()-u),v}function k3(n){return n.toISOString()}var Wx=new qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:W3,construct:H3,instanceOf:Date,represent:k3});function $3(n){return n==="<<"||n===null}var Hx=new qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:$3}),$u=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function K3(n){if(n===null)return!1;var t,e,a=0,i=n.length,s=$u;for(e=0;e<i;e++)if(t=s.indexOf(n.charAt(e)),!(t>64)){if(t<0)return!1;a+=6}return a%8===0}function Z3(n){var t,e,a=n.replace(/[\r\n=]/g,""),i=a.length,s=$u,h=0,r=[];for(t=0;t<i;t++)t%4===0&&t&&(r.push(h>>16&255),r.push(h>>8&255),r.push(h&255)),h=h<<6|s.indexOf(a.charAt(t));return e=i%4*6,e===0?(r.push(h>>16&255),r.push(h>>8&255),r.push(h&255)):e===18?(r.push(h>>10&255),r.push(h>>2&255)):e===12&&r.push(h>>4&255),new Uint8Array(r)}function J3(n){var t="",e=0,a,i,s=n.length,h=$u;for(a=0;a<s;a++)a%3===0&&a&&(t+=h[e>>18&63],t+=h[e>>12&63],t+=h[e>>6&63],t+=h[e&63]),e=(e<<8)+n[a];return i=s%3,i===0?(t+=h[e>>18&63],t+=h[e>>12&63],t+=h[e>>6&63],t+=h[e&63]):i===2?(t+=h[e>>10&63],t+=h[e>>4&63],t+=h[e<<2&63],t+=h[64]):i===1&&(t+=h[e>>2&63],t+=h[e<<4&63],t+=h[64],t+=h[64]),t}function j3(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var kx=new qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:K3,construct:Z3,predicate:j3,represent:J3}),Q3=Object.prototype.hasOwnProperty,q3=Object.prototype.toString;function _3(n){if(n===null)return!0;var t=[],e,a,i,s,h,r=n;for(e=0,a=r.length;e<a;e+=1){if(i=r[e],h=!1,q3.call(i)!=="[object Object]")return!1;for(s in i)if(Q3.call(i,s))if(!h)h=!0;else return!1;if(!h)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function tY(n){return n!==null?n:[]}var $x=new qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_3,construct:tY}),eY=Object.prototype.toString;function iY(n){if(n===null)return!0;var t,e,a,i,s,h=n;for(s=new Array(h.length),t=0,e=h.length;t<e;t+=1){if(a=h[t],eY.call(a)!=="[object Object]"||(i=Object.keys(a),i.length!==1))return!1;s[t]=[i[0],a[i[0]]]}return!0}function sY(n){if(n===null)return[];var t,e,a,i,s,h=n;for(s=new Array(h.length),t=0,e=h.length;t<e;t+=1)a=h[t],i=Object.keys(a),s[t]=[i[0],a[i[0]]];return s}var Kx=new qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:iY,construct:sY}),nY=Object.prototype.hasOwnProperty;function rY(n){if(n===null)return!0;var t,e=n;for(t in e)if(nY.call(e,t)&&e[t]!==null)return!1;return!0}function aY(n){return n!==null?n:{}}var Zx=new qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:rY,construct:aY}),Ku=zx.extend({implicit:[Wx,Hx],explicit:[kx,$x,Kx,Zx]}),ts=Object.prototype.hasOwnProperty,Ta=1,Jx=2,jx=3,Ca=4,bh=1,oY=2,lv=3,hY=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,lY=/[\x85\u2028\u2029]/,uY=/[,\[\]\{\}]/,Qx=/^(?:!|!!|![a-z\-]+!)$/i,qx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function uv(n){return Object.prototype.toString.call(n)}function ri(n){return n===10||n===13}function Ts(n){return n===9||n===32}function pe(n){return n===9||n===32||n===10||n===13}function sn(n){return n===44||n===91||n===93||n===123||n===125}function fY(n){var t;return 48<=n&&n<=57?n-48:(t=n|32,97<=t&&t<=102?t-97+10:-1)}function dY(n){return n===120?2:n===117?4:n===85?8:0}function cY(n){return 48<=n&&n<=57?n-48:-1}function fv(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"\x85":n===95?"\xA0":n===76?"\u2028":n===80?"\u2029":""}function vY(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}var _x=new Array(256),tm=new Array(256);for(var js=0;js<256;js++)_x[js]=fv(js)?1:0,tm[js]=fv(js);function pY(n,t){this.input=n,this.filename=t.filename||null,this.schema=t.schema||Ku,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function em(n,t){var e={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return e.snippet=y3(e),new ne(t,e)}function at(n,t){throw em(n,t)}function Sa(n,t){n.onWarning&&n.onWarning.call(null,em(n,t))}var dv={YAML:function(t,e,a){var i,s,h;t.version!==null&&at(t,"duplication of %YAML directive"),a.length!==1&&at(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),i===null&&at(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),h=parseInt(i[2],10),s!==1&&at(t,"unacceptable YAML version of the document"),t.version=a[0],t.checkLineBreaks=h<2,h!==1&&h!==2&&Sa(t,"unsupported YAML version of the document")},TAG:function(t,e,a){var i,s;a.length!==2&&at(t,"TAG directive accepts exactly two arguments"),i=a[0],s=a[1],Qx.test(i)||at(t,"ill-formed tag handle (first argument) of the TAG directive"),ts.call(t.tagMap,i)&&at(t,'there is a previously declared suffix for "'+i+'" tag handle'),qx.test(s)||at(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{at(t,"tag prefix is malformed: "+s)}t.tagMap[i]=s}};function ji(n,t,e,a){var i,s,h,r;if(t<e){if(r=n.input.slice(t,e),a)for(i=0,s=r.length;i<s;i+=1)h=r.charCodeAt(i),h===9||32<=h&&h<=1114111||at(n,"expected valid JSON character");else hY.test(r)&&at(n,"the stream contains non-printable characters");n.result+=r}}function cv(n,t,e,a){var i,s,h,r;for(zt.isObject(e)||at(n,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(e),h=0,r=i.length;h<r;h+=1)s=i[h],ts.call(t,s)||(t[s]=e[s],a[s]=!0)}function nn(n,t,e,a,i,s,h,r,o){var u,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,l=i.length;u<l;u+=1)Array.isArray(i[u])&&at(n,"nested arrays are not supported inside keys"),typeof i=="object"&&uv(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&uv(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,l=s.length;u<l;u+=1)cv(n,t,s[u],e);else cv(n,t,s,e);else!n.json&&!ts.call(e,i)&&ts.call(t,i)&&(n.line=h||n.line,n.lineStart=r||n.lineStart,n.position=o||n.position,at(n,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete e[i];return t}function Zu(n){var t;t=n.input.charCodeAt(n.position),t===10?n.position++:t===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):at(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}function Dt(n,t,e){for(var a=0,i=n.input.charCodeAt(n.position);i!==0;){for(;Ts(i);)i===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),i=n.input.charCodeAt(++n.position);if(t&&i===35)do i=n.input.charCodeAt(++n.position);while(i!==10&&i!==13&&i!==0);if(ri(i))for(Zu(n),i=n.input.charCodeAt(n.position),a++,n.lineIndent=0;i===32;)n.lineIndent++,i=n.input.charCodeAt(++n.position);else break}return e!==-1&&a!==0&&n.lineIndent<e&&Sa(n,"deficient indentation"),a}function lo(n){var t=n.position,e;return e=n.input.charCodeAt(t),!!((e===45||e===46)&&e===n.input.charCodeAt(t+1)&&e===n.input.charCodeAt(t+2)&&(t+=3,e=n.input.charCodeAt(t),e===0||pe(e)))}function Ju(n,t){t===1?n.result+=" ":t>1&&(n.result+=zt.repeat(`
`,t-1))}function gY(n,t,e){var a,i,s,h,r,o,u,l,f=n.kind,v=n.result,d;if(d=n.input.charCodeAt(n.position),pe(d)||sn(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=n.input.charCodeAt(n.position+1),pe(i)||e&&sn(i)))return!1;for(n.kind="scalar",n.result="",s=h=n.position,r=!1;d!==0;){if(d===58){if(i=n.input.charCodeAt(n.position+1),pe(i)||e&&sn(i))break}else if(d===35){if(a=n.input.charCodeAt(n.position-1),pe(a))break}else{if(n.position===n.lineStart&&lo(n)||e&&sn(d))break;if(ri(d))if(o=n.line,u=n.lineStart,l=n.lineIndent,Dt(n,!1,-1),n.lineIndent>=t){r=!0,d=n.input.charCodeAt(n.position);continue}else{n.position=h,n.line=o,n.lineStart=u,n.lineIndent=l;break}}r&&(ji(n,s,h,!1),Ju(n,n.line-o),s=h=n.position,r=!1),Ts(d)||(h=n.position+1),d=n.input.charCodeAt(++n.position)}return ji(n,s,h,!1),n.result?!0:(n.kind=f,n.result=v,!1)}function xY(n,t){var e,a,i;if(e=n.input.charCodeAt(n.position),e!==39)return!1;for(n.kind="scalar",n.result="",n.position++,a=i=n.position;(e=n.input.charCodeAt(n.position))!==0;)if(e===39)if(ji(n,a,n.position,!0),e=n.input.charCodeAt(++n.position),e===39)a=n.position,n.position++,i=n.position;else return!0;else ri(e)?(ji(n,a,i,!0),Ju(n,Dt(n,!1,t)),a=i=n.position):n.position===n.lineStart&&lo(n)?at(n,"unexpected end of the document within a single quoted scalar"):(n.position++,i=n.position);at(n,"unexpected end of the stream within a single quoted scalar")}function mY(n,t){var e,a,i,s,h,r;if(r=n.input.charCodeAt(n.position),r!==34)return!1;for(n.kind="scalar",n.result="",n.position++,e=a=n.position;(r=n.input.charCodeAt(n.position))!==0;){if(r===34)return ji(n,e,n.position,!0),n.position++,!0;if(r===92){if(ji(n,e,n.position,!0),r=n.input.charCodeAt(++n.position),ri(r))Dt(n,!1,t);else if(r<256&&_x[r])n.result+=tm[r],n.position++;else if((h=dY(r))>0){for(i=h,s=0;i>0;i--)r=n.input.charCodeAt(++n.position),(h=fY(r))>=0?s=(s<<4)+h:at(n,"expected hexadecimal character");n.result+=vY(s),n.position++}else at(n,"unknown escape sequence");e=a=n.position}else ri(r)?(ji(n,e,a,!0),Ju(n,Dt(n,!1,t)),e=a=n.position):n.position===n.lineStart&&lo(n)?at(n,"unexpected end of the document within a double quoted scalar"):(n.position++,a=n.position)}at(n,"unexpected end of the stream within a double quoted scalar")}function yY(n,t){var e=!0,a,i,s,h=n.tag,r,o=n.anchor,u,l,f,v,d,c=Object.create(null),p,g,x,m;if(m=n.input.charCodeAt(n.position),m===91)l=93,d=!1,r=[];else if(m===123)l=125,d=!0,r={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=r),m=n.input.charCodeAt(++n.position);m!==0;){if(Dt(n,!0,t),m=n.input.charCodeAt(n.position),m===l)return n.position++,n.tag=h,n.anchor=o,n.kind=d?"mapping":"sequence",n.result=r,!0;e?m===44&&at(n,"expected the node content, but found ','"):at(n,"missed comma between flow collection entries"),g=p=x=null,f=v=!1,m===63&&(u=n.input.charCodeAt(n.position+1),pe(u)&&(f=v=!0,n.position++,Dt(n,!0,t))),a=n.line,i=n.lineStart,s=n.position,ln(n,t,Ta,!1,!0),g=n.tag,p=n.result,Dt(n,!0,t),m=n.input.charCodeAt(n.position),(v||n.line===a)&&m===58&&(f=!0,m=n.input.charCodeAt(++n.position),Dt(n,!0,t),ln(n,t,Ta,!1,!0),x=n.result),d?nn(n,r,c,g,p,x,a,i,s):f?r.push(nn(n,null,c,g,p,x,a,i,s)):r.push(p),Dt(n,!0,t),m=n.input.charCodeAt(n.position),m===44?(e=!0,m=n.input.charCodeAt(++n.position)):e=!1}at(n,"unexpected end of the stream within a flow collection")}function TY(n,t){var e,a,i=bh,s=!1,h=!1,r=t,o=0,u=!1,l,f;if(f=n.input.charCodeAt(n.position),f===124)a=!1;else if(f===62)a=!0;else return!1;for(n.kind="scalar",n.result="";f!==0;)if(f=n.input.charCodeAt(++n.position),f===43||f===45)bh===i?i=f===43?lv:oY:at(n,"repeat of a chomping mode identifier");else if((l=cY(f))>=0)l===0?at(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):h?at(n,"repeat of an indentation width identifier"):(r=t+l-1,h=!0);else break;if(Ts(f)){do f=n.input.charCodeAt(++n.position);while(Ts(f));if(f===35)do f=n.input.charCodeAt(++n.position);while(!ri(f)&&f!==0)}for(;f!==0;){for(Zu(n),n.lineIndent=0,f=n.input.charCodeAt(n.position);(!h||n.lineIndent<r)&&f===32;)n.lineIndent++,f=n.input.charCodeAt(++n.position);if(!h&&n.lineIndent>r&&(r=n.lineIndent),ri(f)){o++;continue}if(n.lineIndent<r){i===lv?n.result+=zt.repeat(`
`,s?1+o:o):i===bh&&s&&(n.result+=`
`);break}for(a?Ts(f)?(u=!0,n.result+=zt.repeat(`
`,s?1+o:o)):u?(u=!1,n.result+=zt.repeat(`
`,o+1)):o===0?s&&(n.result+=" "):n.result+=zt.repeat(`
`,o):n.result+=zt.repeat(`
`,s?1+o:o),s=!0,h=!0,o=0,e=n.position;!ri(f)&&f!==0;)f=n.input.charCodeAt(++n.position);ji(n,e,n.position,!1)}return!0}function vv(n,t){var e,a=n.tag,i=n.anchor,s=[],h,r=!1,o;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=s),o=n.input.charCodeAt(n.position);o!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,at(n,"tab characters must not be used in indentation")),!(o!==45||(h=n.input.charCodeAt(n.position+1),!pe(h))));){if(r=!0,n.position++,Dt(n,!0,-1)&&n.lineIndent<=t){s.push(null),o=n.input.charCodeAt(n.position);continue}if(e=n.line,ln(n,t,jx,!1,!0),s.push(n.result),Dt(n,!0,-1),o=n.input.charCodeAt(n.position),(n.line===e||n.lineIndent>t)&&o!==0)at(n,"bad indentation of a sequence entry");else if(n.lineIndent<t)break}return r?(n.tag=a,n.anchor=i,n.kind="sequence",n.result=s,!0):!1}function CY(n,t,e){var a,i,s,h,r,o,u=n.tag,l=n.anchor,f={},v=Object.create(null),d=null,c=null,p=null,g=!1,x=!1,m;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=f),m=n.input.charCodeAt(n.position);m!==0;){if(!g&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,at(n,"tab characters must not be used in indentation")),a=n.input.charCodeAt(n.position+1),s=n.line,(m===63||m===58)&&pe(a))m===63?(g&&(nn(n,f,v,d,c,null,h,r,o),d=c=p=null),x=!0,g=!0,i=!0):g?(g=!1,i=!0):at(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,m=a;else{if(h=n.line,r=n.lineStart,o=n.position,!ln(n,e,Jx,!1,!0))break;if(n.line===s){for(m=n.input.charCodeAt(n.position);Ts(m);)m=n.input.charCodeAt(++n.position);if(m===58)m=n.input.charCodeAt(++n.position),pe(m)||at(n,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(nn(n,f,v,d,c,null,h,r,o),d=c=p=null),x=!0,g=!1,i=!1,d=n.tag,c=n.result;else if(x)at(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=u,n.anchor=l,!0}else if(x)at(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=u,n.anchor=l,!0}if((n.line===s||n.lineIndent>t)&&(g&&(h=n.line,r=n.lineStart,o=n.position),ln(n,t,Ca,!0,i)&&(g?c=n.result:p=n.result),g||(nn(n,f,v,d,c,p,h,r,o),d=c=p=null),Dt(n,!0,-1),m=n.input.charCodeAt(n.position)),(n.line===s||n.lineIndent>t)&&m!==0)at(n,"bad indentation of a mapping entry");else if(n.lineIndent<t)break}return g&&nn(n,f,v,d,c,null,h,r,o),x&&(n.tag=u,n.anchor=l,n.kind="mapping",n.result=f),x}function SY(n){var t,e=!1,a=!1,i,s,h;if(h=n.input.charCodeAt(n.position),h!==33)return!1;if(n.tag!==null&&at(n,"duplication of a tag property"),h=n.input.charCodeAt(++n.position),h===60?(e=!0,h=n.input.charCodeAt(++n.position)):h===33?(a=!0,i="!!",h=n.input.charCodeAt(++n.position)):i="!",t=n.position,e){do h=n.input.charCodeAt(++n.position);while(h!==0&&h!==62);n.position<n.length?(s=n.input.slice(t,n.position),h=n.input.charCodeAt(++n.position)):at(n,"unexpected end of the stream within a verbatim tag")}else{for(;h!==0&&!pe(h);)h===33&&(a?at(n,"tag suffix cannot contain exclamation marks"):(i=n.input.slice(t-1,n.position+1),Qx.test(i)||at(n,"named tag handle cannot contain such characters"),a=!0,t=n.position+1)),h=n.input.charCodeAt(++n.position);s=n.input.slice(t,n.position),uY.test(s)&&at(n,"tag suffix cannot contain flow indicator characters")}s&&!qx.test(s)&&at(n,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{at(n,"tag name is malformed: "+s)}return e?n.tag=s:ts.call(n.tagMap,i)?n.tag=n.tagMap[i]+s:i==="!"?n.tag="!"+s:i==="!!"?n.tag="tag:yaml.org,2002:"+s:at(n,'undeclared tag handle "'+i+'"'),!0}function EY(n){var t,e;if(e=n.input.charCodeAt(n.position),e!==38)return!1;for(n.anchor!==null&&at(n,"duplication of an anchor property"),e=n.input.charCodeAt(++n.position),t=n.position;e!==0&&!pe(e)&&!sn(e);)e=n.input.charCodeAt(++n.position);return n.position===t&&at(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(t,n.position),!0}function PY(n){var t,e,a;if(a=n.input.charCodeAt(n.position),a!==42)return!1;for(a=n.input.charCodeAt(++n.position),t=n.position;a!==0&&!pe(a)&&!sn(a);)a=n.input.charCodeAt(++n.position);return n.position===t&&at(n,"name of an alias node must contain at least one character"),e=n.input.slice(t,n.position),ts.call(n.anchorMap,e)||at(n,'unidentified alias "'+e+'"'),n.result=n.anchorMap[e],Dt(n,!0,-1),!0}function ln(n,t,e,a,i){var s,h,r,o=1,u=!1,l=!1,f,v,d,c,p,g;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,s=h=r=Ca===e||jx===e,a&&Dt(n,!0,-1)&&(u=!0,n.lineIndent>t?o=1:n.lineIndent===t?o=0:n.lineIndent<t&&(o=-1)),o===1)for(;SY(n)||EY(n);)Dt(n,!0,-1)?(u=!0,r=s,n.lineIndent>t?o=1:n.lineIndent===t?o=0:n.lineIndent<t&&(o=-1)):r=!1;if(r&&(r=u||i),(o===1||Ca===e)&&(Ta===e||Jx===e?p=t:p=t+1,g=n.position-n.lineStart,o===1?r&&(vv(n,g)||CY(n,g,p))||yY(n,p)?l=!0:(h&&TY(n,p)||xY(n,p)||mY(n,p)?l=!0:PY(n)?(l=!0,(n.tag!==null||n.anchor!==null)&&at(n,"alias node should not have any properties")):gY(n,p,Ta===e)&&(l=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):o===0&&(l=r&&vv(n,g))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&at(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),f=0,v=n.implicitTypes.length;f<v;f+=1)if(c=n.implicitTypes[f],c.resolve(n.result)){n.result=c.construct(n.result),n.tag=c.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(ts.call(n.typeMap[n.kind||"fallback"],n.tag))c=n.typeMap[n.kind||"fallback"][n.tag];else for(c=null,d=n.typeMap.multi[n.kind||"fallback"],f=0,v=d.length;f<v;f+=1)if(n.tag.slice(0,d[f].tag.length)===d[f].tag){c=d[f];break}c||at(n,"unknown tag !<"+n.tag+">"),n.result!==null&&c.kind!==n.kind&&at(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+c.kind+'", not "'+n.kind+'"'),c.resolve(n.result,n.tag)?(n.result=c.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):at(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||l}function MY(n){var t=n.position,e,a,i,s=!1,h;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(h=n.input.charCodeAt(n.position))!==0&&(Dt(n,!0,-1),h=n.input.charCodeAt(n.position),!(n.lineIndent>0||h!==37));){for(s=!0,h=n.input.charCodeAt(++n.position),e=n.position;h!==0&&!pe(h);)h=n.input.charCodeAt(++n.position);for(a=n.input.slice(e,n.position),i=[],a.length<1&&at(n,"directive name must not be less than one character in length");h!==0;){for(;Ts(h);)h=n.input.charCodeAt(++n.position);if(h===35){do h=n.input.charCodeAt(++n.position);while(h!==0&&!ri(h));break}if(ri(h))break;for(e=n.position;h!==0&&!pe(h);)h=n.input.charCodeAt(++n.position);i.push(n.input.slice(e,n.position))}h!==0&&Zu(n),ts.call(dv,a)?dv[a](n,a,i):Sa(n,'unknown document directive "'+a+'"')}if(Dt(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,Dt(n,!0,-1)):s&&at(n,"directives end mark is expected"),ln(n,n.lineIndent-1,Ca,!1,!0),Dt(n,!0,-1),n.checkLineBreaks&&lY.test(n.input.slice(t,n.position))&&Sa(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&lo(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,Dt(n,!0,-1));return}if(n.position<n.length-1)at(n,"end of the stream or a document separator is expected");else return}function im(n,t){n=String(n),t=t||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var e=new pY(n,t),a=n.indexOf("\0");for(a!==-1&&(e.position=a,at(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)MY(e);return e.documents}function AY(n,t,e){t!==null&&typeof t=="object"&&typeof e>"u"&&(e=t,t=null);var a=im(n,e);if(typeof t!="function")return a;for(var i=0,s=a.length;i<s;i+=1)t(a[i])}function OY(n,t){var e=im(n,t);if(e.length!==0){if(e.length===1)return e[0];throw new ne("expected a single document in the stream, but found more")}}var RY=AY,LY=OY,sm={loadAll:RY,load:LY},nm=Object.prototype.toString,rm=Object.prototype.hasOwnProperty,ju=65279,FY=9,qn=10,IY=13,wY=32,BY=33,DY=34,hl=35,bY=37,GY=38,NY=39,YY=42,am=44,VY=45,Ea=58,zY=61,UY=62,XY=63,WY=64,om=91,hm=93,HY=96,lm=123,kY=124,um=125,ie={};ie[0]="\\0";ie[7]="\\a";ie[8]="\\b";ie[9]="\\t";ie[10]="\\n";ie[11]="\\v";ie[12]="\\f";ie[13]="\\r";ie[27]="\\e";ie[34]='\\"';ie[92]="\\\\";ie[133]="\\N";ie[160]="\\_";ie[8232]="\\L";ie[8233]="\\P";var $Y=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],KY=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ZY(n,t){var e,a,i,s,h,r,o;if(t===null)return{};for(e={},a=Object.keys(t),i=0,s=a.length;i<s;i+=1)h=a[i],r=String(t[h]),h.slice(0,2)==="!!"&&(h="tag:yaml.org,2002:"+h.slice(2)),o=n.compiledTypeMap.fallback[h],o&&rm.call(o.styleAliases,r)&&(r=o.styleAliases[r]),e[h]=r;return e}function JY(n){var t,e,a;if(t=n.toString(16).toUpperCase(),n<=255)e="x",a=2;else if(n<=65535)e="u",a=4;else if(n<=4294967295)e="U",a=8;else throw new ne("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+e+zt.repeat("0",a-t.length)+t}var jY=1,_n=2;function QY(n){this.schema=n.schema||Ku,this.indent=Math.max(1,n.indent||2),this.noArrayIndent=n.noArrayIndent||!1,this.skipInvalid=n.skipInvalid||!1,this.flowLevel=zt.isNothing(n.flowLevel)?-1:n.flowLevel,this.styleMap=ZY(this.schema,n.styles||null),this.sortKeys=n.sortKeys||!1,this.lineWidth=n.lineWidth||80,this.noRefs=n.noRefs||!1,this.noCompatMode=n.noCompatMode||!1,this.condenseFlow=n.condenseFlow||!1,this.quotingType=n.quotingType==='"'?_n:jY,this.forceQuotes=n.forceQuotes||!1,this.replacer=typeof n.replacer=="function"?n.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function pv(n,t){for(var e=zt.repeat(" ",t),a=0,i=-1,s="",h,r=n.length;a<r;)i=n.indexOf(`
`,a),i===-1?(h=n.slice(a),a=r):(h=n.slice(a,i+1),a=i+1),h.length&&h!==`
`&&(s+=e),s+=h;return s}function ll(n,t){return`
`+zt.repeat(" ",n.indent*t)}function qY(n,t){var e,a,i;for(e=0,a=n.implicitTypes.length;e<a;e+=1)if(i=n.implicitTypes[e],i.resolve(t))return!0;return!1}function Pa(n){return n===wY||n===FY}function tr(n){return 32<=n&&n<=126||161<=n&&n<=55295&&n!==8232&&n!==8233||57344<=n&&n<=65533&&n!==ju||65536<=n&&n<=1114111}function gv(n){return tr(n)&&n!==ju&&n!==IY&&n!==qn}function xv(n,t,e){var a=gv(n),i=a&&!Pa(n);return(e?a:a&&n!==am&&n!==om&&n!==hm&&n!==lm&&n!==um)&&n!==hl&&!(t===Ea&&!i)||gv(t)&&!Pa(t)&&n===hl||t===Ea&&i}function _Y(n){return tr(n)&&n!==ju&&!Pa(n)&&n!==VY&&n!==XY&&n!==Ea&&n!==am&&n!==om&&n!==hm&&n!==lm&&n!==um&&n!==hl&&n!==GY&&n!==YY&&n!==BY&&n!==kY&&n!==zY&&n!==UY&&n!==NY&&n!==DY&&n!==bY&&n!==WY&&n!==HY}function tV(n){return!Pa(n)&&n!==Ea}function Vn(n,t){var e=n.charCodeAt(t),a;return e>=55296&&e<=56319&&t+1<n.length&&(a=n.charCodeAt(t+1),a>=56320&&a<=57343)?(e-55296)*1024+a-56320+65536:e}function fm(n){var t=/^\n* /;return t.test(n)}var dm=1,ul=2,cm=3,vm=4,tn=5;function eV(n,t,e,a,i,s,h,r){var o,u=0,l=null,f=!1,v=!1,d=a!==-1,c=-1,p=_Y(Vn(n,0))&&tV(Vn(n,n.length-1));if(t||h)for(o=0;o<n.length;u>=65536?o+=2:o++){if(u=Vn(n,o),!tr(u))return tn;p=p&&xv(u,l,r),l=u}else{for(o=0;o<n.length;u>=65536?o+=2:o++){if(u=Vn(n,o),u===qn)f=!0,d&&(v=v||o-c-1>a&&n[c+1]!==" ",c=o);else if(!tr(u))return tn;p=p&&xv(u,l,r),l=u}v=v||d&&o-c-1>a&&n[c+1]!==" "}return!f&&!v?p&&!h&&!i(n)?dm:s===_n?tn:ul:e>9&&fm(n)?tn:h?s===_n?tn:ul:v?vm:cm}function iV(n,t,e,a,i){n.dump=function(){if(t.length===0)return n.quotingType===_n?'""':"''";if(!n.noCompatMode&&($Y.indexOf(t)!==-1||KY.test(t)))return n.quotingType===_n?'"'+t+'"':"'"+t+"'";var s=n.indent*Math.max(1,e),h=n.lineWidth===-1?-1:Math.max(Math.min(n.lineWidth,40),n.lineWidth-s),r=a||n.flowLevel>-1&&e>=n.flowLevel;function o(u){return qY(n,u)}switch(eV(t,r,n.indent,h,o,n.quotingType,n.forceQuotes&&!a,i)){case dm:return t;case ul:return"'"+t.replace(/'/g,"''")+"'";case cm:return"|"+mv(t,n.indent)+yv(pv(t,s));case vm:return">"+mv(t,n.indent)+yv(pv(sV(t,h),s));case tn:return'"'+nV(t)+'"';default:throw new ne("impossible error: invalid scalar style")}}()}function mv(n,t){var e=fm(n)?String(t):"",a=n[n.length-1]===`
`,i=a&&(n[n.length-2]===`
`||n===`
`),s=i?"+":a?"":"-";return e+s+`
`}function yv(n){return n[n.length-1]===`
`?n.slice(0,-1):n}function sV(n,t){for(var e=/(\n+)([^\n]*)/g,a=function(){var u=n.indexOf(`
`);return u=u!==-1?u:n.length,e.lastIndex=u,Tv(n.slice(0,u),t)}(),i=n[0]===`
`||n[0]===" ",s,h;h=e.exec(n);){var r=h[1],o=h[2];s=o[0]===" ",a+=r+(!i&&!s&&o!==""?`
`:"")+Tv(o,t),i=s}return a}function Tv(n,t){if(n===""||n[0]===" ")return n;for(var e=/ [^ ]/g,a,i=0,s,h=0,r=0,o="";a=e.exec(n);)r=a.index,r-i>t&&(s=h>i?h:r,o+=`
`+n.slice(i,s),i=s+1),h=r;return o+=`
`,n.length-i>t&&h>i?o+=n.slice(i,h)+`
`+n.slice(h+1):o+=n.slice(i),o.slice(1)}function nV(n){for(var t="",e=0,a,i=0;i<n.length;e>=65536?i+=2:i++)e=Vn(n,i),a=ie[e],!a&&tr(e)?(t+=n[i],e>=65536&&(t+=n[i+1])):t+=a||JY(e);return t}function rV(n,t,e){var a="",i=n.tag,s,h,r;for(s=0,h=e.length;s<h;s+=1)r=e[s],n.replacer&&(r=n.replacer.call(e,String(s),r)),(Si(n,t,r,!1,!1)||typeof r>"u"&&Si(n,t,null,!1,!1))&&(a!==""&&(a+=","+(n.condenseFlow?"":" ")),a+=n.dump);n.tag=i,n.dump="["+a+"]"}function Cv(n,t,e,a){var i="",s=n.tag,h,r,o;for(h=0,r=e.length;h<r;h+=1)o=e[h],n.replacer&&(o=n.replacer.call(e,String(h),o)),(Si(n,t+1,o,!0,!0,!1,!0)||typeof o>"u"&&Si(n,t+1,null,!0,!0,!1,!0))&&((!a||i!=="")&&(i+=ll(n,t)),n.dump&&qn===n.dump.charCodeAt(0)?i+="-":i+="- ",i+=n.dump);n.tag=s,n.dump=i||"[]"}function aV(n,t,e){var a="",i=n.tag,s=Object.keys(e),h,r,o,u,l;for(h=0,r=s.length;h<r;h+=1)l="",a!==""&&(l+=", "),n.condenseFlow&&(l+='"'),o=s[h],u=e[o],n.replacer&&(u=n.replacer.call(e,o,u)),Si(n,t,o,!1,!1)&&(n.dump.length>1024&&(l+="? "),l+=n.dump+(n.condenseFlow?'"':"")+":"+(n.condenseFlow?"":" "),Si(n,t,u,!1,!1)&&(l+=n.dump,a+=l));n.tag=i,n.dump="{"+a+"}"}function oV(n,t,e,a){var i="",s=n.tag,h=Object.keys(e),r,o,u,l,f,v;if(n.sortKeys===!0)h.sort();else if(typeof n.sortKeys=="function")h.sort(n.sortKeys);else if(n.sortKeys)throw new ne("sortKeys must be a boolean or a function");for(r=0,o=h.length;r<o;r+=1)v="",(!a||i!=="")&&(v+=ll(n,t)),u=h[r],l=e[u],n.replacer&&(l=n.replacer.call(e,u,l)),Si(n,t+1,u,!0,!0,!0)&&(f=n.tag!==null&&n.tag!=="?"||n.dump&&n.dump.length>1024,f&&(n.dump&&qn===n.dump.charCodeAt(0)?v+="?":v+="? "),v+=n.dump,f&&(v+=ll(n,t)),Si(n,t+1,l,!0,f)&&(n.dump&&qn===n.dump.charCodeAt(0)?v+=":":v+=": ",v+=n.dump,i+=v));n.tag=s,n.dump=i||"{}"}function Sv(n,t,e){var a,i,s,h,r,o;for(i=e?n.explicitTypes:n.implicitTypes,s=0,h=i.length;s<h;s+=1)if(r=i[s],(r.instanceOf||r.predicate)&&(!r.instanceOf||typeof t=="object"&&t instanceof r.instanceOf)&&(!r.predicate||r.predicate(t))){if(e?r.multi&&r.representName?n.tag=r.representName(t):n.tag=r.tag:n.tag="?",r.represent){if(o=n.styleMap[r.tag]||r.defaultStyle,nm.call(r.represent)==="[object Function]")a=r.represent(t,o);else if(rm.call(r.represent,o))a=r.represent[o](t,o);else throw new ne("!<"+r.tag+'> tag resolver accepts not "'+o+'" style');n.dump=a}return!0}return!1}function Si(n,t,e,a,i,s,h){n.tag=null,n.dump=e,Sv(n,e,!1)||Sv(n,e,!0);var r=nm.call(n.dump),o=a,u;a&&(a=n.flowLevel<0||n.flowLevel>t);var l=r==="[object Object]"||r==="[object Array]",f,v;if(l&&(f=n.duplicates.indexOf(e),v=f!==-1),(n.tag!==null&&n.tag!=="?"||v||n.indent!==2&&t>0)&&(i=!1),v&&n.usedDuplicates[f])n.dump="*ref_"+f;else{if(l&&v&&!n.usedDuplicates[f]&&(n.usedDuplicates[f]=!0),r==="[object Object]")a&&Object.keys(n.dump).length!==0?(oV(n,t,n.dump,i),v&&(n.dump="&ref_"+f+n.dump)):(aV(n,t,n.dump),v&&(n.dump="&ref_"+f+" "+n.dump));else if(r==="[object Array]")a&&n.dump.length!==0?(n.noArrayIndent&&!h&&t>0?Cv(n,t-1,n.dump,i):Cv(n,t,n.dump,i),v&&(n.dump="&ref_"+f+n.dump)):(rV(n,t,n.dump),v&&(n.dump="&ref_"+f+" "+n.dump));else if(r==="[object String]")n.tag!=="?"&&iV(n,n.dump,t,s,o);else{if(r==="[object Undefined]")return!1;if(n.skipInvalid)return!1;throw new ne("unacceptable kind of an object to dump "+r)}n.tag!==null&&n.tag!=="?"&&(u=encodeURI(n.tag[0]==="!"?n.tag.slice(1):n.tag).replace(/!/g,"%21"),n.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",n.dump=u+" "+n.dump)}return!0}function hV(n,t){var e=[],a=[],i,s;for(fl(n,e,a),i=0,s=a.length;i<s;i+=1)t.duplicates.push(e[a[i]]);t.usedDuplicates=new Array(s)}function fl(n,t,e){var a,i,s;if(n!==null&&typeof n=="object")if(i=t.indexOf(n),i!==-1)e.indexOf(i)===-1&&e.push(i);else if(t.push(n),Array.isArray(n))for(i=0,s=n.length;i<s;i+=1)fl(n[i],t,e);else for(a=Object.keys(n),i=0,s=a.length;i<s;i+=1)fl(n[a[i]],t,e)}function lV(n,t){t=t||{};var e=new QY(t);e.noRefs||hV(n,e);var a=n;return e.replacer&&(a=e.replacer.call({"":a},"",a)),Si(e,0,a,!0,!0)?e.dump+`
`:""}var uV=lV,fV={dump:uV};function Qu(n,t){return function(){throw new Error("Function yaml."+n+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var dV=qt,cV=Fx,vV=Dx,pV=Vx,gV=zx,xV=Ku,mV=sm.load,yV=sm.loadAll,TV=fV.dump,CV=ne,SV={binary:kx,float:Yx,map:Bx,null:bx,pairs:Kx,set:Zx,timestamp:Wx,bool:Gx,int:Nx,merge:Hx,omap:$x,seq:wx,str:Ix},EV=Qu("safeLoad","load"),PV=Qu("safeLoadAll","loadAll"),MV=Qu("safeDump","dump"),pm={Type:dV,Schema:cV,FAILSAFE_SCHEMA:vV,JSON_SCHEMA:pV,CORE_SCHEMA:gV,DEFAULT_SCHEMA:xV,load:mV,loadAll:yV,dump:TV,YAMLException:CV,types:SV,safeLoad:EV,safeLoadAll:PV,safeDump:MV},Un=function(n){if(typeof n=="string")try{return pm.load(n)}catch(t){console.log(t);return}return n},AV=function(n,t){if(n.hasOwnProperty("$type"))return n.$type;if(n.hasOwnProperty("name")){var e=t[`#${n.name}`];if(e&&e.hasOwnProperty("$type"))return e.$type}if(n.hasOwnProperty("$class"))for(var a=n.$class.split(" "),i=0,s=a.length;i<s;i++){var e=t[`.${a[i]}`];if(e&&e.hasOwnProperty("$type"))return e.$type}},ua=function(n,t){if(t===void 0)return n;for(var e in t)if(!n.hasOwnProperty(e))n[e]=re(t[e]);else{var a=n[e];a&&typeof a=="object"&&ua(a,t[e])}return n},At=function(n,t){if(t===void 0)return n;if(n.hasOwnProperty("name")&&ua(n,t[`#${n.name}`]),n.hasOwnProperty("$class"))for(var e=n.$class.split(" "),a=0,i=e.length;a<i;a++)ua(n,t[`.${e[a]}`]);return n.hasOwnProperty("$type")&&ua(n,t[n.$type]),n};const Ev=["tint","alpha","visible","flipX","flipY"];var Ls=function(n,t){for(var e=0,a=Ev.length;e<a;e++){var i=Ev[e],s=t[i];s!==void 0&&(n[i]=s)}return t.cropResize&&!n.resize&&(n.resize=function(h,r){return n.setCrop(0,0,h,r),n}),n},gm=function(n,t,e,a,i,s){t=At(t,a);var h=new s(n,0,0,t.key,t.frame);return t.width!==void 0&&h.setDisplayWidth(t.width),t.height!==void 0&&h.setDisplayHeight(t.height),Ls(h,t),n.add.existing(h),h};const OV=Phaser.GameObjects.Image;var RV=function(n,t,e,a,i){return gm(n,t,e,a,i,OV)};const LV=Phaser.GameObjects.Sprite;var FV=function(n,t,e,a,i){return gm(n,t,e,a,i,LV)};const IV=Phaser.GameObjects.Video;var wV=function(n,t,e,a,i){t=At(t,a);var s=new IV(n,0,0,t.key);return t.width!==void 0&&s.setDisplayWidth(t.width),t.height!==void 0&&s.setDisplayHeight(t.height),Ls(s,t),n.add.existing(s),s};const BV=Phaser.GameObjects.Text;var DV=function(n,t,e,a,i){t=At(t,a);var s=new BV(n,0,0,t.text,t);return Ls(s,t),n.add.existing(s),s},bV=function(n,t,e,a,i){t=At(t,a);var s=new Sl(n,0,0,t.text,t);return Ls(s,t),n.add.existing(s),s},GV=function(n,t,e,a,i){t=At(t,a);var s=new Ei(n,t);return n.add.existing(s),s},NV=function(n,t,e,a,i){t=At(t,a);var s=new Ma(n,t);return Ls(s,t),n.add.existing(s),s},YV=function(n,t,e,a,i){t=At(t,a);var s=new Oa(n,t);return n.add.existing(s),s},VV=function(n,t,e,a,i){t=At(t,a);var s=t.width||1,h=t.height||1,r=new Me(n,0,0,s,h);return t.fill!==void 0&&r.fill(t.fill),Ls(r,t),n.add.existing(r),r},zV=function(n,t,e,a,i){t=At(t,a);var s=new Il(n,0,0,t.key,t.frame,t);return t.width!==void 0&&s.setDisplayWidth(t.width),t.height!==void 0&&s.setDisplayHeight(t.height),Ls(s,t),n.add.existing(s),s},UV=function(n,t,e,a,i){var s=new Ja(n);return s},rt=function(n,t,e,a,i,s){var h=t[e];if(!!h){var r;return r=un(n,h,a,i,s),t[e]=r,r}},Pv=function(n,t,e,a,i){if(t){Array.isArray(t)||(t=[t]);for(var s=0,h=t.length;s<h;s++){var r=t[s];r.$child||(r={$child:r},t[s]=r),rt(n,r,"$child",e,a,i)}}return t},mr=function(n,t,e,a,i,s){t=At(t,a);var h=Pv(n,t.background,e,a,i),r=Pv(n,t.children,e,a,i),o=new s(n,t);if(n.add.existing(o),h)for(var u=0,l=h.length;u<l;u++){var f=h[u];o.addBackground(f.$child,f.padding)}if(r)for(var u=0,l=r.length;u<l;u++){var f=r[u];o.add(f.$child,f)}return o},XV=function(n,t,e,a,i){return mr(n,t,e,a,i,ct)},WV=function(n,t,e,a,i){return mr(n,t,e,a,i,ns)},HV=function(n,t,e,a,i){var s=t.createCellContainerCallback;if(s){var h=s.$child;delete s.$child,t.createCellContainerCallback=function(r,o,u,l){var f=un(r,h,e,a,i);for(var v in s)l[v]=s[v];return f}}return mr(n,t,e,a,i,Ri)},kV=function(n,t,e,a,i){return mr(n,t,e,a,i,Ae)},$i=function(n,t,e,a,i,s){var h=t[e];if(!!h){if(Array.isArray(h))for(var r=0,o=h.length;r<o;r++)Array.isArray(h[r])?$i(n,h,r,a,i,s):rt(n,h,r,a,i,s);else for(var u in h)rt(n,h,u,a,i,s);return h}},$V=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),$i(n,t,"buttons",e,a,i);var s=new Ht(n,t);return n.add.existing(s),s},KV=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),$i(n,t,"buttons",e,a,i);var s=new _i(n,t);return n.add.existing(s),s},ZV=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i);var s=t.buttons;if(s)for(var h=0,r=s.length;h<r;h++)$i(n,s,h,e,a,i);var o=t.createCellContainerCallback;if(o){var u=o.$child;delete o.$child,t.createCellContainerCallback=function(f,v,d,c){var p=un(f,u,e,a,i);for(var g in o)c[g]=o[g];return p}}var l=new vr(n,t);return n.add.existing(l),l},qu=function(n,t,e,a,i,s){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"icon",e,a,i),rt(n,t,"text",e,a,i),rt(n,t,"action",e,a,i);var h=new s(n,t);return n.add.existing(h),h},JV=function(n,t,e,a,i){return qu(n,t,e,a,i,Oi)},jV=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"main",e,a,i),rt(n,t,"leftTop",e,a,i),rt(n,t,"centerTop",e,a,i),rt(n,t,"rightTop",e,a,i),rt(n,t,"leftCenter",e,a,i),rt(n,t,"center",e,a,i),rt(n,t,"rightCenter",e,a,i),rt(n,t,"leftBottom",e,a,i),rt(n,t,"centerBottom",e,a,i),rt(n,t,"rightBottom",e,a,i);var s=new Yu(n,t);return n.add.existing(s),s},QV=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"toolbarBackground",e,a,i),rt(n,t,"leftToolbarBackground",e,a,i),rt(n,t,"choicesBackground",e,a,i),rt(n,t,"actionsBackground",e,a,i),rt(n,t,"title",e,a,i),$i(n,t,"toolbar",e,a,i),$i(n,t,"leftToolbar",e,a,i),rt(n,t,"content",e,a,i),rt(n,t,"description",e,a,i),$i(n,t,"choices",e,a,i),$i(n,t,"actions",e,a,i);var s=new pr(n,t);return n.add.existing(s),s},qV=function(n,t,e,a,i){return qu(n,t,e,a,i,Gu)},_V=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"track",e,a,i),rt(n,t,"indicator",e,a,i),rt(n,t,"thumb",e,a,i);var s=new Rs(n,t);return n.add.existing(s),s},_u=function(n,t,e,a,i){return t&&(rt(n,t,"background",e,a,i),rt(n,t,"track",e,a,i),rt(n,t,"indicator",e,a,i),rt(n,t,"thumb",e,a,i)),t},tz=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"icon",e,a,i),_u(n,t.slider,e,a,i),rt(n,t,"text",e,a,i);var s=new Nu(n,t);return n.add.existing(s),s},ez=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),_u(n,t.slider,e,a,i);var s=t.buttons;s&&(rt(n,s,"top",e,a,i),rt(n,s,"bottom",e,a,i),rt(n,s,"left",e,a,i),rt(n,s,"right",e,a,i));var h=new io(n,t);return n.add.existing(h),h},iz=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"text",e,a,i),_u(n,t.slider,e,a,i),rt(n,t,"header",e,a,i),rt(n,t,"footer",e,a,i);var s=new ho(n,t);return n.add.existing(s),s},sz=function(n,t,e,a,i){return mr(n,t,e,a,i,xr)},nz=function(n,t,e,a,i){return qu(n,t,e,a,i,zu)},rz=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"text",e,a,i);var s=new $a(n,t);return n.add.existing(s),s},az=function(n,t,e,a,i){t=At(t,a),rt(n,t,"background",e,a,i),rt(n,t,"content",e,a,i),rt(n,t,"leftSide",e,a,i),rt(n,t,"rightSide",e,a,i),rt(n,t,"header",e,a,i),rt(n,t,"footer",e,a,i);var s=new Lu(n,t);return n.add.existing(s),s},oz=function(n,t,e,a,i){t=At(t,a);var s=t.background;delete t.background,s&&(t.createBackgroundCallback=function(r){var o=r.scene,u=un(o,re(s),e,a,i);return u}),t.createButtonCallback=function(r,o,u){var l=r.scene,f=r.$next;delete r.scene,delete r.$next;var v=un(l,re(r),e,a,i);return r.scene=l,r.$next=f,v},t.childrenKey="$next";var h=new no(n,t);return n.add.existing(h),h},hz={Image:RV,Sprite:FV,Video:wV,Text:DV,BBCodeText:bV,RoundRectangle:GV,Ninepatch:NV,Ninepatch2:YV,Canvas:VV,CircleMaskImage:zV,Space:UV,Sizer:XV,FixWidthSizer:WV,GridSizer:HV,OverlapSizer:kV,Buttons:$V,FixWidthButtons:KV,GridButtons:ZV,Label:JV,BadgeLabel:jV,Dialog:QV,TextBox:qV,Slider:_V,NumberBar:tz,ScrollBar:ez,TextArea:iz,Pages:sz,Toast:nz,Knob:rz,HolyGrail:az,Menu:oz},un=function(n,t,e,a,i){var s=AV(t,a);if(!s){console.warn(`rexUI.Make: Can't get type name in ${JSON.stringify(t)}`);return}var h;if(i&&(h=i[s]),h||(h=hz[s]),!h){console.warn(`rexUI.Make: Can't create ${s} game object.`);return}var r=h(n,t,e,a,i);return t.name&&r.setName(t.name),r},xm=function(n,t,e,a,i){if(t=Un(t),Array.isArray(t))t=t[t.length-1];else if(t.$root){var s=t;if(t=t.$root,delete s.$root,a===void 0)a=s;else for(var h in s)a[h]||(a[h]=s[h])}a=Un(a);var r=un(n,t,e,a,i);return r};const Mv=Phaser.Utils.Objects.IsPlainObject;class tf{constructor(t,e,a){this.setScene(t),this.setStyles(e),this.setBuilders(a)}setScene(t){return this.scene=t,this}setStyles(t){return this.styles=Un(t),this}addStyle(t,e){if(this.styles===void 0&&(this.styles={}),typeof t=="string"&&e===void 0&&(t=Un(t)),Mv(t)){var a=t;for(t in a)this.styles[t]=a[t]}else this.styles[t]=Un(e);return this}clearStyles(){return this.setStyles(),this}setBuilders(t){return this.customBuilders=t,this}addBuilder(t,e){if(this.customBuilders===void 0&&(this.customBuilders={}),Mv(t)){var a=t;for(t in a)this.customBuilders[t]=a[t]}else this.customBuilders[t]=e;return this}clearBuilder(){return this.setBuilders(),this}make(t,e){return xm(this.scene,t,e,this.styles,this.customBuilders)}}_.register("maker",function(n,t){return new tf(this.scene,n,t)});q(window,"RexPlugins.UI.Maker",tf);_.register("click",function(n,t){return new es(n,t)});q(window,"RexPlugins.UI.Click",es);_.register("clickOutside",function(n,t){return new cu(n,t)});q(window,"RexPlugins.UI.ClickOutside",cu);_.register("inTouching",function(n,t){return new jn(n,t)});q(window,"RexPlugins.UI.InTouching",jn);_.register("tap",function(n,t){return gn(n)||(t=n,n=this.scene),new Ua(n,t)});q(window,"RexPlugins.UI.Tap",Ua);_.register("press",function(n,t){return gn(n)||(t=n,n=this.scene),new Xa(n,t)});q(window,"RexPlugins.UI.Press",Xa);_.register("swipe",function(n,t){return gn(n)||(t=n,n=this.scene),new dr(n,t)});q(window,"RexPlugins.UI.Swipe",dr);_.register("pan",function(n,t){return gn(n)||(t=n,n=this.scene),new l0(n,t)});q(window,"RexPlugins.UI.Pan",l0);var mm=function(n){for(var t=n.scene.input,e=t.manager,a=e.pointersTotal,i=e.pointers,s,h=0;h<a;h++)if(s=i[h],!(!s.primaryDown||t.getDragState(s)!==0||!El(n,s)))return t.setDragState(s,1),t._drag[s.id]=[n],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(s,3),t.processDragStartList(s)):t.setDragState(s,2),!0;return!1};const ta=Phaser.Utils.Objects.GetValue,Av=Phaser.Math.Distance.Between,Ov=Phaser.Math.RotateAroundDistance;class ym extends kt{constructor(t,e){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(ta(e,"inputConfig",void 0)),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(ta(t,"enable",!0)),this.setAxisMode(ta(t,"axis",0)),this.setAxisRotation(ta(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=lz[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return mm(this.parent),this}dragend(){if(!!this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,e,a){this.isDragging||(this.pointer=t)}onDrag(t,e,a){if(this.pointer===t){var i=this.parent;if(this.axisMode===0)i.x=e,i.y=a;else if(this.axisRotation===0)this.axisMode===1?i.x=e:this.axisMode===2&&(i.y=a);else{var s,h={x:e,y:a};s=Av(h.x,h.y,i.x,i.y),h=Ov(h,i.x,i.y,-this.axisRotation,s),this.axisMode===1?h.y=i.y:this.axisMode===2&&(h.x=i.x),s=Av(h.x,h.y,i.x,i.y),h=Ov(h,i.x,i.y,this.axisRotation,s),i.x=h.x,i.y=h.y}}}onDragEnd(t,e,a,i){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}}const lz={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2};_.register("drag",function(n,t){return new ym(n,t)});q(window,"RexPlugins.UI.Drag",ym);_.register("pinch",function(n){return new u0(this.scene,n)});q(window,"RexPlugins.UI.Pinch",u0);_.register("rotate",function(n){return new pu(this.scene,n)});q(window,"RexPlugins.UI.Rotate",pu);const uz=Phaser.Utils.Objects.IsPlainObject,Rv=Phaser.Utils.Objects.GetValue;var Lv=function(n,t,e){var a;if(n===void 0)n=e.texture.key,t=e.frame.name;else if(uz(n)){var i=n;n=Rv(i,"key",e.texture.key),t=Rv(i,"frame",e.frame.name)}else typeof n=="string"||(a=n);return a===void 0&&(a=function(s){s.setTexture(n,t)}),a};const Yn=Phaser.Utils.Objects.GetValue,fz=Phaser.Utils.Objects.GetAdvancedValue,dz=Phaser.Math.Linear;class Tm extends Es{constructor(t,e){super(t,e),this.resetFromJSON(e),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(fz(t,"duration",500)),this.setEase(Yn(t,"ease","Sine")),this.setOrientation(Yn(t,"orientation",0)),this.setFrontFace(Yn(t,"front",void 0)),this.setBackFace(Yn(t,"back",void 0)),this.setFace(Yn(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=cz[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=vz[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,e){return this.frontFaceCallback=Lv(t,e,this.parent),this}setBackFace(t,e){return this.backFaceCallback=Lv(t,e,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateGameObject(t,e){e.justRestart&&this.toggleFace();var a=e.t;e.isOddIteration&&(a=1-a),a=this.easeFn(a);var i=dz(this.scale0,0,a);this.orientation===0?t.scaleX=i:t.scaleY=i}}const cz={x:0,horizontal:0,y:1,vertical:1},vz={front:0,back:1};_.register("flip",function(n,t){return new Tm(n,t)});q(window,"RexPlugins.UI.Flip",Tm);_.register("shake",function(n,t){return new uu(n,t)});q(window,"RexPlugins.UI.Shake",uu);_.register("touchEventStop",function(n,t){return new Za(n,t)});q(window,"RexPlugins.UI.TouchEventStop",Za);_.register("perspective",function(n,t){return new ox(n,t)});q(window,"RexPlugins.UI.Perspective",ox);const Cm=Phaser.Math.RotateAround;var Gh=function(n,t,e){var a=n.width/2,i=n.height/2;return te.x=t-a,te.y=e-i,Cm(te,0,0,n.rotation),te.x*=n.scaleX,te.y*=n.scaleY,te.x+=n.x,te.y+=n.y,te},pz=function(n,t,e){var a=n.width/2,i=n.height/2;return te.x=t-n.x,te.y=e-n.y,te.x/=n.scaleX,te.y/=n.scaleY,Cm(te,0,0,-n.rotation),te.x+=a,te.y+=i,te},te={x:0,y:0};class gz{constructor(t,e){this.parent=t,this.vertex=e,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,e){var a=this.parent,i=a.height,s=a.frame.cutWidth/i/2,h=a.frame.cutHeight/i/2,r=t/i-s,o=e/i-h,u=this.vertex;return u.x=r,u.y=-o,a.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,e){return this._localXOrigin=t,this._localYOrigin=e,this._localX=t,this._localY=e,this}setLocalXY(t,e,a){return this._localX===t&&this._localY===e?this:(this._localX=t,this._localY=e,a||this.updateVertexPosition(t,e),this)}setWorldXY(t,e){if(this._worldX===t&&this._worldY===e)return this;var a=pz(this.parent,t,e);return this.setLocalXY(a.x,a.y),this}setPosition(t,e){return this.setWorldXY(t,e),this}getWorldXY(){return Gh(this.parent,this._localX,this._localY)}get x(){var t=Gh(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=Gh(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}}const xz=Phaser.Geom.Mesh.Vertex,mz=Phaser.Geom.Mesh.Face;var yz=function(n){for(var t=n.isNinePointMode,e=t?9:4,a=n.vertices,i=n.faces,s=n.controlPoints,h=0;h<e;h++){var r=new xz;a.push(r),s.push(new gz(n,r))}var o;t?o=Sz:n.fourPointsModeRTL?o=Cz:o=Tz;for(var h=0,u=o.length;h<u;h+=3){var l=a[o[h+0]],f=a[o[h+1]],v=a[o[h+2]];i.push(new mz(l,f,v))}t?(n.topLeft=s[0],n.topCenter=s[1],n.topRight=s[2],n.centerLeft=s[3],n.center=s[4],n.centerRight=s[5],n.bottomLeft=s[6],n.bottomCenter=s[7],n.bottomRight=s[8]):(n.topLeft=s[0],n.topRight=s[1],n.bottomLeft=s[2],n.bottomRight=s[3])};const Tz=[0,2,3,0,3,1],Cz=[1,3,2,1,2,0],Sz=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5];var Ez=function(n){var t,e=0,a=n.height,i=0,s=n.width;if(n.isNinePointMode){var h=(i+s)/2,r=(e+a)/2;t=[i,e,h,e,s,e,i,r,h,r,s,r,i,a,h,a,s,a]}else t=[i,e,s,e,i,a,s,a];return t};const Pz=Phaser.GameObjects.Mesh,Mz=Phaser.Utils.Objects.IsPlainObject,Qs=Phaser.Utils.Objects.GetValue;class Az extends Pz{constructor(t,e,a,i,s,h){Mz(e)&&(h=e,e=Qs(h,"x",0),a=Qs(h,"y",0),i=Qs(h,"key",null),s=Qs(h,"frame",null)),super(t,e,a,i,s),this.type="rexQuadImage",this.isNinePointMode=Qs(h,"ninePointMode",!1),this.fourPointsModeRTL=Qs(h,"rtl",!1),this.controlPoints=[],yz(this),this.hideCCW=!1,this.syncSize()}preDestroy(){for(var t=0,e=this.controlPoints.length;t<e;t++)this.controlPoints[t].destroy();this.controlPoints=void 0,super.preDestroy()}resetVerts(){this.dirtyCache[9]=-1;for(var t=Ez(this),e=this.width,a=this.height,i=this.frame.cutWidth/a/2,s=this.frame.cutHeight/a/2,h=this.frame.source.isRenderTexture,r=this.frame.u0,o=this.frame.u1,u=h?this.frame.v1:this.frame.v0,l=h?this.frame.v0:this.frame.v1,f=o-r,v=l-u,d=this.controlPoints,c=0,p=t.length;c<p;c+=2){var g=t[c+0],x=t[c+1],m=c/2,y=g/a-i,T=x/a-s,C=r+f*(g/e),S=u+v*(x/a);this.vertices[m].set(y,-T,0).setUVs(C,S),d[m].resetLocalXY(g,x)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}forceUpdate(){return this.dirtyCache[10]=1,this}get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}set tint(t){for(var e=this.vertices,a=0,i=e.length;a<i;a++)e[a].color=t}setTint(t){return this.tint=t,this}}Phaser.GameObjects.RenderTexture;Phaser.Utils.Objects.IsPlainObject;Phaser.Utils.Objects.GetValue;var Fv=function(n,t,e){t===void 0&&(t=0),e===void 0&&(e=0);for(var a=n.width,i=n.height,s=a*.5,h=i*.5,r=Math.tan(t)*h,o=Math.tan(e)*s,u=n.controlPoints,l=0,f=u.length;l<f;l++){var v=u[l],d=v.localXOrigin,c=v.localYOrigin;v.localX=d+(c>h?r:-r),v.localY=c+(d>s?o:-o)}};const Oz=Phaser.Utils.Objects.IsPlainObject,ea=Phaser.Utils.Objects.GetValue,Iv=Phaser.Math.DegToRad,wv=Phaser.Math.RadToDeg;class Rz extends Az{constructor(t,e,a,i,s){if(Oz(e)){var h=e;e=ea(h,"x",0),a=ea(h,"y",0),i=ea(h,"key",null),s=ea(h,"frame",null)}super(t,e,a,i,s),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,Fv(this,this._skewX,this._skewY)}get skewXDeg(){return wv(this._skewX)}set skewXDeg(t){this.skewX=Iv(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,Fv(this,this._skewX,this._skewY)}get skewYDeg(){return wv(this._skewY)}set skewYDeg(t){this.skewY=Iv(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,e){return e===void 0&&(e=t),this.skewX=t,this.skewY=e,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,e){return e===void 0&&(e=t),this.skewXDeg=t,this.skewYDeg=e,this}}const Lz=Phaser.GameObjects.RenderTexture,Fz=Phaser.Utils.Objects.IsPlainObject,ia=Phaser.Utils.Objects.GetValue;class Iz extends Rz{constructor(t,e,a,i,s){if(Fz(e)){var h=e;e=ia(h,"x",0),a=ia(h,"y",0),i=ia(h,"width",32),s=ia(h,"height",32)}var r=new Lz(t,e,a,i,s).setOrigin(.5);super(t,e,a,r.texture.key,null),this.type="rexSkewRenderTexture",this.rt=r}destroy(t){super.destroy(t),this.rt.destroy(),this.rt=null}}class Sm extends ax(Iz){get skewState(){return this.isRunning}}_.register("skew",function(n,t){return new Sm(n,t)});q(window,"RexPlugins.UI.Skew",Sm);_.register("anchor",function(n,t){return new ou(n,t)});q(window,"RexPlugins.UI.Anchor",ou);var rn=void 0,wz=function(n){n!==rn&&(rn!==void 0&&rn.close(),rn=n)},Bz=function(n){n===rn&&(rn=void 0)},Dz=function(n,t){if(this.scene.sys.scale.autoRound&&(n=Math.floor(n),t=Math.floor(t)),this.width===n&&this.height===t)return this;var e=this.node.style;return e.width=`${n}px`,e.height=`${t}px`,this.updateSize(),this};const Bv={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"]},Dv={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],outline:["outline","none"],direction:["direction",void 0]},bz={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"};var Gz=function(n,t,e){for(let a in e)t.addEventListener(a,function(i){n.emit(e[a],n,i)})};const Nz=Phaser.GameObjects.DOMElement,bv=Phaser.Utils.Objects.IsPlainObject,yi=Phaser.Utils.Objects.GetValue;class Em extends Nz{constructor(t,e,a,i,s,h){bv(e)?(h=e,e=yi(h,"x",0),a=yi(h,"y",0),i=yi(h,"width",0),s=yi(h,"height",0)):bv(i)&&(h=i,i=yi(h,"width",0),s=yi(h,"height",0)),h===void 0&&(h={});var r,o=yi(h,"type","text");o==="textarea"?(r=document.createElement("textarea"),r.style.resize="none"):(r=document.createElement("input"),r.type=o),da(Bv,h,r);var u=yi(h,"style",void 0);u=da(Dv,h,u);var l=r.style;for(var f in h)f in Bv||f in Dv||f in l&&(u[f]=h[f]);u["box-sizing"]="border-box",super(t,e,a,r,u),this.type="rexInputText",this.resize(i,s),Gz(this,r,bz),ig(r),yi(h,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,e){return t===void 0?this.node.select():this.node.setSelectionRange(t,e),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,e){return this.node.style[t]=e,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var Yz={resize:Dz};Object.assign(Em.prototype,Yz);const Ti=Phaser.Utils.Objects.GetValue,Vz=Phaser.Utils.Objects.Clone;var zz=function(n,t){t===void 0&&(t={}),t=Vz(t);var e=n.scene,a=n.style,i=Ti(t,"backgroundColor",a.backgroundColor);i===null&&(i="transparent"),t.text=Ti(t,"text",n.text),t.fontFamily=Ti(t,"fontFamily",a.fontFamily),t.fontSize=Ti(t,"fontSize",a.fontSize),t.color=Ti(t,"color",a.color),t.backgroundColor=i,t.direction=Ti(t,"rtl",a.rtl)?"rtl":"ltr",t.align=Ti(t,"align",Uz(a)),t.direction==="rtl"&&Bu(n)&&(t.align="right");var s=new Em(e,n.x,n.y,Ti(t,"width",n.width),Ti(t,"height",n.height),t);s.setOrigin(n.originX,n.originY).setScrollFactor(n.scrollFactorX,n.scrollFactorY);var h=n.parentContainer;return h?h.add(s):e.add.existing(s),s},Uz=function(n){return n.hasOwnProperty("align")?n.align:n.hasOwnProperty("halign")?n.halign:"left"};const sa=Phaser.Utils.Objects.GetValue,Xz=Phaser.Utils.Objects.Merge;var Wz=function(n,t){n===void 0&&(n={}),n=Xz(n,this.openConfig),wz(this),Va(n)&&(t=n,n=void 0),t===void 0&&(t=sa(n,"onClose",void 0));var e=sa(n,"onOpen",void 0),a=sa(n,"onTextChanged",void 0);return this.inputText=zz(this.parent,n).on("textchange",function(i){var s=i.text;a?a(this.parent,s):this.parent.text=s},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,sa(n,"enterClose",!0)&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=this.scene.time.delayedCall(0,function(){this.scene.input.once("pointerdown",this.close,this),e&&e(this.parent),this.emit("open",this.parent)},[],this),this},Hz=function(){return Bz(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},kz={open:Wz,close:Hz};const $z=Phaser.Utils.Objects.GetValue;class uo extends kt{constructor(t,e){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(e);var a=$z(e,"clickEnable",!0);a&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}Object.assign(uo.prototype,kz);var Kz=function(n,t,e){return n._edit||(n._edit=new uo(n,{clickEnable:!1})),n._edit.open(t,e),n._edit};_.register("textEdit",function(n,t){return new uo(n,t)});q(window,"RexPlugins.UI.TextEdit",uo);var Zz=function(n){var t=function(e){var a=n.padding,i=e-a.left-a.right,s=n.style;return Bu(n)?(s.wordWrapWidth=i,s.maxLines=0):(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=i,s.maxLines=0),n.setFixedSize(e,0),n.minHeight=n.height,n};return t},Jz=function(n){var t=function(e){return n.setFixedSize(e,0).runWordWrap(),n.minHeight=n.height,n};return t},jz=function(n){var t=function(e){return n.setMaxWidth(e),n.minHeight=n.height,n};return t},Qz=function(n){return n instanceof dn},qz=function(n,t){return t===void 0&&(t=0),n._minWidth=t,n.runWidthWrap=Qz(n)?Jz(n):Q0(n)?jz(n):Zz(n),n};const Nh=65535;var dl=function(n,t,e){if(t==null)return n;if(t===0)return Yh(n,0,e),n;var a=n.text.length;if(a===0)return Yh(n,t,e),n;for(var i=Math.floor(t*1.5/a),s={},h=Nv(n,i,t,e,s),r=0;r<=Nh&&h!==0;r++){if(i+=h,i<0){i=0;break}h=Nv(n,i,t,e,s)}return r===Nh&&console.warn(`SetFontSizeToFitWidth: Test count exceeds ${Nh}`),n.setFontSize(i),Yh(n,t,e),n},Gv=function(n,t,e){return e[t]===void 0&&(n.setFontSize(t),e[t]={width:n.width,height:n.height}),e[t]},Nv=function(n,t,e,a,i){var s=Gv(n,t,i),h=Gv(n,t+1,i);if(a!==void 0){if(s.height<=a&&h.height>a)return 0;if(s.height>a)return-1}return s.width<=e&&h.width>e?0:s.width>e?-1:Math.floor(e-s.width)},Yh=function(n,t,e){var a=n.style;a.fixedWidth=t,a.parent.width=t,e!==void 0&&(a.fixedHeight=e,a.parent.height=e),a.update(!1)},_z=function(n,t){return t===void 0&&(t=0),n._minWidth=t,n.runWidthWrap=function(e,a){return dl(n,e,a),n},n.resize=function(e,a){return n.width===e&&n.height===a||n.setFixedSize(e,a),n},n},tU=function(n,t){return n===void 0&&(n=0),new Promise(function(e,a){setTimeout(function(){e(t)},n)})},eU=function(n,t){var e=n.scene,a=new Cu(e,t);return e.add.existing(a),n.isRexContainerLite?(n.moveDepthBelow(a),n.pin(a,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1})):e.children.moveBelow(a,n),a};const na={popUp:hu,scaleDown:function(n,t){i0(n,t,void 0,void 0,!1)},fadeIn:Na,fadeOut:function(n,t){Ya(n,t,!1)}};var iU=function(n,t){Na(n,t,n.alpha)},sU=function(n,t){Ya(n,t,!1)};const Yi=Phaser.Utils.Objects.GetValue;class nU extends Qa{constructor(t,e){e===void 0&&(e={}),e.transitIn==null&&(e.transitIn=Vi.popUp),e.transitOut==null&&(e.transitOut=Vi.scaleDown),e.destroy=!0,super(t,e);var a=Yi(e,"cover");this.cover=a!==!1?eU(t,a):void 0,this.cover&&(this.setCoverTransitInCallback(Yi(a,"transitIn",iU)),this.setCoverTransitOutCallback(Yi(a,"transitOut",sU)));var i=Yi(e,"touchOutsideClose",!1),s=Yi(e,"duration.hold",-1),h=Yi(e,"timeOutClose",s>=0),r=Yi(e,"anyTouchClose",!1),o=Yi(e,"manualClose",!1);o&&(i=!1,r=!1,h=!1),r&&(i=!1),h?this.setDisplayTime(s):this.setDisplayTime(-1),r?this.once("open",this.anyTouchClose,this):i&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&Jn(this.parent,t.worldX,t.worldY)||this.requestClose()}transitionIn(){super.transitionIn();var t=this.transitInTime,e=this.cover;return e&&this.coverTransitInCallback&&this.coverTransitInCallback(e,t),this}transitionOut(){super.transitionOut();var t=this.transitOutTime,e=this.cover;return e&&this.coverTransitOutCallback&&this.coverTransitOutCallback(e,t),this}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=Vi[t]),t){case Vi.popUp:t=na.popUp;break;case Vi.fadeIn:t=na.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=Vi[t]),t){case Vi.scaleDown:t=na.scaleDown;break;case Vi.fadeOut:t=na.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}}const Vi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var Pm=function(n,t){var e=new nU(n,t);return e.on("open",function(){n.emit("modal.open",e)}),e.on("close",function(a){n.emit("modal.close",a,e)}),n.on("modal.requestClose",e.requestClose,e),e.on("close",function(){n.off("modal.requestClose",e.requestClose,e)}),e},rU=function(n,t){var e=Pm(n,t);return new Promise(function(a,i){e.once("close",function(s){a(s)})})},aU=function(n,t){n.emit("modal.requestClose",t)};class Mm extends Phaser.Plugins.ScenePlugin{constructor(t,e){super(t,e),this.add=new _(t)}start(){var t=this.scene.events;t.on("destroy",this.destroy,this)}isInTouching(t,e,a,i){return t.visible?du(t,e,a,i):!1}get viewport(){return cn(this.scene,this.scene.cameras.main,!0)}make(t,e,a,i){return xm(this.scene,t,e,a,i)}get maker(){return this._maker||(this._maker=new tf(this.scene)),this._maker}}var oU={getParentSizer:Be,getTopmostSizer:cg,hide:Hi,show:Wi,isShown:fu,edit:Kz,wrapExpandText:qz,fontSizeExpandText:_z,fontSizeResize:dl,setFontSizeToFitWidth:dl,waitEvent:zl,waitComplete:Qt,delayPromise:tU,setChildrenInteractive:gu,fadeIn:Na,fadeOutDestroy:Ya,easeMoveTo:s0,easeMoveFrom:n0,modal:Pm,modalPromise:rU,modalClose:aU,requestDrag:mm,yaml:pm};Object.assign(Mm.prototype,oU);class hU extends ge.Scene{constructor(){super({key:"End"});nt(this,"backButton");nt(this,"collectionBG")}preload(){this.load.image("collectionBG","assets/collectionBG.jpg"),this.load.image("Pink","assets/pink.png")}create(){this.collectionBG=this.add.image(450,300,"collectionBG"),this.backButton=this.add.image(300,530,"Pink").setInteractive(),this.backButton.on("pointerover",()=>{this.backButton.setAlpha(1)}),this.backButton.on("pointerout",()=>{this.backButton.setAlpha(.7)}),this.backButton.on("pointerdown",()=>this.goToTitleScene()),this.add.text(300,300,"YOU WIN!",{fontSize:"64px",color:"#0000000"})}goToTitleScene(){this.scene.stop("End").launch("titleScene")}}const lU={type:ge.AUTO,parent:"app",width:900,height:600,physics:{default:"arcade",arcade:{gravity:{}}},scene:[Nm,Im,Gm,hU],dom:{createContainer:!0},plugins:{scene:[{key:"rexUI",plugin:Mm,mapping:"rexUI"}]}};new ge.Game(lU);
